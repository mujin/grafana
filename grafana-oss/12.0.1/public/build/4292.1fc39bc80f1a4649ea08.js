"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4292],{80486:(w,P,a)=>{a.d(P,{g:()=>D});var e=a(96540),n=a(22803),l=a(18027),T=a(10928),f=a(63527),_=a(85480);const D=({config:A,onChange:g,className:B})=>{const L=d=>{g({...A,jsonData:{...A.jsonData,keepCookies:d}})},t=d=>{g({...A,jsonData:{...A.jsonData,timeout:parseInt(d.currentTarget.value,10)}})},s={container:(0,n.css)({maxWidth:578})};return e.createElement(_.I,{title:"Advanced HTTP settings",className:(0,n.cx)(s.container,B)},e.createElement(l.I,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:24,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:A.readOnly,grow:!0},e.createElement(T.u,{id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:A.jsonData.keepCookies,onChange:L})),e.createElement(l.I,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:24,tooltip:"HTTP request timeout in seconds",disabled:A.readOnly,grow:!0},e.createElement(f.p,{id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:A.jsonData.timeout,onChange:t})))}},5518:(w,P,a)=>{a.d(P,{N:()=>oe});var e=a(96540),n=a(22803),l=a(63142),T=a(37386),f=a(18857),_=a(18027),D=a(63527),A=a(48767);const g=()=>({inlineFieldNoMarginRight:(0,n.css)({marginRight:0}),inlineFieldWithSecret:(0,n.css)({'[class$="layoutChildrenWrapper"]:first-child':{flexGrow:1}})}),B=({user:i,passwordConfigured:c,userLabel:h="User",userTooltip:m="The username of the data source account",userPlaceholder:r="User",passwordLabel:C="Password",passwordTooltip:S="The password of the data source account",passwordPlaceholder:E="Password",onUserChange:p,onPasswordChange:O,onPasswordReset:M,readOnly:o})=>{const v=g(),y={lastInlineField:(0,n.css)({marginBottom:0})};return e.createElement(e.Fragment,null,e.createElement(_.I,{className:v.inlineFieldNoMarginRight,label:h,labelWidth:24,tooltip:m,required:!0,htmlFor:"basic-auth-user-input",interactive:!0,grow:!0,disabled:o},e.createElement(D.p,{id:"basic-auth-user-input",placeholder:r,value:i,onChange:N=>p(N.currentTarget.value),required:!0})),e.createElement(_.I,{className:(0,n.cx)(v.inlineFieldNoMarginRight,v.inlineFieldWithSecret,y.lastInlineField),label:C,labelWidth:24,tooltip:S,required:!0,htmlFor:"basic-auth-password-input",interactive:!0,grow:!0,disabled:o},e.createElement(A.L4,{id:"basic-auth-password-input",isConfigured:c,onReset:o?()=>{}:M,placeholder:E,onChange:N=>O(N.currentTarget.value),required:!0})))};var L=a(85480),t=a(70985);const s={[t.q.BasicAuth]:{label:"Basic authentication",value:t.q.BasicAuth,description:"Authenticate with your data source username and password"},[t.q.CrossSiteCredentials]:{label:"Enable cross-site access control requests",value:t.q.CrossSiteCredentials,description:"Allow cross-site Access-Control requests with your existing credentials and cookies. This enables the server to authenticate the user and perform authorized requests on their behalf on other domains."},[t.q.OAuthForward]:{label:"Forward OAuth Identity",value:t.q.OAuthForward,description:"Forward the OAuth access token (and if available: the OIDC ID token) of the user querying to the data source"},[t.q.NoAuth]:{label:"No Authentication",value:t.q.NoAuth,description:"Data source is available without authentication"}},d=({selectedMethod:i,mostCommonMethod:c,visibleMethods:h,defaultOptionsOverrides:m,customMethods:r,onAuthMethodSelect:C,basicAuth:S,readOnly:E})=>{var p,O,M,o;const[v,y]=(0,e.useState)(!1),{colors:N,spacing:W}=(0,l.$j)(),I=(0,e.useMemo)(()=>{var j;return h??[t.q.BasicAuth,t.q.OAuthForward,t.q.NoAuth,...(j=r?.map(Y=>Y.id))!=null?j:[]]},[r,h]),x=I.length>1,z=(0,e.useMemo)(()=>{var j;const Y=(j=r?.reduce(($,J)=>($[J.id]={label:J.label,value:J.id,description:J.description},$),{}))!=null?j:{},Z={};let G;for(G in s)Z[G]={...s[G],...m?.[G]};const q={...Y,...Z};return I.filter($=>!!q[$]).map($=>{const J=q[$];return $===c&&x?{...J,label:`${J.label} (most common)`}:J})},[I,r,m,c,x]);let k=i;x?i===t.q.NoAuth&&c&&!v&&(k=c):k=I[0];let V=null;k===t.q.BasicAuth&&S?V=e.createElement(B,{...S,readOnly:E}):k.startsWith("custom-")&&(V=(O=(p=r?.find(j=>j.id===k))==null?void 0:p.component)!=null?O:null);const ce=x?"Authentication methods":(M=z[0].label)!=null?M:"",ue=x?"Choose an authentication method to access the data source":(o=z[0].description)!=null?o:"",Q={authMethods:(0,n.css)({marginTop:W(2.5),...x&&{padding:W(2),border:`1px solid ${N.border.weak}`}}),selectedMethodFields:(0,n.css)({marginTop:W(1.5)})};return e.createElement(L.I,{title:ce,description:ue},e.createElement("div",{className:Q.authMethods},x&&e.createElement(T.D,{label:"Authentication method"},e.createElement(f.l6,{inputId:"auth-method-select",options:z,value:k,onChange:j=>{y(!0),C(j.value)},disabled:E})),V&&e.createElement("div",{className:Q.selectedMethodFields},V)))};var b=a(40601),F=a(32635),u=a(45967),H=a(30703);const R=({children:i,enabled:c,label:h,tooltipText:m,onToggle:r,readOnly:C})=>{const{colors:S,spacing:E}=(0,l.$j)(),p={container:(0,n.css)({marginTop:3}),checkboxContainer:(0,n.css)({display:"flex",alignItems:"center"}),infoIcon:(0,n.css)({marginTop:-2,marginLeft:5,color:S.text.secondary}),content:(0,n.css)({margin:E(1,0,2,3)})};return e.createElement("div",{className:p.container},e.createElement("div",{className:p.checkboxContainer},e.createElement(F.S,{value:c,label:h,onChange:()=>r(!c),disabled:C}),e.createElement(u.m,{placement:"top",content:m,interactive:!0},e.createElement(H.I,{name:"info-circle",className:p.infoIcon,size:"sm"}))),c&&i&&e.createElement("div",{className:p.content},i))},K=({enabled:i,certificateConfigured:c,onToggle:h,onCertificateChange:m,onCertificateReset:r,tooltips:C,readOnly:S})=>{var E;const p=g();return e.createElement(R,{enabled:i,label:"Add self-signed certificate",tooltipText:"Add your own Certificate Authority (CA) certificate on top of one generated by the certificate authorities for additional security measures",onToggle:O=>h(O),readOnly:S},e.createElement(_.I,{label:"CA Certificate",labelWidth:24,tooltip:(E=C?.certificateLabel)!=null?E:"Your self-signed certificate",required:!0,htmlFor:"self-signed-certificate-input",interactive:!0,grow:!0,className:(0,n.cx)(p.inlineFieldNoMarginRight,p.inlineFieldWithSecret),disabled:S},e.createElement(b.lp,{id:"self-signed-certificate-input",isConfigured:c,onChange:O=>m(O.currentTarget.value),onReset:S?()=>{}:r,placeholder:"Begins with --- BEGIN CERTIFICATE ---",rows:6,required:!0})))},U=({enabled:i,serverName:c,clientCertificateConfigured:h,clientKeyConfigured:m,onToggle:r,onServerNameChange:C,onClientCertificateChange:S,onClientKeyChange:E,onClientCertificateReset:p,onClientKeyReset:O,tooltips:M,readOnly:o})=>{var v,y,N;const W=g();return e.createElement(R,{enabled:i,label:"TLS Client Authentication",tooltipText:"Validate using TLS client authentication, in which the server authenticates the client",onToggle:I=>r(I),readOnly:o},e.createElement(_.I,{label:"ServerName",labelWidth:24,tooltip:(v=M?.serverNameLabel)!=null?v:"A Servername is used to verify the hostname on the returned certificate",required:!0,htmlFor:"client-auth-servername-input",interactive:!0,grow:!0,className:W.inlineFieldNoMarginRight,disabled:o},e.createElement(D.p,{id:"client-auth-servername-input",placeholder:"domain.example.com",value:c,onChange:I=>C(I.currentTarget.value),required:!0})),e.createElement(_.I,{label:"Client Certificate",labelWidth:24,tooltip:(y=M?.certificateLabel)!=null?y:"The client certificate can be generated from a Certificate Authority or be self-signed",required:!0,htmlFor:"client-auth-client-certificate-input",interactive:!0,grow:!0,className:(0,n.cx)(W.inlineFieldNoMarginRight,W.inlineFieldWithSecret),disabled:o},e.createElement(b.lp,{id:"client-auth-client-certificate-input",isConfigured:h,onChange:I=>S(I.currentTarget.value),onReset:o?()=>{}:p,placeholder:"Begins with --- BEGIN CERTIFICATE ---",rows:6,required:!0})),e.createElement(_.I,{label:"Client Key",labelWidth:24,tooltip:(N=M?.keyLabel)!=null?N:"The client key can be generated from a Certificate Authority or be self-signed",required:!0,htmlFor:"client-auth-client-key-input",interactive:!0,grow:!0,className:(0,n.cx)(W.inlineFieldNoMarginRight,W.inlineFieldWithSecret),disabled:o},e.createElement(b.lp,{id:"client-auth-client-key-input",isConfigured:m,onChange:I=>E(I.currentTarget.value),onReset:o?()=>{}:O,placeholder:"Begins with --- RSA PRIVATE KEY CERTIFICATE ---",rows:6,required:!0})))},ee=({enabled:i,onToggle:c,readOnly:h})=>e.createElement(R,{enabled:i,label:"Skip TLS certificate validation",tooltipText:"Skipping TLS certificate validation is not recommended unless absolutely necessary or for testing",onToggle:m=>c(m),readOnly:h}),te=({selfSignedCertificate:i,TLSClientAuth:c,skipTLSVerification:h,readOnly:m})=>{const{spacing:r}=(0,l.$j)(),C={container:(0,n.css)({marginTop:r(3)})};return e.createElement(L.I,{className:C.container,title:"TLS settings",description:"Additional security measures that can be applied on top of authentication"},e.createElement(K,{...i,readOnly:m}),e.createElement(U,{...c,readOnly:m}),e.createElement(ee,{...h,readOnly:m}))};var ae=a(45861),ne=a(97095),se=a(76319);const re=({header:i,onChange:c,onBlur:h,onDelete:m,readOnly:r})=>{const{spacing:C}=(0,l.$j)(),S=g(),E={container:(0,n.css)({alignItems:"center"}),input:(0,n.css)({minWidth:"100%"}),headerNameField:(0,n.css)({width:"40%",marginRight:0,paddingRight:C(1)}),headerValueField:(0,n.css)({width:"45%",marginRight:0}),removeHeaderBtn:(0,n.css)({margin:"0 0 3px 10px"})};return e.createElement(e.Fragment,null,e.createElement(ne.C,{className:E.container},e.createElement(_.I,{label:"Header",labelWidth:9,grow:!0,className:E.headerNameField,htmlFor:`custom-header-${i.id}-name-input`,disabled:r},e.createElement(D.p,{id:`custom-header-${i.id}-name-input`,placeholder:"X-Custom-Header",value:i.name,width:12,onChange:p=>c({...i,name:p.currentTarget.value}),onBlur:h,className:E.input})),e.createElement(_.I,{label:"Value",labelWidth:9,grow:!0,className:(0,n.cx)(S.inlineFieldWithSecret,E.headerValueField),htmlFor:`custom-header-${i.id}-value-input`,disabled:r},e.createElement(A.L4,{id:`custom-header-${i.id}-value-input`,isConfigured:i.configured,placeholder:"Header value",value:i.value,width:12,onChange:p=>c({...i,value:p.currentTarget.value}),onReset:r?()=>{}:()=>c({...i,configured:!1,value:""}),onBlur:h,className:E.input})),e.createElement(se.K,{name:"trash-alt",tooltip:"Remove header",tooltipPlacement:"top",className:E.removeHeaderBtn,onClick:m,type:"button",disabled:r})))},le=({headers:i,onChange:c,readOnly:h})=>{const{spacing:m}=(0,l.$j)(),[r,C]=(0,e.useState)(i.map(o=>({...o,id:X(),value:""})));(0,e.useEffect)(()=>{C(o=>{let v=!1;const y=o.map(N=>{var W;const I=(W=i.find(x=>x.name===N.name))==null?void 0:W.configured;return typeof I<"u"&&N.configured!==I?(v=!0,{...N,configured:I}):N});return v?y:o})},[i]);const S=()=>{C([...r,{id:X(),name:"",value:"",configured:!1}])},E=(o,v)=>{C(r.map(y=>y.id===o?{...v}:y))},p=o=>{const v=r.findIndex(N=>N.id===o);if(v===-1)return;const y=[...r];y.splice(v,1),C(y),c(y.map(({name:N,value:W,configured:I})=>({name:N,value:W,configured:I})))},O=()=>{c(r.map(({name:o,value:v,configured:y})=>({name:o,value:v,configured:y})))},M={container:(0,n.css)({marginTop:m(3)}),addHeaderButton:(0,n.css)({marginTop:m(1.5)})};return e.createElement("div",{className:M.container},e.createElement(L.I,{title:"HTTP headers",description:"Pass along additional context and metadata about the request/response",isCollapsible:!0,isInitiallyOpen:r.length>0},e.createElement("div",null,r.map(o=>e.createElement(re,{key:o.id,header:o,onChange:v=>E(v.id,v),onDelete:()=>p(o.id),onBlur:O,readOnly:h}))),e.createElement("div",{className:M.addHeaderButton},e.createElement(ae.$n,{icon:"plus",variant:"secondary",fill:"outline",onClick:S,disabled:h},r.length===0?"Add header":"Add another header"))))};function X(){return Math.random().toString(16).slice(2)}var ie=a(6370);const oe=({selectedMethod:i,mostCommonMethod:c,visibleMethods:h,defaultOptionsOverrides:m,customMethods:r,onAuthMethodSelect:C,basicAuth:S,TLS:E,customHeaders:p,readOnly:O=!1})=>{const M={container:(0,n.css)({maxWidth:578})};return e.createElement("div",{className:M.container},e.createElement(ie.A,{title:"Authentication"},e.createElement(d,{selectedMethod:i,mostCommonMethod:c,customMethods:r,visibleMethods:h,defaultOptionsOverrides:m,onAuthMethodSelect:C,basicAuth:S,readOnly:O}),E&&e.createElement(te,{...E,readOnly:O}),p&&e.createElement(le,{...p,readOnly:O})))}},70985:(w,P,a)=>{a.d(P,{q:()=>n});var e=a(96540),n=(l=>(l.NoAuth="NoAuth",l.BasicAuth="BasicAuth",l.OAuthForward="OAuthForward",l.CrossSiteCredentials="CrossSiteCredentials",l))(n||{})},76229:(w,P,a)=>{a.d(P,{pe:()=>_});var e=a(96540),n=a(22803),l=a(70985);const T="httpHeaderName",f="httpHeaderValue";function _({config:t,onChange:s}){return{selectedMethod:D(t),onAuthMethodSelect:A(t,s),basicAuth:g(t,s),TLS:B(t,s),customHeaders:L(t,s),readOnly:t.readOnly}}function D(t){return t.basicAuth?l.q.BasicAuth:t.withCredentials?l.q.CrossSiteCredentials:t.jsonData.oauthPassThru?l.q.OAuthForward:l.q.NoAuth}function A(t,s){return d=>{s({...t,basicAuth:d===l.q.BasicAuth,withCredentials:d===l.q.CrossSiteCredentials,jsonData:{...t.jsonData,oauthPassThru:d===l.q.OAuthForward}})}}function g(t,s){return{user:t.basicAuthUser,passwordConfigured:t.secureJsonFields.basicAuthPassword,onUserChange:d=>s({...t,basicAuthUser:d}),onPasswordChange:d=>s({...t,secureJsonData:{...t.secureJsonData,basicAuthPassword:d}}),onPasswordReset:()=>s({...t,secureJsonData:{...t.secureJsonData,basicAuthPassword:""},secureJsonFields:{...t.secureJsonFields,basicAuthPassword:!1}})}}function B(t,s){var d,b,F;return{selfSignedCertificate:{enabled:!!t.jsonData.tlsAuthWithCACert,certificateConfigured:!!((d=t.secureJsonFields)!=null&&d.tlsCACert),onToggle:u=>s(u?{...t,jsonData:{...t.jsonData,tlsAuthWithCACert:u}}:{...t,jsonData:{...t.jsonData,tlsAuthWithCACert:u},secureJsonData:{...t.secureJsonData,tlsCACert:""},secureJsonFields:{...t.secureJsonFields,tlsCACert:!1}}),onCertificateChange:u=>s({...t,secureJsonData:{...t.secureJsonData,tlsCACert:u}}),onCertificateReset:()=>s({...t,secureJsonData:{...t.secureJsonData,tlsCACert:""},secureJsonFields:{...t.secureJsonFields,tlsCACert:!1}})},TLSClientAuth:{enabled:t.jsonData.tlsAuth,serverName:t.jsonData.serverName,clientCertificateConfigured:!!((b=t.secureJsonFields)!=null&&b.tlsClientCert),clientKeyConfigured:!!((F=t.secureJsonFields)!=null&&F.tlsClientKey),onToggle:u=>s(u?{...t,jsonData:{...t.jsonData,tlsAuth:u}}:{...t,jsonData:{...t.jsonData,tlsAuth:u,serverName:""},secureJsonData:{...t.secureJsonData,tlsClientCert:"",tlsClientKey:""},secureJsonFields:{...t.secureJsonFields,tlsClientCert:!1,tlsClientKey:!1}}),onServerNameChange:u=>s({...t,jsonData:{...t.jsonData,serverName:u}}),onClientCertificateChange:u=>s({...t,secureJsonData:{...t.secureJsonData,tlsClientCert:u}}),onClientCertificateReset:()=>s({...t,secureJsonData:{...t.secureJsonData,tlsClientCert:""},secureJsonFields:{...t.secureJsonFields,tlsClientCert:!1}}),onClientKeyChange:u=>s({...t,secureJsonData:{...t.secureJsonData,tlsClientKey:u}}),onClientKeyReset:()=>s({...t,secureJsonData:{...t.secureJsonData,tlsClientKey:""},secureJsonFields:{...t.secureJsonFields,tlsClientKey:!1}})},skipTLSVerification:{enabled:t.jsonData.tlsSkipVerify,onToggle:u=>s({...t,jsonData:{...t.jsonData,tlsSkipVerify:u}})}}}function L(t,s){return{headers:Object.keys(t.jsonData).filter(b=>b.startsWith(T)).sort().map(b=>{var F;const u=b.slice(T.length);return{name:t.jsonData[b],configured:(F=t.secureJsonFields[`${f}${u}`])!=null?F:!1}}),onChange:b=>{const F=Object.fromEntries(Object.entries(t.jsonData).filter(([R])=>!R.startsWith(T))),u=Object.fromEntries(Object.entries(t.secureJsonData||{}).filter(([R])=>!R.startsWith(f))),H=Object.fromEntries(Object.entries(t.secureJsonFields).filter(([R])=>!R.startsWith(f)));b.forEach((R,K)=>{F[`${T}${K+1}`]=R.name,R.configured?H[`${f}${K+1}`]=!0:u[`${f}${K+1}`]=R.value}),s({...t,jsonData:F,secureJsonData:u,secureJsonFields:H})}}}},6370:(w,P,a)=>{a.d(P,{A:()=>l});var e=a(96540),n=a(88941);const l=({children:T,...f})=>e.createElement(n.x,{...f,kind:"section"},T)},85480:(w,P,a)=>{a.d(P,{I:()=>l});var e=a(96540),n=a(88941);const l=({children:T,...f})=>e.createElement(n.x,{...f,kind:"sub-section"},T)},88941:(w,P,a)=>{a.d(P,{x:()=>f});var e=a(96540),n=a(22803),l=a(63142),T=a(76319);const f=({children:_,title:D,description:A,isCollapsible:g=!1,isInitiallyOpen:B=!0,kind:L="section",className:t})=>{const{colors:s,typography:d,spacing:b}=(0,l.$j)(),[F,u]=(0,e.useState)(g?B:!0),H=F?"angle-up":"angle-down",R=L==="sub-section",K=`${F?"Collapse":"Expand"} section ${D}`,U={header:(0,n.css)({display:"flex",justifyContent:"space-between",alignItems:"center"}),title:(0,n.css)({margin:0}),subtitle:(0,n.css)({margin:0,fontWeight:d.fontWeightRegular}),descriptionText:(0,n.css)({marginTop:b(R?.25:.5),marginBottom:0,...d.bodySmall,color:s.text.secondary}),content:(0,n.css)({marginTop:b(2)})};return e.createElement("div",{className:t},e.createElement("div",{className:U.header},L==="section"?e.createElement("h3",{className:U.title},D):e.createElement("h6",{className:U.subtitle},D),g&&e.createElement(T.K,{name:H,onClick:()=>u(!F),type:"button",size:"xl","aria-label":K})),A&&e.createElement("p",{className:U.descriptionText},A),F&&e.createElement("div",{className:U.content},_))}},14141:(w,P,a)=>{a.d(P,{u:()=>_});var e=a(96540),n=a(22803),l=a(18027),T=a(63527),f=a(6370);const _=({config:D,onChange:A,description:g,urlPlaceholder:B,urlTooltip:L,urlLabel:t,className:s})=>{const d=D.url!==void 0&&/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(D.url),b={container:(0,n.css)({maxWidth:578})};return e.createElement(e.Fragment,null,e.createElement(f.A,{title:"Connection",description:g,className:(0,n.cx)(b.container,s)},e.createElement(l.I,{htmlFor:"connection-url",label:t||"URL",labelWidth:24,tooltip:L||e.createElement(e.Fragment,null,"Specify a complete HTTP URL",e.createElement("br",null),"(for example https://example.com:8080)"),grow:!0,disabled:D.readOnly,required:!0,invalid:!d&&!D.readOnly,error:d?"":"Please enter a valid URL",interactive:!0},e.createElement(T.p,{id:"connection-url","aria-label":"Data source connection URL",onChange:F=>A({...D,url:F.currentTarget.value}),value:D.url||"",placeholder:B||"URL"}))))}},50532:(w,P,a)=>{a.d(P,{I:()=>T});var e=a(96540),n=a(22803),l=a(63142);const T=({dataSourceName:f,docsLink:_,hasRequiredFields:D=!0,className:A})=>{const g=(0,l.$j)(),B={container:(0,n.css)({p:{margin:0},"p + p":{marginTop:g.spacing(2)}}),text:(0,n.css)({...g.typography.body,color:g.colors.text.secondary,a:(0,n.css)({color:g.colors.text.link,textDecoration:"underline","&:hover":{textDecoration:"none"}})})};return e.createElement("div",{className:(0,n.cx)(B.container,A)},e.createElement("p",{className:B.text},"Before you can use the ",f," data source, you must configure it below or in the config file. For detailed instructions,"," ",e.createElement("a",{href:_,target:"_blank",rel:"noreferrer"},"view the documentation"),"."),D&&e.createElement("p",{className:B.text},e.createElement("i",null,"Fields marked with * are required")))}}}]);

//# sourceMappingURL=4292.1fc39bc80f1a4649ea08.js.map