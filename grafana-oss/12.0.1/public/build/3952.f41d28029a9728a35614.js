"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3952],{12266:(F,C,e)=>{e.d(C,{e:()=>c});var t=e(74848),a=e(45861);const c=({isCollapsed:s,onToggle:v,idControlled:u,className:i,text:T,size:M="xl",...p})=>(0,t.jsx)(a.$n,{type:"button",fill:"text",variant:"secondary","aria-expanded":!s,"aria-controls":u,className:i,icon:s?"angle-right":"angle-down",onClick:()=>v(!s),...p,children:T})},1625:(F,C,e)=>{e.d(C,{P:()=>i});var t=e(74848),a=e(22803),c=e(63142),s=e(66404),v=e(41654),u=e(30703);const i=({children:M,icon:p,color:o="secondary",direction:B="row",...f})=>{const R=(0,c.of)(T),L=typeof f.onClick=="function",W=B==="row",d=W?"center":"flex-start",r=W?.5:0;return(0,t.jsx)("div",{className:(0,a.cx)({[R.interactive]:L}),...f,children:(0,t.jsx)(s.E,{variant:"bodySmall",color:o,children:(0,t.jsxs)(v.B,{direction:B,alignItems:d,gap:r,wrap:"wrap",children:[p&&(0,t.jsx)(u.I,{size:"xs",name:p}),M]})})})},T=()=>({interactive:(0,a.css)({cursor:"pointer"})})},16194:(F,C,e)=>{e.d(C,{S:()=>c,X:()=>s});var t=e(74848),a=e(66404);const c=({content:v})=>(0,t.jsx)(a.E,{color:"primary",children:v}),s=({content:v})=>(0,t.jsx)(a.E,{variant:"code",children:v})},24961:(F,C,e)=>{e.d(C,{z8:()=>yt,yz:()=>dt,uO:()=>ct});var t=e(74848),a=e(22803),c=e(2543),s=e(96540),v=e(25229),u=e(63142),i=e(41654),T=e(30703),M=e(66404),p=e(45967),o=e(56840),B=e(16194),f=e(87063),R=e(89640),L=e(45861),W=e(88559),d=e(10427),r=e(8307),l=e(28141),h=e(5358),A=e(22628),O=e(56476),j=e(16692),_=e(92367),V=e(50072),y=e(1972),S=e(49779),Y=e(99887);const b=()=>(0,t.jsx)(Y.E,{text:(0,o.t)("alerting.unused-contact-point-badge.text-unused","Unused"),"aria-label":(0,o.t)("alerting.unused-contact-point-badge.aria-label-unused","unused"),color:"orange",icon:"exclamation-triangle",tooltip:"This contact point is not used in any notification policy or alert rule"});var z=e(66056);const Z=({contactPoint:n,onDelete:E})=>{const{name:m,id:P,provisioned:g,policies:I=[]}=n,K=(0,u.of)(Q),[D,x]=(0,s.useState)(!1),{selectedAlertmanager:U}=(0,h.VI)(),$=(0,O.dM)(U),[w,H]=(0,j.L7)(j.QI.ExportContactPoint),[G,k]=(0,j.L7)(j.QI.UpdateContactPoint),[mt,Mt]=(0,j.L7)(j.QI.UpdateContactPoint),[Ot,Ct]=(0,r.G)(),It=(0,z.T8)(U,n),Tt=I.filter(it=>it.route.type!=="auto-generated"),pt=(0,O.gw)(n,A.T.InUseRoutes),rt=$?Number(pt):I.length,ut=$?Number(pt):Tt.length,q=Number((0,O.gw)(n,A.T.InUseRules))||0,Rt=$?!!(rt||q):I.length>0,At=(0,O.Au)(n)||k,et=G&&At&&!g,gt=(0,O.zl)(n)||Mt,xt=mt&&gt&&(!g&&!ut&&!q),tt=[];if(It&&tt.push((0,t.jsx)(s.Fragment,{children:(0,t.jsx)(f.W.Item,{icon:"unlock",label:(0,o.t)("alerting.contact-point-header.label-manage-permissions","Manage permissions"),onClick:()=>x(!0)})},"manage-permissions")),w&&tt.push((0,t.jsxs)(s.Fragment,{children:[(0,t.jsx)(f.W.Item,{icon:"download-alt",label:(0,o.t)("alerting.contact-point-header.export-label-export","Export"),ariaLabel:"export",disabled:!H,"data-testid":"export",onClick:()=>Ct(m)}),(0,t.jsx)(f.W.Divider,{})]},"export-contact-point")),mt){const it=(0,o.t)("alerting.contact-points.delete-reasons.no-permissions","You do not have the required permission to delete this contact point"),Kt=(0,o.t)("alerting.contact-points.delete-reasons.provisioned","Contact point is provisioned and cannot be deleted via the UI"),Ut=(0,o.t)("alerting.contact-points.delete-reasons.policies","Contact point is referenced by one or more notification policies"),St=(0,o.t)("alerting.contact-points.delete-reasons.rules","Contact point is referenced by one or more alert rules"),bt=[gt?"":it,g?Kt:"",ut>0?Ut:"",q?St:""].filter(Boolean),_t=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.x6,{i18nKey:"alerting.contact-points.delete-reasons.heading",children:"Contact point cannot be deleted for the following reasons:"}),(0,t.jsx)("br",{}),bt.map(nt=>(0,t.jsx)("li",{children:nt},nt))]});tt.push((0,t.jsx)(d.A,{shouldWrap:!xt,wrap:nt=>(0,t.jsx)(p.m,{content:_t,placement:"top",children:(0,t.jsx)("span",{children:nt})}),children:(0,t.jsx)(f.W.Item,{label:(0,o.t)("alerting.contact-point-header.label-delete","Delete"),ariaLabel:"delete",icon:"trash-alt",destructive:!0,disabled:!xt,onClick:()=>E(n)})},"delete-contact-point"))}const Bt=(0,o.t)("alerting.contact-points.used-by","Used by {{ count }} notification policy",{count:rt}),Lt=(0,o.t)("alerting.contact-points.used-by-rules","Used by {{ count }} alert rule",{count:q}),Wt=P||m;return(0,t.jsxs)("div",{className:K.headerWrapper,children:[(0,t.jsxs)(i.B,{direction:"row",alignItems:"center",gap:1,children:[(0,t.jsx)(i.B,{alignItems:"center",gap:1,minWidth:0,children:(0,t.jsx)(M.E,{element:"h2",variant:"body",weight:"medium",truncate:!0,children:m})}),rt>0&&(0,t.jsx)(R.Y,{href:(0,_.G)("/alerting/routes",{contactPoint:m}),variant:"bodySmall",color:"primary",inline:!1,children:Bt}),q>0&&(0,t.jsx)(R.Y,{href:(0,_.G)("/alerting/list",{search:`contactPoint:"${m}"`}),variant:"bodySmall",color:"primary",inline:!1,children:Lt}),g&&(0,t.jsx)(y.rS,{tooltip:!0,provenance:(0,O.gw)(n,A.T.Provenance)}),!Rt&&(0,t.jsx)(b,{}),(0,t.jsx)(S.h,{}),(0,t.jsx)(L.z9,{tooltipPlacement:"top",tooltip:g?"Provisioned contact points cannot be edited in the UI":void 0,variant:"secondary",size:"sm",icon:et?"pen":"eye",type:"button","aria-label":`${et?"edit":"view"}-action`,"data-testid":`${et?"edit":"view"}-action`,href:`/alerting/notifications/receivers/${encodeURIComponent(Wt)}/edit`,children:et?"Edit":"View"}),tt.length>0&&(0,t.jsx)(W.m,{overlay:(0,t.jsx)(f.W,{children:tt}),children:(0,t.jsx)(V.A,{"aria-label":`More actions for contact point "${n.name}"`})})]}),Ot,D&&(0,t.jsx)(l.v,{resource:"receivers",resourceId:n.id,resourceName:n.name,onClose:()=>x(!1)})]})},Q=n=>({headerWrapper:(0,a.css)({background:`${n.colors.background.secondary}`,padding:`${n.spacing(1)} ${n.spacing(1.5)}`,borderBottom:`solid 1px ${n.colors.border.weak}`,borderTopLeftRadius:`${n.shape.radius.default}`,borderTopRightRadius:`${n.shape.radius.default}`})});var N=e(22787),ot=e(77256);const at=n=>{const[E,m]=(0,s.useState)(!1),[P,g]=(0,s.useState)(),[I,K]=(0,s.useState)(),[D,x]=(0,s.useState)(!1),U=(0,s.useCallback)(()=>{D||(g(void 0),m(!1),K(void 0))},[D]),$=(0,s.useCallback)(({name:G,resourceVersion:k})=>{g({name:G,resourceVersion:k}),m(!0),K(void 0)},[]),w=(0,s.useCallback)(()=>{P&&(x(!0),n(P).then(()=>m(!1)).catch(K).finally(()=>{x(!1)}))},[n,P]);return[(0,s.useMemo)(()=>I?(0,t.jsx)(vt,{isOpen:E,onDismiss:U,error:I}):(0,t.jsxs)(N.a,{isOpen:E,onDismiss:U,closeOnBackdropClick:!D,closeOnEscape:!D,title:(0,o.t)("alerting.use-delete-contact-point-modal.modal-element.title-delete-contact-point","Delete contact point"),children:[(0,t.jsx)("p",{children:(0,t.jsx)(o.x6,{i18nKey:"alerting.use-delete-contact-point-modal.modal-element.deleting-contact-point-permanently-remove",children:"Deleting this contact point will permanently remove it."})}),(0,t.jsx)("p",{children:(0,t.jsx)(o.x6,{i18nKey:"alerting.use-delete-contact-point-modal.modal-element.delete-contact-point",children:"Are you sure you want to delete this contact point?"})}),(0,t.jsxs)(N.a.ButtonRow,{children:[(0,t.jsx)(L.$n,{type:"button",variant:"destructive",onClick:w,disabled:D,children:D?"Deleting...":"Yes, delete contact point"}),(0,t.jsx)(L.$n,{type:"button",variant:"secondary",onClick:U,disabled:D,children:(0,t.jsx)(o.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})})]})]}),[I,U,w,D,E]),$,U]},vt=({isOpen:n,onDismiss:E,error:m})=>(0,t.jsxs)(N.a,{isOpen:n,onDismiss:E,closeOnBackdropClick:!0,closeOnEscape:!0,title:(0,o.t)("alerting.error-modal.title-something-went-wrong","Something went wrong"),children:[(0,t.jsx)("p",{children:(0,t.jsx)(o.x6,{i18nKey:"alerting.error-modal.failed-to-update-your-configuration",children:"Failed to update your configuration:"})}),(0,t.jsx)("pre",{children:(0,t.jsx)("code",{children:(0,ot.JZ)(m)})})]});var ht=e(97507);const ft={pagerduty:"PagerDuty",pushover:"Pushover",slack:"Slack",opsgenie:"OpsGenie",webhook:"Webhook",victorops:"VictorOps",wechat:"WeChat",discord:"Discord",webex:"Cisco Webex Teams",sns:"Amazon SNS",telegram:"Telegram",msteams:"Microsoft Teams"},lt={discord:"discord",email:"envelope",googlechat:"google-hangouts-alt",hipchat:"hipchat",line:"line",pagerduty:"pagerduty",slack:"slack",teams:"microsoft",telegram:"telegram-alt",webhook:"link",sns:"amazon"};var X=e(1625);const Et=({metadata:{icon:n,title:E,externalUrl:m,warning:P}})=>{const g=(0,u.of)(jt);return(0,t.jsxs)(i.B,{alignItems:"center",gap:.5,children:[(0,t.jsxs)(i.B,{direction:"row",alignItems:"center",gap:.5,children:[P?(0,t.jsx)(p.m,{content:P,theme:"error",children:(0,t.jsx)(T.I,{name:"exclamation-triangle",className:g.warnIcon})}):(0,t.jsx)("img",{src:n,alt:E,height:"16px"}),(0,t.jsx)("span",{children:E})]}),m&&(0,t.jsx)(L.z9,{icon:"external-link-alt",href:m,target:"_blank",variant:"secondary",size:"sm"})]})},jt=n=>({warnIcon:(0,a.css)({fill:n.colors.warning.text})});var J=e(3887);const yt=({contactPoint:n})=>{const{grafana_managed_receiver_configs:E}=n,m=(0,u.of)(st),{selectedAlertmanager:P}=(0,h.VI)(),[g]=(0,ht.$x)({alertmanager:P}),[I,K]=at(g.execute),D=E.some(x=>!!x[J.MX]);return(0,t.jsxs)("div",{className:m.contactPointWrapper,"data-testid":"contact-point",children:[(0,t.jsxs)(i.B,{direction:"column",gap:0,children:[(0,t.jsx)(Z,{contactPoint:n,onDelete:x=>K({name:x.id||x.name,resourceVersion:x.metadata?.resourceVersion})}),D?(0,t.jsx)("div",{children:E.map((x,U)=>{const $=x[J.v4],w=x[J.MX],H=!x.disableResolveMessage,G=x[J.sW],k=w.name+U;return(0,t.jsx)(Pt,{name:w.name,type:x.type,description:(0,z.aM)(x),diagnostics:$,pluginMetadata:G,sendingResolved:H},k)})}):(0,t.jsx)("div",{className:m.integrationWrapper,children:(0,t.jsx)(dt,{receivers:E})})]}),I]})},Pt=n=>{const{name:E,type:m,description:P,diagnostics:g,pluginMetadata:I,sendingResolved:K=!0}=n,D=(0,u.of)(st),x=g!==void 0;return(0,t.jsx)("div",{className:D.integrationWrapper,children:(0,t.jsxs)(i.B,{direction:"column",gap:.5,children:[(0,t.jsx)(ct,{name:E,type:m,description:P,pluginMetadata:I}),x&&(0,t.jsx)(Dt,{diagnostics:g,sendingResolved:K})]})})};function ct(n){const{name:E,type:m,description:P,pluginMetadata:g}=n,I=lt[m];return(0,t.jsxs)(i.B,{direction:"row",alignItems:"center",gap:1,children:[(0,t.jsxs)(i.B,{direction:"row",alignItems:"center",gap:.5,children:[I&&(0,t.jsx)(T.I,{name:I}),g?(0,t.jsx)(Et,{metadata:g}):(0,t.jsx)(M.E,{variant:"body",color:"primary",children:E})]}),P&&(0,t.jsx)(M.E,{variant:"bodySmall",color:"secondary",children:P})]})}const dt=({receivers:n,limit:E})=>{const m=E??Number.MAX_VALUE,P=(0,c.groupBy)(n,D=>D.type),g=(0,c.size)(P),I=Object.entries(P).slice(0,m),K=g-m;return(0,t.jsx)(i.B,{direction:"column",gap:0,children:(0,t.jsxs)(i.B,{direction:"row",alignItems:"center",gap:1,children:[I.length===0&&(0,t.jsx)(X.P,{color:"warning",icon:"exclamation-triangle",children:(0,t.jsx)(o.x6,{i18nKey:"alerting.contact-points.no-integrations",children:"No integrations configured"})}),I.map(([D,x],U)=>{const $=lt[D],w=ft[D]??(0,c.upperFirst)(D),H=(0,c.size)(P)-1===U,G=x[0];return(0,t.jsxs)(s.Fragment,{children:[(0,t.jsxs)(i.B,{direction:"row",alignItems:"center",gap:.5,children:[G[J.sW]?.icon&&(0,t.jsx)("img",{width:"14px",src:G[J.sW]?.icon,alt:G[J.sW]?.title}),$&&(0,t.jsx)(T.I,{name:$}),(0,t.jsxs)("span",{children:[w,x.length>1&&` (${x.length})`]})]}),!H&&"\u22C5"]},D)}),K>0&&(0,t.jsx)("span",{children:`+${K} more`})]})})},Dt=({diagnostics:n,sendingResolved:E})=>{const m=(0,u.of)(st),P=!!n.lastNotifyAttemptError,g=(0,v.KQ)(n.lastNotifyAttempt),I=n.lastNotifyAttemptDuration,K=g.isValid();return(0,t.jsx)("div",{className:m.metadataRow,children:(0,t.jsx)(i.B,{direction:"row",gap:1,children:P?(0,t.jsx)(X.P,{color:"error",icon:"exclamation-circle",children:(0,t.jsx)(p.m,{content:n.lastNotifyAttemptError,children:(0,t.jsx)("span",{children:(0,t.jsx)(o.x6,{i18nKey:"alerting.contact-points.last-delivery-failed",children:"Last delivery attempt failed"})})})}):(0,t.jsxs)(t.Fragment,{children:[K&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(X.P,{icon:"clock-nine",children:[(0,t.jsx)(o.x6,{i18nKey:"alerting.contact-points.last-delivery-attempt",children:"Last delivery attempt"}),(0,t.jsx)(p.m,{content:g.toLocaleString(),children:(0,t.jsx)("span",{children:(0,t.jsx)(M.E,{color:"primary",children:g.locale("en").fromNow()})})})]}),(0,t.jsx)(X.P,{icon:"stopwatch",children:(0,t.jsxs)(o.x6,{i18nKey:"alerting.contact-points.delivery-duration",children:["Last delivery took ",(0,t.jsx)(B.S,{content:I})]})})]}),!K&&(0,t.jsx)(X.P,{icon:"clock-nine",children:(0,t.jsx)(o.x6,{i18nKey:"alerting.contact-points.no-delivery-attempts",children:"No delivery attempts"})}),!E&&(0,t.jsx)(X.P,{icon:"info-circle",children:(0,t.jsxs)(o.x6,{i18nKey:"alerting.contact-points.only-firing",children:["Delivering ",(0,t.jsx)(M.E,{color:"primary",children:"only firing"})," notifications"]})})]})})})},st=n=>({contactPointWrapper:(0,a.css)({borderRadius:`${n.shape.radius.default}`,border:`solid 1px ${n.colors.border.weak}`,borderBottom:"none"}),integrationWrapper:(0,a.css)({position:"relative",background:`${n.colors.background.primary}`,padding:`${n.spacing(1)} ${n.spacing(1.5)}`,borderBottom:`solid 1px ${n.colors.border.weak}`}),metadataRow:(0,a.css)({borderBottomLeftRadius:`${n.shape.radius.default}`,borderBottomRightRadius:`${n.shape.radius.default}`}),noIntegrationsContainer:(0,a.css)({paddingTop:`${n.spacing(1.5)}`,paddingLeft:`${n.spacing(1.5)}`})})},8307:(F,C,e)=>{e.d(C,{B:()=>L,G:()=>W});var t=e(74848),a=e(96540),c=e(42941),s=e(16692),v=e(6975),u=e(56840),i=e(70327),T=e(77880),M=e(25149),p=e(78102);const o=({receiverName:d,decrypt:r,exportFormat:l,onClose:h})=>{const{currentData:A="",isFetching:O}=i.hK.useExportReceiverQuery({receiverName:d,decrypt:r,format:l}),j=`cp-${d}-${new Date().getTime()}`;return O?(0,t.jsx)(v._,{text:(0,u.t)("alerting.grafana-receiver-export-preview.text-loading","Loading....")}):(0,t.jsx)(T.J,{format:l,textDefinition:A,downloadFileName:j,onClose:h})},B=({onClose:d,receiverName:r,decrypt:l})=>{const[h,A]=(0,a.useState)("yaml");return(0,t.jsx)(M.m,{activeTab:h,onTabChange:A,onClose:d,formatProviders:Object.values(p.sl),children:(0,t.jsx)(o,{receiverName:r,decrypt:l,exportFormat:h,onClose:d})})},f=({decrypt:d,exportFormat:r,onClose:l})=>{const{currentData:h="",isFetching:A}=i.hK.useExportReceiversQuery({decrypt:d,format:r}),O=`contact-points-${new Date().getTime()}`;return A?(0,t.jsx)(v._,{text:(0,u.t)("alerting.grafana-receivers-export-preview.text-loading","Loading....")}):(0,t.jsx)(T.J,{format:r,textDefinition:h,downloadFileName:O,onClose:l})},R=({onClose:d,decrypt:r})=>{const[l,h]=(0,a.useState)("yaml");return(0,t.jsx)(M.m,{activeTab:l,onTabChange:h,onClose:d,formatProviders:Object.values(p.sl),children:(0,t.jsx)(f,{decrypt:r,exportFormat:l,onClose:d})})},L=Symbol("all contact points"),W=()=>{const[d,r]=(0,a.useState)(null),[l,h]=(0,c.A)(!1),[A,O]=(0,s.L7)(s.QI.DecryptSecrets),j=A&&O,_=(0,a.useCallback)(()=>{r(null),h(!1)},[h]),V=S=>{r(S),h(!0)};return[(0,a.useMemo)(()=>!d||!l?null:d===L?(0,t.jsx)(R,{decrypt:j,onClose:_}):(0,t.jsx)(B,{receiverName:d,decrypt:j,onClose:_}),[j,l,_,d]),V]}},77880:(F,C,e)=>{e.d(C,{J:()=>L});var t=e(74848),a=e(22803),c=e(4213),s=e.n(c),v=e(96540),u=e(70713),i=e(63142),T=e(50992),M=e(45861),p=e(47931),o=e(89640),B=e(34999),f=e(56840),R=e(78102);function L({format:r,textDefinition:l,downloadFileName:h,onClose:A}){const O=(0,i.of)(W),j=R.sl[r],_=(0,v.useCallback)(()=>{const y=new Blob([l],{type:`application/${r};charset=utf-8`});s()(y,`${h}.${r}`)},[l,h,r]),V=(0,v.useMemo)(()=>j.formatter?j.formatter(l):l,[j,l]);return(0,t.jsxs)("div",{className:O.container,children:[(0,t.jsx)(d,{exportProvider:j}),(0,t.jsx)("div",{className:O.content,children:(0,t.jsx)(u.default,{disableWidth:!0,children:({height:y})=>(0,t.jsx)(T.B,{width:"100%",height:y,language:r,value:V,monacoOptions:{minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",readOnly:!0}})})}),(0,t.jsxs)("div",{className:O.actions,children:[(0,t.jsx)(M.$n,{variant:"secondary",onClick:A,children:(0,t.jsx)(f.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})}),(0,t.jsx)(p.b,{icon:"copy",getText:()=>l,children:(0,t.jsx)(f.x6,{i18nKey:"alerting.file-export-preview.copy-code",children:"Copy code"})}),(0,t.jsx)(M.$n,{icon:"download-alt",onClick:_,children:(0,t.jsx)(f.x6,{i18nKey:"alerting.file-export-preview.download",children:"Download"})})]})]})}const W=r=>({container:(0,a.css)({display:"flex",flexDirection:"column",height:"100%",gap:r.spacing(2)}),content:(0,a.css)({flex:"1 1 100%"}),actions:(0,a.css)({flex:0,justifyContent:"flex-end",display:"flex",gap:r.spacing(1)})});function d({exportProvider:r}){const{name:l,type:h}=r,A={file:{title:"File-provisioning format",component:(0,t.jsxs)(t.Fragment,{children:[l," format is only valid for File Provisioning."," ",(0,t.jsx)(o.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/file-provisioning/",external:!0,children:"Read more in the docs."})]})},api:{title:"API-provisioning format",component:(0,t.jsxs)(t.Fragment,{children:[l," format is only valid for API Provisioning."," ",(0,t.jsx)(o.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/http-api-provisioning/",external:!0,children:"Read more in the docs."})]})},terraform:{title:"Terraform-provisioning format",component:(0,t.jsxs)(t.Fragment,{children:[l," format is only valid for Terraform Provisioning."," ",(0,t.jsx)(o.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/",external:!0,children:"Read more in the docs."})]})}},{title:O,component:j}=A[h];return(0,t.jsx)(B.F,{title:O,severity:"info",bottomSpacing:0,topSpacing:0,children:j})}},25149:(F,C,e)=>{e.d(C,{m:()=>v});var t=e(74848),a=e(8207),c=e(56840),s=e(29855);function v({activeTab:u,onTabChange:i,children:T,onClose:M,formatProviders:p,title:o="Export"}){const B=Object.values(p).map(R=>({label:R.name,value:R.exportFormat})),f=p.length>1?(0,c.t)("alerting.export.subtitle.formats","Select the format and download the file or copy the contents to clipboard"):(0,c.t)("alerting.export.subtitle.one-format","Download the file or copy the contents to clipboard");return(0,t.jsx)(a._,{title:o,subtitle:f,tabs:(0,t.jsx)(s.sb,{tabs:B,setActiveTab:i,activeTab:u}),onClose:M,size:"md",children:T})}},78102:(F,C,e)=>{e.d(C,{dX:()=>c,sl:()=>s});const t={name:"JSON",exportFormat:"json",type:"file",formatter:u=>{try{return JSON.stringify(JSON.parse(u),null,4)}catch{return u}}},a={name:"YAML",exportFormat:"yaml",type:"file"},c={name:"Terraform (HCL)",exportFormat:"hcl",type:"terraform"},s={[t.exportFormat]:t,[a.exportFormat]:a,[c.exportFormat]:c},v=[t,a]},28141:(F,C,e)=>{e.d(C,{k:()=>M,v:()=>i});var t=e(74848),a=e(96540),c=e(8207),s=e(45861),v=e(54384),u=e(56840);const i=({resourceName:p,title:o,onClose:B,...f})=>{const R=(0,u.t)("alerting.manage-permissions.title","Manage permissions");return(0,t.jsx)(c._,{onClose:B,title:o||R,subtitle:p,children:(0,t.jsx)(v.x,{...f,canSetPermissions:!0})})},T=({onClick:p})=>(0,t.jsx)(s.$n,{variant:"secondary",onClick:p,icon:"unlock",children:(0,t.jsx)(u.x6,{i18nKey:"alerting.manage-permissions.button",children:"Manage permissions"})}),M=({resource:p,resourceId:o,resourceName:B,title:f,renderButton:R})=>{const[L,W]=(0,a.useState)(!1),d=()=>W(!1),r=()=>W(!0);return(0,t.jsxs)(t.Fragment,{children:[R?R({onClick:r}):(0,t.jsx)(T,{onClick:r}),L&&(0,t.jsx)(i,{resource:p,resourceId:o,resourceName:B,title:f,onClose:d})]})}},29855:(F,C,e)=>{e.d(C,{G_:()=>l,sb:()=>h});var t=e(74848),a=e(22803),c=e(20382),s=e(96540),v=e(49785),u=e(70713),i=e(63142),T=e(8207),M=e(54314),p=e(60208),o=e(45861),B=e(45967),f=e(30703),R=e(50992),L=e(56840),W=e(20437),d=e(29609);const r=[{label:"Yaml",value:"yaml"}],l=({onClose:y})=>{const[S,Y]=(0,s.useState)("yaml"),{setValue:b}=(0,v.xW)(),z=(0,i.of)(V),Z=Q=>{for(const N in Q)b(N,Q[N]);y()};return(0,t.jsx)(T._,{title:(0,L.t)("alerting.rule-inspector.title-inspect-alert-rule","Inspect Alert rule"),subtitle:(0,t.jsx)("div",{className:z.subtitle,children:(0,t.jsx)(h,{tabs:r,setActiveTab:Y,activeTab:S})}),onClose:y,children:S==="yaml"&&(0,t.jsx)(A,{onSubmit:Z})})};function h({tabs:y,activeTab:S,setActiveTab:Y}){return(0,t.jsx)(M.U,{children:y.map((b,z)=>(0,t.jsx)(p.o,{label:b.label,value:b.value,onChangeTab:()=>Y(b.value),active:S===b.value},`${b.value}-${z}`))})}const A=({onSubmit:y})=>{const S=(0,i.of)(_),{getValues:Y}=(0,v.xW)(),b=(0,W.l1)(Y()),[z,Z]=(0,s.useState)((0,c.Bh)(b)),Q=()=>{const N=(0,c.Hh)(z),ot=Y(),at=j(N);y({...ot,...at})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:S.applyButton,children:[(0,t.jsx)(o.$n,{type:"button",onClick:Q,children:(0,t.jsx)(L.x6,{i18nKey:"alerting.inspector-yaml-tab.apply",children:"Apply"})}),(0,t.jsx)(B.m,{content:(0,t.jsx)(O,{}),theme:"info",placement:"left-start",interactive:!0,children:(0,t.jsx)(f.I,{name:"exclamation-triangle",size:"xl"})})]}),(0,t.jsx)("div",{className:S.content,children:(0,t.jsx)(u.default,{disableWidth:!0,children:({height:N})=>(0,t.jsx)(R.B,{width:"100%",height:N,language:"yaml",value:z,onBlur:Z,monacoOptions:{minimap:{enabled:!1}}})})})]})};function O(){return(0,t.jsxs)("div",{children:["The YAML content in the editor only contains alert rule configuration ",(0,t.jsx)("br",{}),"To configure Prometheus, you need to provide the rest of the"," ",(0,t.jsx)("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer",children:"configuration file content."})]})}function j(y){return d.p.dataSource.alertingRule(y)?(0,W.Qk)(y):d.p.dataSource.recordingRule(y)?(0,W.XI)(y):{}}const _=y=>({content:(0,a.css)({flexGrow:1,height:"100%",paddingBottom:"16px",marginBottom:y.spacing(2)}),applyButton:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:0,marginBottom:y.spacing(2)})}),V=()=>({subtitle:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between"})})}}]);

//# sourceMappingURL=3952.f41d28029a9728a35614.js.map