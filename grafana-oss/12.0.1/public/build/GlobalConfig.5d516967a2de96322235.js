"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8504],{19644:(j,l,n)=>{n.r(l),n.d(l,{default:()=>V});var t=n(74848),s=n(34999),a=n(56840),f=n(47215),g=n(5358),y=n(88547),A=n(36826),m=n(49785),S=n(41654),d=n(45861),p=n(38396),O=n(96673),P=n(98127),F=n(11018),E=n(51740),G=n(52161),u=n(77256),L=n(22316),B=n(36200),I=n(28365);const h={smtp_require_tls:!0},K=({config:i,alertManagerSourceName:e})=>{const c=(0,O.useDispatch)();(0,p.o)(r=>r.unifiedAlerting.saveAMConfig=B.jA);const{loading:o,error:v}=(0,P.$)(r=>r.saveAMConfig),x=(0,G.AL)(e),C=(0,m.mN)({defaultValues:JSON.parse(JSON.stringify({...h,...i.alertmanager_config.global??{}}))}),{handleSubmit:D,formState:{errors:U}}=C,W=r=>{c((0,F.RW)({newConfig:{...i,alertmanager_config:{...i.alertmanager_config,global:(0,L.FN)(r)}},oldConfig:i,alertManagerSourceName:e,successMessage:"Global config updated.",redirectPath:(0,u.nL)("/alerting/notifications",e)}))};return(0,t.jsx)(m.Op,{...C,children:(0,t.jsxs)("form",{onSubmit:D(W),children:[v&&(0,t.jsx)(s.F,{severity:"error",title:(0,a.t)("alerting.global-config-form.title-error-saving-receiver","Error saving receiver"),children:v.message||String(v)}),E.U.map(r=>(0,t.jsx)(I.e,{readOnly:x,defaultValue:h[r.propertyName],option:r,error:U[r.propertyName],pathPrefix:""},r.propertyName)),(0,t.jsx)("div",{children:(0,t.jsxs)(S.B,{children:[!x&&(0,t.jsxs)(t.Fragment,{children:[o&&(0,t.jsx)(d.$n,{disabled:!0,icon:"spinner",variant:"primary",children:(0,t.jsx)(a.x6,{i18nKey:"alerting.global-config-form.saving",children:"Saving..."})}),!o&&(0,t.jsx)(d.$n,{type:"submit",children:(0,t.jsx)(a.x6,{i18nKey:"alerting.global-config-form.save-global-config",children:"Save global config"})})]}),(0,t.jsx)(d.z9,{disabled:o,fill:"outline",variant:"secondary",href:(0,u.nL)("alerting/notifications",e),children:(0,t.jsx)(a.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})})]})})]})})},M=()=>{const{selectedAlertmanager:i}=(0,g.VI)(),{data:e,isLoading:c,error:o}=(0,f.f)(i);return c&&!e?"loading...":o?(0,t.jsx)(s.F,{severity:"error",title:(0,a.t)("alerting.global-config.title-failed-to-fetch-notification-template","Failed to fetch notification template"),children:String(o)}):e?(0,t.jsx)(K,{config:e,alertManagerSourceName:i}):null};function N(){return(0,t.jsx)(A.y,{navId:"receivers",accessType:"notification",children:(0,t.jsx)(M,{})})}const V=(0,y.S)(N)},47215:(j,l,n)=>{n.d(l,{f:()=>s});var t=n(91984);function s(a,f){const g=t.m.endpoints.getAlertmanagerConfiguration.useQuery(a??"",{refetchOnMountOrArgChange:!0,...f,skip:!a});return{...g,error:g.error}}}}]);

//# sourceMappingURL=GlobalConfig.5d516967a2de96322235.js.map