"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5428],{47220:(dt,Z,t)=>{t.d(Z,{o:()=>P});var U=t(74848),G=t(96540),T=t(36638),K=t(57866),Y=t(95004),A=t(60519),O=t(54735),F=t(36192),j=t(92790),g=t(17669);function D(i,s,l=[]){for(const n of l)if(typeof n=="function"){if(!n(i,s))return!1}else if(s[n]!==i[n])return!1;return!0}const I={x:T.sJ.get(K.Ct.firstTimeField).get({}),y:T.sJ.get(K.Ct.byTypes).get(new Set([Y.PU.number,Y.PU.enum]))};class P extends G.Component{constructor(s){super(s),this.getTimeRange=()=>this.props.timeRange;let l=this.prepState(s);l.alignedData=l.config.prepData([l.alignedFrame]),this.state=l,this.plotInstance=G.createRef()}prepState(s,l=!0){let n=null;const{frames:a,fields:r=I,preparePlotFrame:f,replaceVariables:v,dataLinkPostProcessor:M}=s,y=f??g.m,p=a.some(E=>E.fields.some(R=>(R.config.links?.length??0)>0)),z=y(a,{...r,y:p?()=>!0:r.y},s.timeRange);if((0,F.uY)("GraphNG",!1,"data aligned",z),z){let E=z;if(p){const m=Array.isArray(this.props.timeZone)?this.props.timeZone[0]:this.props.timeZone;let h=a.map((u,x)=>({...u,fields:z.fields.filter((C,S)=>S===0||C.state?.origin?.frameIndex===x),length:z.length}));h.forEach((u,x)=>{u.fields.forEach(C=>{C.getLinks=(0,A._M)(u,C,{...C.state?.scopedVars,__dataContext:{value:{data:h,field:C,frame:u,frameIndex:x}}},v,m,M)})}),E={...z,fields:z.fields.filter((u,x)=>x===0||r.y(u,z,[z]))}}if(s.omitHideFromViz){const m=E.fields.filter(h=>h.config.custom?.hideFrom?.viz!==!0);E={...E,fields:m,length:m.length}}let R=this.state?.config;l&&(R=s.prepConfig(E,this.props.frames,this.getTimeRange),(0,F.uY)("GraphNG",!1,"config prepared",R)),n={alignedFrame:E,config:R},(0,F.uY)("GraphNG",!1,"data prepared",n.alignedData)}return n}componentDidUpdate(s){const{frames:l,structureRev:n,timeZone:a,cursorSync:r,propsToDiff:f}=this.props,v=!D(s,this.props,f);if(l!==s.frames||v||a!==s.timeZone||r!==s.cursorSync){let M=this.prepState(this.props,!1);M&&((this.state.config===void 0||a!==s.timeZone||r!==s.cursorSync||n!==s.structureRev||!n||v)&&(M.config=this.props.prepConfig(M.alignedFrame,this.props.frames,this.getTimeRange),(0,F.uY)("GraphNG",!1,"config recreated",M.config)),M.alignedData=M.config.prepData([M.alignedFrame]),this.setState(M))}}render(){const{width:s,height:l,children:n,renderLegend:a}=this.props,{config:r,alignedFrame:f,alignedData:v}=this.state;return r?(0,U.jsx)(O.KU,{width:s,height:l,legend:a(r),children:(M,y)=>(0,U.jsx)(j.Z,{config:r,data:v,width:M,height:y,plotRef:p=>this.plotInstance.current=p,children:n?n(r,f):null})}):null}}},17669:(dt,Z,t)=>{t.d(Z,{m:()=>j});var U=t(95004),G=t(63409),T=t(8721);function K(g,D,I){let P,i;for(let s=0;s<D.length;s++)if(D[s]==null)i==null&&P!=null&&(i=s);else{if(i!=null&&P!=null){if(g[s]-P<I)for(;i<s;)D[i++]=void 0;i=null}P=g[s]}return D}var Y=t(739);function A(g){return g.type===U.PU.number&&g.config.custom?.drawStyle===Y.GR.Bars&&!g.config.custom?.hideFrom?.viz}function O(g,D){return g.fields.find(I=>D!=null?I.name===D:I.type===U.PU.time)}function F(g,D){const I=O(g,D);let P=I?.values;for(let i=0;i<g.fields.length;i++){let s=g.fields[i];if(s===I||A(s))continue;let l=s.config.custom?.spanNulls;typeof l=="number"&&l!==-1&&P&&(s.values=K(P,s.values,l))}return g}function j(g,D,I){let P;t:for(let n of g)for(let a of n.fields)if(D.x(a,n,g)){P=a;break t}g=g.map(n=>P?.state?.nullThresholdApplied?n:(0,G.M)({frame:n,refFieldName:P.name,refFieldPseudoMin:I?.from.valueOf(),refFieldPseudoMax:I?.to.valueOf()}));let i=g.reduce((n,a)=>n+a.fields.reduce((r,f)=>r+(A(f)?1:0),0),0),s=1/0;i>1&&g.forEach(n=>{if(!n.fields.some(A))return;const a=P.values;for(let r=0;r<a.length;r++)r>0&&(s=Math.min(s,a[r]-a[r-1]))});let l=(0,T.Fd)({frames:g,joinBy:D.x,keep:D.y,keepOriginIndices:!0,keepDisplayNames:!0,nullMode:n=>{if(A(n))return T.WO;let a=n.config.custom?.spanNulls;return a===!0?T.RC:a===-1?T.WO:T.JI}});return l?(l=F(l,P.name),s!==1/0&&(l.fields.forEach((n,a)=>{let r=n.values;if(a===0){let f=r[r.length-1];r.push(f+s,f+2*s)}else A(n)?r.push(null,null):r.push(void 0,void 0)}),l.length+=2),l):null}},3041:(dt,Z,t)=>{t.d(Z,{Z:()=>R});var U=t(74848),G=t(96540),T=t(63142),K=t(61897),Y=t(47220),A=t(2543),O=t(36613),F=t(95004),j=t(55386),g=t(11576),D=t(76637),I=t(64394),P=t(16515),i=t(739),s=t(47276),l=t(36192),n=t(70332),a=t(66650);const r=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),f=Array(53);for(let m=0;m<f.length;m++)f[m]=2**m;const v=(m,h=1)=>m==null?"-":m.toFixed(h),M={drawStyle:i.GR.Line,showPoints:i.yL.Auto,axisPlacement:i.vM.Auto},y=({frame:m,theme:h,timeZones:u,getTimeRange:x,allFrames:C,renderers:S,tweakScale:b=c=>c,tweakAxis:X=c=>c,hoverProximity:Q,orientation:k=i.wV.Horizontal})=>{const c=k!==i.wV.Vertical,d=new s.e(u[0]);let w;d.setPrepData(B=>(w=B[0],(0,l.bq)(B[0],d.getStackingGroups())));const _=m.fields[0];if(!_)return d;const q="x";let tt="";const lt=_.config.custom?.axisPlacement===i.vM.Hidden?i.vM.Hidden:c?i.vM.Bottom:i.vM.Left,mt=_.config.custom?.axisPlacement!==i.vM.Hidden;if(_.type===F.PU.time){d.addScale({scaleKey:q,orientation:c?i.Lt.Horizontal:i.Lt.Vertical,direction:c?i.ON.Right:i.ON.Up,isTime:!0,range:()=>{const e=x();return[e.from.valueOf(),e.to.valueOf()]}});const B=u.length>1?(e,L)=>c?L.map((o,ot)=>ot<2?null:o):L:void 0;for(let e=0;e<u.length;e++){const L=u[e];d.addAxis({scaleKey:q,isTime:!0,placement:lt,show:mt,label:_.config.custom?.axisLabel,timeZone:L,theme:h,grid:{show:e===0&&_.config.custom?.axisGridShow},filter:B})}u.length>1&&d.addHook("drawAxes",e=>{e.ctx.save();let L=0;e.axes.forEach(o=>{if(c&&o.side===2){e.ctx.fillStyle=h.colors.text.primary,e.ctx.textAlign="left",e.ctx.textBaseline="bottom";let ot=o._pos+o._size;e.ctx.fillText(u[L],e.bbox.left,ot*O.A.pxRatio),L++}}),e.ctx.restore()})}else d.addScale({scaleKey:q,orientation:c?i.Lt.Horizontal:i.Lt.Vertical,direction:c?i.ON.Right:i.ON.Up,range:(B,e,L)=>[_.config.min??e,_.config.max??L]}),d.addAxis({scaleKey:q,placement:lt,show:mt,label:_.config.custom?.axisLabel,theme:h,grid:{show:_.config.custom?.axisGridShow},formatValue:(B,e)=>(0,j.cN)(_.display(B,e))});let xt=S?.flatMap(B=>Object.values(B.fieldMap).filter(e=>B.indicesOnly.indexOf(e)===-1))??[],it;for(let B=1;B<m.fields.length;B++){const e=m.fields[B],L={...e.config,custom:{...M,...e.config.custom}},o=L.custom;if(e===_||e.type!==F.PU.number&&e.type!==F.PU.enum)continue;let ot=e.display??v;e.config.custom?.stacking?.mode===i.gs.Percent&&(ot=(0,g.J)({field:{...e,config:{...e.config,unit:"percentunit"}},theme:h}));const ct=(0,n.M)(L,e.type),ut=(0,D.Qi)(e),Et=(0,D.lz)(e,h).color;if(d.addScale(b({scaleKey:ct,orientation:c?i.Lt.Vertical:i.Lt.Horizontal,direction:c?i.ON.Up:i.ON.Right,distribution:o.scaleDistribution?.type,log:o.scaleDistribution?.log,linearThreshold:o.scaleDistribution?.linearThreshold,min:e.config.min,max:e.config.max,softMin:o.axisSoftMin,softMax:o.axisSoftMax,centeredZero:o.axisCenteredZero,stackingMode:o.stacking?.mode,range:e.type===F.PU.enum?(N,nt,et)=>[-1,e.config.type.enum.text.length]:void 0,decimals:e.config.decimals},e)),tt||(tt=ct),o.axisPlacement!==i.vM.Hidden){let N;o.axisColorMode===i.Y$.Series&&(ut.isByValue&&e.config.custom?.gradientMode===i.on.Scheme&&ut.id===I.Y.Thresholds?N=(0,a.pl)(1,h,ut,e.config.thresholds):N=Et);const nt={border:{show:o.axisBorderShow||!1,width:1/devicePixelRatio,stroke:N||h.colors.text.primary},ticks:{show:o.axisBorderShow||!1,stroke:N||h.colors.text.primary},color:N||h.colors.text.primary};let et,W,V;if(r.has(L.unit))et=f;else if(e.type===F.PU.enum){let H=e.config.type.enum.text;V=H.map(($,J)=>J),W=H}d.addAxis(X({scaleKey:ct,label:o.axisLabel,size:o.axisWidth,placement:c?o.axisPlacement??i.vM.Auto:i.vM.Bottom,formatValue:(H,$)=>(0,j.cN)(ot(H,$)),theme:h,grid:{show:o.axisGridShow},decimals:e.config.decimals,distr:o.scaleDistribution?.type,splits:V,values:W,incrs:et,...nt},e))}const _t=o.drawStyle===i.GR.Points?i.yL.Always:o.showPoints;let Pt=()=>null;o.spanNulls!==!0&&(Pt=(N,nt,et,W)=>{let V=[],H=N.series[nt];if(!et&&W&&W.length){const[$,J]=H.idxs,pt=N.data[0],at=N.data[nt],Mt=Math.round(N.valToPos(pt[$],"x",!0)),ht=Math.round(N.valToPos(pt[J],"x",!0));W[0][0]===Mt&&V.push($);for(let st=0;st<W.length;st++){let Dt=W[st],St=W[st+1];if(St&&Dt[1]===St[0]){let rt=N.posToIdx(Dt[1],!0);if(at[rt]==null)for(let ft=1;ft<100;ft++){if(at[rt+ft]!=null){rt+=ft;break}if(at[rt-ft]!=null){rt-=ft;break}}V.push(rt)}}W[W.length-1][1]===ht&&V.push(J)}return V.length?V:null});let{fillOpacity:gt}=o,yt=null,vt=null;if(e.state?.origin){it||(it=p(m,C));const N=C[e.state.origin.frameIndex],nt=N?.fields[e.state.origin.fieldIndex],et=(0,P.Ct)(nt??e,N,C);if(xt.indexOf(et)>=0)yt=()=>null,vt=()=>{};else if(o.transform===i.NU.Constant){const W=O.A.paths.linear();yt=(V,H)=>{const $=V._data,J=x();let pt=[J.from.valueOf(),J.to.valueOf()],at=$[H].find(st=>st!=null),Mt=[at,at],ht=$.slice();return ht[0]=pt,ht[H]=Mt,W({...V,_data:ht},H,0,1)}}if(o.fillBelowTo){const W=m.fields.find(J=>o.fillBelowTo===J.name||o.fillBelowTo===J.config?.displayNameFromDS||o.fillBelowTo===(0,P.Ct)(J,m,C)),V=W?(0,P.Ct)(W,m,C):o.fillBelowTo,H=it.get(et),$=it.get(V);(0,A.isNumber)($)&&(0,A.isNumber)(H)?(d.addBand({series:[H,$],fill:void 0}),gt||(gt=35)):gt=0}}let Ot;ut.id===I.Y.Thresholds&&(Ot=N=>(0,D.lz)(w.fields[N],h).color),d.addSeries({pathBuilder:yt,pointsBuilder:vt,scaleKey:ct,showPoints:_t,pointsFilter:Pt,colorMode:ut,fillOpacity:gt,theme:h,dynamicSeriesColor:Ot,drawStyle:o.drawStyle,lineColor:o.lineColor??Et,lineWidth:o.lineWidth,lineInterpolation:o.lineInterpolation,lineStyle:o.lineStyle,barAlignment:o.barAlignment,barWidthFactor:o.barWidthFactor,barMaxWidth:o.barMaxWidth,pointSize:o.pointSize,spanNulls:o.spanNulls||!1,show:!o.hideFrom?.viz,gradientMode:o.gradientMode,thresholds:L.thresholds,hardMin:e.config.min,hardMax:e.config.max,softMin:o.axisSoftMin,softMax:o.axisSoftMax,dataFrameFieldIndex:e.state?.origin}),o.thresholdsStyle&&L.thresholds&&(o.thresholdsStyle.mode??i.Ly.Off)!==i.Ly.Off&&d.addThresholds({config:o.thresholdsStyle,thresholds:L.thresholds,scaleKey:ct,theme:h,hardMin:e.config.min,hardMax:e.config.max,softMin:o.axisSoftMin,softMax:o.axisSoftMax})}let Tt=(0,l.ro)(m);d.setStackingGroups(Tt),S?.forEach(B=>{it||(it=p(m,C));let e={};for(let L in B.fieldMap){let o=B.fieldMap[L];e[L]=it.get(o)}B.init(d,e)});const Ct=15;let Lt={hover:{prox:(B,e,L)=>Q??(B.data[e][L]===null?Ct:null),skip:[null]},focus:{prox:Q??30},points:{one:!0}};return d.setCursor(Lt),d};function p(m,h){const u=new Map;return m.fields.forEach((x,C)=>{const S=x.state?.origin;if(S){const b=h[S.frameIndex]?.fields[S.fieldIndex];b&&u.set((0,P.Ct)(b,h[S.frameIndex],h),C)}}),u}const z=["legend","options","theme"];class E extends G.Component{constructor(){super(...arguments),this.prepConfig=(h,u,x)=>{const{theme:C,timeZone:S,options:b,renderers:X,tweakAxis:Q,tweakScale:k}=this.props;return y({frame:h,theme:C,timeZones:Array.isArray(S)?S:[S],getTimeRange:x,allFrames:u,renderers:X,tweakScale:k,tweakAxis:Q,hoverProximity:b?.tooltip?.hoverProximity,orientation:b?.orientation})},this.renderLegend=h=>{const{legend:u,frames:x}=this.props;return!h||u&&!u.showLegend||!(0,K.t)(h,x)?null:(0,U.jsx)(K.$,{data:x,config:h,...u})}}render(){return(0,U.jsx)(Y.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:z,renderLegend:this.renderLegend})}}const R=(0,T.cV)(E);R.displayName="TimeSeries"},78308:(dt,Z,t)=>{t.d(Z,{k:()=>P});var U=t(74848),G=t(55386),T=t(95004),K=t(739),Y=t(55302),A=t(39064),O=t(61048),F=t(41530),j=t(47466),g=t(16913),D=t(74542),I=t(76234);const P=({series:i,_rest:s,dataIdxs:l,seriesIdx:n,mode:a=K.$N.Single,sortOrder:r=K.xB.None,isPinned:f,annotate:v,maxHeight:M,replaceVariables:y=E=>E,dataLinks:p,hideZeros:z})=>{const E=i.fields[0],R=(0,G.cN)(E.display(E.values[l[0]])),m=(0,Y.cp)(i.fields,E,l,n,a,r,x=>x.type===T.PU.number||x.type===T.PU.enum,z);s?.forEach(x=>{x.config.custom?.hideFrom?.tooltip||m.push({label:x.state?.displayName??x.name,value:(0,D.Sc)(x,x.values[l[0]])})});let h;if(n!=null){const x=i.fields[n],C=p.some(S=>S.oneClick===!0);if(f||C){const S=l[n],b=(0,g.OG)(i,x,y,S);h=(0,U.jsx)(A.S,{dataLinks:p,actions:b,annotate:v})}}const u=E.config.custom?.hideFrom?.tooltip?null:{label:E.type===T.PU.time?"":E.state?.displayName??E.name,value:R};return(0,U.jsxs)(O.i,{children:[u!=null&&(0,U.jsx)(F.A,{item:u,isPinned:f}),(0,U.jsx)(j.o,{items:m,isPinned:f,scrollable:(0,I.T5)({mode:a,maxHeight:M}),maxHeight:M}),h]})}},99914:(dt,Z,t)=>{t.d(Z,{Oq:()=>T,QB:()=>Y,it:()=>G,uZ:()=>U});var U=(O=>(O.Circle="circle",O.Square="square",O))(U||{}),G=(O=>(O.Auto="auto",O.Manual="manual",O))(G||{}),T=(O=>(O.Lines="lines",O.Points="points",O.PointsAndLines="points+lines",O))(T||{});const K={id:""},Y={fillOpacity:50,show:"points"},A={series:[]}},74542:(dt,Z,t)=>{t.d(Z,{Sc:()=>g,hV:()=>I,rE:()=>i});var U=t(55386),G=t(57866),T=t(16515),K=t(36638),Y=t(95004),A=t(64394),O=t(43173),F=t(739),j=t(99914);function g(l,n){return l.display?(0,U.cN)(l.display(n)):`${n}`}function D(l){return l.id===G.jR.byIndex?(n,a)=>a===l.options:()=>!1}function I(l,n,a,r){(0,T.Fm)(a),(0,T.j2)(a,r);let f=[];n.length===0&&(n=[{}]);const{palette:v,getColorByName:M}=O.$.theme2.visualization;if(n.forEach((y,p)=>{if(l===j.it.Manual&&(y.frame?.matcher==null||y.x?.matcher==null||y.y?.matcher==null))return;let z=(0,K.NS)(y.x?.matcher??{id:G.Ct.byType,options:"number"}),E=(0,K.NS)(y.y?.matcher??{id:G.Ct.byType,options:"number"}),R=y.color?(0,K.NS)(y.color.matcher):null,m=y.size?(0,K.NS)(y.size.matcher):null,h=y.frame?D(y.frame.matcher):null;a.forEach((u,x)=>{if(h!=null&&!h(u,x))return;let C=[],S=[],b=u.fields.filter(c=>c.type===Y.PU.number),X=b.find(c=>z(c,u,a)),Q=R!=null?b.find(c=>c!==X&&R(c,u,a)):void 0,k=m!=null?b.find(c=>c!==X&&c!==Q&&m(c,u,a)):void 0;X!=null&&(b.forEach(c=>{if(c!==X&&!(l===j.it.Auto&&(c===Q||c===k))&&!(l===j.it.Manual&&S.length>0)&&E(c,u,a)&&!c.config.custom?.hideFrom?.viz){let d=c,w=y.name?.fixed;if(w==null){const q=a.length>1&&(u.name!=null||Object.keys(d.labels??{}).length>0),{displayName:tt,displayNameFromDS:lt}=d.config,mt=tt!=null||lt!=null;if(q&&mt){const xt=d.state.displayName;d.config.displayName=d.config.displayNameFromDS=d.state.displayName=void 0,w=(0,T.Ct)(d,u,a),w=w.replace(d.name,lt??tt),d.config.displayName=tt,d.config.displayNameFromDS=lt,d.state.displayName=xt}else w=(0,T.Ct)(d,u,a)}let _={name:{value:w},showPoints:d.config.custom.show===j.Oq.Lines?F.yL.Never:F.yL.Always,pointShape:d.config.custom.pointShape,pointStrokeWidth:d.config.custom.pointStrokeWidth,fillOpacity:d.config.custom.fillOpacity,showLine:d.config.custom.show!==j.Oq.Points,lineWidth:d.config.custom.lineWidth??2,lineStyle:d.config.custom.lineStyle,x:{field:X},y:{field:d},color:{},size:{},_rest:C};Q!=null&&(_.color.field=Q),k!=null&&(_.size.field=k,_.size.min=k.config.custom.pointSize?.min??5,_.size.max=k.config.custom.pointSize?.max??100),S.push(_)}}),S.length,u.fields.forEach(c=>{S.some(({x:w,y:_,color:q,size:tt})=>w.field===c||_.field===c||q.field===c||tt.field===c)||C.push(c)}),f.push(...S))})}),f.length!==0){let y=0;f.forEach((p,z)=>{if(p.color.field==null){let E=p.y.field.config.color??{mode:A.Y.PaletteClassic},R="";E.mode===A.Y.PaletteClassic?R=M(v[y++%v.length]):E.mode===A.Y.Fixed&&(R=M(E.fixedColor)),p.color.fixed=R}p.size.field==null&&(p.size.fixed=p.y.field.config.custom.pointSize?.fixed??5)}),P(f)}return f}function P(l){let n=l.map(f=>f.name.value.split(/\s+/g));const{prefix:a,suffix:r}=s(n);(a<1/0||r<1/0)&&l.forEach((f,v)=>{f.name.value=n[v].slice(a,n[v].length-r).join(" ")})}function i(l){let n=l.map(M=>M.split(/\s+/g)),{prefix:a,suffix:r}=s(n),f=n[0];if(f.length===1&&a===1&&r===1)return"";let v=[];return a>0&&v.push(...f.slice(0,a)),r>0&&v.push(...f.slice(-r)),v.join(" ")}function s(l){let n=1/0,a=1/0,r=l[0];for(let f=1;f<l.length;f++)l[f].length<r.length&&(r=l[f]);for(let f=1;f<l.length;f++){let v=l[f];if(v!==r){let M=0;for(let p=0;p<r.length&&v[p]===r[p];p++)M++;M<n&&(n=M);let y=0;for(let p=r.length-1;p>=0&&v[p]===r[p];p--)y++;y<a&&(a=y)}}return{prefix:n,suffix:a}}}}]);

//# sourceMappingURL=5428.6a59e09a858e49a941cf.js.map