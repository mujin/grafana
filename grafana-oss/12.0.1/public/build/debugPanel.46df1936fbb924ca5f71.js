"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2770],{77239:(J,D,a)=>{a.d(D,{B:()=>S});var r=a(74848),e=a(22803),x=a(96540),B=a(63142),m=a(53371),R=a(45967),L=a(64394),V=a(71479),C=a(55978),U=a(55302),y=(n=>(n[n.Leading=0]="Leading",n[n.Trailing=1]="Trailing",n))(y||{});const T=({color:n=L.F,colorIndicator:p=C.Ev,position:c=0,lineStyle:i})=>{const u=(0,B.of)(M);return p===C.fX.series?(0,r.jsx)(V.p,{color:n,lineStyle:i,className:c===0?u.leading:u.trailing}):(0,r.jsx)("span",{style:{backgroundColor:n},className:(0,e.cx)(c===0?u.leading:u.trailing,(0,U.L$)(p,u))})},M=n=>({leading:(0,e.css)({marginRight:n.spacing(.5)}),trailing:(0,e.css)({marginLeft:n.spacing(.5)}),value:(0,e.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,e.css)({}),pie_1_4:(0,e.css)({}),pie_2_4:(0,e.css)({}),pie_3_4:(0,e.css)({}),marker_sm:(0,e.css)({width:"4px",height:"4px",borderRadius:n.shape.radius.circle,minWidth:"4px"}),marker_md:(0,e.css)({width:"8px",height:"8px",borderRadius:n.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,e.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.circle,minWidth:"12px"})});var I=(n=>(n.label="label",n.value="value",n))(I||{});const d="Copied to clipboard",f=2*1e3,b=7,S=({label:n,value:p,color:c,colorIndicator:i,colorPlacement:u=C.lJ.first,justify:j="flex-start",isActive:l=!1,marginRight:s="0px",isPinned:t,lineStyle:o,showValueScroll:g})=>{const h=(0,B.of)(w,j,s),E=g?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"wrap",wordBreak:"break-word"},[O,A]=(0,x.useState)(!1),[W,$]=(0,x.useState)(null),[N,K]=(0,x.useState)(!1),H=(0,x.useRef)(null),z=(0,x.useRef)(null);(0,x.useEffect)(()=>{let v;return N&&(v=setTimeout(()=>{K(!1)},f)),()=>{window.clearTimeout(v)}},[N]);const X=async(v,F)=>{if(!(navigator?.clipboard&&window.isSecureContext)){k(v,F);return}try{await navigator.clipboard.writeText(v),$({[`${F}`]:v}),K(!0)}catch{$(null)}},k=(v,F)=>{const P=document.createElement("textarea");H.current?.appendChild(P),P.value=v,P.focus(),P.select();try{document.execCommand("copy")&&($({[`${F}`]:v}),K(!0))}catch(Y){console.error("Unable to copy to clipboard",Y)}P.remove()},G=v=>{v.currentTarget.offsetWidth<v.currentTarget.scrollWidth&&A(!0)},Z=()=>A(!1);return n.length*b>window.innerWidth/2&&(n=n.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,r.jsxs)("div",{className:h.contentWrapper,children:[(c||n)&&(0,r.jsxs)("div",{className:h.valueWrapper,children:[c&&u===C.lJ.first&&(0,r.jsx)(T,{color:c,colorIndicator:i,lineStyle:o}),t?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(R.m,{content:n,interactive:!1,show:O,children:(0,r.jsxs)(r.Fragment,{children:[N&&W?.label&&(0,r.jsx)(m.r,{placement:"top",referenceElement:H.current,children:d}),(0,r.jsx)("div",{className:(0,e.cx)(h.label,l&&h.activeSeries,navigator?.clipboard&&h.copy),onMouseEnter:G,onMouseLeave:Z,onClick:()=>X(n,"label"),ref:H,children:n})]})})}):(0,r.jsx)("div",{className:(0,e.cx)(h.label,l&&h.activeSeries),children:n})]}),(0,r.jsxs)("div",{className:h.valueWrapper,children:[c&&u===C.lJ.leading&&(0,r.jsx)(T,{color:c,colorIndicator:i,position:y.Leading,lineStyle:o}),t?(0,r.jsxs)(r.Fragment,{children:[N&&W?.value&&(0,r.jsx)(m.r,{placement:"top",referenceElement:z.current,children:d}),(0,r.jsx)("div",{className:(0,e.cx)(h.value,l,navigator?.clipboard&&h.copy),style:E,onClick:()=>X(p?p.toString():"","value"),ref:z,children:p})]}):(0,r.jsx)("div",{className:(0,e.cx)(h.value,l),style:E,children:p}),c&&u===C.lJ.trailing&&(0,r.jsx)(T,{color:c,colorIndicator:i,position:y.Trailing,lineStyle:o})]})]})},w=(n,p,c)=>({contentWrapper:(0,e.css)({display:"flex",alignItems:"start",justifyContent:p,marginRight:c}),label:(0,e.css)({color:n.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:n.spacing(2)}),value:(0,e.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,e.css)({display:"flex",alignItems:"center"}),activeSeries:(0,e.css)({fontWeight:n.typography.fontWeightBold,color:n.colors.text.maxContrast}),copy:(0,e.css)({cursor:"pointer"})})},13326:(J,D,a)=>{a.d(D,{e:()=>M});var r=a(74848),e=a(22803),x=a(16515),B=a(55386),m=a(46635),R=a(739),L=a(63142),V=a(89640),C=a(56840),U=a(53049),y=a(70362);function T(d,f,b,S,w){const n=d.fields,p=b!=null?n[b]:null,c=n.filter(t=>!t.config.custom?.hideFrom?.tooltip),i=c.find(t=>t.name==="traceID")||n[0],u=[];if(c.filter(t=>i===t).length>0&&u.push(i),u.push(...c.filter(t=>i!==t)),u.length===0)return null;const j=[],l=[],s=new Set;for(const t of u){if(w===R.$N.Single&&t!==p)continue;const o=t.values[f],g=t.display?t.display(o):{text:`${o}`,numeric:+o};t.getLinks&&t.getLinks({calculatedValue:g,valueRowIndex:f}).forEach(h=>{const E=`${h.title}/${h.href}`;s.has(E)||(l.push(h),s.add(E))}),j.push({name:(0,x.Ct)(t,d),value:o,valueString:(0,B.cN)(g),highlight:t===p})}return S&&S!==R.xB.None&&j.sort((t,o)=>m.sortValues(S)(t.value,o.value)),{displayValues:j,links:l}}const M=({data:d,rowIndex:f,columnIndex:b,sortOrder:S,mode:w,header:n,padding:p=0,maxHeight:c})=>{const i=(0,L.of)(I,p);if(!d||f==null)return null;const u=T(d,f,b,S,w);if(u==null)return null;const{displayValues:j,links:l}=u;return n==="Exemplar"?(0,r.jsx)(y.i,{displayValues:j,links:l,header:n,maxHeight:c}):(0,r.jsxs)("div",{className:i.wrapper,children:[n&&(0,r.jsx)("div",{className:i.header,children:(0,r.jsx)("span",{className:i.title,children:n})}),(0,r.jsx)("table",{className:i.infoWrap,children:(0,r.jsxs)("tbody",{children:[j.map((s,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:s.name}),(0,r.jsx)("td",{children:(0,U.A)(s.valueString)})]},`${t}/${f}`)),l.map((s,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:(0,r.jsx)(C.x6,{i18nKey:"visualization.data-hover-view.link",children:"Link"})}),(0,r.jsx)("td",{colSpan:2,children:(0,r.jsx)(V.Y,{href:s.href,external:s.target==="_blank",weight:"medium",inline:!1,children:s.title})})]},t))]})})]})},I=(d,f=0)=>({wrapper:(0,e.css)({padding:`${f}px`,background:d.components.tooltip.background,borderRadius:d.shape.borderRadius(2)}),header:(0,e.css)({background:d.colors.background.secondary,alignItems:"center",alignContent:"center",display:"flex",paddingBottom:d.spacing(1)}),title:(0,e.css)({fontWeight:d.typography.fontWeightMedium,overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),infoWrap:(0,e.css)({padding:d.spacing(1),background:"transparent",border:"none",th:{fontWeight:d.typography.fontWeightMedium,padding:d.spacing(.25,2,.25,0)},tr:{borderBottom:`1px solid ${d.colors.border.weak}`,"&:last-child":{borderBottom:"none"}}}),link:(0,e.css)({color:d.colors.text.link})})},54952:(J,D,a)=>{a.r(D),a.d(D,{plugin:()=>j});var r=a(16207),e=a(74848),x=a(96540),B=a(64423),m=a(57852),R=a(32899),L=a(52718),V=a(13326);class C extends x.Component{constructor(){super(...arguments),this.subscription=new B.yU,this.state={}}componentDidMount(){const{eventBus:s}=this.props;this.subscription.add(s.subscribe(m.b_,t=>{this.setState({event:t})})),this.subscription.add(s.subscribe(m.ql,t=>{this.setState({event:t})})),this.subscription.add(s.subscribe(R.kb,t=>{this.setState({event:t})})),this.subscription.add(s.subscribe(R.Tq,t=>{this.setState({event:t})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:s}=this.state;if(!s)return(0,e.jsx)("div",{children:"no events yet"});const{type:t,payload:o,origin:g}=s;return(0,e.jsxs)(L.E,{autoHeightMin:"100%",autoHeightMax:"100%",children:[(0,e.jsxs)("h3",{children:["Origin: ",g?.path]}),(0,e.jsxs)("span",{children:["Type: ",t]}),!!o&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("pre",{children:JSON.stringify(o.point,null,"  ")}),o.data&&(0,e.jsx)(V.e,{data:o.data,rowIndex:o.rowIndex,columnIndex:o.columnIndex})]})]})}}var U=a(94777);let y=100;class T extends x.PureComponent{constructor(s){super(s),this.history=new U.$({capacity:40,append:"head"}),this.eventObserver={next:o=>{const g=o.origin;this.history.add({key:y++,type:o.type,path:g?.path,payload:o.payload}),this.setState({counter:y})}},this.state={counter:y};const t=[];t.push(s.eventBus.getStream(m.b_).subscribe(this.eventObserver)),t.push(s.eventBus.getStream(m.ql).subscribe(this.eventObserver)),t.push(s.eventBus.getStream(m.LO).subscribe(this.eventObserver)),this.subs=t}componentWillUnmount(){for(const s of this.subs)s.unsubscribe()}render(){return(0,e.jsx)(L.E,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.history.map((s,t)=>(0,e.jsxs)("div",{children:[JSON.stringify(s.path)," ",s.type," / X:",JSON.stringify(s.payload.x)," / Y:",JSON.stringify(s.payload.y)]},s.key))})}}var M=a(76732),I=a(46644),d=a(16515),f=a(76319);class b extends x.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(s){const{data:t,options:o}=this.props;if(s.data!==t&&(this.counters.dataChanged++,o.counters?.schemaChanged)){const g=s.data?.series,h=t.series;h&&g&&((0,M.J3)(h,g,M.bW)||this.counters.schemaChanged++)}return!0}render(){const{data:s,options:t}=this.props,o=t.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const g=Date.now(),h=g-this.lastRender;this.lastRender=g;const E=I.AS.get(I.gy.lastNotNull);return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(f.K,{name:"step-backward",title:"reset counters",onClick:this.resetCounters,tooltip:"Step back"}),(0,e.jsxs)("span",{children:[o.render&&(0,e.jsxs)("span",{children:["Render: ",this.counters.render,"\xA0"]}),o.dataChanged&&(0,e.jsxs)("span",{children:["Data: ",this.counters.dataChanged,"\xA0"]}),o.schemaChanged&&(0,e.jsxs)("span",{children:["Schema: ",this.counters.schemaChanged,"\xA0"]}),(0,e.jsxs)("span",{children:["TIME: ",h,"ms"]})]})]}),s.series&&s.series.map((O,A)=>(0,e.jsxs)("div",{children:[(0,e.jsxs)("h4",{children:[(0,d.Ri)(O,A)," (",O.length,")"]}),(0,e.jsxs)("table",{className:"filter-table",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:"Field"}),(0,e.jsx)("td",{children:"Type"}),(0,e.jsx)("td",{children:"Last"})]})}),(0,e.jsx)("tbody",{children:O.fields.map((W,$)=>{const N=E.reduce(W,!1,!1)[E.id];return(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,d.Ct)(W,O,s.series)}),(0,e.jsx)("td",{children:W.type}),(0,e.jsx)("td",{children:`${N}`})]},`${$}/${W.name}`)})})]})]},`${A}/${O.refId}`))]})}}var S=a(64400),w=a(37386),n=a(63527);function p(l){const s=(0,S.d2)(),t=o=>{s.onInstanceStateChange({name:o.currentTarget.value})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(w.D,{label:"State name",children:(0,e.jsx)(n.p,{value:s.instanceState?.name??"",onChange:t})})})}function c({value:l,context:s,onChange:t,item:o}){return(0,e.jsxs)("div",{children:["Current value: ",s.instanceState?.name," "]})}var i=(l=>(l.Cursor="cursor",l.Events="events",l.Render="render",l.State="State",l.ThrowError="ThrowError",l))(i||{});class u extends x.Component{render(){const{options:s}=this.props;switch(s.mode){case i.Events:return(0,e.jsx)(T,{eventBus:this.props.eventBus});case i.Cursor:return(0,e.jsx)(C,{eventBus:this.props.eventBus});case i.State:return(0,e.jsx)(p,{...this.props});case i.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return(0,e.jsx)(b,{...this.props})}}}const j=new r.m(u).useFieldConfig().setPanelOptions(l=>{l.addSelect({path:"mode",name:"Mode",defaultValue:i.Render,settings:{options:[{label:"Render",value:i.Render},{label:"Events",value:i.Events},{label:"Cursor",value:i.Cursor},{label:"Cursor",value:i.Cursor},{label:"Share state",value:i.State},{label:"Throw error",value:i.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:s})=>s===i.State,editor:c}).addBooleanSwitch({path:"counters.render",name:"Render count",defaultValue:!0,showIf:({mode:s})=>s===i.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data changed count",defaultValue:!0,showIf:({mode:s})=>s===i.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema changed count",defaultValue:!0,showIf:({mode:s})=>s===i.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})})}}]);

//# sourceMappingURL=debugPanel.46df1936fbb924ca5f71.js.map