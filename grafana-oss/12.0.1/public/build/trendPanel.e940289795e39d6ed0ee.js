"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2666],{61048:(X,U,e)=>{e.d(U,{i:()=>I});var r=e(74848),p=e(22803),O=e(63142);const I=({children:u,className:S})=>{const C=(0,O.of)(T);return(0,r.jsx)("div",{className:(0,p.cx)(C.wrapper,S),children:u})},T=u=>({wrapper:(0,p.css)({display:"flex",flexDirection:"column",fontSize:u.typography.bodySmall.fontSize})})},76234:(X,U,e)=>{e.d(U,{B_:()=>j,Fg:()=>H,O2:()=>L,T5:()=>D});var r=e(95004),p=e(16515),O=e(63409),I=e(34455),T=e(55386),u=e(11576),S=e(406),C=e(739),W=e(70332);function K(t){let i=new Map;return t.map(d=>({...d,fields:d.fields.map(l=>{if(l.type===r.PU.enum){let o=(0,W.M)(l.config,l.type),a=i.get(o);a||(a=[],i.set(o,a));let m=l.values.toArray().slice(),P=l.config.type.enum.text;if(a.length>0)for(let s=0;s<m.length;s++)m[s]+=a.length;return a.push(...P),l.config.type.enum.text=a,{...l,values:m}}return l})}))}function j(t,i,v,d){if(!t?.length)return null;(0,p.Fm)(t);let l=d!=null;d!=null&&d>0&&(t=[{...t[0],fields:[t[0].fields[d],...t[0].fields.filter((P,s)=>s!==d)]}]);for(let P of t)for(let s of P.fields)s.type===r.PU.time&&typeof s.values[0]!="number"&&(s.values=(0,S.s7)(s,{destinationType:r.PU.time}).values);let o=0;e:for(let P of t)for(let s of P.fields)if(s.type===r.PU.enum&&++o>1){t=K(t);break e}let a;const m=[];for(let P of t){const s=[];let f=!1,h=!1,x=l?P:(0,O.M)({frame:P,refFieldPseudoMin:v?.from.valueOf(),refFieldPseudoMax:v?.to.valueOf()});const B=(0,I.C)(x).fields;for(let y=0;y<(B?.length||0);y++){const n=B[y];switch(n.type){case r.PU.time:f=!0,s.push(n);break;case r.PU.number:h=l?y>0:!0,a={...n,values:n.values.map(E=>Number.isFinite(E)||E==null?E:null)},s.push(a);break;case r.PU.enum:h=!0;case r.PU.string:a={...n,values:n.values},s.push(a);break;case r.PU.boolean:h=!0;const A=n.config?.custom??{},F={...n.config,max:1,min:0,custom:A};A.lineInterpolation!==C.dx.StepBefore&&(A.lineInterpolation=C.dx.StepAfter),a={...n,config:F,type:r.PU.number,values:n.values.map(E=>E==null?E:E?1:0)},(0,T.j9)(F.unit)||(F.unit="bool",a.display=(0,u.J)({field:a,theme:i})),s.push(a);break}}(l||f)&&h&&m.push({...P,length:x.length,fields:s})}return m.length?(L(m,i,0),N(m,i),m):null}const N=(t,i)=>{const{palette:v}=i.visualization;for(const d of t)for(const l of d.fields)if(l.type===r.PU.enum){const o=v[l.state?.seriesIndex%v.length],a=i.visualization.getColorByName(o),m=l.config.type.enum;m.color=Array(m.text.length).fill(a),l.display=(0,u.J)({field:l,theme:i})}},L=(t,i,v)=>{let d=0;t.forEach(l=>{l.fields.forEach((o,a)=>{a!==v&&(o.type===r.PU.number||o.type===r.PU.boolean||o.type===r.PU.enum)&&(o.state={...o.state,seriesIndex:d++},o.display=(0,u.J)({field:o,theme:i}))})})};function H(t,i){return!t||!t.length?[i]:t.map(v=>v?.length?v:i)}const D=t=>t.mode===C.$N.Multi&&t.maxHeight!=null},96827:(X,U,e)=>{e.r(U),e.d(U,{plugin:()=>s});var r=e(16207),p=e(95004),O=e(79277),I=e(41069),T=e(12241),u=e(74848),S=e(96540),C=e(36638),W=e(57866),K=e(8721),j=e(43173),N=e(14477),L=e(64400),H=e(93630),D=e(739),t=e(69234),i=e(17669),v=e(3041),d=e(40665),l=e(78308),o=e(76234);const a=({data:f,timeRange:h,timeZone:x,width:B,height:y,options:n,fieldConfig:A,replaceVariables:F,id:E})=>{const{dataLinkPostProcessor:J}=(0,L.d2)(),Z=n.xField??f.series[0]?.fields.find(g=>g.type===p.PU.number)?.name,$=(g,c,M)=>(c={...c,x:C.sJ.get(W.Ct.byName).get(Z)},(0,i.m)(g,c)),R=(0,S.useMemo)(()=>{if(f.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:f.series};let g=f.series,c;if(n.xField){if(c=(0,d.findFieldIndex)(n.xField,g[0]),c==null)return{warning:"Unable to find field: "+n.xField,frames:f.series}}else if(c=g[0]?g[0].fields.findIndex(M=>M.type===p.PU.number):-1,c===-1)return{warning:"No numeric fields found for X axis",frames:g};if(c!=null){const M=g[0].fields[c];if(M.type===p.PU.number&&!(0,K.g2)(M.values))return{warning:"Values must be in ascending order",frames:g}}return{frames:(0,o.B_)(g,j.$.theme2,void 0,c)}},[f.series,n.xField]);return R.warning||!R.frames?(0,u.jsx)(N.a,{panelId:E,fieldConfig:A,data:f,message:R.warning,needsNumberField:!0}):(0,u.jsx)(v.Z,{frames:R.frames,structureRev:f.structureRev,timeRange:h,timeZone:x,width:B,height:y,legend:n.legend,options:n,preparePlotFrame:$,replaceVariables:F,dataLinkPostProcessor:J,children:(g,c)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(H.Z,{config:g}),n.tooltip.mode!==D.$N.None&&(0,u.jsx)(t.xl,{config:g,hoverMode:n.tooltip.mode===D.$N.Single?t.b3.xOne:t.b3.xAll,getDataLinks:(M,V)=>c.fields[M].getLinks?.({valueRowIndex:V})??[],render:(M,V,z,G=!1,Y,b,w,Q)=>(0,u.jsx)(l.k,{series:c,dataIdxs:V,seriesIdx:z,mode:n.tooltip.mode,sortOrder:n.tooltip.sort,isPinned:G,maxHeight:n.tooltip.maxHeight,replaceVariables:F,dataLinks:Q,hideZeros:n.tooltip.hideZeros}),maxWidth:n.tooltip.maxWidth})]})})};var m=e(73495);class P{getSuggestionsForData(h){const{dataSummary:x}=h;return x.numberFieldCount<2||x.rowCountTotal<2||x.rowCountTotal<2?void 0:h.getListAppender({name:m.m.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:D.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:y=>{y.fieldConfig?.defaults.custom?.drawStyle!==D.GR.Bars&&(y.fieldConfig.defaults.custom.lineWidth=Math.max(y.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const s=new r.m(a).useFieldConfig((0,T.V)(T.S,!1)).setPanelOptions(f=>{const h=["X axis"];f.addFieldNamePicker({path:"xField",name:"X field",description:"An increasing numeric value",category:h,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:x=>x.type===p.PU.number}}),O.D(f,!1,!0,O.U),I.H(f)}).setSuggestionsSupplier(new P)}}]);

//# sourceMappingURL=trendPanel.e940289795e39d6ed0ee.js.map