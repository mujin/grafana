"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[893],{60893:(ai,Co,K)=>{K.d(Co,{is:()=>El});var i=K(74848),ci=K(16264),X=K(22803),d=K(96540),kt=K(40961),ze=K(34164);function Ie(e,t,o){const n=typeof e.colSpan=="function"?e.colSpan(o):1;if(Number.isInteger(n)&&n>1&&(!e.frozen||e.idx+n-1<=t))return n}function yo(e){e.stopPropagation()}function Et(e){e?.scrollIntoView({inline:"nearest",block:"nearest"})}function ct(e){let t=!1;const o={...e,preventGridDefault(){t=!0},isGridDefaultPrevented(){return t}};return Object.setPrototypeOf(o,Object.getPrototypeOf(e)),o}const wo=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Insert","ContextMenu","Escape","Pause","Play","PrintScreen","F1","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]);function Dt(e){return(e.ctrlKey||e.metaKey)&&e.key!=="Control"}function bo(e){return Dt(e)&&e.keyCode!==86?!1:!wo.has(e.key)}function Ro({key:e,target:t}){return e==="Tab"&&(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement)?t.closest(".rdg-editor-container")?.querySelectorAll("input, textarea, select").length===1:!1}const So="mlln6zg7-0-0-beta-46";function vo(e){return e.map(({key:t,idx:o,minWidth:n,maxWidth:r})=>(0,i.jsx)("div",{className:So,style:{gridColumnStart:o+1,minWidth:n,maxWidth:r},"data-measuring-cell-key":t},t))}function Io({selectedPosition:e,columns:t,rows:o}){const n=t[e.idx],r=o[e.rowIdx];return bn(n,r)}function bn(e,t){return e.renderEditCell!=null&&(typeof e.editable=="function"?e.editable(t):e.editable)!==!1}function ko({rows:e,topSummaryRows:t,bottomSummaryRows:o,rowIdx:n,mainHeaderRowIdx:r,lastFrozenColumnIndex:s,column:a}){const l=t?.length??0;if(n===r)return Ie(a,s,{type:"HEADER"});if(t&&n>r&&n<=l+r)return Ie(a,s,{type:"SUMMARY",row:t[n+l]});if(n>=0&&n<e.length){const c=e[n];return Ie(a,s,{type:"ROW",row:c})}if(o)return Ie(a,s,{type:"SUMMARY",row:o[n-e.length]})}function Eo({moveUp:e,moveNext:t,cellNavigationMode:o,columns:n,colSpanColumns:r,rows:s,topSummaryRows:a,bottomSummaryRows:l,minRowIdx:c,mainHeaderRowIdx:u,maxRowIdx:g,currentPosition:{idx:C,rowIdx:p},nextPosition:f,lastFrozenColumnIndex:m,isCellWithinBounds:I}){let{idx:w,rowIdx:y}=f;const k=n.length,x=P=>{for(const v of r){const E=v.idx;if(E>w)break;const j=ko({rows:s,topSummaryRows:a,bottomSummaryRows:l,rowIdx:y,mainHeaderRowIdx:u,lastFrozenColumnIndex:m,column:v});if(j&&w>E&&w<j+E){w=E+(P?j:0);break}}},R=P=>P.level+u,L=()=>{if(t){let v=n[w].parent;for(;v!==void 0;){const E=R(v);if(y===E){w=v.idx+v.colSpan;break}v=v.parent}}else if(e){let v=n[w].parent,E=!1;for(;v!==void 0;){const j=R(v);if(y>=j){w=v.idx,y=j,E=!0;break}v=v.parent}E||(w=C,y=p)}};if(I(f)&&(x(t),y<u&&L()),o==="CHANGE_ROW"&&(w===k?y===g||(w=0,y+=1):w===-1&&(y===c||(y-=1,w=k-1),x(!1))),y<u){let v=n[w].parent;const E=y;for(y=u;v!==void 0;){const j=R(v);j>=E&&(y=j,w=v.idx),v=v.parent}}return{idx:w,rowIdx:y}}function Do({maxColIdx:e,minRowIdx:t,maxRowIdx:o,selectedPosition:{rowIdx:n,idx:r},shiftKey:s}){return s?r===0&&n===t:r===e&&n===o}const Rn="rdg-cell cj343x07-0-0-beta-46",jo="rdg-cell-frozen csofj7r7-0-0-beta-46";function Xt(e){return{"--rdg-grid-row-start":e}}function Sn(e,t,o){const n=t+1,r=`calc(${o-1} * var(--rdg-header-row-height))`;return e.parent===void 0?{insetBlockStart:0,gridRowStart:1,gridRowEnd:n,paddingBlockStart:r}:{insetBlockStart:`calc(${t-o} * var(--rdg-header-row-height))`,gridRowStart:n-o,gridRowEnd:n,paddingBlockStart:r}}function nt(e,t=1){const o=e.idx+1;return{gridColumnStart:o,gridColumnEnd:o+t,insetInlineStart:e.frozen?`var(--rdg-frozen-left-${e.idx})`:void 0}}function dt(e,...t){return(0,ze.A)(Rn,...t,e.frozen&&jo)}const{min:ut,max:jt,floor:vn,sign:To,abs:Lo}=Math;function Tt(e){if(typeof e!="function")throw new Error("Please specify the rowKeyGetter prop to use selection")}function In(e,{minWidth:t,maxWidth:o}){return e=jt(e,t),typeof o=="number"&&o>=t?ut(e,o):e}function kn(e,t){return e.parent===void 0?t:e.level-e.parent.level}const Ao="c1bn88vv7-0-0-beta-46",No="rdg-checkbox-input c1qt073l7-0-0-beta-46";function Mo({onChange:e,...t}){function o(n){e(n.target.checked,n.nativeEvent.shiftKey)}return(0,i.jsx)("div",{className:Ao,children:(0,i.jsx)("input",{type:"checkbox",...t,className:No,onChange:o})})}const gi="g1s9ylgp7-0-0-beta-46",Oo=null,hi="cz54e4y7-0-0-beta-46",Po=null;function Fo(e){return jsx(Ho,{...e})}function Ho({groupKey:e,isExpanded:t,tabIndex:o,toggleGroup:n}){function r({key:a}){a==="Enter"&&n()}const s=t?"M1 1 L 7 7 L 13 1":"M1 7 L 7 1 L 13 7";return jsxs("span",{className:Oo,tabIndex:o,onKeyDown:r,children:[e,jsx("svg",{viewBox:"0 0 14 8",width:"14",height:"8",className:Po,"aria-hidden":!0,children:jsx("path",{d:s})})]})}function Wo(e){try{return e.row[e.column.key]}catch{return null}}const En=(0,d.createContext)(void 0),Go=En.Provider;function Lt(){return(0,d.useContext)(En)}function Yt({value:e,tabIndex:t,disabled:o,onChange:n,"aria-label":r,"aria-labelledby":s}){const a=Lt().renderCheckbox;return a({"aria-label":r,"aria-labelledby":s,tabIndex:t,disabled:o,checked:e,onChange:n})}const Dn=(0,d.createContext)(void 0),Jt=Dn.Provider,jn=(0,d.createContext)(void 0),$o=jn.Provider;function Zt(){const e=(0,d.useContext)(Dn),t=(0,d.useContext)(jn);if(e===void 0||t===void 0)throw new Error("useRowSelection must be used within DataGrid cells");return[e,t]}const ot="select-row";function zo(e){const[t,o]=Zt();return(0,i.jsx)(Yt,{"aria-label":"Select All",tabIndex:e.tabIndex,value:t,onChange:n=>{o({type:"HEADER",checked:n})}})}function Bo(e){const[t,o]=Zt();return(0,i.jsx)(Yt,{"aria-label":"Select",tabIndex:e.tabIndex,value:t,onChange:(n,r)=>{o({type:"ROW",row:e.row,checked:n,isShiftClick:r})}})}function Ko(e){const[t,o]=Zt();return(0,i.jsx)(Yt,{"aria-label":"Select Group",tabIndex:e.tabIndex,value:t,onChange:n=>{o({type:"ROW",row:e.row,checked:n,isShiftClick:!1})}})}const pi={key:ot,name:"",width:35,minWidth:35,maxWidth:35,resizable:!1,sortable:!1,frozen:!0,renderHeaderCell(e){return(0,i.jsx)(zo,{...e})},renderCell(e){return(0,i.jsx)(Bo,{...e})},renderGroupCell(e){return(0,i.jsx)(Ko,{...e})}},Vo="auto",Uo=50;function Xo({rawColumns:e,defaultColumnOptions:t,getColumnWidth:o,viewportWidth:n,scrollLeft:r,enableVirtualization:s}){const a=t?.width??Vo,l=t?.minWidth??Uo,c=t?.maxWidth??void 0,u=t?.renderCell??Wo,g=t?.sortable??!1,C=t?.resizable??!1,p=t?.draggable??!1,{columns:f,colSpanColumns:m,lastFrozenColumnIndex:I,headerRowsCount:w}=(0,d.useMemo)(()=>{let v=-1,E=1;const j=[];H(e,1);function H($,Y,ue){for(const Z of $){if("children"in Z){const q={name:Z.name,parent:ue,idx:-1,colSpan:0,level:0,headerCellClass:Z.headerCellClass};H(Z.children,Y+1,q);continue}const te=Z.frozen??!1,fe={...Z,parent:ue,idx:0,level:0,frozen:te,width:Z.width??a,minWidth:Z.minWidth??l,maxWidth:Z.maxWidth??c,sortable:Z.sortable??g,resizable:Z.resizable??C,draggable:Z.draggable??p,renderCell:Z.renderCell??u};j.push(fe),te&&v++,Y>E&&(E=Y)}}j.sort(({key:$,frozen:Y},{key:ue,frozen:Z})=>$===ot?-1:ue===ot?1:Y?Z?0:-1:Z?1:0);const W=[];return j.forEach(($,Y)=>{$.idx=Y,Tn($,Y,0),$.colSpan!=null&&W.push($)}),{columns:j,colSpanColumns:W,lastFrozenColumnIndex:v,headerRowsCount:E}},[e,a,l,c,u,C,g,p]),{templateColumns:y,layoutCssVars:k,totalFrozenColumnWidth:x,columnMetrics:R}=(0,d.useMemo)(()=>{const v=new Map;let E=0,j=0;const H=[];for(const $ of f){let Y=o($);typeof Y=="number"?Y=In(Y,$):Y=$.minWidth,H.push(`${Y}px`),v.set($,{width:Y,left:E}),E+=Y}if(I!==-1){const $=v.get(f[I]);j=$.left+$.width}const W={};for(let $=0;$<=I;$++){const Y=f[$];W[`--rdg-frozen-left-${Y.idx}`]=`${v.get(Y).left}px`}return{templateColumns:H,layoutCssVars:W,totalFrozenColumnWidth:j,columnMetrics:v}},[o,f,I]),[L,P]=(0,d.useMemo)(()=>{if(!s)return[0,f.length-1];const v=r+x,E=r+n,j=f.length-1,H=ut(I+1,j);if(v>=E)return[H,H];let W=H;for(;W<j;){const{left:Z,width:te}=R.get(f[W]);if(Z+te>v)break;W++}let $=W;for(;$<j;){const{left:Z,width:te}=R.get(f[$]);if(Z+te>=E)break;$++}const Y=jt(H,W-1),ue=ut(j,$+1);return[Y,ue]},[R,f,I,r,x,n,s]);return{columns:f,colSpanColumns:m,colOverscanStartIdx:L,colOverscanEndIdx:P,templateColumns:y,layoutCssVars:k,headerRowsCount:w,lastFrozenColumnIndex:I,totalFrozenColumnWidth:x}}function Tn(e,t,o){if(o<e.level&&(e.level=o),e.parent!==void 0){const{parent:n}=e;n.idx===-1&&(n.idx=t),n.colSpan+=1,Tn(n,t,o-1)}}const rt=typeof window>"u"?d.useEffect:d.useLayoutEffect;function Yo(e,t,o,n,r,s,a,l,c,u){const g=(0,d.useRef)(r),C=e.length===t.length,p=C&&r!==g.current,f=[...o],m=[];for(const{key:k,idx:x,width:R}of t)typeof R=="string"&&(p||!a.has(k))&&!s.has(k)&&(f[x]=R,m.push(k));const I=f.join(" ");rt(()=>{g.current=r,w(m)});function w(k){k.length!==0&&c(x=>{const R=new Map(x);let L=!1;for(const P of k){const v=Ln(n,P);L||=v!==x.get(P),v===void 0?R.delete(P):R.set(P,v)}return L?R:x})}function y(k,x){const{key:R}=k,L=[...o],P=[];for(const{key:E,idx:j,width:H}of t)if(R===E){const W=typeof x=="number"?`${x}px`:x;L[j]=W}else C&&typeof H=="string"&&!s.has(E)&&(L[j]=H,P.push(E));n.current.style.gridTemplateColumns=L.join(" ");const v=typeof x=="number"?x:Ln(n,R);(0,kt.flushSync)(()=>{l(E=>{const j=new Map(E);return j.set(R,v),j}),w(P)}),u?.(k.idx,v)}return{gridTemplateColumns:I,handleColumnResize:y}}function Ln(e,t){const o=`[data-measuring-cell-key="${CSS.escape(t)}"]`;return e.current?.querySelector(o)?.getBoundingClientRect().width}function Jo(){const e=(0,d.useRef)(null),[t,o]=(0,d.useState)(1),[n,r]=(0,d.useState)(1),[s,a]=(0,d.useState)(0);return rt(()=>{const{ResizeObserver:l}=window;if(l==null)return;const{clientWidth:c,clientHeight:u,offsetWidth:g,offsetHeight:C}=e.current,{width:p,height:f}=e.current.getBoundingClientRect(),m=C-u,I=p-g+c,w=f-m;o(I),r(w),a(m);const y=new l(k=>{const x=k[0].contentBoxSize[0],{clientHeight:R,offsetHeight:L}=e.current;(0,kt.flushSync)(()=>{o(x.inlineSize),r(x.blockSize),a(L-R)})});return y.observe(e.current),()=>{y.disconnect()}},[]),[e,t,n,s]}function be(e){const t=(0,d.useRef)(e);(0,d.useEffect)(()=>{t.current=e});const o=(0,d.useCallback)((...n)=>{t.current(...n)},[]);return e&&o}function ft(e){const[t,o]=(0,d.useState)(!1);t&&!e&&o(!1);function n(s){s.target!==s.currentTarget&&o(!0)}return{tabIndex:e&&!t?0:-1,childTabIndex:e?0:-1,onFocus:e?n:void 0}}function Zo({columns:e,colSpanColumns:t,rows:o,topSummaryRows:n,bottomSummaryRows:r,colOverscanStartIdx:s,colOverscanEndIdx:a,lastFrozenColumnIndex:l,rowOverscanStartIdx:c,rowOverscanEndIdx:u}){const g=(0,d.useMemo)(()=>{if(s===0)return 0;let C=s;const p=(f,m)=>m!==void 0&&f+m>s?(C=f,!0):!1;for(const f of t){const m=f.idx;if(m>=C||p(m,Ie(f,l,{type:"HEADER"})))break;for(let I=c;I<=u;I++){const w=o[I];if(p(m,Ie(f,l,{type:"ROW",row:w})))break}if(n!=null){for(const I of n)if(p(m,Ie(f,l,{type:"SUMMARY",row:I})))break}if(r!=null){for(const I of r)if(p(m,Ie(f,l,{type:"SUMMARY",row:I})))break}}return C},[c,u,o,n,r,s,l,t]);return(0,d.useMemo)(()=>{const C=[];for(let p=0;p<=a;p++){const f=e[p];p<g&&!f.frozen||C.push(f)}return C},[g,a,e])}function Qo({rows:e,rowHeight:t,clientHeight:o,scrollTop:n,enableVirtualization:r}){const{totalRowHeight:s,gridTemplateRows:a,getRowTop:l,getRowHeight:c,findRowIdx:u}=(0,d.useMemo)(()=>{if(typeof t=="number")return{totalRowHeight:t*e.length,gridTemplateRows:` repeat(${e.length}, ${t}px)`,getRowTop:w=>w*t,getRowHeight:()=>t,findRowIdx:w=>vn(w/t)};let p=0,f=" ";const m=e.map(w=>{const y=t(w),k={top:p,height:y};return f+=`${y}px `,p+=y,k}),I=w=>jt(0,ut(e.length-1,w));return{totalRowHeight:p,gridTemplateRows:f,getRowTop:w=>m[I(w)].top,getRowHeight:w=>m[I(w)].height,findRowIdx(w){let y=0,k=m.length-1;for(;y<=k;){const x=y+vn((k-y)/2),R=m[x].top;if(R===w)return x;if(R<w?y=x+1:R>w&&(k=x-1),y>k)return k}return 0}}},[t,e]);let g=0,C=e.length-1;if(r){const f=u(n),m=u(n+o);g=jt(0,f-4),C=ut(e.length-1,m+4)}return{rowOverscanStartIdx:g,rowOverscanEndIdx:C,totalRowHeight:s,gridTemplateRows:a,getRowTop:l,getRowHeight:c,findRowIdx:u}}const qo="c1w9bbhr7-0-0-beta-46",_o="c1creorc7-0-0-beta-46",er=`rdg-cell-drag-handle ${qo}`;function tr({gridRowStart:e,rows:t,column:o,columnWidth:n,maxColIdx:r,isLastRow:s,selectedPosition:a,latestDraggedOverRowIdx:l,isCellEditable:c,onRowsChange:u,onFill:g,onClick:C,setDragging:p,setDraggedOverRowIdx:f}){const{idx:m,rowIdx:I}=a;function w(L){if(L.preventDefault(),L.buttons!==1)return;p(!0),window.addEventListener("mouseover",P),window.addEventListener("mouseup",v);function P(E){E.buttons!==1&&v()}function v(){window.removeEventListener("mouseover",P),window.removeEventListener("mouseup",v),p(!1),y()}}function y(){const L=l.current;if(L===void 0)return;const P=I<L?I+1:L,v=I<L?L+1:I;x(P,v),f(void 0)}function k(L){L.stopPropagation(),x(I+1,t.length)}function x(L,P){const v=t[I],E=[...t],j=[];for(let H=L;H<P;H++)if(c({rowIdx:H,idx:m})){const W=g({columnKey:o.key,sourceRow:v,targetRow:t[H]});W!==t[H]&&(E[H]=W,j.push(H))}j.length>0&&u?.(E,{indexes:j,column:o})}function R(){const L=o.colSpan?.({type:"ROW",row:t[I]})??1,{insetInlineStart:P,...v}=nt(o,L),E="calc(var(--rdg-drag-handle-size) * -0.5 + 1px)",j=o.idx+L-1===r;return{...v,gridRowStart:e,marginInlineEnd:j?void 0:E,marginBlockEnd:s?void 0:E,insetInlineStart:P?`calc(${P} + ${n}px + var(--rdg-drag-handle-size) * -0.5 - 1px)`:void 0}}return(0,i.jsx)("div",{style:R(),className:(0,ze.A)(er,o.frozen&&_o),onClick:C,onMouseDown:w,onDoubleClick:k})}const nr="cis5rrm7-0-0-beta-46";function or({column:e,colSpan:t,row:o,rowIdx:n,onRowChange:r,closeEditor:s,onKeyDown:a,navigate:l}){const c=(0,d.useRef)(void 0),u=e.editorOptions?.commitOnOutsideClick!==!1,g=be(()=>{f(!0,!1)});(0,d.useEffect)(()=>{if(!u)return;function y(){c.current=requestAnimationFrame(g)}return addEventListener("mousedown",y,{capture:!0}),()=>{removeEventListener("mousedown",y,{capture:!0}),C()}},[u,g]);function C(){cancelAnimationFrame(c.current)}function p(y){if(a){const k=ct(y);if(a({mode:"EDIT",row:o,column:e,rowIdx:n,navigate(){l(y)},onClose:f},k),k.isGridDefaultPrevented())return}y.key==="Escape"?f():y.key==="Enter"?f(!0):Ro(y)&&l(y)}function f(y=!1,k=!0){y?r(o,!0,k):s(k)}function m(y,k=!1){r(y,k,k)}const{cellClass:I}=e,w=dt(e,"rdg-editor-container",typeof I=="function"?I(o):I,!e.editorOptions?.displayCellContent&&nr);return(0,i.jsx)("div",{role:"gridcell","aria-colindex":e.idx+1,"aria-colspan":t,"aria-selected":!0,className:w,style:nt(e,t),onKeyDown:p,onMouseDownCapture:C,children:e.renderEditCell!=null&&(0,i.jsxs)(i.Fragment,{children:[e.renderEditCell({column:e,row:o,rowIdx:n,onRowChange:m,onClose:f}),e.editorOptions?.displayCellContent&&e.renderCell({column:e,row:o,rowIdx:n,isCellEditable:!0,tabIndex:-1,onRowChange:m})]})})}function rr({column:e,rowIdx:t,isCellSelected:o,selectCell:n}){const{tabIndex:r,onFocus:s}=ft(o),{colSpan:a}=e,l=kn(e,t),c=e.idx+1;function u(){n({idx:e.idx,rowIdx:t})}return(0,i.jsx)("div",{role:"columnheader","aria-colindex":c,"aria-colspan":a,"aria-rowspan":l,"aria-selected":o,tabIndex:r,className:(0,ze.A)(Rn,e.headerCellClass),style:{...Sn(e,t,l),gridColumnStart:c,gridColumnEnd:c+a},onFocus:s,onClick:u,children:e.name})}const sr="h44jtk67-0-0-beta-46",lr="rdg-header-sort-name hcgkhxz7-0-0-beta-46";function ir({column:e,sortDirection:t,priority:o}){return e.sortable?(0,i.jsx)(ar,{sortDirection:t,priority:o,children:e.name}):e.name}function ar({sortDirection:e,priority:t,children:o}){const n=Lt().renderSortStatus;return(0,i.jsxs)("span",{className:sr,children:[(0,i.jsx)("span",{className:lr,children:o}),(0,i.jsx)("span",{children:n({sortDirection:e,priority:t})})]})}const cr="c6l2wv17-0-0-beta-46",dr="rdg-cell-resizable c1kqdw7y7-0-0-beta-46",ur="r1y6ywlx7-0-0-beta-46",fr="rdg-cell-draggable",gr="rdg-cell-dragging c1bezg5o7-0-0-beta-46",hr="rdg-cell-drag-over c1vc96037-0-0-beta-46";function pr({column:e,colSpan:t,rowIdx:o,isCellSelected:n,onColumnResize:r,onColumnsReorder:s,sortColumns:a,onSortColumnsChange:l,selectCell:c,shouldFocusGrid:u,direction:g,dragDropKey:C}){const[p,f]=(0,d.useState)(!1),[m,I]=(0,d.useState)(!1),w=g==="rtl",y=kn(e,o),{tabIndex:k,childTabIndex:x,onFocus:R}=ft(n),L=a?.findIndex(M=>M.columnKey===e.key),P=L!==void 0&&L>-1?a[L]:void 0,v=P?.direction,E=P!==void 0&&a.length>1?L+1:void 0,j=v&&!E?v==="ASC"?"ascending":"descending":void 0,{sortable:H,resizable:W,draggable:$}=e,Y=dt(e,e.headerCellClass,H&&cr,W&&dr,$&&fr,p&&gr,m&&hr),ue=e.renderHeaderCell??ir;function Z(M){if(M.pointerType==="mouse"&&M.buttons!==1)return;M.preventDefault();const{currentTarget:_,pointerId:ne}=M,ge=_.parentElement,{right:we,left:le}=ge.getBoundingClientRect(),Se=w?M.clientX-le:we-M.clientX;function Ee(De){const{right:$e,left:je}=ge.getBoundingClientRect(),We=w?$e+Se-De.clientX:De.clientX+Se-je;We>0&&r(e,In(We,e))}function Ce(){_.removeEventListener("pointermove",Ee),_.removeEventListener("lostpointercapture",Ce)}_.setPointerCapture(ne),_.addEventListener("pointermove",Ee),_.addEventListener("lostpointercapture",Ce)}function te(M){if(l==null)return;const{sortDescendingFirst:_}=e;if(P===void 0){const ne={columnKey:e.key,direction:_?"DESC":"ASC"};l(a&&M?[...a,ne]:[ne])}else{let ne;if((_===!0&&v==="DESC"||_!==!0&&v==="ASC")&&(ne={columnKey:e.key,direction:v==="ASC"?"DESC":"ASC"}),M){const ge=[...a];ne?ge[L]=ne:ge.splice(L,1),l(ge)}else l(ne?[ne]:[])}}function fe(M){c({idx:e.idx,rowIdx:o}),H&&te(M.ctrlKey||M.metaKey)}function q(){r(e,"max-content")}function me(M){R?.(M),u&&c({idx:0,rowIdx:o})}function xe(M){(M.key===" "||M.key==="Enter")&&(M.preventDefault(),te(M.ctrlKey||M.metaKey))}function T(M){M.dataTransfer.setData(C,e.key),M.dataTransfer.dropEffect="move",f(!0)}function S(){f(!1)}function F(M){M.preventDefault(),M.dataTransfer.dropEffect="move"}function A(M){if(I(!1),M.dataTransfer.types.includes(C)){const _=M.dataTransfer.getData(C);_!==e.key&&(M.preventDefault(),s?.(_,e.key))}}function V(M){An(M)&&I(!0)}function Q(M){An(M)&&I(!1)}let U;return $&&(U={draggable:!0,onDragStart:T,onDragEnd:S,onDragOver:F,onDragEnter:V,onDragLeave:Q,onDrop:A}),(0,i.jsxs)("div",{role:"columnheader","aria-colindex":e.idx+1,"aria-colspan":t,"aria-rowspan":y,"aria-selected":n,"aria-sort":j,tabIndex:u?0:k,className:Y,style:{...Sn(e,o,y),...nt(e,t)},onFocus:me,onClick:fe,onKeyDown:H?xe:void 0,...U,children:[ue({column:e,sortDirection:v,priority:E,tabIndex:x}),W&&(0,i.jsx)("div",{className:ur,onClick:yo,onDoubleClick:q,onPointerDown:Z})]})}function An(e){const t=e.relatedTarget;return!e.currentTarget.contains(t)}const Qt="rdg-row r1upfr807-0-0-beta-46",mr="r190mhd37-0-0-beta-46",At="rdg-row-selected",xr="r139qu9m7-0-0-beta-46",Cr="rdg-top-summary-row",yr="rdg-bottom-summary-row",Nn="rdg-header-row h10tskcx7-0-0-beta-46";function wr({rowIdx:e,columns:t,onColumnResize:o,onColumnsReorder:n,sortColumns:r,onSortColumnsChange:s,lastFrozenColumnIndex:a,selectedCellIdx:l,selectCell:c,shouldFocusGrid:u,direction:g}){const C=(0,d.useId)(),p=[];for(let f=0;f<t.length;f++){const m=t[f],I=Ie(m,a,{type:"HEADER"});I!==void 0&&(f+=I-1),p.push((0,i.jsx)(pr,{column:m,colSpan:I,rowIdx:e,isCellSelected:l===m.idx,onColumnResize:o,onColumnsReorder:n,onSortColumnsChange:s,sortColumns:r,selectCell:c,shouldFocusGrid:u&&f===0,direction:g,dragDropKey:C},m.key))}return(0,i.jsx)("div",{role:"row","aria-rowindex":e,className:(0,ze.A)(Nn,l===-1&&At),children:p})}const br=(0,d.memo)(wr);function Rr({rowIdx:e,level:t,columns:o,selectedCellIdx:n,selectCell:r}){const s=[],a=new Set;for(const l of o){let{parent:c}=l;if(c!==void 0){for(;c.level>t&&c.parent!==void 0;)c=c.parent;if(c.level===t&&!a.has(c)){a.add(c);const{idx:u}=c;s.push((0,i.jsx)(rr,{column:c,rowIdx:e,isCellSelected:n===u,selectCell:r},u))}}}return(0,i.jsx)("div",{role:"row","aria-rowindex":e,className:Nn,children:s})}const Sr=(0,d.memo)(Rr),vr="rdg-cell-copied c6ra8a37-0-0-beta-46",Ir="rdg-cell-dragged-over cq910m07-0-0-beta-46";function kr({column:e,colSpan:t,isCellSelected:o,isCopied:n,isDraggedOver:r,row:s,rowIdx:a,onClick:l,onDoubleClick:c,onContextMenu:u,onRowChange:g,selectCell:C,...p}){const{tabIndex:f,childTabIndex:m,onFocus:I}=ft(o),{cellClass:w}=e,y=dt(e,typeof w=="function"?w(s):w,n&&vr,r&&Ir),k=bn(e,s);function x(E){C({rowIdx:a,idx:e.idx},E)}function R(E){if(l){const j=ct(E);if(l({row:s,column:e,selectCell:x},j),j.isGridDefaultPrevented())return}x()}function L(E){if(u){const j=ct(E);if(u({row:s,column:e,selectCell:x},j),j.isGridDefaultPrevented())return}x()}function P(E){if(c){const j=ct(E);if(c({row:s,column:e,selectCell:x},j),j.isGridDefaultPrevented())return}x(!0)}function v(E){g(e,E)}return(0,i.jsx)("div",{role:"gridcell","aria-colindex":e.idx+1,"aria-colspan":t,"aria-selected":o,"aria-readonly":!k||void 0,tabIndex:f,className:y,style:nt(e,t),onClick:R,onDoubleClick:P,onContextMenu:L,onFocus:I,...p,children:e.renderCell({column:e,row:s,rowIdx:a,isCellEditable:k,tabIndex:m,onRowChange:v})})}const Er=(0,d.memo)(kr);function Dr({className:e,rowIdx:t,gridRowStart:o,selectedCellIdx:n,isRowSelected:r,copiedCellIdx:s,draggedOverCellIdx:a,lastFrozenColumnIndex:l,row:c,viewportColumns:u,selectedCellEditor:g,onCellClick:C,onCellDoubleClick:p,onCellContextMenu:f,rowClass:m,setDraggedOverRowIdx:I,onMouseEnter:w,onRowChange:y,selectCell:k,...x},R){const L=be((E,j)=>{y(E,t,j)});function P(E){I?.(t),w?.(E)}e=(0,ze.A)(Qt,`rdg-row-${t%2===0?"even":"odd"}`,m?.(c,t),e,n===-1&&At);const v=[];for(let E=0;E<u.length;E++){const j=u[E],{idx:H}=j,W=Ie(j,l,{type:"ROW",row:c});W!==void 0&&(E+=W-1);const $=n===H;$&&g?v.push(g):v.push((0,i.jsx)(Er,{column:j,colSpan:W,row:c,rowIdx:t,isCopied:s===H,isDraggedOver:a===H,isCellSelected:$,onClick:C,onDoubleClick:p,onContextMenu:f,onRowChange:L,selectCell:k},j.key))}return(0,i.jsx)(Jt,{value:r,children:(0,i.jsx)("div",{role:"row",ref:R,className:e,onMouseEnter:P,style:Xt(o),...x,children:v})})}const Mn=(0,d.memo)((0,d.forwardRef)(Dr)),On=Mn;function Pn(e,t){return(0,i.jsx)(Mn,{...t},e)}function jr({scrollToPosition:{idx:e,rowIdx:t},gridElement:o,setScrollToCellPosition:n}){const r=(0,d.useRef)(null);return rt(()=>{Et(r.current)}),rt(()=>{function s(){n(null)}const a=new IntersectionObserver(s,{root:o,threshold:1});return a.observe(r.current),()=>{a.disconnect()}},[o,n]),(0,i.jsx)("div",{ref:r,style:{gridColumn:e===void 0?"1/-1":e+1,gridRow:t===void 0?"1/-1":t+2}})}const Tr="rdg-sort-arrow a3ejtar7-0-0-beta-46";function Lr({sortDirection:e,priority:t}){return(0,i.jsxs)(i.Fragment,{children:[Ar({sortDirection:e}),Nr({priority:t})]})}function Ar({sortDirection:e}){return e===void 0?null:(0,i.jsx)("svg",{viewBox:"0 0 12 8",width:"12",height:"8",className:Tr,"aria-hidden":!0,children:(0,i.jsx)("path",{d:e==="ASC"?"M0 8 6 0 12 8":"M0 0 6 8 12 0"})})}function Nr({priority:e}){return e}const Mr="rdg rnvodz57-0-0-beta-46",Or="rdg-viewport-dragging vlqv91k7-0-0-beta-46",Pr="f1lsfrzw7-0-0-beta-46",Fr="f1cte0lg7-0-0-beta-46",Hr="s8wc6fl7-0-0-beta-46";function Wr({column:e,colSpan:t,row:o,rowIdx:n,isCellSelected:r,selectCell:s}){const{tabIndex:a,childTabIndex:l,onFocus:c}=ft(r),{summaryCellClass:u}=e,g=dt(e,Hr,typeof u=="function"?u(o):u);function C(){s({rowIdx:n,idx:e.idx})}return(0,i.jsx)("div",{role:"gridcell","aria-colindex":e.idx+1,"aria-colspan":t,"aria-selected":r,tabIndex:a,className:g,style:nt(e,t),onClick:C,onFocus:c,children:e.renderSummaryCell?.({column:e,row:o,tabIndex:l})})}const Gr=(0,d.memo)(Wr),$r="skuhp557-0-0-beta-46",zr="tf8l5ub7-0-0-beta-46",Br=`rdg-summary-row ${$r}`;function Kr({rowIdx:e,gridRowStart:t,row:o,viewportColumns:n,top:r,bottom:s,lastFrozenColumnIndex:a,selectedCellIdx:l,isTop:c,selectCell:u,"aria-rowindex":g}){const C=[];for(let p=0;p<n.length;p++){const f=n[p],m=Ie(f,a,{type:"SUMMARY",row:o});m!==void 0&&(p+=m-1);const I=l===f.idx;C.push((0,i.jsx)(Gr,{column:f,colSpan:m,row:o,rowIdx:e,isCellSelected:I,selectCell:u},f.key))}return(0,i.jsx)("div",{role:"row","aria-rowindex":g,className:(0,ze.A)(Qt,`rdg-row-${e%2===0?"even":"odd"}`,Br,c?`${Cr} ${zr}`:yr,l===-1&&At),style:{...Xt(t),"--rdg-summary-row-top":r!==void 0?`${r}px`:void 0,"--rdg-summary-row-bottom":s!==void 0?`${s}px`:void 0},children:C})}const Fn=(0,d.memo)(Kr);function Vr(e,t){const{columns:o,rows:n,topSummaryRows:r,bottomSummaryRows:s,rowKeyGetter:a,onRowsChange:l,rowHeight:c,headerRowHeight:u,summaryRowHeight:g,selectedRows:C,onSelectedRowsChange:p,sortColumns:f,onSortColumnsChange:m,defaultColumnOptions:I,onCellClick:w,onCellDoubleClick:y,onCellContextMenu:k,onCellKeyDown:x,onSelectedCellChange:R,onScroll:L,onColumnResize:P,onColumnsReorder:v,onFill:E,onCopy:j,onPaste:H,enableVirtualization:W,renderers:$,className:Y,style:ue,rowClass:Z,direction:te,role:fe,"aria-label":q,"aria-labelledby":me,"aria-describedby":xe,"aria-rowcount":T,"data-testid":S}=e,F=Lt(),A=fe??"grid",V=c??35,Q=u??(typeof V=="number"?V:35),U=g??(typeof V=="number"?V:35),M=$?.renderRow??F?.renderRow??Pn,_=$?.renderSortStatus??F?.renderSortStatus??Lr,ne=$?.renderCheckbox??F?.renderCheckbox??Mo,ge=$?.noRowsFallback??F?.noRowsFallback,we=W??!0,le=te??"ltr",[Se,Ee]=(0,d.useState)(0),[Ce,De]=(0,d.useState)(0),[$e,je]=(0,d.useState)(()=>new Map),[We,cn]=(0,d.useState)(()=>new Map),[ve,Ke]=(0,d.useState)(null),[Ve,Pt]=(0,d.useState)(!1),[Ae,Ft]=(0,d.useState)(void 0),[et,pt]=(0,d.useState)(null),mt=(0,d.useCallback)(h=>$e.get(h.key)??We.get(h.key)??h.width,[We,$e]),[Ne,Me,tt,xt]=Jo(),{columns:oe,colSpanColumns:lt,lastFrozenColumnIndex:ye,headerRowsCount:Oe,colOverscanStartIdx:Ht,colOverscanEndIdx:Wt,templateColumns:dn,layoutCssVars:Ct,totalFrozenColumnWidth:Gt}=Xo({rawColumns:o,defaultColumnOptions:I,getColumnWidth:mt,scrollLeft:Ce,viewportWidth:Me,enableVirtualization:we}),Ue=r?.length??0,Xe=s?.length??0,yt=Ue+Xe,Ye=Oe+Ue,wt=Oe-1,N=-Ye,O=N+wt,J=n.length+Xe-1,[b,re]=(0,d.useState)(()=>({idx:-1,rowIdx:N-1,mode:"SELECT"})),ie=(0,d.useRef)(b),Pe=(0,d.useRef)(Ae),Je=(0,d.useRef)(-1),bt=(0,d.useRef)(null),$t=(0,d.useRef)(!1),un=A==="treegrid",fn=Oe*Q,oo=yt*U,zt=tt-fn-oo,gn=C!=null&&p!=null,ro=le==="rtl",Al=ro?"ArrowRight":"ArrowLeft",so=ro?"ArrowLeft":"ArrowRight",lo=T??Oe+n.length+yt,Nl=(0,d.useMemo)(()=>({renderCheckbox:ne,renderSortStatus:_}),[ne,_]),Ml=(0,d.useMemo)(()=>{const{length:h}=n;return h!==0&&C!=null&&a!=null&&C.size>=h&&n.every(D=>C.has(a(D)))},[n,C,a]),{rowOverscanStartIdx:Rt,rowOverscanEndIdx:St,totalRowHeight:hn,gridTemplateRows:Ol,getRowTop:io,getRowHeight:Pl,findRowIdx:ao}=Qo({rows:n,rowHeight:V,clientHeight:zt,scrollTop:Se,enableVirtualization:we}),Ze=Zo({columns:oe,colSpanColumns:lt,colOverscanStartIdx:Ht,colOverscanEndIdx:Wt,lastFrozenColumnIndex:ye,rowOverscanStartIdx:Rt,rowOverscanEndIdx:St,rows:n,topSummaryRows:r,bottomSummaryRows:s}),{gridTemplateColumns:Fl,handleColumnResize:Hl}=Yo(oe,Ze,dn,Ne,Me,$e,We,je,cn,P),Wl=un?-1:0,it=oe.length-1,pn=Cn(b),Bt=ho(b),Gl=Q+hn+oo+xt,$l=be(Hl),zl=be(v),Bl=be(m),Kl=be(w),Vl=be(y),Ul=be(k),Xl=be(uo),Yl=be(Kt),mn=be(vt),co=be(({idx:h,rowIdx:D})=>{vt({rowIdx:N+D-1,idx:h})});rt(()=>{if(!pn||qt(b,ie.current)){ie.current=b;return}ie.current=b,b.idx===-1&&(bt.current.focus({preventScroll:!0}),Et(bt.current))}),rt(()=>{$t.current&&($t.current=!1,mo())}),(0,d.useImperativeHandle)(t,()=>({element:Ne.current,scrollToCell({idx:h,rowIdx:D}){const G=h!==void 0&&h>ye&&h<oe.length?h:void 0,z=D!==void 0&&at(D)?D:void 0;(G!==void 0||z!==void 0)&&pt({idx:G,rowIdx:z})},selectCell:vt}));const xn=(0,d.useCallback)(h=>{Ft(h),Pe.current=h},[]);function uo(h){if(!p)return;if(Tt(a),h.type==="HEADER"){const pe=new Set(C);for(const Te of n){const Fe=a(Te);h.checked?pe.add(Fe):pe.delete(Fe)}p(pe);return}const{row:D,checked:G,isShiftClick:z}=h,ee=new Set(C),se=a(D),ae=Je.current,ce=n.indexOf(D);if(Je.current=ce,G?ee.add(se):ee.delete(se),z&&ae!==-1&&ae!==ce&&ae<n.length){const pe=To(ce-ae);for(let Te=ae+pe;Te!==ce;Te+=pe){const Fe=n[Te];G?ee.add(a(Fe)):ee.delete(a(Fe))}}p(ee)}function Jl(h){const{idx:D,rowIdx:G,mode:z}=b;if(z==="EDIT")return;if(x&&at(G)){const ce=n[G],pe=ct(h);if(x({mode:"SELECT",row:ce,column:oe[D],rowIdx:G,selectCell:vt},pe),pe.isGridDefaultPrevented())return}if(!(h.target instanceof Element))return;const ee=h.target.closest(".rdg-cell")!==null,se=un&&h.target===bt.current;if(!ee&&!se)return;const{keyCode:ae}=h;if(Bt&&(H!=null||j!=null)&&Dt(h)){if(ae===67){if(window.getSelection()?.isCollapsed===!1)return;Ql();return}if(ae===86){ql();return}}switch(h.key){case"Escape":Ke(null);return;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Tab":case"Home":case"End":case"PageUp":case"PageDown":po(h);break;default:_l(h);break}}function Zl(h){const{scrollTop:D,scrollLeft:G}=h.currentTarget;(0,kt.flushSync)(()=>{Ee(D),De(Lo(G))}),L?.(h)}function Kt(h,D,G){if(typeof l!="function"||G===n[D])return;const z=[...n];z[D]=G,l(z,{indexes:[D],column:h})}function fo(){b.mode==="EDIT"&&Kt(oe[b.idx],b.rowIdx,b.row)}function Ql(){const{idx:h,rowIdx:D}=b,G=n[D],z=oe[h].key;Ke({row:G,columnKey:z}),j?.({sourceRow:G,sourceColumnKey:z})}function ql(){if(!H||!l||ve===null||!Vt(b))return;const{idx:h,rowIdx:D}=b,G=oe[h],z=n[D],ee=H({sourceRow:ve.row,sourceColumnKey:ve.columnKey,targetRow:z,targetColumnKey:G.key});Kt(G,D,ee)}function _l(h){if(!Bt)return;const D=n[b.rowIdx],{key:G,shiftKey:z}=h;if(gn&&z&&G===" "){Tt(a);const ee=a(D);uo({type:"ROW",row:D,checked:!C.has(ee),isShiftClick:!1}),h.preventDefault();return}Vt(b)&&bo(h)&&re(({idx:ee,rowIdx:se})=>({idx:ee,rowIdx:se,mode:"EDIT",row:D,originalRow:D}))}function go(h){return h>=Wl&&h<=it}function at(h){return h>=0&&h<n.length}function Cn({idx:h,rowIdx:D}){return D>=N&&D<=J&&go(h)}function ei({idx:h,rowIdx:D}){return at(D)&&h>=0&&h<=it}function ho({idx:h,rowIdx:D}){return at(D)&&go(h)}function Vt(h){return ei(h)&&Io({columns:oe,rows:n,selectedPosition:h})}function vt(h,D){if(!Cn(h))return;fo();const G=n[h.rowIdx],z=qt(b,h);D&&Vt(h)?re({...h,mode:"EDIT",row:G,originalRow:G}):z?Et(Hn(Ne.current)):($t.current=!0,re({...h,mode:"SELECT"})),R&&!z&&R({rowIdx:h.rowIdx,row:G,column:oe[h.idx]})}function ti(h,D,G){const{idx:z,rowIdx:ee}=b,se=pn&&z===-1;switch(h){case"ArrowUp":return{idx:z,rowIdx:ee-1};case"ArrowDown":return{idx:z,rowIdx:ee+1};case Al:return{idx:z-1,rowIdx:ee};case so:return{idx:z+1,rowIdx:ee};case"Tab":return{idx:z+(G?-1:1),rowIdx:ee};case"Home":return se?{idx:z,rowIdx:N}:{idx:0,rowIdx:D?N:ee};case"End":return se?{idx:z,rowIdx:J}:{idx:it,rowIdx:D?J:ee};case"PageUp":{if(b.rowIdx===N)return b;const ae=io(ee)+Pl(ee)-zt;return{idx:z,rowIdx:ae>0?ao(ae):0}}case"PageDown":{if(b.rowIdx>=n.length)return b;const ae=io(ee)+zt;return{idx:z,rowIdx:ae<hn?ao(ae):n.length-1}}default:return b}}function po(h){const{key:D,shiftKey:G}=h;let z="NONE";if(D==="Tab"){if(Do({shiftKey:G,maxColIdx:it,minRowIdx:N,maxRowIdx:J,selectedPosition:b})){fo();return}z="CHANGE_ROW"}h.preventDefault();const ee=Dt(h),se=ti(D,ee,G);if(qt(b,se))return;const ae=Eo({moveUp:D==="ArrowUp",moveNext:D===so||D==="Tab"&&!G,columns:oe,colSpanColumns:lt,rows:n,topSummaryRows:r,bottomSummaryRows:s,minRowIdx:N,mainHeaderRowIdx:O,maxRowIdx:J,lastFrozenColumnIndex:ye,cellNavigationMode:z,currentPosition:b,nextPosition:se,isCellWithinBounds:Cn});vt(ae)}function ni(h){if(Ae===void 0)return;const{rowIdx:D}=b;return(D<Ae?D<h&&h<=Ae:D>h&&h>=Ae)?b.idx:void 0}function mo(){const h=Hn(Ne.current);if(h===null)return;Et(h),(h.querySelector('[tabindex="0"]')??h).focus({preventScroll:!0})}function oi(){if(E==null||b.mode==="EDIT"||!ho(b))return;const{idx:h,rowIdx:D}=b,G=oe[h];if(G.renderEditCell==null||G.editable===!1)return;const z=mt(G);return(0,i.jsx)(tr,{gridRowStart:Ye+D+1,rows:n,column:G,columnWidth:z,maxColIdx:it,isLastRow:D===J,selectedPosition:b,isCellEditable:Vt,latestDraggedOverRowIdx:Pe,onRowsChange:l,onClick:mo,onFill:E,setDragging:Pt,setDraggedOverRowIdx:xn})}function ri(h){if(b.rowIdx!==h||b.mode==="SELECT")return;const{idx:D,row:G}=b,z=oe[D],ee=Ie(z,ye,{type:"ROW",row:G}),se=ce=>{$t.current=ce,re(({idx:pe,rowIdx:Te})=>({idx:pe,rowIdx:Te,mode:"SELECT"}))},ae=(ce,pe,Te)=>{pe?(0,kt.flushSync)(()=>{Kt(z,b.rowIdx,ce),se(Te)}):re(Fe=>({...Fe,row:ce}))};return n[b.rowIdx]!==b.originalRow&&se(!1),(0,i.jsx)(or,{column:z,colSpan:ee,row:G,rowIdx:h,onRowChange:ae,closeEditor:se,onKeyDown:x,navigate:po},z.key)}function It(h){const D=b.idx===-1?void 0:oe[b.idx];return D!==void 0&&b.rowIdx===h&&!Ze.includes(D)?b.idx>Wt?[...Ze,D]:[...Ze.slice(0,ye+1),D,...Ze.slice(ye+1)]:Ze}function si(){const h=[],{idx:D,rowIdx:G}=b,z=Bt&&G<Rt?Rt-1:Rt,ee=Bt&&G>St?St+1:St;for(let se=z;se<=ee;se++){const ae=se===Rt-1||se===St+1,ce=ae?G:se;let pe=Ze;const Te=D===-1?void 0:oe[D];Te!==void 0&&(ae?pe=[Te]:pe=It(ce));const Fe=n[ce],li=Ye+ce+1;let yn=ce,wn=!1;typeof a=="function"&&(yn=a(Fe),wn=C?.has(yn)??!1),h.push(M(yn,{"aria-rowindex":Ye+ce+1,"aria-selected":gn?wn:void 0,rowIdx:ce,row:Fe,viewportColumns:pe,isRowSelected:wn,onCellClick:Kl,onCellDoubleClick:Vl,onCellContextMenu:Ul,rowClass:Z,gridRowStart:li,copiedCellIdx:ve!==null&&ve.row===Fe?oe.findIndex(ii=>ii.key===ve.columnKey):void 0,selectedCellIdx:G===ce?D:void 0,draggedOverCellIdx:ni(ce),setDraggedOverRowIdx:Ve?xn:void 0,lastFrozenColumnIndex:ye,onRowChange:Yl,selectCell:mn,selectedCellEditor:ri(ce)}))}return h}(b.idx>it||b.rowIdx>J)&&(re({idx:-1,rowIdx:N-1,mode:"SELECT"}),xn(void 0));let Ut=`repeat(${Oe}, ${Q}px)`;Ue>0&&(Ut+=` repeat(${Ue}, ${U}px)`),n.length>0&&(Ut+=Ol),Xe>0&&(Ut+=` repeat(${Xe}, ${U}px)`);const xo=b.idx===-1&&b.rowIdx!==N-1;return(0,i.jsxs)("div",{role:A,"aria-label":q,"aria-labelledby":me,"aria-describedby":xe,"aria-multiselectable":gn?!0:void 0,"aria-colcount":oe.length,"aria-rowcount":lo,className:(0,ze.A)(Mr,Y,Ve&&Or),style:{...ue,scrollPaddingInlineStart:b.idx>ye||et?.idx!==void 0?`${Gt}px`:void 0,scrollPaddingBlock:at(b.rowIdx)||et?.rowIdx!==void 0?`${fn+Ue*U}px ${Xe*U}px`:void 0,gridTemplateColumns:Fl,gridTemplateRows:Ut,"--rdg-header-row-height":`${Q}px`,"--rdg-scroll-height":`${Gl}px`,...Ct},dir:le,ref:Ne,onScroll:Zl,onKeyDown:Jl,"data-testid":S,children:[(0,i.jsx)(Go,{value:Nl,children:(0,i.jsxs)($o,{value:Xl,children:[(0,i.jsxs)(Jt,{value:Ml,children:[Array.from({length:wt},(h,D)=>(0,i.jsx)(Sr,{rowIdx:D+1,level:-wt+D,columns:It(N+D),selectedCellIdx:b.rowIdx===N+D?b.idx:void 0,selectCell:co},D)),(0,i.jsx)(br,{rowIdx:Oe,columns:It(O),onColumnResize:$l,onColumnsReorder:zl,sortColumns:f,onSortColumnsChange:Bl,lastFrozenColumnIndex:ye,selectedCellIdx:b.rowIdx===O?b.idx:void 0,selectCell:co,shouldFocusGrid:!pn,direction:le})]}),n.length===0&&ge?ge:(0,i.jsxs)(i.Fragment,{children:[r?.map((h,D)=>{const G=Oe+1+D,z=O+1+D,ee=b.rowIdx===z,se=fn+U*D;return(0,i.jsx)(Fn,{"aria-rowindex":G,rowIdx:z,gridRowStart:G,row:h,top:se,bottom:void 0,viewportColumns:It(z),lastFrozenColumnIndex:ye,selectedCellIdx:ee?b.idx:void 0,isTop:!0,selectCell:mn},D)}),si(),s?.map((h,D)=>{const G=Ye+n.length+D+1,z=n.length+D,ee=b.rowIdx===z,se=zt>hn?tt-U*(s.length-D):void 0,ae=se===void 0?U*(s.length-1-D):void 0;return(0,i.jsx)(Fn,{"aria-rowindex":lo-Xe+D+1,rowIdx:z,gridRowStart:G,row:h,top:se,bottom:ae,viewportColumns:It(z),lastFrozenColumnIndex:ye,selectedCellIdx:ee?b.idx:void 0,isTop:!1,selectCell:mn},D)})]})]})}),oi(),vo(Ze),un&&(0,i.jsx)("div",{ref:bt,tabIndex:xo?0:-1,className:(0,ze.A)(Pr,xo&&[mr,ye!==-1&&xr],!at(b.rowIdx)&&Fr),style:{gridRowStart:b.rowIdx+Ye+1}}),et!==null&&(0,i.jsx)(jr,{scrollToPosition:et,setScrollToCellPosition:pt,gridElement:Ne.current})]})}function Hn(e){return e.querySelector(':scope > [role="row"] > [tabindex="0"]')}function qt(e,t){return e.idx===t.idx&&e.rowIdx===t.rowIdx}const _t=(0,d.forwardRef)(Vr);function Ei({id:e,groupKey:t,childRows:o,isExpanded:n,isCellSelected:r,column:s,row:a,groupColumnIndex:l,isGroupByColumn:c,toggleGroup:u}){const{tabIndex:g,childTabIndex:C,onFocus:p}=ft(r);function f(){u(e)}const m=c&&l===s.idx;return jsx("div",{role:"gridcell","aria-colindex":s.idx+1,"aria-selected":r,tabIndex:g,className:dt(s),style:{...nt(s),cursor:m?"pointer":"default"},onClick:m?f:void 0,onFocus:p,children:(!c||m)&&s.renderGroupCell?.({groupKey:t,childRows:o,column:s,row:a,isExpanded:n,tabIndex:C,toggleGroup:f})},s.key)}const Ur=null,Di="g1yxluv37-0-0-beta-46",Xr=null;function ji({className:e,row:t,rowIdx:o,viewportColumns:n,selectedCellIdx:r,isRowSelected:s,selectCell:a,gridRowStart:l,groupBy:c,toggleGroup:u,...g}){const C=n[0].key===ot?t.level+1:t.level;function p(){a({rowIdx:o,idx:-1})}return jsx(Jt,{value:s,children:jsx("div",{role:"row","aria-level":t.level+1,"aria-setsize":t.setSize,"aria-posinset":t.posInSet+1,"aria-expanded":t.isExpanded,className:clsx(Qt,Xr,`rdg-row-${o%2===0?"even":"odd"}`,e,r===-1&&At),onClick:p,style:Xt(l),...g,children:n.map(f=>jsx(Ur,{id:t.id,groupKey:t.groupKey,childRows:t.childRows,isExpanded:t.isExpanded,isCellSelected:r===f.idx,column:f,row:t,groupColumnIndex:C,toggleGroup:u,isGroupByColumn:c.includes(f.key)},f.key))})})}const Yr=null;function Ti({columns:e,rows:t,rowHeight:o,rowKeyGetter:n,onCellKeyDown:r,onRowsChange:s,selectedRows:a,onSelectedRowsChange:l,renderers:c,groupBy:u,rowGrouper:g,expandedGroupIds:C,onExpandedGroupIdsChange:p,...f},m){const I=Lt(),w=c?.renderRow??I?.renderRow??Pn,y=1+(f.topSummaryRows?.length??0),k=f.direction==="rtl",x=k?"ArrowRight":"ArrowLeft",R=k?"ArrowLeft":"ArrowRight",L=be(me),{columns:P,groupBy:v}=useMemo(()=>{const T=[...e].sort(({key:F},{key:A})=>F===ot?-1:A===ot?1:u.includes(F)?u.includes(A)?u.indexOf(F)-u.indexOf(A):-1:u.includes(A)?1:0),S=[];for(const[F,A]of T.entries())u.includes(A.key)&&(S.push(A.key),T[F]={...A,frozen:!0,renderCell:()=>null,renderGroupCell:A.renderGroupCell??Fo,editable:!1});return{columns:T,groupBy:S}},[e,u]),[E,j]=useMemo(()=>{if(v.length===0)return[void 0,t.length];const T=(S,[F,...A],V)=>{let Q=0;const U={};for(const[M,_]of Object.entries(g(S,F))){const[ne,ge]=A.length===0?[_,_.length]:T(_,A,V+Q+1);U[M]={childRows:_,childGroups:ne,startRowIndex:V+Q},Q+=ge+1}return[U,Q]};return T(t,v,0)},[v,g,t]),[H,W]=useMemo(()=>{const T=new Set;if(!E)return[t,A];const S=[],F=(V,Q,U)=>{if(Jr(V)){S.push(...V);return}Object.keys(V).forEach((M,_,ne)=>{const ge=Q!==void 0?`${Q}__${M}`:M,we=C.has(ge),{childRows:le,childGroups:Se,startRowIndex:Ee}=V[M],Ce={id:ge,parentId:Q,groupKey:M,isExpanded:we,childRows:le,level:U,posInSet:_,startRowIndex:Ee,setSize:ne.length};S.push(Ce),T.add(Ce),we&&F(Se,ge,U+1)})};return F(E,void 0,0),[S,A];function A(V){return T.has(V)}},[C,E,t]),$=useMemo(()=>typeof o=="function"?T=>W(T)?o({type:"GROUP",row:T}):o({type:"ROW",row:T}):o,[W,o]),Y=useCallback(T=>{const S=H.indexOf(T);for(let F=S-1;F>=0;F--){const A=H[F];if(W(A)&&(!W(T)||T.parentId===A.id))return[A,F]}},[W,H]),ue=useCallback(T=>{if(W(T))return T.id;if(typeof n=="function")return n(T);const S=Y(T);if(S!==void 0){const{startRowIndex:F,childRows:A}=S[0],V=A.indexOf(T);return F+V+1}return H.indexOf(T)},[Y,W,n,H]),Z=useMemo(()=>{if(a==null)return null;Tt(n);const T=new Set(a);for(const S of H)W(S)&&S.childRows.every(A=>a.has(n(A)))&&T.add(S.id);return T},[W,n,a,H]);function te(T){if(!l)return;Tt(n);const S=new Set(a);for(const F of H){const A=ue(F);if(Z?.has(A)&&!T.has(A))if(W(F))for(const V of F.childRows)S.delete(n(V));else S.delete(A);else if(!Z?.has(A)&&T.has(A))if(W(F))for(const V of F.childRows)S.add(n(V));else S.add(A)}l(S)}function fe(T,S){if(r?.(T,S),S.isGridDefaultPrevented()||T.mode==="EDIT")return;const{column:F,rowIdx:A,selectCell:V}=T,Q=F?.idx??-1,U=H[A];if(W(U)){if(Q===-1&&(S.key===x&&U.isExpanded||S.key===R&&!U.isExpanded)&&(S.preventDefault(),S.preventGridDefault(),me(U.id)),Q===-1&&S.key===x&&!U.isExpanded&&U.level!==0){const M=Y(U);M!==void 0&&(S.preventGridDefault(),V({idx:Q,rowIdx:M[1]}))}Dt(S)&&(S.keyCode===67||S.keyCode===86)&&S.preventGridDefault()}}function q(T,{indexes:S,column:F}){if(!s)return;const A=[...t],V=[];for(const Q of S){const U=t.indexOf(H[Q]);A[U]=T[Q],V.push(U)}s(A,{indexes:V,column:F})}function me(T){const S=new Set(C);S.has(T)?S.delete(T):S.add(T),p(S)}function xe(T,{row:S,rowClass:F,onCellClick:A,onCellDoubleClick:V,onCellContextMenu:Q,onRowChange:U,lastFrozenColumnIndex:M,copiedCellIdx:_,draggedOverCellIdx:ne,setDraggedOverRowIdx:ge,selectedCellEditor:we,...le}){if(W(S)){const{startRowIndex:Ce}=S;return jsx(Yr,{...le,"aria-rowindex":y+Ce+1,row:S,groupBy:v,toggleGroup:L},T)}let Se=le["aria-rowindex"];const Ee=Y(S);if(Ee!==void 0){const{startRowIndex:Ce,childRows:De}=Ee[0],$e=De.indexOf(S);Se=Ce+y+$e+2}return w(T,{...le,"aria-rowindex":Se,row:S,rowClass:F,onCellClick:A,onCellDoubleClick:V,onCellContextMenu:Q,onRowChange:U,lastFrozenColumnIndex:M,copiedCellIdx:_,draggedOverCellIdx:ne,setDraggedOverRowIdx:ge,selectedCellEditor:we})}return jsx(_t,{...f,role:"treegrid","aria-rowcount":j+1+(f.topSummaryRows?.length??0)+(f.bottomSummaryRows?.length??0),ref:m,columns:P,rows:H,rowHeight:$,rowKeyGetter:ue,onRowsChange:q,selectedRows:Z,onSelectedRowsChange:te,onCellKeyDown:fe,renderers:{...c,renderRow:xe}})}function Jr(e){return Array.isArray(e)}const Li=null,Ai="t7vyx3i7-0-0-beta-46",Zr=null;function Qr(e){e?.focus(),e?.select()}function Ni({row:e,column:t,onRowChange:o,onClose:n}){return jsx("input",{className:Zr,ref:Qr,value:e[t.key],onChange:r=>o({...e,[t.key]:r.target.value}),onBlur:()=>n(!0,!1)})}var qr=K(49185),en=K(46644),He=K(55386),de=K(95004),_r=K(22592),Wn=K(57852),B=K(739),he=K(63142),Le=K(7685),es=K(97375),ts=K(94535),ns=K(34213),os=K(64400),gt=K(64780),rs=K(97958),ht=K(30703),ss=K(2381),ls=K(91793),Qe=K(41654),Gn=K(32635),$n=K(72636),is=K(8135),as=K(15356),cs=K(12737),qe=K(45861),_e=K(84140);const ds=45,Nt=32,us=10,fs="`~!@#$%^&*()_+-=[]\\{}|;':\",./<>? 	",gs="1234567890",Mt="ABCDEFGHIJKLMNOPQRSTUVWXYZ",st=`${Mt}abcdefghijklmnopqrstuvwxyz${gs}${fs}`;function hs(e){const t=e.measureText("W").width,o=e.letterSpacing;e.letterSpacing="101px";const n=e.measureText("W").width;return e.letterSpacing=o,n>t}function ps(e){const t=hs(e)?0:parseFloat(e.letterSpacing),o={};for(let l=0;l<st.length;l++)o[st.charCodeAt(l)]=e.measureText(st[l]).width+t;const n=parseFloat(e.wordSpacing);n>0&&(o[Nt]=n);const r={};for(let l=0;l<Mt.length;l++){let c=Mt.charCodeAt(l);r[c]={};for(let u=0;u<st.length;u++){let g=st.charCodeAt(u),C=e.measureText(`${Mt[l]}${st[u]}`).width-o[g]+t;r[c][g]=C}}const s=()=>{};function a(l,c,u=s){let g=0;for(;l.charCodeAt(g)===Nt;)g++;let C=l.length-1;for(;l.charCodeAt(C)===Nt;)C--;let p=g,f=0,m=0,I=-1,w=0,y=!1;for(let k=g;k<=C;k++){let x=l.charCodeAt(k),R=0;if(x in r){let L=l.charCodeAt(k+1);L in r[x]&&(R=r[x][L])}if(R===0&&(R=o[x]??(o[x]=e.measureText(l[k]).width)),x===Nt)l.charCodeAt(k+1)!==x&&(I=k+1,w=0),!y&&m>0&&(m+=R,f=k),y=!0;else if(x===us){if(u(p,k)===!1)return;p=f=k+1,m=w=0,w=0,I=-1}else{if(f>p&&m+R>c){if(u(p,f)===!1)return;m=w+R,p=f=I,w=0,I=-1}else x===ds&&l.charCodeAt(k+1)!==x&&(I=f=k+1,w=0),m+=R,w+=R;y=!1}}u(p,C+1)}return{each:a,split:(l,c,u=1/0)=>{let g=[];return a(l,c,(C,p)=>{if(g.push(l.slice(C,p)),g.length===u)return!1}),g},count:(l,c)=>{let u=0;return a(l,c,()=>{u++}),u},test:(l,c)=>{let u=0;return a(l,c,()=>{if(++u===2)return!1}),u===2}}}var zn=K(8255);const Be={DEFAULT_WIDTH:150,EXPANDER_WIDTH:50,MIN_WIDTH:50},ke={CELL_PADDING:8,MAX_CELL_HEIGHT:48,PAGINATION_LIMIT:750,SCROLL_BAR_WIDTH:8,SCROLL_BAR_MARGIN:2};function Oi(e,t,o,n,r,s=0){const a=s*2;if(typeof e=="string"){const l=e.split(/\s/),c=[];let u="";for(let C=0;C<l.length;C++){const p=l[C];let f=o.measureText(u+" "+p).width;f<t?u+=" "+p:(c.push({width:f,line:u}),u=p),C===l.length-1&&c.push({width:f,line:u})}return c.length===1?r:c.length*n+a*2}return r}function ms(e,t,o,n=0){const{count:r}=ps(e);return(s,a)=>{const l=Math.max(a,20),c=n*2,g=r(s,l)*t+c;return Math.max(g,o)}}function xs(e,t){const o=e.typography.fontSize,n=e.typography.body.lineHeight;switch(t){case B.qM.Sm:return 36;case B.qM.Md:return 42;case B.qM.Lg:return ke.MAX_CELL_HEIGHT}return ke.CELL_PADDING*2+o*n}function Cs(e,t,o,n,r){let s=1,a="";for(const l in e)if(r.columnTypes[l]===de.PU.string&&r.textWraps[l]&&r.fieldDisplayType[l]!==B.ob.Image){const c=e[l];if(c!=null){const u=r.columnWidths[l]/o,g=c.length/u;g>s&&(s=g,a=l)}}return a===""?n:t(e[a],r.columnWidths[a])}function ys(e,t){return t[e]===de.PU.string}function ws(e,t,o,n,r,s,a,l,c,u,g){const C=u.config?.custom?.inspect??!1;return!(c||C||g===B.ob.Image||!ys(e,o))}function Bn(e){if(!e)return"flex-start";if(e.config.custom)switch(e.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return e.type===de.PU.number?"flex-end":"flex-start"}const bs={type:B.ob.Auto};function Kn(e){return e.config.custom?.displayMode?Ls(e.config.custom?.displayMode):e.config.custom?.cellOptions?e.config.custom.cellOptions:bs}function Vn(e,t,o){let n=e.state?.alignmentFactors;if(n)return(0,He.cN)(n).length<(0,He.cN)(t).length&&(n={...t},e.state.alignmentFactors=n),n;{n={...t};const r=Math.min(e.values.length,o+1e3);for(let s=o+1;s<r;s++){const a=e.display(e.values[s]);(0,He.cN)(n).length>(0,He.cN)(a).length&&(n.text=t.text)}return e.state?e.state.alignmentFactors=n:e.state={alignmentFactors:n},n}}function Rs(e,t,o){if(o===void 0||t.type!==de.PU.number||!o.reducer||!o.reducer.length||o.fields&&o.fields.length>0&&!o.fields.includes(t.name))return"";const n=o.reducer[0],r=(0,en.Nw)({field:{...t,values:e.map(a=>a[Re(t)])},reducers:o.reducer})[n];return(0,He.cN)(t.display(r))}const Ss=e=>({footerCell:(0,X.css)({display:"flex",justifyContent:e||"space-between"})}),Un=10,vs=15,Is=5;function Xn(e,t,o){const n=Es(e.colors.background.primary,e.colors.action.hover),r=e.isDark?1:-.7;let s,a,l=n;if(t.type===B.ob.ColorText)s=o.color;else if(t.type===B.ob.ColorBackground){const c=t.mode??B.Wq.Gradient;if(c===B.Wq.Basic)s=(0,zn.mZ)(o.color,e.isDark),a=(0,_e.A)(o.color).toRgbString(),l=(0,_e.A)(o.color).darken(Un*r).toRgbString();else if(c===B.Wq.Gradient){const u=(0,_e.A)(o.color).darken(vs*r).toRgbString(),g=(0,_e.A)(o.color).darken(Un*r).spin(Is);s=(0,zn.mZ)(o.color,e.isDark),a=`linear-gradient(120deg, ${g.toRgbString()}, ${o.color})`,l=`linear-gradient(120deg, ${g.toRgbString()}, ${u})`}}return{textColor:s,bgColor:a,bgHoverColor:l}}const ks=e=>typeof e=="number"?e:parseFloat(e)||0,Es=(e,t)=>{const o=(0,_e.A)(e),n=(0,_e.A)(t);return _e.A.mix(o,n,n.getAlpha()*100).toHexString()},Ge=(e,t)=>{let o;if(e.getLinks&&(o=e.getLinks({valueRowIndex:t})),!!o){for(let n=0;n<o?.length;n++)if(o[n].onClick){const r=o[n].onClick;o[n].onClick=s=>{s.ctrlKey||s.metaKey||s.shiftKey||(s.preventDefault(),r(s,{field:e,rowIndex:t}))}}return o}},Ds=(e,t,o,n,r)=>{let s;const a=r.current.filter(l=>{const c=l.columnKey===e;return c&&(s=l),!c});s&&s.direction==="DESC"?(n(a),r.current=a):o?(n([...a,{columnKey:e,direction:t}]),r.current=[...a,{columnKey:e,direction:t}]):(n([{columnKey:e,direction:t}]),r.current=[{columnKey:e,direction:t}])},tn=e=>{const t=`
    const rows = Array(frame.length);
    const values = frame.fields.map(f => f.values);
    let rowCount = 0;
    for (let i = 0; i < frame.length; i++) {
      rows[rowCount] = {
        __depth: 0,
        __index: i,
        ${e.fields.map((n,r)=>`${JSON.stringify(Re(n))}: values[${r}][i]`).join(",")}
      };
      rowCount += 1;
      if (rows[rowCount-1]['Nested frames']){
        const childFrame = rows[rowCount-1]['Nested frames'];
        rows[rowCount] = {__depth: 1, __index: i, data: childFrame[0]}
        rowCount += 1;
      }
    }
    return rows;
  `;return new Function("frame",t)(e)},js=new Intl.Collator("en",{sensitivity:"base",numeric:!0}).compare;function Ts(e){switch(e){case de.PU.frame:return(t,o)=>(t?.value??0)-(o?.value??0);case de.PU.time:case de.PU.number:case de.PU.boolean:return(t,o)=>t===o?0:t==null?-1:o==null?1:Number(t)-Number(o);case de.PU.string:case de.PU.enum:default:return(t,o)=>js(String(t??""),String(o??""))}}function Ls(e){switch(e){case"basic":case"gradient-gauge":case"lcd-gauge":let t=B.eX.Basic;return e==="gradient-gauge"?t=B.eX.Gradient:e==="lcd-gauge"&&(t=B.eX.Lcd),{type:B.ob.Gauge,mode:t};case"color-background":case"color-background-solid":let o=B.Wq.Basic;return e==="color-background"&&(o=B.Wq.Gradient),{type:B.ob.ColorBackground,mode:o};default:return{type:e}}}const Yn=e=>e.fields.some(({type:t})=>t===de.PU.nestedFrames),Jn=(e,t)=>{const o=[],n=new Map;e.forEach(a=>{Number(a.__depth)===0?o.push(a):n.set(Number(a.__index),a)});const r=t(o),s=[];return r.forEach(a=>{s.push(a);const l=n.get(Number(a.__index));l&&s.push(l)}),s},Re=e=>e.state?.displayName??e.name;function As(e,t){if(!t||e.length===0)return{};const o={};for(let n=0;n<e.length;n++){const s=e[n][Re(t)],a=t.display?t.display(s):s,l=t.display?(0,He.cN)(a):a;o[l||"(Blanks)"]=l}return o}function Ns(e,t){return t?e.filter(o=>t.some(n=>n.value===o.value)):[]}function Ms(e){return Object.keys(e).map(t=>({value:e[t],label:t})).sort(Os)}function Os(e,t){return e.label===void 0&&t.label===void 0?0:e.label===void 0&&t.label!==void 0?-1:e.label!==void 0&&t.label===void 0?1:e.label<t.label?-1:e.label>t.label?1:0}const nn={Contains:{label:"Contains",value:"Contains",description:"Contains"},"=":{label:"=",value:"=",description:"Equals"},"!=":{label:"!=",value:"!=",description:"Not equals"},">":{label:">",value:">",description:"Greater"},">=":{label:">=",value:">=",description:"Greater or Equal"},"<":{label:"<",value:"<",description:"Less"},"<=":{label:"<=",value:"<=",description:"Less or Equal"},Expression:{label:"Expression",value:"Expression",description:'Bool Expression (Char $ represents the column value in the expression, e.g. "$ >= 10 && $ <= 12")'}},Ps=Object.values(nn),Fs=({name:e,rows:t,filterValue:o,setFilter:n,onClose:r,field:s,searchFilter:a,setSearchFilter:l,operator:c,setOperator:u})=>{const g=(0,he.$j)(),C=(0,d.useMemo)(()=>As(t,s),[t,s]),p=(0,d.useMemo)(()=>Ms(C),[C]),f=(0,d.useMemo)(()=>Ns(p,o),[p,o]),[m,I]=(0,d.useState)(f),[w,y]=(0,d.useState)(!1),k=(0,d.useCallback)(v=>r(),[r]),x=(0,d.useCallback)(v=>{if(m.length!==0){const E=new Set(m.map(j=>j.value));n(j=>({...j,[e]:{filtered:m,filteredSet:E,searchFilter:a,operator:c}}))}else n(E=>{const j={...E};return delete j[e],j});r()},[n,m,r]),R=(0,d.useCallback)(v=>{n(E=>{const j={...E};return delete j[e],j}),r()},[n,r]),L=(0,d.useMemo)(()=>o!==void 0,[o]),P=(0,he.of)(Hs);return(0,i.jsx)(is.N,{onClick:k,useCapture:!0,children:(0,i.jsx)("div",{className:P.filterContainer,onClick:Ws,children:(0,i.jsxs)(Qe.B,{direction:"column",children:[(0,i.jsxs)(Qe.B,{alignItems:"center",children:[s&&(0,i.jsx)($n.J,{className:P.label,children:s.config.displayName||s.name}),(0,i.jsx)(as.f,{variant:"canvas",options:Ps,onChange:u,value:c,tooltip:c.description})]}),(0,i.jsx)("div",{className:P.listDivider}),(0,i.jsxs)(Qe.B,{gap:1,children:[(0,i.jsx)(cs.Z,{placeholder:(0,Le.t)("grafana-ui.table.filter-popup-input-placeholder","Filter values"),onChange:l,value:a}),(0,i.jsx)(qe.$n,{variant:"secondary",style:{color:w?g.colors.text.link:g.colors.text.disabled},onClick:()=>{y(v=>!v)},icon:"text-fields"})]}),(0,i.jsx)(zs,{onChange:I,values:m,options:p,caseSensitive:w,searchFilter:a,operator:c}),(0,i.jsxs)(Qe.B,{gap:3,children:[(0,i.jsxs)(Qe.B,{children:[(0,i.jsx)(qe.$n,{size:"sm",onClick:x,children:(0,i.jsx)(Le.x,{i18nKey:"grafana-ui.table.filter-popup-apply",children:"Ok"})}),(0,i.jsx)(qe.$n,{size:"sm",variant:"secondary",onClick:k,children:(0,i.jsx)(Le.x,{i18nKey:"grafana-ui.table.filter-popup-cancel",children:"Cancel"})})]}),L&&(0,i.jsx)(Qe.B,{children:(0,i.jsx)(qe.$n,{fill:"text",size:"sm",onClick:R,children:(0,i.jsx)(Le.x,{i18nKey:"grafana-ui.table.filter-popup-clear",children:"Clear filter"})})})]})]})})})},Hs=e=>({filterContainer:(0,X.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",backgroundColor:e.colors.background.primary,border:`1px solid ${e.colors.border.weak}`,padding:e.spacing(2),boxShadow:e.shadows.z3,borderRadius:e.shape.radius.default}),listDivider:(0,X.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${e.colors.border.medium}`}),label:(0,X.css)({marginBottom:0})}),Ws=e=>{e.stopPropagation()},on=28,Gs=on*5,Zn=nn.Contains,$s=nn.Expression,rn=e=>{if(e=e.trim().replace(/\\/g,""),/^(\d{4}-\d{2}-\d{2}|\d{4}\/\d{2}\/\d{2})/.test(e)){const n=new Date(e);if(!isNaN(n.getTime())){const r=(0,He.j_)("dateTimeAsIso");return(0,He.cN)(r(n.getTime()))}}const t=parseFloat(e);if(!isNaN(t))return t;const o=e.toLowerCase();return o==="true"||o==="false"?o==="true":e},zs=({options:e,values:t,caseSensitive:o,onChange:n,searchFilter:r,operator:s})=>{const a=(0,d.useMemo)(()=>new RegExp(r,o?void 0:"i"),[r,o]),l=(0,d.useMemo)(()=>e.filter(x=>{if(!r||s.value===Zn.value)return x.label===void 0?!1:a.test(x.label);if(s.value===$s.value){if(x.value===void 0)return!1;try{const R=r.replace(/\\/g,""),L=new Function("$",`'use strict'; return ${R};`),P=rn(x.value);return L(P)}catch{}return!1}else{if(x.value===void 0)return!1;const R=rn(x.value),L=rn(r);switch(s.value){case"=":return R===L;case"!=":return R!==L;case">":return R>L;case">=":return R>=L;case"<":return R<L;case"<=":return R<=L}return!1}}),[e,a,s,r]),c=(0,d.useMemo)(()=>l.filter(x=>t.includes(x)),[l,t]),u=(0,d.useMemo)(()=>l.length===c.length,[l,c]),g=(0,d.useMemo)(()=>c.length>0&&l.length>c.length,[l,c]),C=(0,d.useMemo)(()=>c.length?`${c.length} selected`:"Select all",[c]),p=(0,d.useMemo)(()=>l.length!==c.length?"Add all displayed values to the filter":"Remove all displayed values from the filter",[l,c]),f=(0,he.of)(Ks),I=(0,he.$j)().spacing.gridSize,w=(0,d.useMemo)(()=>Math.min(l.length*on,Gs)+I,[I,l.length]),y=(0,d.useCallback)(x=>R=>{const L=R.currentTarget.checked?t.concat(x):t.filter(P=>P.value!==x.value);n(L)},[n,t]),k=(0,d.useCallback)(()=>{if(l.length===c.length){const x=t.filter(R=>!l.includes(R));n(x)}else{const x=[...new Set([...t,...l])];n(x)}},[n,t,l,c]);return(0,i.jsx)(Qe.B,{direction:"column",children:l.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ls.Y1,{height:w,itemCount:l.length,itemSize:on,itemData:{items:l,values:c,onCheckedChanged:y,className:f.filterListRow},width:"100%",className:f.filterList,children:Bs}),(0,i.jsx)("div",{className:f.filterListRow,children:(0,i.jsx)(Gn.S,{value:u,indeterminate:g,label:C,description:p,onChange:k})})]}):(0,i.jsx)($n.J,{className:f.noValuesLabel,children:(0,i.jsx)(Le.x,{i18nKey:"grafana-ui.table.no-values-label",children:"No values"})})})};function Bs({index:e,style:t,data:{onCheckedChanged:o,items:n,values:r,className:s}}){const a=n[e],{value:l,label:c}=a,u=r.find(g=>g.value===l)!==void 0;return(0,i.jsx)("div",{className:s,style:t,title:c,children:(0,i.jsx)(Gn.S,{value:u,label:c,onChange:o(a)})})}const Ks=e=>({filterList:(0,X.css)({label:"filterList",backgroundColor:e.components.input.background,border:`1px solid ${e.colors.border.medium}`,borderRadius:e.shape.radius.default}),filterListRow:(0,X.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:e.spacing(.5),":hover":{backgroundColor:e.colors.action.hover}}),selectDivider:(0,X.css)({label:"selectDivider",width:"100%",borderTop:`1px solid ${e.colors.border.medium}`,padding:e.spacing(.5,2)}),noValuesLabel:(0,X.css)({paddingTop:e.spacing(1)})}),Vs=({name:e,rows:t,filter:o,setFilter:n,field:r,crossFilterOrder:s,crossFilterRows:a})=>{const l=o[e]?.filtered,c=s.indexOf(e);let u;if(c>0){const L=s[c-1];u=a[L]}else if(c===-1&&s.length>0){const L=s[s.length-1];u=a[L]}else u=t;const g=(0,d.useRef)(null),[C,p]=(0,d.useState)(!1),f=(0,he.of)(Us),m=(0,d.useMemo)(()=>!!l,[l]),I=(0,d.useCallback)(()=>p(!0),[p]),w=(0,d.useCallback)(()=>p(!1),[p]),[y,k]=(0,d.useState)(o[e]?.searchFilter||""),[x,R]=(0,d.useState)(o[e]?.operator||Zn);return(0,i.jsxs)("button",{className:(0,X.cx)(f.headerFilter,m?f.filterIconEnabled:f.filterIconDisabled),ref:g,type:"button",onClick:I,children:[(0,i.jsx)(ht.I,{name:"filter"}),C&&g.current&&(0,i.jsx)(ss.A,{content:(0,i.jsx)(Fs,{name:e,rows:u,filterValue:l,setFilter:n,field:r,onClose:w,searchFilter:y,setSearchFilter:k,operator:x,setOperator:R}),placement:"bottom-start",referenceElement:g.current,show:!0})]})},Us=e=>({headerFilter:(0,X.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),filterIconEnabled:(0,X.css)({label:"filterIconEnabled",color:e.colors.primary.text}),filterIconDisabled:(0,X.css)({label:"filterIconDisabled",color:e.colors.text.disabled})}),Xs=({column:e,rows:t,field:o,onSort:n,direction:r,justifyContent:s,filter:a,setFilter:l,onColumnResize:c,headerCellRefs:u,crossFilterOrder:g,crossFilterRows:C,showTypeIcons:p})=>{const f=(0,he.of)(Ys,s),m=(0,d.useRef)(null),I=o.config?.custom?.filterable??!1,w=Re(o);let y=I;o.config.custom?.filterable!==I&&(y=o.config.custom?.filterable||!1),!y&&a[w]&&l(x=>{const R={...x};return delete R[w],R});const k=x=>{const R=x.shiftKey;n(e.key,r==="ASC"?"DESC":"ASC",R)};return(0,d.useLayoutEffect)(()=>{m.current&&(u.current[e.key]=m.current)},[m,e.key]),(0,d.useEffect)(()=>{const x=m.current?.parentElement;if(x){const R=x.lastElementChild;if(R){const L=()=>{let P=x.clientWidth;c?.(e.key,P)};return R.addEventListener("click",L),()=>{R.removeEventListener("click",L)}}}},[e]),(0,i.jsxs)("div",{ref:m,className:f.headerCell,onKeyDown:x=>{x.key===" "&&x.stopPropagation()},children:[(0,i.jsxs)("button",{className:f.headerCellLabel,onClick:k,children:[p&&(0,i.jsx)(ht.I,{name:(0,rs.SS)(o),title:o?.type,size:"sm"}),(0,i.jsx)("div",{children:o.state?.displayName??e.name}),r&&(r==="ASC"?(0,i.jsx)(ht.I,{name:"arrow-up",size:"lg"}):(0,i.jsx)(ht.I,{name:"arrow-down",size:"lg"}))]}),y&&(0,i.jsx)(Vs,{name:e.key,rows:t,filter:a,setFilter:l,field:o,crossFilterOrder:g.current,crossFilterRows:C.current})]})},Ys=(e,t)=>({headerCell:(0,X.css)({display:"flex",gap:e.spacing(.5),justifyContent:t}),headerCellLabel:(0,X.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightMedium,display:"flex",alignItems:"center",color:e.colors.text.secondary,gap:e.spacing(1),"&:hover":{textDecoration:"underline",color:e.colors.text.link}})});function Js({height:e,onCellExpand:t,isExpanded:o}){const n=(0,he.of)(Zs,e);function r(s){(s.key===" "||s.key==="Enter")&&(s.preventDefault(),t())}return(0,i.jsx)("div",{className:n.expanderCell,onClick:t,onKeyDown:r,children:(0,i.jsx)(ht.I,{"aria-label":o?"Collapse row":"Expand row",name:o?"angle-down":"angle-right",size:"lg"})})}const Zs=(e,t)=>({expanderCell:(0,X.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${t}px`,cursor:"pointer"})});var Qn=K(64136),qn=K(27430),sn=K(41119),Qs=K(39884),ln=K(76319);const qs="=",_s="!=";var el=K(31210);const tl=({actions:e})=>{const t=(0,he.of)(nl);return(0,i.jsx)("div",{className:t.buttonsGap,children:e&&e.map((o,n)=>(0,i.jsx)(el.r,{action:o,variant:"secondary"},n))})},nl=e=>({buttonsGap:(0,X.css)({display:"flex",gap:6})});var Ot=K(6399);function ol({value:e,field:t,justifyContent:o,rowIdx:n,cellOptions:r}){const s=(0,he.of)(rl,o),a=t.display(e),l=(0,He.cN)(a),c=!!Ge(t,n)?.length,u=(0,he.of)(qe.Ez);return(0,i.jsx)("div",{className:s.cell,children:c?(0,i.jsx)(Ot.e,{links:()=>Ge(t,n)||[],children:g=>g.openMenu?(0,i.jsx)("button",{className:(0,X.cx)(u,_n(s,r,g.targetClassName)),onClick:g.openMenu,children:l}):(0,i.jsx)("div",{className:_n(s,r,g.targetClassName),children:l})}):l})}const _n=(e,t,o)=>t.type===B.ob.Auto?(0,X.cx)(e.linkCell,o):(0,X.cx)(e.cellLinkForColoredCell,o),rl=(e,t)=>({cell:(0,X.css)({display:"flex",justifyContent:t,a:{color:"inherit"}}),cellLinkForColoredCell:(0,X.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:e.typography.fontWeightMedium,textDecoration:"underline"}),linkCell:(0,X.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:e.colors.text.link,fontWeight:e.typography.fontWeightMedium,paddingRight:e.spacing(1.5),a:{color:e.colors.text.link},"&:hover":{textDecoration:"underline",color:e.colors.text.link}})});var sl=K(33553),eo=K(79118),ll=K(38919),il=K(98005);const al={mode:sl.O.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},cl=({value:e,field:t,theme:o,height:n,width:r,rowIdx:s})=>{const a=t.display(e),l=Kn(t),c=ks(o.spacing(1));let u=(0,eo.xg)(t,!1);u.thresholds||(u={...u,thresholds:al});let g=B.eX.Gradient,C;l.type===B.ob.Gauge&&(g=l.mode??B.eX.Gradient,C=l.valueDisplayMode!==void 0?l.valueDisplayMode:B.$l.Text);const p=!!Ge(t,s)?.length,f=Vn(t,a,s),m=I=>{const{openMenu:w}=I;return(0,i.jsx)(il.xE,{width:r,height:n-c,field:u,display:t.display,text:{valueSize:14},value:a,orientation:ll.wV.Horizontal,theme:o,alignmentFactors:f,onClick:w,itemSpacing:1,lcdCellWidth:8,displayMode:g,valueDisplayMode:C})};return(0,i.jsx)(i.Fragment,{children:p?(0,i.jsx)(Ot.e,{links:()=>Ge(t,s)||[],style:{display:"flex",width:"100%"},children:I=>m(I)}):m({})})},dl=({field:e,rowIdx:t})=>{const o=(0,he.of)(ul),n=Ge(e,t);return(0,i.jsx)("div",{children:n&&n.map((r,s)=>(0,i.jsx)("span",{className:o.linkCell,onClick:r.onClick,children:(0,i.jsx)("a",{href:r.href,target:r.target,children:r.title})},s))})},ul=e=>({linkCell:(0,X.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:e.colors.text.link,fontWeight:e.typography.fontWeightMedium,paddingRight:e.spacing(1.5),a:{color:e.colors.text.link},"&:hover":{textDecoration:"underline",color:e.colors.text.link}})});function fl({value:e,justifyContent:t,height:o}){const n=(0,he.of)(gl);let r="";return e instanceof qn.A?r=new Qn.A().writeGeometry(e,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):e!=null&&(r=`${e}`),(0,i.jsx)("div",{className:n.cell,style:{justifyContent:t,height:o},children:(0,i.jsx)("div",{className:n.cellText,style:{fontFamily:"monospace"},children:r})})}const gl=()=>({cell:(0,X.css)({height:"100%",display:"flex",alignItems:"center",padding:"0 8px"}),cellText:(0,X.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"})}),hl=10,pl=({cellOptions:e,field:t,height:o,justifyContent:n,value:r,rowIdx:s})=>{const a=o-hl,l=(0,he.of)(ml,a,n),c=!!Ge(t,s)?.length,{text:u}=t.display(r),{alt:g,title:C}=e.type===B.ob.Image?e:{alt:void 0,title:void 0},p=(0,i.jsx)("img",{alt:g,src:u,className:l.image,title:C});return(0,i.jsx)("div",{className:l.imageContainer,children:c?(0,i.jsx)(Ot.e,{links:()=>Ge(t,s)||[],children:f=>f.openMenu?(0,i.jsx)("div",{onClick:f.openMenu,role:"button",tabIndex:0,onKeyDown:m=>{m.key==="Enter"&&f.openMenu&&f.openMenu(m)},children:p}):p}):p})},ml=(e,t,o)=>({image:(0,X.css)({height:t,width:"auto"}),imageContainer:(0,X.css)({display:"flex",justifyContent:o})}),an=({value:e,justifyContent:t,field:o,rowIdx:n})=>{const r=(0,he.of)(xl,t),s=(0,he.of)(qe.Ez);let a=e;if(typeof e=="string")try{const c=JSON.parse(e);a=JSON.stringify(c,null," ")}catch{a=e}else try{a=JSON.stringify(e,null," ")}catch{a=String(e)}const l=!!Ge(o,n)?.length;return(0,i.jsx)("div",{className:r.jsonText,children:l?(0,i.jsx)(Ot.e,{links:()=>Ge(o,n)||[],children:c=>c.openMenu?(0,i.jsx)(qe.$n,{className:(0,X.cx)(s),onClick:c.openMenu,children:a}):(0,i.jsx)(i.Fragment,{children:a})}):a})},xl=(e,t)=>({jsonText:(0,X.css)({display:"flex",cursor:"pointer",fontFamily:"monospace",justifyContent:t})});var Cl=K(53568),yl=K(21539),wl=K(53431);const bl={type:B.ob.Sparkline,drawStyle:B.GR.Line,lineInterpolation:B.dx.Smooth,lineWidth:1,fillOpacity:17,gradientMode:B.on.Hue,pointSize:2,barAlignment:B.Nj.Center,showPoints:B.yL.Never,hideValue:!1},to=e=>{const{field:t,value:o,theme:n,timeRange:r,rowIdx:s,justifyContent:a,width:l}=e,c=(0,he.of)(vl,a),u=Rl(o);if(!u)return(0,i.jsx)(i.Fragment,{children:t.config.noValue||"no data"});u.x&&!u.x.config.interval&&u.x.values.length>1&&(u.x.config.interval=u.x.values[1]-u.x.values[0]),u.y.values=u.y.values.map(w=>Number.isFinite(w)?w:null);const g=(0,eo.AP)(u.y);u.y.config.min=g.min,u.y.config.max=g.max,u.y.state={range:g},u.timeRange=r;const C=Sl(t),p={color:t.config.color,custom:{...bl,...C}},f=t.config.custom?.cellOptions?.hideValue;let m=0,I=null;if(!f){const w=(0,sn.LI)(o)?o.value:null,y=t.display(w),k=Vn(t,y,s);m=(0,Cl.kD)(`${k.prefix??""}${k.text}${k.suffix??""}`,16).width+n.spacing.gridSize,I=(0,i.jsx)(yl.i,{style:{width:`${m-n.spacing.gridSize}px`,textAlign:"right",marginRight:n.spacing(1)},className:c.valueContainer,value:y})}return(0,i.jsxs)("div",{className:c.cellContainer,children:[I,(0,i.jsx)(wl.O,{width:l-m,height:25,sparkline:u,config:p,theme:n})]})};function Rl(e){if(Array.isArray(e))return{y:{name:"test",type:de.PU.number,values:e,config:{}}};if((0,sn.ci)(e)){const t=e.fields.find(n=>n.type===de.PU.time),o=e.fields.find(n=>n.type===de.PU.number);if(t&&o)return{x:t,y:o}}}function Sl(e){let t=Kn(e);if(t.type===B.ob.Auto&&(t={...t,type:B.ob.Sparkline}),t.type===B.ob.Sparkline)return t;throw new Error(`Expected options type ${B.ob.Sparkline} but got ${t.type}`)}const vl=(e,t)=>({cellContainer:(0,X.css)({display:"flex",width:"100%",alignItems:"center",justifyContent:t}),valueContainer:(0,X.css)({div:{width:"inherit"}})});function Il(e){const{field:t,frame:o,value:n,theme:r,timeRange:s,height:a,rowIdx:l,justifyContent:c,shouldTextOverflow:u,setIsInspecting:g,setContextMenuProps:C,getActions:p,rowBg:f,onCellFilterAdded:m,replaceVariables:I}=e,w=t.config?.custom?.inspect??!1,y=Re(t),{config:k}=t,x={type:B.ob.Auto},R=k.custom?.cellOptions??x,{type:L}=R,P=t.config.filterable&&m,v=Bn(t)==="flex-end",E=t.display(n);let j={bgColor:"",textColor:"",bgHoverColor:""};f?j=f(l):j=(0,d.useMemo)(()=>Xn(r,R,E),[r,R,E]);const H=(0,he.of)(kl,v,j),W=(0,d.useRef)(null),[$,Y]=(0,d.useState)(0),[ue,Z]=(0,d.useState)(!1),te=p?p(o,t,l,I):[];(0,d.useLayoutEffect)(()=>{W.current&&W.current.clientWidth!==0&&Y(W.current.clientWidth)},[W.current]);const fe={value:n,field:t,rowIdx:l,justifyContent:c};let q=null;switch(L){case B.ob.Sparkline:q=(0,i.jsx)(to,{...fe,theme:r,timeRange:s,width:$});break;case B.ob.Gauge:case B.ob.BasicGauge:case B.ob.GradientGauge:case B.ob.LcdGauge:q=(0,i.jsx)(cl,{...fe,theme:r,timeRange:s,height:a,width:$});break;case B.ob.Image:q=(0,i.jsx)(pl,{...fe,cellOptions:R,height:a});break;case B.ob.JSONView:q=(0,i.jsx)(an,{...fe});break;case B.ob.DataLinks:q=(0,i.jsx)(dl,{field:t,rowIdx:l});break;case B.ob.Actions:q=(0,i.jsx)(tl,{actions:te});break;case B.ob.Custom:const F=R.cellComponent;q=(0,i.jsx)(F,{field:t,value:n,rowIndex:l,frame:o});break;case B.ob.Auto:default:if(t.type===de.PU.geo)q=(0,i.jsx)(fl,{...fe,height:a});else if(t.type===de.PU.frame){const A=t.values[0];(0,sn.ci)(A)&&(0,Qs.aH)(A)?q=(0,i.jsx)(to,{...fe,theme:r,timeRange:s,width:$}):q=(0,i.jsx)(an,{...fe})}else t.type===de.PU.other?q=(0,i.jsx)(an,{...fe}):q=(0,i.jsx)(ol,{...fe,cellOptions:R});break}const me=()=>{if(Z(!0),u()){const A=W.current?.parentElement;A?.style.setProperty("z-index",String(r.zIndex.tooltip)),A?.style.setProperty("white-space","pre-line"),A?.style.setProperty("min-height","100%"),A?.style.setProperty("height","fit-content"),A?.style.setProperty("background",j.bgHoverColor||"none"),A?.style.setProperty("min-width","min-content")}},xe=()=>{if(Z(!1),u()){const A=W.current?.parentElement;A?.style.removeProperty("z-index"),A?.style.removeProperty("white-space"),A?.style.removeProperty("min-height"),A?.style.removeProperty("height"),A?.style.removeProperty("background"),A?.style.removeProperty("min-width")}},T=(0,d.useCallback)(()=>{m&&m({key:y,operator:qs,value:String(n??"")})},[y,m,n]),S=(0,d.useCallback)(()=>{m&&m({key:y,operator:_s,value:String(n??"")})},[y,m,n]);return(0,i.jsxs)("div",{ref:W,onMouseEnter:me,onMouseLeave:xe,className:H.cell,children:[q,ue&&(w||P)&&(0,i.jsxs)("div",{className:H.cellActions,children:[w&&(0,i.jsx)(ln.K,{name:"eye",tooltip:(0,Le.t)("grafana-ui.table.cell-inspect-tooltip","Inspect value"),onClick:()=>{let F=n,A=gt.B.text;t.type===de.PU.geo&&n instanceof qn.A?(F=new Qn.A().writeGeometry(n,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}),A=gt.B.code):L===B.ob.JSONView&&(A=gt.B.code),C({value:String(F??""),mode:A}),g(!0)}}),P&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ln.K,{name:"search-plus",onClick:T,tooltip:(0,Le.t)("grafana-ui.table.cell-filter-on","Filter for value")}),(0,i.jsx)(ln.K,{name:"search-minus",onClick:S,tooltip:(0,Le.t)("grafana-ui.table.cell-filter-out","Filter out value")})]})]})]})}const kl=(e,t,o)=>({cell:(0,X.css)({height:"100%",alignContent:"center",paddingInline:"8px",background:o.bgColor||"none",color:o.textColor,"&:hover":{background:o.bgHoverColor}}),cellActions:(0,X.css)({display:"flex",position:"absolute",top:"1px",left:t?0:void 0,right:t?void 0:0,margin:"auto",height:"100%",background:e.colors.background.secondary,color:e.colors.text.primary,padding:"4px 0px 4px 4px"})});function El(e){const{cellHeight:t,enablePagination:o,enableVirtualization:n=!0,fieldConfig:r,footerOptions:s,height:a,initialSortBy:l,noHeader:c,onCellFilterAdded:u,onColumnResize:g,onSortByChange:C,width:p,data:f,enableSharedCrosshair:m,showTypeIcons:I,replaceVariables:w}=e,y=(0,d.useMemo)(()=>l?.map(({displayName:O,desc:J})=>({columnKey:f.fields.find(({state:ie})=>ie?.displayName===O)?.name||O,direction:J?"DESC":"ASC"}))??[],[]),[k,x]=(0,d.useState)(0),[R,L]=(0,d.useState)(null),[P,v]=(0,d.useState)(!1),[E,j]=(0,d.useState)(!1),[H,W]=(0,d.useState)({}),[$,Y]=(0,d.useState)(0),[,ue]=(0,d.useState)(0),[,Z]=(0,d.useState)(!1),[te,fe]=(0,d.useState)(y),[q,me]=(0,d.useState)([]),[xe,T]=(0,d.useState)(!1),S=(0,d.useRef)({x:0,y:0}),[F,A]=(0,d.useState)(!1),V=(0,d.useRef)([]),Q=(0,d.useRef)({}),U=(0,d.useRef)({}),M=(0,d.useRef)(y),_=(0,d.useRef)(e),ne=(0,d.useRef)([]),[ge,{height:we}]=(0,qr.A)(),le=(0,he.$j)(),Se=(0,os.d2)(),Ee=!!(s?.show&&s.reducer?.length),Ce=!!(s?.countRows&&s.reducer&&s.reducer.length&&s.reducer[0]===en.gy.count),De=(0,d.useRef)(null);(0,d.useEffect)(()=>{(_.current.data.fields.length!==e.data.fields.length||_.current.fieldConfig?.overrides!==r?.overrides||_.current.fieldConfig?.defaults!==r?.defaults)&&x(k+1),_.current=e},[e,k,r?.overrides,r?.defaults]),(0,d.useLayoutEffect)(()=>{if(!E)return;function N(O){j(!1)}return addEventListener("click",N),()=>{removeEventListener("click",N)}},[E]),(0,d.useEffect)(()=>{const N=Yn(e.data);T(N)},[e.data]),(0,d.useEffect)(()=>{const N=De.current;if(N){const O=N?.element;O&&A(O.scrollHeight>O.clientHeight||O.scrollWidth>O.clientWidth)}},[]);const $e=(0,d.useMemo)(()=>(x(k+1),r?.defaults?.custom?.width||"auto"),[r]),je=xs(le,t),We=le.typography.body.lineHeight*le.typography.fontSize,cn=le.components.panel.padding*le.spacing.gridSize*2,ve=(0,d.useMemo)(()=>tn(e.data),[tn,e.data]),Ke=(0,d.useMemo)(()=>e.data.fields.reduce((N,O)=>({...N,[Re(O)]:O.type}),{}),[e.data.fields]),Ve=(0,d.useMemo)(()=>e.data.fields.reduce((N,O)=>({...N,[Re(O)]:O.config?.custom?.cellOptions?.wrapText??!1}),{}),[e.data.fields]),Pt=(0,d.useMemo)(()=>Object.values(Ve).some(Boolean),[Ve]),Ae=(0,he.of)(Ll),Ft=(0,d.useCallback)(()=>{const N={};return e.data.fields.forEach(O=>{const J=Re(O),b=O.config?.custom?.width,ie=(typeof b=="number"?b:Be.DEFAULT_WIDTH)-2*ke.CELL_PADDING-1;N[J]=ie}),Object.keys(U.current).forEach(O=>{const J=U.current[O];J.offsetWidth>0&&(N[O]=J.offsetWidth)}),N},[e.data.fields]),et=(0,d.useMemo)(()=>e.data.fields.length,[e.data.fields]),pt=(0,d.useMemo)(()=>e.data.fields.reduce((N,O)=>(O.config?.custom?.cellOptions?.type&&(N[Re(O)]=O.config.custom.cellOptions.type),N),{}),[e.data.fields]),mt=(0,d.useMemo)(()=>({headersLength:et,textWraps:Ve,columnTypes:Ke,fieldDisplayType:pt,columnWidths:Ft()}),[Ve,Ke,Ft,et,pt]),Ne=(0,d.useMemo)(()=>{const N=Object.entries(H);if(N.length===0)return V.current=[],ve;const O=(b,re)=>{const ie=e.data.fields.find(Je=>Re(Je)===re);return!ie||!ie.display?"":(0,He.cN)(ie.display(b[re]))},J=new Set(N.map(([b])=>b));return J.forEach(b=>{V.current.includes(b)||V.current.push(b)}),V.current=V.current.filter(b=>J.has(b)),Q.current={},xe?Jn(ve,b=>b.filter(re=>{for(const[ie,Pe]of N){const Je=O(re,ie);if(!Pe.filteredSet.has(Je))return!1;Q.current[ie]?Q.current[ie].push(re):Q.current[ie]=[re]}return!0})):ve.filter(b=>{for(const[re,ie]of N){const Pe=O(b,re);if(!ie.filteredSet.has(Pe))return!1;Q.current[re]?Q.current[re].push(b):Q.current[re]=[b]}return!0})},[ve,H,xe,e.data.fields]),Me=(0,d.useMemo)(()=>{if(te.length===0)return Ne;const N=(O,J)=>{let b=0;for(let re=0;re<te.length;re++){const{columnKey:ie,direction:Pe}=te[re],Je=Ts(Ke[ie]);if(b=(Pe==="ASC"?1:-1)*Je(O[ie],J[ie]),b!==0)break}return b};return xe?Jn(Ne,O=>[...O].sort(N)):Ne.slice().sort((O,J)=>N(O,J))},[Ne,te,Ke,xe]),tt=Me.length;let xt=ke.MAX_CELL_HEIGHT;c?xt=0:!c&&Object.keys(U.current).length>0&&(xt=U.current[Object.keys(U.current)[0]].getBoundingClientRect().height);let oe=Math.floor((a-xt-ke.SCROLL_BAR_WIDTH-we-cn)/je);Ee&&(oe-=1),oe<1&&(oe=1);const lt=Math.ceil(tt/oe);$>lt&&Y(lt-1);const ye=$*oe+1;let Oe=ye+oe-1;Oe>tt&&(Oe=tt);const Ht=p<ke.PAGINATION_LIMIT,Wt=(0,d.useMemo)(()=>{const N=$*oe;return Me.slice(N,N+oe)},[ve,Me,$,oe]);(0,d.useMemo)(()=>{ne.current=e.data.fields.map((N,O)=>{if(N.state?.calcs&&delete N.state?.calcs,Ce)return O===0?`${Me.length}`:"";if(O===0){const J=s?.reducer?.[0];return J?en.AS.get(J).name:""}return Rs(Me,N,s)})},[Me,e.data.fields,s,Ce]);const dn=N=>{if(!q.includes(N))me([...q,N]);else{const O=q,J=O.indexOf(N);J>-1&&(O.splice(J,1),me(O))}ue(O=>O+1)},{ctx:Ct,avgCharWidth:Gt}=(0,d.useMemo)(()=>{const N=`${le.typography.fontSize}px ${le.typography.fontFamily}`,J=document.createElement("canvas").getContext("2d"),b=.15;J.letterSpacing=`${b}px`,J.font=N;let re="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s";const Pe=J.measureText(re).width/re.length+b;return{ctx:J,font:N,avgCharWidth:Pe}},[le.typography.fontSize,le.typography.fontFamily]),Ue=(0,d.useMemo)(()=>no({frame:e.data,calcsRef:ne,options:{columnTypes:Ke,textWraps:Ve,columnWidth:$e,crossFilterOrder:V,crossFilterRows:Q,defaultLineHeight:We,defaultRowHeight:je,expandedRows:q,filter:H,headerCellRefs:U,isCountRowsSet:Ce,onCellFilterAdded:u,ctx:Ct,onSortByChange:C,rows:ve,setContextMenuProps:L,setFilter:W,setIsInspecting:v,setSortColumns:fe,sortColumnsRef:M,styles:Ae,theme:le,showTypeIcons:I,replaceVariables:w,...e},handlers:{onCellExpand:dn,onColumnResize:g},availableWidth:p-(F?ke.SCROLL_BAR_WIDTH+ke.SCROLL_BAR_MARGIN:0)}),[e.data,ne,H,q,q.length,s,p,F,Me]);(0,d.useLayoutEffect)(()=>{Z(Object.keys(U.current).length>0)},[Ue]);const Xe=()=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ts.D,{label:(0,Le.t)("grafana-ui.table.inspect-menu-label","Inspect value"),onClick:()=>{v(!0)},className:Ae.menuItem})}),yt=(0,d.useMemo)(()=>ms(Ct,We,je,ke.CELL_PADDING),[Ct,We,je]),Ye=(0,d.useCallback)(N=>{if(Number(N.__depth)===1&&!q.includes(Number(N.__index)))return 0;if(Number(N.__depth)===1&&q.includes(Number(N.__index))){const O=N?.data?.meta?.custom?.noHeader?0:1;return je*(N.data?.length??0+O)}return Cs(N,yt,Gt,je,mt)},[q,Gt,je,mt,yt]),wt=N=>{const O=N.currentTarget;S.current={x:O.scrollLeft,y:O.scrollTop}};return(0,d.useEffect)(()=>{y.length>0&&fe(y)},[y]),(0,d.useEffect)(()=>{De.current?.element&&(De.current.element.scrollLeft=S.current.x,De.current.element.scrollTop=S.current.y)},[k]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_t,{ref:De,className:Ae.dataGrid,enableVirtualization:n,rows:o?Wt:Me,columns:Ue,headerRowHeight:c?0:void 0,defaultColumnOptions:{sortable:!0,resizable:!0},rowHeight:Pt||xe?Ye:je,style:{width:p,height:a-(o?we:0)},renderers:{renderRow:(N,O)=>Dl(N,O,q,Se,f,m??!1)},onScroll:wt,onCellContextMenu:({row:N,column:O},J)=>{J.preventGridDefault(),J.preventDefault();const b=N[O.key];L({value:String(b??""),top:J.clientY,left:J.clientX}),j(!0)},sortColumns:te,bottomSummaryRows:Ee?[{}]:void 0,onColumnResize:()=>{Pt&&ue(N=>N+1)}},`DataGrid${k}`),o&&(0,i.jsxs)("div",{className:Ae.paginationContainer,ref:ge,children:[(0,i.jsx)(ns.d,{className:"table-ng-pagination",currentPage:$+1,numberOfPages:lt,showSmallVersion:Ht,onNavigate:N=>{Y(N-1)}}),!Ht&&(0,i.jsx)("div",{className:Ae.paginationSummary,children:(0,i.jsxs)(Le.x,{i18nKey:"grafana-ui.table.pagination-summary",children:[{itemsRangeStart:ye}," - ",{displayedEnd:Oe}," of ",{numRows:tt}," rows"]})})]}),E&&(0,i.jsx)(es.t,{x:R?.left||0,y:R?.top||0,renderMenuItems:Xe,focusOnOpen:!1}),P&&(0,i.jsx)(gt.s,{mode:R?.mode??gt.B.text,value:R?.value,onDismiss:()=>{v(!1),L(null)}})]})}function no({frame:e,calcsRef:t,options:o,handlers:n,availableWidth:r}){const{columnTypes:s,textWraps:a,crossFilterOrder:l,crossFilterRows:c,defaultLineHeight:u,defaultRowHeight:g,expandedRows:C,filter:p,headerCellRefs:f,isCountRowsSet:m,onCellFilterAdded:I,ctx:w,onSortByChange:y,rows:k,setContextMenuProps:x,setFilter:R,setIsInspecting:L,setSortColumns:P,sortColumnsRef:v,styles:E,theme:j,timeRange:H,getActions:W,showTypeIcons:$,replaceVariables:Y}=o,{onCellExpand:ue,onColumnResize:Z}=n,te=[];if(Yn(e)){const T={name:"",type:de.PU.other,config:{},values:[]};te.push({key:"expanded",name:"",field:T,cellClass:E.cell,colSpan(S){return S.type==="ROW"&&Number(S.row.__depth)===1?e.fields.length:1},renderCell:({row:S})=>{if(Number(S.__depth)===0){const V=Number(S.__index);return(0,i.jsx)(Js,{height:g,onCellExpand:()=>ue(V),isExpanded:C.includes(V)})}let F=[],A=[];return S.data&&(F=no({frame:S.data,calcsRef:t,options:{...o},handlers:{onCellExpand:ue,onColumnResize:Z},availableWidth:r-Be.EXPANDER_WIDTH}),A=tn(S.data)),(0,i.jsx)(_t,{rows:A,columns:F,rowHeight:g,style:{height:"100%",overflow:"visible",marginLeft:Be.EXPANDER_WIDTH},headerRowHeight:S.data?.meta?.custom?.noHeader?0:void 0})},width:Be.EXPANDER_WIDTH,minWidth:Be.EXPANDER_WIDTH}),r-=Be.EXPANDER_WIDTH}let q;for(const T of e.fields){const S=T.config.custom;S!==void 0&&S.cellOptions!==void 0&&S.cellOptions.type===B.ob.ColorBackground&&S.cellOptions.applyToRow&&(q=A=>{const V=T.display(T.values[A]);return Xn(j,S.cellOptions,V)})}let me=0;e.fields.map((T,S)=>{if(T.type===de.PU.nestedFrames||T.config.custom?.hidden)return;const F=T.config.custom||{},A=Re(T),V=Bn(T),Q=Ss(V);F.width?r-=F.width:me++,te.push({key:A,name:T.name,field:T,cellClass:a[Re(T)]?E.cellWrapped:E.cell,renderCell:U=>{const{row:M}=U,_=T.config?.custom?.cellOptions?.type??B.ob.Auto,ne=M[A];return(0,i.jsx)(Il,{frame:e,value:ne,field:T,theme:j,timeRange:H??(0,_r.E2)(),height:g,justifyContent:V,rowIdx:M.__index,shouldTextOverflow:()=>ws(A,M,s,f,w,u,g,ke.CELL_PADDING,a[Re(T)],T,_),setIsInspecting:L,setContextMenuProps:x,getActions:W,rowBg:q,onCellFilterAdded:I,replaceVariables:Y},A)},renderSummaryCell:()=>m&&S===0?(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("span",{children:(0,i.jsx)(Le.x,{i18nKey:"grafana-ui.table.count",children:"Count"})}),(0,i.jsx)("span",{children:t.current[S]})]}):(0,i.jsx)("div",{className:Q.footerCell,children:t.current[S]}),renderHeaderCell:({column:U,sortDirection:M})=>(0,i.jsx)(Xs,{column:U,rows:k,field:T,onSort:(_,ne,ge)=>{if(Ds(_,ne,ge,P,v),y){const we=v.current.map(({columnKey:le,direction:Se})=>({displayName:le,desc:Se==="DESC"}));y(we)}},direction:M,justifyContent:V,filter:p,setFilter:R,onColumnResize:Z,headerCellRefs:f,crossFilterOrder:l,crossFilterRows:c,showTypeIcons:$}),width:F.width,minWidth:F.minWidth||Be.DEFAULT_WIDTH})});let xe=r/me;for(let T=me;T>0;T--)for(const S of te)!S.width&&S.minWidth>xe&&(S.width=S.minWidth,r-=S.width,me-=1,xe=r/me);for(const T of te)T.width||(T.width=xe),T.minWidth=Be.MIN_WIDTH;return te}function Dl(e,t,o,n,r,s){const{row:a}=t,l=Number(a.__index),c=o.includes(l);return Number(a.__depth)===1&&!c?null:a.data?(0,i.jsx)(On,{...t,"aria-expanded":c},e):(0,i.jsx)(On,{...t,onMouseEnter:()=>jl(l,n,r,s),onMouseLeave:()=>Tl(n,s)},e)}function jl(e,t,o,n){if(!n)return;const r=o.fields.find(s=>s.type===de.PU.time);r&&t.eventBus.publish(new Wn.b_({point:{time:r.values[e]}}))}function Tl(e,t){t&&e.eventBus.publish(new Wn.ql)}const Ll=e=>({dataGrid:(0,X.css)({"--rdg-background-color":e.colors.background.primary,"--rdg-header-background-color":e.colors.background.primary,"--rdg-border-color":"transparent","--rdg-color":e.colors.text.primary,"&:hover":{"--rdg-row-hover-background-color":e.colors.emphasize(e.colors.action.hover,.6)},".rdg-cell":{borderInlineEnd:"unset",borderRight:`1px solid ${e.colors.border.medium}`,"&:last-child":{borderRight:"none"}},".rdg-summary-row":{backgroundColor:e.colors.background.primary,"--rdg-summary-border-color":e.colors.border.medium,".rdg-cell":{zIndex:2,borderRight:"none"}},"div[role=columnheader]":{borderBottom:`1px solid ${e.colors.border.medium}`,borderInlineEnd:"unset",".r1y6ywlx7-0-0-beta-46":{"&:hover":{borderRight:`3px solid ${e.colors.text.link}`}}},"::-webkit-scrollbar":{width:ke.SCROLL_BAR_WIDTH,height:ke.SCROLL_BAR_WIDTH},"::-webkit-scrollbar-thumb":{backgroundColor:"rgba(204, 204, 220, 0.16)",borderRadius:"4px"},"::-webkit-scrollbar-track":{background:"transparent"},"::-webkit-scrollbar-corner":{backgroundColor:"transparent"}}),menuItem:(0,X.css)({maxWidth:"200px"}),cell:(0,X.css)({"--rdg-border-color":e.colors.border.medium,borderLeft:"none",whiteSpace:"nowrap",wordWrap:"break-word",overflow:"hidden",textOverflow:"ellipsis",paddingInline:"0"}),cellWrapped:(0,X.css)({"--rdg-border-color":e.colors.border.medium,borderLeft:"none",whiteSpace:"pre-line",wordWrap:"break-word",overflow:"hidden",textOverflow:"ellipsis",paddingInline:"0"}),paginationContainer:(0,X.css)({alignItems:"center",display:"flex",justifyContent:"center",marginTop:"8px",width:"100%"}),paginationSummary:(0,X.css)({color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1,0,2)})})}}]);

//# sourceMappingURL=893.de14ff694ae497cdb2f8.js.map