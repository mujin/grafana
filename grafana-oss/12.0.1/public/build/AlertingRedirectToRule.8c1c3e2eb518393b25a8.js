"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5516],{15102:(G,j,a)=>{a.r(j),a.d(j,{RedirectToRuleViewer:()=>$,default:()=>W});var e=a(74848),l=a(22803),L=a(96540),p=a(54148),P=a(87586),T=a(43173),w=a(68143),h=a(63142),f=a(34999),F=a(6975),m=a(8073),I=a(30703),N=a(56840),M=a(7840),C=a(13791);const U={icon:"bell",id:"alert-rule-view"};function i(s){const{wrapInContent:n=!0,children:t,title:d,renderTitle:o}=s,u=(0,h.of)(Z);return(0,e.jsx)(C.Y,{pageNav:{...U,text:d},renderTitle:o,navId:"alert-list",children:(0,e.jsx)(C.Y.Contents,{children:(0,e.jsx)("div",{className:u.content,children:n?(0,e.jsx)(V,{...s}):t})})})}function V({children:s,padding:n=2}){const t=(0,h.of)(A(n));return(0,e.jsx)("div",{className:t.wrapper,children:s})}const Z=s=>({content:(0,l.css)({maxWidth:`${s.breakpoints.values.xxl}px`})}),A=s=>n=>({wrapper:(0,l.css)({background:n.colors.background.primary,border:`1px solid ${n.colors.border.weak}`,borderRadius:n.shape.radius.default,padding:n.spacing(s)})});var Y=a(44109),z=a(52161),R=a(77256),y=a(94646),B=a(88547);const c="Find rule",S=T.$.appSubUrl;function E(){const s=(0,P.A)();return(0,L.useMemo)(()=>{const n=s.pathname?.replace(S,"").split("/")??[],t=(0,y.c)(decodeURIComponent((0,y.c)(n[3]))),d=decodeURIComponent(n[2]),o=new URLSearchParams(s.search);return{name:t,sourceName:d,namespace:o.get("namespace")??void 0,group:o.get("group")??void 0}},[s])}function $(){const s=(0,h.of)(H),{name:n,sourceName:t,namespace:d,group:o}=E(),{error:u,loading:D,rules:g=[]}=(0,Y.we)(n,t,{namespace:d,groupName:o});if(!n||!t)return(0,e.jsx)(p.C5,{replace:!0,to:"/notfound"});if(u)return(0,e.jsx)(i,{title:c,children:(0,e.jsx)(f.F,{title:`Failed to load rules from ${t}`,children:(0,w.NF)(u)&&(0,e.jsxs)("details",{className:s.errorMessage,children:[u.message,(0,e.jsx)("br",{})]})})});if(D)return(0,e.jsx)(i,{title:c,children:(0,e.jsx)(F._,{text:(0,N.t)("alerting.redirect-to-rule-viewer.text-loading-rule","Loading rule...")})});const x=(0,z.Zw)(t);if(!x)return(0,e.jsx)(i,{title:c,children:(0,e.jsx)(f.F,{title:(0,N.t)("alerting.redirect-to-rule-viewer.title-could-not-view-rule","Could not view rule"),children:(0,e.jsx)("details",{className:s.errorMessage,children:`Could not find data source with name: ${t}.`})})});if(g.length===1){const[r]=g,v=(0,R.w$)(x,r,"/alerting/list").replace(S,"");return(0,e.jsx)(p.C5,{replace:!0,to:v})}return g.length===0?(0,e.jsx)(i,{title:c,children:(0,e.jsxs)("div",{"data-testid":"no-rules",children:["No rules in ",(0,e.jsx)("span",{className:s.param,children:t})," matched the name"," ",(0,e.jsx)("span",{className:s.param,children:n})]})}):(0,e.jsxs)(i,{title:c,children:[(0,e.jsxs)("div",{children:["Several rules in ",(0,e.jsx)("span",{className:s.param,children:t})," matched the name"," ",(0,e.jsx)("span",{className:s.param,children:n}),", please select the rule you want to view."]}),(0,e.jsx)("div",{className:s.rules,children:g.map((r,v)=>(0,e.jsxs)(m.Z,{href:(0,R.w$)(x,r,"/alerting/list"),children:[(0,e.jsx)(m.Z.Heading,{children:r.name}),(0,e.jsxs)(m.Z.Meta,{separator:"",children:[(0,e.jsx)(I.I,{name:"folder"}),(0,e.jsx)("span",{className:s.namespace,children:`${r.namespace.name} / ${r.group.name}`})]}),(0,e.jsx)(m.Z.Tags,{children:(0,e.jsx)(M.m,{labels:r.labels})})]},`${r.name}-${v}`))})]})}function H(s){return{param:(0,l.css)({fontStyle:"italic",color:s.colors.text.secondary}),rules:(0,l.css)({marginTop:s.spacing(2)}),namespace:(0,l.css)({marginLeft:s.spacing(1)}),errorMessage:(0,l.css)({whiteSpace:"pre-wrap"})}}const W=(0,B.S)($)}}]);

//# sourceMappingURL=AlertingRedirectToRule.8c1c3e2eb518393b25a8.js.map