"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7317],{39053:(D,p,t)=>{t.r(p),t.d(p,{plugin:()=>B});var F=t(16207),u=t(83340),r=t(74848),S=t(41811),U=t(96540),P=t(78529),C=t(29147),N=t(34072);const j=({width:s,height:a,data:e,options:n})=>{const d=(0,P.JQ)(e.timeRange),c=(0,U.useId)();if(!e||!e.series.length)return(0,r.jsx)("div",{className:"panel-empty",children:(0,r.jsx)("p",{children:"No data found in response"})});const l=(0,S.default)(N.BR);return(0,r.jsx)("div",{style:{width:s,height:a},children:(0,r.jsx)(C.F,{dataFrames:l(e.series,n),getLinks:d,panelId:c,zoomMode:n.zoomMode,layoutAlgorithm:n.layoutAlgorithm})})};var x=t(22803),G=t(63142),A=t(35427),f=t(45861),L=t(48457);const z=({value:s,onChange:a,context:e})=>{const n=(0,G.of)(O),d=()=>{const i={field:"",color:""};a(s?[...s,i]:[i])},c=i=>{const o=s?.slice();o.splice(i,1),a(o)},l=(i,o,m)=>{let v=s?.slice()??[];v[i][o]=m,a(v)};return(0,r.jsxs)(r.Fragment,{children:[s?.map((i,o)=>(0,r.jsxs)("div",{className:n.section,children:[(0,r.jsx)(L.O,{context:e,value:i.field??"",onChange:m=>{l(o,"field",m)},item:{settings:{filter:m=>m.name.includes("arc__")},id:`arc-field-${o}`,name:`arc-field-${o}`}}),(0,r.jsx)(A.sk,{color:i.color||"#808080",onChange:m=>{l(o,"color",m)}}),(0,r.jsx)(f.$n,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>c(o),title:"Remove arc"})]},o)),(0,r.jsx)(f.$n,{size:"sm",icon:"plus",onClick:d,variant:"secondary",children:"Add arc"})]})},O=s=>({section:(0,x.css)({display:"flex",alignItems:"center",justifyContent:"space-between",gap:`0 ${s.spacing(1)}`,marginBottom:s.spacing(1)})});var h=t(18209),g=t(95004),M=t(38919),y=t(73495);class ${getListWithDefaults(a){return a.getListAppender({name:y.m.NodeGraph,pluginId:"nodeGraph"})}hasCorrectFields(a){let e=!1,n=!1;const d=[["id",g.PU.string],["title",g.PU.string],["mainstat",g.PU.number]],c=[["id",g.PU.string],["source",g.PU.string],["target",g.PU.string]];for(const l of a)this.checkFields(d,l)&&(e=!0),this.checkFields(c,l)&&(n=!0);return e&&n}checkFields(a,e){let n=!0;for(const d of a){const[c,l]=d,i=e.fields.find(o=>o.name===c);if(!i||l!==i.type){n=!1;break}}return n}getSuggestionsForData(a){if(!a.data)return;const e=this.hasCorrectFields(a.data.series),n=a.data.series.filter(d=>d.meta&&d.meta.preferredVisualisationType==="nodeGraph");(e||n.length===2)&&this.getListWithDefaults(a).append({name:y.m.NodeGraph,score:M.nQ.Best})}}const B=new F.m(j).useFieldConfig({disableStandardOptions:Object.values(u.uo).filter(s=>s!==u.uo.Links)}).setPanelOptions((s,a)=>{s.addSelect({name:"Zoom mode",path:"zoomMode",defaultValue:"cooperative",settings:{options:[{value:"cooperative",label:"Cooperative",description:"Lets you scroll the page normally"},{value:"greedy",label:"Greedy",description:"Reacts to all zoom gestures"}]}}),s.addSelect({name:"Layout algorithm",path:"layoutAlgorithm",defaultValue:h.S.Layered,settings:{options:[{label:"Layered",value:h.S.Layered,description:"Use a layered layout"},{label:"Force",value:h.S.Force,description:"Use a force-directed layout"},{label:"Grid",value:h.S.Grid,description:"Use a grid layout"}]}}),s.addNestedOptions({category:["Nodes"],path:"nodes",build:e=>{e.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),e.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),e.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:z})}}),s.addNestedOptions({category:["Edges"],path:"edges",build:e=>{e.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),e.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})}).setSuggestionsSupplier(new $)}}]);

//# sourceMappingURL=nodeGraphPanel.96b3ca8758141a56d3be.js.map