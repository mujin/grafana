"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9147],{29147:(q,A,h)=>{h.d(A,{F:()=>lt,E:()=>de});var a=h(74848),p=h(22803),E=h(46942),U=h.n(E),g=h(96540),pe=h(71473),O=h(63142),ye=h(68079),ve=h(77824),K=h(30703);function _({id:t="triangle",fill:n=ee,headHeight:e=10}){return(0,a.jsx)("defs",{children:(0,a.jsx)("marker",{id:t,viewBox:"0 0 10 10",refX:"1",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:e,markerHeight:e,orient:"auto",children:(0,a.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:n})})})}var T=h(85195),G=h(34072);const Me="#a00",ee="#999",Le=(0,g.memo)(function(n){const{edge:e,onClick:s,onMouseEnter:o,onMouseLeave:r,hovering:l,svgIdNamespace:i,processedNodesLength:c}=n,{source:m,target:d,sourceNodeRadius:f,targetNodeRadius:u}=e,x=10+e.thickness*2,y=(0,G.a0)({x1:m.x,y1:m.y,x2:d.x,y2:d.y},f+(0,T.Hj)(f)/2||T.h,u+(0,T.Hj)(u)/2||T.h,x),M=e.color||ee,L=e.color||Me,b=`triangle-${i}-${e.id}`,v=`triangle-colored-${i}-${e.id}`;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_,{id:b,fill:M,headHeight:x}),(0,a.jsx)(_,{id:v,fill:L,headHeight:x}),(0,a.jsxs)("g",{onClick:k=>s(k,e),style:{cursor:"pointer"},"aria-label":`Edge from: ${m.id} to: ${d.id}`,children:[(0,a.jsx)("line",{strokeWidth:(l?1:0)+(e.highlighted?1:0)+e.thickness,stroke:e.highlighted?L:M,x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,strokeDasharray:e.strokeDasharray,markerEnd:`url(#${e.highlighted?v:b})`}),(0,a.jsx)("line",{stroke:"transparent",x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,strokeWidth:20,onMouseEnter:()=>{o(e.id)},onMouseLeave:()=>{r(e.id)}})]},`${e.id}-${e.source.y??""}-${c}-g`)]})}),je=t=>({mainGroup:(0,p.css)({pointerEvents:"none",fontSize:"8px"}),background:(0,p.css)({fill:t.components.tooltip.background}),text:(0,p.css)({fill:t.components.tooltip.text})}),Ce=(0,g.memo)(function(n){const{edge:e}=n,{source:s,target:o,sourceNodeRadius:r,targetNodeRadius:l}=e,i=(0,G.a0)({x1:s.x,y1:s.y,x2:o.x,y2:o.y},r||T.h,l||T.h),c={x:i.x1+(i.x2-i.x1)/2,y:i.y1+(i.y2-i.y1)/2},m=(0,O.of)(je),d=[e.mainStat,e.secondaryStat].filter(M=>M),f=d.length>1?"30":"15",u=d.length>1?15:7.5;let x=d.length>1?-5:2.5;const y=[];return d.forEach((M,L)=>{y.push((0,a.jsx)("text",{className:m.text,x:c.x,y:c.y+x,textAnchor:"middle",children:M},L)),x+=15}),(0,a.jsxs)("g",{className:m.mainGroup,children:[(0,a.jsx)("rect",{className:m.background,x:c.x-40,y:c.y-u,width:"80",height:f,rx:"5"}),y]})});var te=h(64394),Se=h(739),be=h(78055),Ie=h(89123);function Ee(){return{item:(0,p.css)({label:"LegendItem",flexGrow:0}),legend:(0,p.css)({label:"Legend",pointerEvents:"all"})}}const Ne=function(n){const{nodes:e,onSort:s,sort:o,sortable:r}=n,l=(0,O.$j)(),i=(0,O.of)(Ee),c=Re(e,l),m=(0,g.useCallback)(d=>{s({field:d.data.field,ascending:d.data.field===o?.field?!o?.ascending:!1})},[o,s]);return(0,a.jsx)(be.t,{className:i.legend,displayMode:Se.lm.List,placement:"bottom",items:c,itemRenderer:d=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ie.M,{item:d,className:i.item,onLabelClick:r?m:void 0}),r&&(o?.field===d.data.field?(0,a.jsx)(K.I,{name:o.ascending?"arrow-up":"arrow-down"}):"")]})})};function Re(t,n){if(!t.length)return[];const e=[t[0].mainStat,t[0].secondaryStat].filter(o=>!!o),s=t.find(o=>o.arcSections.length>0);return s&&s.arcSections[0].config?.color?.mode===te.Y.Fixed&&e.push(...new Set(t.map(o=>o.arcSections).flat())),t[0].color&&e.push(t[0].color),e.map(o=>{const r={label:o.config.displayName||o.name,yAxis:0,data:{field:o}};return o.config.color?.mode===te.Y.Fixed&&o.config.color?.fixedColor?r.color=n.visualization.getColorByName(o.config.color?.fixedColor||""):o.config.color?.mode&&(r.gradient=o.config.color?.mode),r.color||r.gradient||(r.color=n.visualization.getColorByName("")),r})}const ke=40,He=t=>({mainGroup:(0,p.css)({cursor:"pointer",fontSize:"10px"}),mainCircle:(0,p.css)({fill:t.components.panel.background,stroke:t.colors.border.strong}),text:(0,p.css)({width:"50px",height:"50px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"})}),we=(0,g.memo)(function(n){const{marker:e,onClick:s}=n,{node:o}=e,r=(0,O.of)(He);return o.x!==void 0&&o.y!==void 0?(0,a.jsxs)("g",{"data-node-id":o.id,className:r.mainGroup,onClick:l=>{s?.(l,e)},"aria-label":`Hidden nodes marker: ${o.id}`,children:[(0,a.jsx)("circle",{className:r.mainCircle,r:ke,cx:o.x,cy:o.y}),(0,a.jsx)("g",{children:(0,a.jsx)("foreignObject",{x:o.x-25,y:o.y-25,width:"50",height:"50",children:(0,a.jsx)("div",{className:r.text,children:(0,a.jsxs)("span",{children:[e.count>100?">100":e.count," nodes"]})})})})]}):null});var ne=h(32881),X=h(45861);function $e(){return{wrapper:(0,p.css)({label:"wrapper",pointerEvents:"all"})}}function Ge(t){const{config:n,onConfigChange:e,onPlus:s,onMinus:o,disableZoomOut:r,disableZoomIn:l}=t,[i,c]=(0,g.useState)(!1),m=!1,d=(0,O.of)($e);return(0,a.jsxs)("div",{className:d.wrapper,children:[(0,a.jsx)(ne.gW,{spacing:"sm",children:(0,a.jsxs)(ne.Gy,{spacing:"xs",children:[(0,a.jsx)(X.$n,{icon:"plus-circle",onClick:s,size:"md",title:"Zoom in",variant:"secondary",disabled:l}),(0,a.jsx)(X.$n,{icon:"minus-circle",onClick:o,size:"md",title:"Zoom out",variant:"secondary",disabled:r})]})}),m&&(0,a.jsx)(X.$n,{size:"xs",fill:"text",onClick:()=>c(f=>!f),children:i?"Hide config":"Show config"}),m&&i&&Object.keys(n).filter(f=>f!=="show").map(f=>(0,a.jsxs)("div",{children:[f,(0,a.jsx)("input",{style:{width:50},type:"number",value:n[f],onChange:u=>{e({...n,[f]:parseFloat(u.target.value)})}})]},f))]})}var B=h(2543),Pe=h(64305),J=h(13876),oe=h(81041);const ze=()=>new oe.c(new URL(h.p+h.u(2446),h.b)),Fe=()=>new oe.c(new URL(h.p+h.u(1183),h.b));var S=h(18209);function De(t,n,e,s,o){const[r,l]=(0,g.useMemo)(()=>{if(!(t.length&&n.length))return[{},{}];const i=n.reduce((m,d)=>(m[d.source.id]=[...m[d.source.id]??[],d],m[d.target.id]=[...m[d.target.id]??[],d],m),{}),c=t.reduce((m,d)=>(m[d.id]=d,m),{});return[i,c]},[n,t]);return(0,g.useMemo)(()=>t.length<=e?{nodes:t,edges:n}:s.gridLayout?Te(t,e,o):Oe(t,n,l,r,e,o),[n,r,e,t,l,o,s.gridLayout])}function Oe(t,n,e,s,o,r){let l;r?l=[e[r]]:(l=t.filter(u=>u.incoming===0),l.length||(l=[t[0]]));const{visibleNodes:i,markers:c}=We(o,l,e,s),m=Ae(c,i,e,s),d=(0,B.fromPairs)(m.map(u=>[u.node.id,u]));for(const u of m)u.count===1&&(delete d[u.node.id],i[u.node.id]=u.node);const f=n.filter(u=>(i[u.source.id]||d[u.source.id])&&(i[u.target.id]||d[u.target.id]));return{nodes:Object.values(i),edges:f,markers:Object.values(d)}}function Te(t,n,e){let s=0,o=n,r=[];if(e){const l=t.findIndex(m=>m.id===e),i=Math.floor(n/2);let c=i;s=l-i,s<0&&(c+=Math.abs(s),s=0),o=l+c+1,o>t.length&&(s>0&&(s=Math.max(0,s-(o-t.length))),o=t.length),s>1&&r.push({node:t[s-1],count:s}),t.length-o>1&&r.push({node:t[o],count:t.length-o})}else t.length-n>1&&(r=[{node:t[n],count:t.length-n}]);return{nodes:t.slice(s,o),edges:[],markers:r}}function We(t,n,e,s){const o={};let r=[...n];for(;Object.keys(o).length<t&&r.length>0;){let i=r.shift();if(o[i.id])continue;o[i.id]=i;const m=(s[i.id]||[]).map(d=>{const f=d.source.id===i.id?d.target.id:d.source.id;return e[f]});r=r.concat(m)}const l=(0,B.uniq)(r.filter(i=>!o[i.id]));return{visibleNodes:o,markers:l}}function Ae(t,n,e,s){return t.map(o=>{const r={};let l=0,i=[o];for(;i.length>0&&l<=101;){let c=i.shift();if(n[c.id]||r[c.id])continue;r[c.id]||l++,r[c.id]=c;const d=(s[c.id]||[]).map(f=>{const u=f.source.id===c.id?f.target.id:f.source.id;return e[u]});i=i.concat(d)}return{node:o,count:l}})}const Q={layoutAlgorithm:S.S.Layered,linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function Ue(t,n,e=Q,s,o,r,l,i){const[c,m]=(0,g.useState)([]),[d,f]=(0,g.useState)([]),[u,x]=(0,g.useState)(!1),y=(0,g.useRef)(""),M=Ze(t,n),L=(0,J.default)(),b=(0,g.useRef)();(0,Pe.A)(()=>{b.current&&b.current()}),(0,g.useEffect)(()=>{if(t.length===0){m([]),f([]),x(!1);return}if(l){m(t);const $=(0,B.fromPairs)(t.map(w=>[w.id,w]));f(n.map(w=>({...w,source:$[w.source],target:$[w.target]}))),x(!1);return}let I="force",H=S.S.Force;if(e.layoutAlgorithm===S.S.Layered&&(I="layered",H=S.S.Layered),y.current!==M&&(y.current=M,i&&(delete i[S.S.Force],delete i[S.S.Layered])),i&&i[H]){m(i[H]?.nodes??[]),f(i[H]?.edges??[]),x(!1);return}x(!0);const D=Be(t,n,I,({nodes:$,edges:w})=>{L()&&(m($),f(w),x(!1),i&&(i[H]={nodes:$,edges:w}))});return b.current=D,D},[l,t,n,L,e.layoutAlgorithm,i,M]);const[v,k]=(0,g.useMemo)(()=>{if(t.length===0)return[[],[]];const I=t.map(F=>({...F})),H=n.map(F=>({...F}));return Ye(I,o,e.sort),[I,H]},[e.sort,t,n,o]),{nodes:z,edges:P,markers:C}=De(e.gridLayout?v:c,e.gridLayout?k:d,s,e,r),N=(0,g.useMemo)(()=>(0,G._d)([...z,...(C||[]).map(I=>I.node)]),[z,C]);return{nodes:z,edges:P,markers:C,bounds:N,hiddenNodesCount:t.length-z.length,loading:u}}function Be(t,n,e,s){const o=e==="force"?ze():Fe();return o.onmessage=r=>{const l=(0,B.fromPairs)(t.map(i=>[i.id,i]));r.data.nodes=r.data.nodes.map(i=>({...l[i.id],...i})),s(r.data)},o.postMessage({nodes:t.map(r=>({id:r.id,incoming:r.incoming})),edges:n,config:Q}),()=>{o.terminate()}}function Ye(t,n,e){const l=Math.min(Math.floor((n-120)/140),t.length),i=Math.floor((l-1)*120/2);e&&t.sort((c,m)=>{const d=e.field.values[c.dataFrameRowIndex],f=e.field.values[m.dataFrameRowIndex];return e.ascending?d-f:f-d});for(const[c,m]of t.entries()){const d=Math.floor(c/l),f=c%l;m.x=f*120-i,m.y=-60+d*140}}function Ze(t,n){const e=[`n:${t.length}`,`e:${n.length}`];if(t.length>0){const s=t[0].id??"";if(e.push(`f:${s}`),t.length>=3){const i=Math.floor(t.length/2),c=t[i].id??"";e.push(`m:${c}`)}const o=t[t.length-1].id??"";e.push(`l:${o}`);let r=0,l=0;for(const i of t){const c=i.incoming||0;c>0&&r++,l=Math.max(l,c)}e.push(`cn:${r}`),e.push(`mc:${l}`)}return e.join("_")}var Ve=h(81753),Ke=h(97375),Xe=h(30930),Je=h(94535);function Qe(t,n,e,s,o,r){const[l,i]=(0,g.useState)(void 0),c=(0,g.useCallback)((d,f)=>{const[u,x]=s.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],y=[{label:u,onClick:b=>{r(b.id),o({...s,gridLayout:x}),i(void 0)}}],M=n?t(n,f.dataFrameRowIndex):[],L=ie(M,f,y);i(se((0,a.jsx)(_e,{node:f,nodes:n}),d,i,L))},[s,n,t,i,o,r]);return{onEdgeOpen:(0,g.useCallback)((d,f)=>{if(!e)return;const u=t(e,f.dataFrameRowIndex),x=ie(u,f);i(se((0,a.jsx)(et,{edge:f,edges:e}),d,i,x))},[e,t,i]),onNodeOpen:c,MenuComponent:l}}function se(t,n,e,s){return(0,a.jsx)(Ke.t,{renderHeader:()=>t,renderMenuItems:s,onClose:()=>e(void 0),x:n.pageX,y:n.pageY})}function ie(t,n,e){if(!(t.length||e?.length))return;const s=qe(t);return()=>{let o=s?.map((r,l)=>(0,a.jsx)(Xe.r,{label:r.label,children:(r.items||[]).map(re(n))},`${r.label}${l}`));return e&&(o=[...e.map(re(n)),...o]),o}}function re(t){return function(e){return(0,a.jsx)(Je.D,{url:e.url,label:e.label,ariaLabel:e.ariaLabel,onClick:e.onClick?s=>{s?.ctrlKey||s?.metaKey||s?.shiftKey||(s?.preventDefault(),s?.stopPropagation(),e.onClick?.(t))}:void 0,target:e.target||"_self"},e.label)}}function qe(t){const n="Open in Explore",e=t.reduce((s,o)=>{let r,l;return o.title.indexOf("/")!==-1?(r=o.title.split("/")[0],l=o.title.split("/")[1],s[r]=s[r]||[],s[r].push({l:o,newTitle:l})):(s[n]=s[n]||[],s[n].push({l:o})),s},{});return Object.keys(e).map(s=>({label:s,ariaLabel:s,items:e[s].map(o=>({label:o.newTitle||o.l.title,ariaLabel:o.newTitle||o.l.title,url:o.l.href,onClick:o.l.onClick,target:o.l.target}))}))}function ae({field:t,index:n}){return(0,a.jsx)(Y,{label:t.config?.displayName||t.name,value:(0,G.Xq)(t.config,t.values[n]||"")})}function Y({label:t,value:n}){const e=(0,O.of)(tt);return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:e.label,children:[t,": "]}),(0,a.jsx)("td",{className:e.value,children:n})]})}function _e({node:t,nodes:n}){const e=[];if(n){const s=(0,G.AG)(n);for(const o of[s.title,s.subTitle,s.mainStat,s.secondaryStat,...s.details])o&&o.values[t.dataFrameRowIndex]&&e.push((0,a.jsx)(ae,{field:o,index:t.dataFrameRowIndex},o.name))}else t.title&&e.push((0,a.jsx)(Y,{label:"Title",value:t.title},"title")),t.subTitle&&e.push((0,a.jsx)(Y,{label:"Subtitle",value:t.subTitle},"subtitle"));return(0,a.jsx)("table",{style:{width:"100%"},children:(0,a.jsx)("tbody",{children:e})})}function et(t){const n=t.edge.dataFrameRowIndex,e=(0,G.tF)(t.edges),s=e.source?.values[n]||"",o=e.target?.values[n]||"",r=[];s&&o&&r.push((0,a.jsx)(Y,{label:"Source \u2192 Target",value:`${s} \u2192 ${o}`},"header-row"));for(const l of[e.mainStat,e.secondaryStat,...e.details])l&&l.values[n]&&r.push((0,a.jsx)(ae,{field:l,index:n},`field-row-${n}`));return(0,a.jsx)("table",{style:{width:"100%"},children:(0,a.jsx)("tbody",{children:r})})}const tt=t=>({label:(0,p.css)({label:"Label",lineHeight:1.25,color:t.colors.text.disabled,fontSize:t.typography.size.sm,fontWeight:t.typography.fontWeightMedium,paddingRight:t.spacing(1)}),value:(0,p.css)({label:"Value",fontSize:t.typography.size.sm,fontWeight:t.typography.fontWeightMedium,color:t.colors.text.primary})});var le=h(80292);function nt(t,n,e){const s=(0,le.A)(t.gridLayout);let o;if(s===!0&&!t.gridLayout&&e){const r=n.find(l=>l.id===e);r&&(o={x:-r.x,y:-r.y})}return o}function ot(t){const[n,e]=(0,g.useState)(),s=(0,J.default)();return(0,g.useEffect)(()=>{t&&(e(t),setTimeout(()=>{s()&&e(void 0)},500))},[t,s]),n}function st({scale:t=1,bounds:n,focus:e}={}){const s=(0,J.default)(),o=(0,g.useRef)(!1),r=(0,g.useRef)(0),l=(0,g.useRef)(null),i={x:0,y:0},c=(0,g.useMemo)(()=>({right:n?-n.left:1/0,left:n?-n.right:-1/0,bottom:n?-n.top:-1/0,top:n?-n.bottom:1/0}),[n]),m=(0,g.useRef)(i),d=(0,g.useRef)(i),f=(0,g.useRef)(i),[u,x]=(0,g.useState)({isPanning:!1,position:i});(0,g.useEffect)(()=>{const L=N=>{!o.current&&s()&&(o.current=!0,m.current=ce(N),d.current={...f.current},x(I=>({...I,isPanning:!0})),k())},b=()=>{o.current&&s()&&(o.current=!1,x(N=>({...N,isPanning:!1})),z())},v=N=>{L(N),P(N)},k=()=>{document.addEventListener("mousemove",P),document.addEventListener("mouseup",b),document.addEventListener("touchmove",P),document.addEventListener("touchend",b)},z=()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",P),document.removeEventListener("touchend",b)},P=N=>{cancelAnimationFrame(r.current);const I=ce(N);r.current=requestAnimationFrame(()=>{if(s()&&l.current){let H=I.x-m.current.x,F=I.y-m.current.y;f.current={x:W(d.current.x+H/t,c.left,c.right),y:W(d.current.y+F/t,c.top,c.bottom)},x(D=>({...D,position:{...f.current}}))}})},C=l.current;return C&&(C.addEventListener("mousedown",v),C.addEventListener("touchstart",v)),()=>{C&&(C.removeEventListener("mousedown",v),C.removeEventListener("touchstart",v))}},[t,c,s]);const y=(0,le.A)(e);(0,g.useEffect)(()=>{if(e&&y?.x!==e.x&&y?.y!==e.y){const L={x:W(e.x,c.left,c.right),y:W(e.y,c.top,c.bottom)};x({position:L,isPanning:!1}),f.current=L,d.current=L}},[e,y,c,f,d]);let M=u.position;return e&&y?.x!==e.x&&y?.y!==e.y&&(M=e),{state:{...u,position:{x:W(M.x,c.left,c.right),y:W(M.y,c.top,c.bottom)}},ref:l}}function W(t,n,e){return Math.min(Math.max(t,n??-1/0),e??1/0)}function ce(t){return"changedTouches"in t&&t instanceof TouchEvent?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:t instanceof MouseEvent?{x:t.clientX,y:t.clientY}:{x:0,y:0}}const Z={stepUp:t=>t*1.5,stepDown:t=>t/1.5,min:.13,max:2.25,zoomMode:S.d.Cooperative};function it(t=Z){const{min:n,max:e,zoomMode:s}={...Z,...t},o=t.stepUp??Z.stepUp,r=t.stepDown??Z.stepDown,l=(0,g.useRef)(null),[i,c]=(0,g.useState)(1),m=(0,g.useCallback)(()=>{i<(e??1/0)&&c(o(i))},[i,o,e]),d=(0,g.useCallback)(()=>{i>(n??-1/0)&&c(r(i))},[i,r,n]),f=(0,g.useCallback)(function(u){if(u.ctrlKey||u.metaKey||s===S.d.Greedy){if(u.preventDefault(),c(Math.min(Math.max(n??-1/0,i+Math.min(u.deltaY,2)*-.01),e??1/0)),u.deltaY<0){const x=i+Math.max(u.deltaY,-4)*-.015;c(Math.max(n??-1/0,x))}else if(u.deltaY>0){const x=i+Math.min(u.deltaY,4)*-.015;c(Math.min(e??1/0,x))}}},[n,e,i,s]);return(0,g.useEffect)(()=>{if(!l.current)return;const u=l.current;return u.addEventListener("wheel",f,{passive:!1}),()=>{u&&u.removeEventListener("wheel",f)}},[f]),{onStepUp:m,onStepDown:d,scale:Math.max(Math.min(i,e??1/0),n??-1/0),isMax:i>=(e??1/0),isMin:i<=(n??-1/0),ref:l}}const rt=t=>({wrapper:(0,p.css)({label:"wrapper",height:"100%",width:"100%",overflow:"hidden",position:"relative"}),svg:(0,p.css)({label:"svg",height:"100%",width:"100%",overflow:"visible",fontSize:"10px",cursor:"move"}),svgPanning:(0,p.css)({label:"svgPanning",userSelect:"none"}),noDataMsg:(0,p.css)({height:"100%",width:"100%",display:"grid",placeItems:"center",fontSize:t.typography.h4.fontSize,color:t.colors.text.secondary}),mainGroup:(0,p.css)({label:"mainGroup",willChange:"transform"}),viewControls:(0,p.css)({label:"viewControls",position:"absolute",left:"2px",bottom:"3px",right:0,display:"flex",alignItems:"flex-end",justifyContent:"space-between",pointerEvents:"none"}),layoutAlgorithm:(0,p.css)({label:"layoutAlgorithm",pointerEvents:"all",position:"absolute",top:"8px",right:"8px",zIndex:1}),legend:(0,p.css)({label:"legend",background:t.colors.background.secondary,boxShadow:t.shadows.z1,paddingBottom:"5px",marginRight:"10px"}),viewControlsWrapper:(0,p.css)({marginLeft:"auto"}),alert:(0,p.css)({label:"alert",padding:"5px 8px",fontSize:"10px",textShadow:"0 1px 0 rgba(0, 0, 0, 0.2)",borderRadius:t.shape.radius.default,alignItems:"center",position:"absolute",right:0,background:t.colors.warning.main,color:t.colors.warning.contrastText}),loadingWrapper:(0,p.css)({label:"loadingWrapper",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"})}),at=200,de=500;function lt({getLinks:t,dataFrames:n,nodeLimit:e,panelId:s,zoomMode:o,layoutAlgorithm:r}){const l=e||at,{edges:i,nodes:c}=(0,Ve.d)(n),[m,{width:d,height:f}]=(0,pe.A)(),[u,x]=(0,g.useState)(Q),y=(0,g.useRef)({});(0,g.useEffect)(()=>{r&&x(j=>({...j,gridLayout:r===S.S.Grid,layoutAlgorithm:r}))},[r]);const M=c[0],L=i[0],b=s||"nodegraphpanel",v=(0,g.useMemo)(()=>(0,G.BJ)(M,L),[L,M]),{nodeHover:k,setNodeHover:z,clearNodeHover:P,edgeHover:C,setEdgeHover:N,clearEdgeHover:I}=mt(),[H,F]=(0,g.useState)([]);(0,g.useEffect)(()=>{let j=[];k?j=(0,G.Tl)(v.nodes,v.edges,k):C&&(j=(0,G.K0)(v.nodes,v.edges,C)),F(j)},[k,C,v]);const[D,$]=(0,g.useState)(),w=(0,g.useCallback)((j,kt)=>$(kt.node.id),[$]),{nodes:V,edges:ue,markers:ht,bounds:xt,hiddenNodesCount:ge,loading:pt}=Ue(v.nodes,v.edges,u,l,d,D,v.hasFixedPositions,y.current),yt=nt(u,V,D),{panRef:vt,zoomRef:fe,onStepUp:Mt,onStepDown:Lt,isPanning:jt,position:me,scale:he,isMaxZoom:Ct,isMinZoom:St}=ft(xt,yt,o),{onEdgeOpen:bt,onNodeOpen:It,MenuComponent:Et}=Qe(t,M,L,u,x,$),R=(0,O.of)(rt),Nt=(0,g.useCallback)(j=>{m(j),fe.current=j},[m,fe]),Rt=ot(D),xe=j=>{j.layoutAlgorithm!==u.layoutAlgorithm&&$(void 0),x(j)};return(0,g.useEffect)(()=>{y.current={}},[M,L]),(0,a.jsxs)("div",{ref:Nt,className:R.wrapper,children:[pt?(0,a.jsxs)("div",{className:R.loadingWrapper,children:["Computing layout\xA0",(0,a.jsx)(ye.y,{})]}):null,!s&&(0,a.jsx)("div",{className:R.layoutAlgorithm,children:(0,a.jsx)(ve.z,{size:"sm",options:[{label:"Layered",value:S.S.Layered},{label:"Force",value:S.S.Force},{label:"Grid",value:S.S.Grid}],value:u.gridLayout?S.S.Grid:u.layoutAlgorithm,onChange:j=>{xe({...u,gridLayout:j===S.S.Grid,layoutAlgorithm:j})}})}),n.length&&v.nodes.length?(0,a.jsx)("svg",{ref:vt,viewBox:`${-(d/2)} ${-(f/2)} ${d} ${f}`,className:U()(R.svg,jt&&R.svgPanning),children:(0,a.jsxs)("g",{className:R.mainGroup,style:{transform:`scale(${he}) translate(${Math.floor(me.x)}px, ${Math.floor(me.y)}px)`},children:[!u.gridLayout&&(0,a.jsx)(ut,{edges:ue,nodeHoveringId:k,edgeHoveringId:C,onClick:bt,onMouseEnter:N,onMouseLeave:I,svgIdNamespace:b,processedNodesLength:v.nodes.length}),(0,a.jsx)(ct,{nodes:V,onMouseEnter:z,onMouseLeave:P,onClick:It,hoveringIds:H||[Rt]}),(0,a.jsx)(dt,{markers:ht||[],onClick:w}),!u.gridLayout&&(0,a.jsx)(gt,{edges:ue,nodeHoveringId:k,edgeHoveringId:C})]})}):(0,a.jsx)("div",{className:R.noDataMsg,children:"No data"}),(0,a.jsxs)("div",{className:R.viewControls,children:[V.length?(0,a.jsx)("div",{className:R.legend,children:(0,a.jsx)(Ne,{sortable:u.gridLayout,nodes:V,sort:u.sort,onSort:j=>{x({...u,sort:j})}})}):null,(0,a.jsx)("div",{className:R.viewControlsWrapper,children:(0,a.jsx)(Ge,{config:u,onConfigChange:xe,onMinus:Lt,onPlus:Mt,scale:he,disableZoomIn:Ct,disableZoomOut:St})})]}),ge>0&&(0,a.jsxs)("div",{className:R.alert,style:{top:s?"0px":"40px"},"aria-label":"Nodes hidden warning",children:[(0,a.jsx)(K.I,{size:"sm",name:"info-circle"})," ",ge," nodes are hidden for performance reasons."]}),u.layoutAlgorithm===S.S.Layered&&v.nodes.length>de&&(0,a.jsxs)("div",{className:R.alert,style:{top:s?"30px":"70px"},"aria-label":"Layered layout performance warning",children:[(0,a.jsx)(K.I,{size:"sm",name:"exclamation-triangle"})," Layered layout may be slow with ",v.nodes.length," ","nodes."]}),Et]})}const ct=(0,g.memo)(function(n){return(0,a.jsx)(a.Fragment,{children:n.nodes.map(e=>(0,a.jsx)(T.bP,{node:e,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onClick:n.onClick,hovering:!n.hoveringIds||n.hoveringIds.length===0?"default":n.hoveringIds?.includes(e.id)?"active":"inactive"},e.id))})}),dt=(0,g.memo)(function(n){return(0,a.jsx)(a.Fragment,{children:n.markers.map(e=>(0,a.jsx)(we,{marker:e,onClick:n.onClick},"marker-"+e.node.id))})}),ut=(0,g.memo)(function(n){return(0,a.jsx)(a.Fragment,{children:n.edges.map(e=>(0,a.jsx)(Le,{edge:e,hovering:e.source.id===n.nodeHoveringId||e.target.id===n.nodeHoveringId||n.edgeHoveringId===e.id,onClick:n.onClick,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,svgIdNamespace:n.svgIdNamespace,processedNodesLength:n.processedNodesLength},`${e.id}-${e.source.y??""}-${n.processedNodesLength}`))})}),gt=(0,g.memo)(function(n){return(0,a.jsx)(a.Fragment,{children:n.edges.map((e,s)=>{const o=e.source.id===n.nodeHoveringId||e.target.id===n.nodeHoveringId||n.edgeHoveringId===e.id,r=e.mainStat||e.secondaryStat;return o&&r&&(0,a.jsx)(Ce,{edge:e},e.id)})})});function ft(t,n,e){const{scale:s,onStepDown:o,onStepUp:r,ref:l,isMax:i,isMin:c}=it({zoomMode:e}),{state:m,ref:d}=st({scale:s,bounds:t,focus:n}),{position:f,isPanning:u}=m;return{zoomRef:l,panRef:d,position:f,isPanning:u,scale:s,onStepDown:o,onStepUp:r,isMaxZoom:i,isMinZoom:c}}function mt(){const[t,n]=(0,g.useState)(void 0),e=(0,g.useCallback)(()=>n(void 0),[n]),[s,o]=(0,g.useState)(void 0),r=(0,g.useCallback)(()=>o(void 0),[o]);return{nodeHover:t,setNodeHover:n,clearNodeHover:e,edgeHover:s,setEdgeHover:o,clearEdgeHover:r}}},18209:(q,A,h)=>{h.d(A,{S:()=>p,d:()=>a});var a=(E=>(E.Cooperative="cooperative",E.Greedy="greedy",E))(a||{}),p=(E=>(E.Force="force",E.Grid="grid",E.Layered="layered",E))(p||{})},81753:(q,A,h)=>{h.d(A,{d:()=>E});var a=h(96540),p=h(34072);function E(U){return(0,a.useMemo)(()=>(0,p.CP)(U),[U])}}}]);

//# sourceMappingURL=9147.0ff86c0869b56a05c57d.js.map