"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1037,2182],{83673:($,f,t)=>{t.d(f,{A:()=>C});var e=t(74848),o=t(22803),h=t(96540),v=t(63142),g=t(34999),r=t(41654),p=t(19164),i=t(56840),s=t(66404),l=t(31286),c=t(45861),B=t(6773),I=t(30703);const y=({icon:n,color:d})=>{const a=(0,v.of)(R,d);return(0,e.jsx)("div",{className:a.iconCircle,children:(0,e.jsx)(I.I,{name:n,size:"xl"})})};function R(n,d){const a=n.visualization.getColorByName(d);return{iconCircle:(0,o.css)({borderRadius:n.shape.radius.circle,padding:n.spacing(1),color:a,backgroundColor:B.MV.alpha(a,.2)})}}const b=({hasPublicAccess:n,hasImageRenderer:d,onSetupPublicAccess:a})=>{const m=(0,v.of)(L);return(0,e.jsxs)(r.B,{direction:"column",gap:5,children:[(0,e.jsxs)(r.B,{direction:"column",children:[(0,e.jsx)(s.E,{variant:"h4",children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.enhanced-features.header",children:"Enhance your GitHub experience"})}),(0,e.jsx)(s.E,{color:"secondary",children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.enhanced-features.description",children:"Get the most out of your GitHub integration with these optional add-ons"})})]}),(0,e.jsxs)(r.B,{gap:2,direction:"row",height:"100%",children:[(0,e.jsxs)(l.a,{width:"40%",height:"100%",display:"flex",direction:"column",gap:2,alignItems:"flex-start",children:[(0,e.jsxs)(r.B,{gap:2,children:[(0,e.jsx)(y,{icon:"sync",color:"blue"}),(0,e.jsx)(y,{icon:"code-branch",color:"purple"})]}),(0,e.jsx)(i.x6,{i18nKey:"provisioning.enhanced-features.title-instant-updates-requests-webhooks",children:"Instant updates and pull requests with webhooks."}),(0,e.jsx)(l.a,{display:"flex",flex:"1",minHeight:"50px",children:(0,e.jsx)(s.E,{variant:"body",color:"secondary",children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.enhanced-features.description-instant-updates",children:"Get instant updates in Grafana as soon as changes are committed. Review and approve changes using pull requests before they go live."})})}),(0,e.jsx)(c.z9,{fill:"outline",variant:"secondary",onClick:a,disabled:n,icon:n?"check":void 0,children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.enhanced-features.set-up-public-webhooks",children:"Set up public webhooks"})})]}),(0,e.jsx)("div",{className:m.separator}),(0,e.jsxs)(l.a,{width:"40%",height:"100%",paddingLeft:2,display:"flex",direction:"column",gap:2,alignItems:"flex-start",children:[(0,e.jsx)(y,{icon:"camera",color:"orange"}),(0,e.jsx)(i.x6,{i18nKey:"provisioning.enhanced-features.title-visual-previews-in-pull-requests",children:"Visual previews in pull requests with image rendering"}),(0,e.jsx)(l.a,{display:"flex",flex:"1",minHeight:"50px",children:(0,e.jsx)(s.E,{variant:"body",color:"secondary",children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.enhanced-features.description-visual-previews-dashboard-updates-directly-requests",children:"See visual previews of dashboard updates directly in pull requests"})})}),(0,e.jsx)(c.z9,{fill:"outline",variant:"secondary",href:"https://grafana.com/grafana/plugins/grafana-image-renderer/",icon:d?"check":"external-link-alt",disabled:d,children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.enhanced-features.set-up-image-rendering",children:"Set up image rendering"})})]})]})]})};function L(n){return{separator:(0,o.css)({borderRight:`2px solid ${n.colors.border.weak}`})}}var O=t(3064);const T=({repos:n,hasRequiredFeatures:d,onSetupFeatures:a})=>{const m=(0,v.of)(Z);return(0,e.jsxs)(r.B,{direction:"column",gap:3,children:[(0,e.jsx)(s.E,{variant:"h2",children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.features-list.manage-your-dashboards-with-remote-provisioning",children:"Get started with GitSync"})}),(0,e.jsxs)("ul",{className:m.featuresList,children:[(0,e.jsx)("li",{children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.features-list.manage-dashboards-provision-updates-automatically",children:"Manage dashboards as code in GitHub and provision updates automatically"})}),(0,e.jsx)("li",{children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.features-list.store-dashboards-in-version-controlled-storage",children:"Store dashboards in version-controlled storage for better organization and history tracking"})})]}),d?(0,e.jsx)(r.B,{direction:"row",alignItems:"center",gap:2,children:(0,e.jsx)(O.N,{items:n})}):(0,e.jsx)(l.a,{children:(0,e.jsx)(c.z9,{fill:"outline",onClick:a,children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.features-list.actions.set-up-required-feature-toggles",children:"Set up required feature toggles"})})})]})},Z=n=>({featuresList:(0,o.css)({listStyleType:"none",paddingLeft:0,marginLeft:n.spacing(-1),"& li":{position:"relative",paddingLeft:n.spacing(4),marginBottom:n.spacing(1),"&:before":{content:'"\u2713"',position:"absolute",left:n.spacing(1),top:"0",color:n.colors.text.secondary,fontWeight:n.typography.fontWeightBold}}})});var H=t(22787),w=t(32881),Y=t(47931),V=t(50992);const X=({code:n,copyCode:d=!0})=>{const a=n.split(`
`).length,m=a*24<=42,P=(0,v.of)(J);return(0,e.jsxs)("div",{className:P.container,children:[d&&(0,e.jsx)(Y.b,{className:P.copyButton,variant:"secondary",size:"sm",icon:"copy",getText:()=>n}),(0,e.jsx)(V.B,{value:n,language:"ini",showLineNumbers:!1,showMiniMap:!1,height:m?"42px":`${Math.min(a*24,300)}px`,readOnly:!0,monacoOptions:{scrollBeyondLastLine:!1,scrollbar:{vertical:m?"hidden":"auto",horizontal:"auto"}}})]})},J=n=>({container:(0,o.css)({position:"relative",margin:`${n.spacing(2)} 0`,border:`1px solid ${n.colors.border.medium}`}),copyButton:(0,o.css)({position:"absolute",top:n.spacing(1),right:n.spacing(1),zIndex:1})}),Q=({step:n})=>(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.E,{element:"h3",variant:"h4",children:n?.title}),n.description&&(0,e.jsx)(w.mc,{margin:"sm",children:(0,e.jsx)(s.E,{element:"p",children:n.description})}),n.code&&(0,e.jsx)(X,{code:n.code,copyCode:n.copyCode})]});var k=t(8073),q=t(76319);const _=({step:n,index:d,currentStep:a,onStepClick:m,styles:P})=>{const K=d<a,M=d===a,G=d>a,z=()=>K?{icon:"check-circle",color:"success",label:(0,i.t)("provisioning.sidebar-item.label-completed-step","Completed step")}:M?{icon:"circle",color:"primary",label:(0,i.t)("provisioning.sidebar-item.label-current-step","Current step")}:{icon:"circle",color:"secondary",label:(0,i.t)("provisioning.sidebar-item.label-pending-step","Pending step")},{icon:U,color:F,label:N}=z(),ne=()=>m(d),ie=oe=>{oe.stopPropagation(),m(d)};return(0,e.jsx)(k.Z,{className:`${P.stepItem} ${M?P.activeStep:""} ${P.plainCard}`,onClick:ne,children:(0,e.jsxs)(r.B,{direction:"row",alignItems:"center",gap:2,children:[(0,e.jsx)(q.K,{name:U,size:"sm",variant:G?"secondary":"primary",color:F,"aria-label":N,onClick:ie}),(0,e.jsx)(s.E,{color:M?"primary":"secondary",weight:M?"medium":"regular",children:n})]})})},ee=n=>({stepItem:(0,o.css)({padding:n.spacing(1),cursor:"pointer","&:hover":{background:n.colors.action.hover}}),activeStep:(0,o.css)({color:n.colors.primary.text}),plainCard:(0,o.css)({background:"transparent",border:"none",boxShadow:"none"})}),te=({steps:n,currentStep:d,onStepClick:a})=>{if(n.length===0||n.length===1)return null;const m=(0,v.of)(ee);return(0,e.jsx)(l.a,{width:"260px",padding:1,children:(0,e.jsx)(r.B,{direction:"column",gap:1,children:n.map((P,K)=>(0,e.jsx)(_,{step:P,index:K,currentStep:d,onStepClick:a,styles:m},K))})})},u=({title:n,description:d,steps:a,isOpen:m,onDismiss:P})=>{const K=(0,v.of)(j),[M,G]=(0,h.useState)(0),z=M===0,U=M===a.length-1,F=a.map(ie=>ie.title),N=()=>!U&&G(M+1),ne=()=>!z&&G(M-1);return(0,e.jsxs)(H.a,{isOpen:m,title:n,onDismiss:P,className:K.modal,children:[(0,e.jsxs)(r.B,{direction:"column",gap:4,children:[(0,e.jsx)(s.E,{variant:"body",color:"secondary",children:d}),(0,e.jsxs)(r.B,{direction:"row",height:"100%",children:[(0,e.jsx)(te,{steps:F,currentStep:M,onStepClick:G}),(0,e.jsx)("div",{className:K.contentWrapper,children:(0,e.jsx)(Q,{step:a[M]})})]})]}),(0,e.jsx)(H.a.ButtonRow,{children:(0,e.jsxs)(r.B,{direction:"row",justifyContent:"flex-end",gap:2,children:[(0,e.jsx)(c.$n,{variant:"secondary",onClick:ne,disabled:z,children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.setup-modal.previous",children:"Previous"})}),U?(0,e.jsx)(c.$n,{variant:"primary",onClick:P,icon:"check-circle",children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.setup-modal.done",children:"Done"})}):(0,e.jsx)(c.$n,{variant:"primary",onClick:N,children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.setup-modal.next",children:"Next"})})]})})]})},j=n=>({modal:(0,o.css)({width:"1100px",maxWidth:"95%"}),description:(0,o.css)({marginBottom:n.spacing(3),padding:n.spacing(0,1)}),contentWrapper:(0,o.css)({flex:1,overflowY:"auto",minWidth:0,padding:n.spacing(2),borderLeft:`1px solid ${n.colors.border.weak}`}),footer:(0,o.css)({padding:n.spacing(2),borderTop:`1px solid ${n.colors.border.weak}`,marginTop:n.spacing(2)})});var x=t(53247);const D=`# In your custom.ini file

[feature_toggles]
provisioning = true
kubernetesClientDashboardsFolders = true
kubernetesDashboards = true ; use k8s from browser

# If you want easy kubectl setup development mode
grafanaAPIServerEnsureKubectlAccess = true`,S=`ngrok http 3000

Help shape K8s Bindings https://ngrok.com/new-features-update?ref=k8s

Session Status                online
Account                       Roberto Jim\xE9nez S\xE1nchez (Plan: Free)
Version                       3.18.4
Region                        Europe (eu)
Latency                       44ms
Web Interface                 http://127.0.0.1:4040
Forwarding                    https://d60d-83-33-235-27.ngrok-free.app -> http://localhost:3000
Connections                   ttl     opn     rt1     rt5     p50     p90
                              50      2       0.00    0.00    83.03   90.56

HTTP Requests
-------------

09:18:46.147 CET             GET  /favicon.ico                   302 Found
09:18:46.402 CET             GET  /login`,E=`[server]
root_url = https://d60d-83-33-235-27.ngrok-free.app`,W=n=>{switch(n){case"public-access":return{title:(0,i.t)("provisioning.getting-started.modal-title-set-up-public-access","Set up public access"),description:(0,i.t)("provisioning.getting-started.modal-description-public-access","Set up public access to your Grafana instance to enable GitHub integration"),steps:[{title:(0,i.t)("provisioning.getting-started.step-title-start-ngrok","Start ngrok for temporary public access"),description:(0,i.t)("provisioning.getting-started.step-description-start-ngrok","Run this command to create a secure tunnel to your local Grafana:"),code:"ngrok http 3000"},{title:(0,i.t)("provisioning.getting-started.step-title-copy-url","Copy your public URL"),description:(0,i.t)("provisioning.getting-started.step-description-copy-url","From the ngrok output, copy the https:// forwarding URL that looks like this:"),code:S,copyCode:!1},{title:(0,i.t)("provisioning.getting-started.step-title-update-grafana-config","Update your Grafana configuration"),description:(0,i.t)("provisioning.getting-started.step-description-update-grafana-config","Add this to your custom.ini file, replacing the URL with your actual ngrok URL:"),code:E}]};case"required-features":return{title:(0,i.t)("provisioning.getting-started.modal-title-set-up-required-features","Set up required features"),description:(0,i.t)("provisioning.getting-started.modal-description-required-features","Enable required Grafana features for provisioning"),steps:[{title:(0,i.t)("provisioning.getting-started.step-title-enable-feature-toggles","Enable Required Feature Toggles"),description:(0,i.t)("provisioning.getting-started.step-description-enable-feature-toggles","Add these settings to your custom.ini file to enable necessary features:"),code:D}]};default:return{title:"",description:"",steps:[]}}};function C({items:n}){const d=(0,v.of)(A),a=(0,p.F9)(void 0,{refetchOnMountOrArgChange:!0}),m=a.data?.legacyStorage,P=!!a.data?.items?.length,{hasPublicAccess:K,hasImageRenderer:M,hasRequiredFeatures:G}=(0,x.NY)(),[z,U]=(0,h.useState)(!1),[F,N]=(0,h.useState)(null);return(0,e.jsxs)(e.Fragment,{children:[m&&(0,e.jsx)(g.F,{severity:"info",title:(0,i.t)("provisioning.getting-started.title-setting-connection-could-cause-temporary-outage","Setting up this connection could cause a temporary outage"),children:(0,e.jsx)(i.x6,{i18nKey:"provisioning.getting-started.alert-temporary-outage",children:"When you connect your whole instance, dashboards will be unavailable while running the migration. We recommend warning your users before starting the process."})}),(0,e.jsxs)(r.B,{direction:"column",gap:6,wrap:"wrap",children:[(0,e.jsxs)(r.B,{gap:10,alignItems:"center",children:[(0,e.jsx)(T,{repos:n,hasRequiredFeatures:G,onSetupFeatures:()=>{N("required-features"),U(!0)}}),(0,e.jsx)("div",{className:d.imageContainer,children:(0,e.jsx)("img",{src:"public/img/provisioning/provisioning.svg",className:d.image,alt:"Grafana provisioning"})})]}),(!K||!M)&&P&&(0,e.jsx)(b,{hasPublicAccess:K,hasImageRenderer:M,onSetupPublicAccess:()=>{N("public-access"),U(!0)}})]}),z&&F&&(0,e.jsx)(u,{...W(F),isOpen:z,onDismiss:()=>U(!1)})]})}function A(n){return{imageContainer:(0,o.css)({height:350,display:"flex",alignItems:"center",justifyContent:"center"}),image:(0,o.css)({borderRadius:n.shape.radius.default,width:"100%",height:"100%"})}}},90886:($,f,t)=>{t.r(f),t.d(f,{default:()=>i});var e=t(74848),o=t(31286),h=t(66404),v=t(89640),g=t(13791),r=t(56840),p=t(83673);function i({items:l}){return(0,e.jsx)(g.Y,{navId:"provisioning",pageNav:{text:(0,r.t)("provisioning.getting-started-page.header","Provisioning"),subTitle:(0,r.t)("provisioning.getting-started-page.subtitle-provisioning-feature","View and manage your provisioning connections")},children:(0,e.jsxs)(g.Y.Contents,{children:[(0,e.jsx)(s,{}),(0,e.jsx)(p.A,{items:l})]})})}function s(){return(0,e.jsx)(o.a,{display:"flex",backgroundColor:"info",borderRadius:"default",paddingY:2,paddingX:2,marginBottom:3,alignItems:"stretch",children:(0,e.jsx)(h.E,{children:(0,e.jsxs)(r.x6,{i18nKey:"provisioning.banner.message",children:["This feature is currently under active development. For the best experience and latest improvements, we recommend using the"," ",(0,e.jsx)(v.Y,{href:"https://grafana.com/grafana/download/nightly",external:!0,children:"nightly build"})," ","of Grafana."]})})})}},15134:($,f,t)=>{t.r(f),t.d(f,{default:()=>te});var e=t(74848),o=t(96540),h=t(34999),v=t(71599),g=t(41654),r=t(54314),p=t(60208),i=t(13941),s=t(19164),l=t(13791),c=t(56840),B=t(83673),I=t(90886),y=t(12737),R=t(74451),b=t(89640),L=t(30703),O=t(66404),T=t(8073),Z=t(45861),H=t(34145),w=t(91555),Y=t(52524),V=t(31660);function X({repository:u}){const{metadata:j,spec:x,status:D}=u,S=j?.name??"",E=()=>{const C=[];if(x?.type==="github"){const{url:A="",branch:n}=x.github??{},d=n?`${A}/tree/${n}`:A;if(C.push((0,e.jsx)(b.Y,{external:!0,href:d,children:d},"link")),D?.webhook?.id){const a=`${A}/settings/hooks/${D.webhook.id}`;C.push((0,e.jsxs)(g.B,{gap:1,direction:"row",alignItems:"center",children:[(0,e.jsx)(b.Y,{href:a,children:(0,e.jsx)(c.x6,{i18nKey:"provisioning.repository-card.get-repository-meta.webhook",children:"Webhook"})},"webhook"),(0,e.jsx)(L.I,{name:"check",className:"text-success"})]}))}}else x?.type==="local"&&C.push((0,e.jsx)(O.E,{variant:"bodySmall",children:x.local?.path??""},"path"));return C},W=()=>x?.type==="github"?"github":"database";return(0,e.jsxs)(T.Z,{children:[(0,e.jsx)(T.Z.Figure,{children:(0,e.jsx)(L.I,{name:W(),size:"xxl"})}),(0,e.jsx)(T.Z.Heading,{children:(0,e.jsxs)(g.B,{gap:2,direction:"row",alignItems:"center",children:[x?.title&&(0,e.jsx)(O.E,{variant:"h3",children:x.title}),(0,e.jsx)(H.W,{repo:u})]})}),(0,e.jsx)(T.Z.Description,{children:(0,e.jsxs)(g.B,{gap:2,direction:"column",children:[x?.description&&(0,e.jsx)(O.E,{children:x.description}),D?.stats?.length&&(0,e.jsx)(g.B,{gap:1,direction:"row",wrap:!0,children:D.stats.map((C,A)=>(0,e.jsxs)(Z.z9,{fill:"outline",size:"md",variant:"secondary",href:J(u,C),children:[C.count," ",C.resource]},A))})]})}),(0,e.jsx)(T.Z.Meta,{children:(0,e.jsx)(g.B,{gap:2,direction:"row",wrap:!0,children:E()})}),(0,e.jsx)(T.Z.Actions,{children:(0,e.jsxs)(g.B,{gap:1,direction:"row",children:[(0,e.jsx)(Z.z9,{icon:"eye",href:`${w.mL}/${S}`,variant:"primary",size:"md",children:(0,e.jsx)(c.x6,{i18nKey:"provisioning.repository-card.view",children:"View"})}),(0,e.jsx)(V.w,{repository:u}),(0,e.jsx)(Z.z9,{variant:"secondary",icon:"cog",href:`${w.mL}/${S}/edit`,size:"md",children:(0,e.jsx)(c.x6,{i18nKey:"provisioning.repository-card.settings",children:"Settings"})})]})}),(0,e.jsx)(T.Z.SecondaryActions,{children:(0,e.jsx)(Y.q,{name:S})})]},S)}function J(u,j){return j.resource==="playlists"?"/playlists":u.spec?.sync.target==="folder"?`/dashboards/f/${u.metadata?.name}`:"/dashboards"}var Q=t(93838),k=t(3064);function q({items:u}){const[j,x]=(0,o.useState)(""),D=u.filter(E=>E.metadata?.name?.includes(j)),{instanceConnected:S}=(0,Q.X)(u);return(0,e.jsxs)(g.B,{direction:"column",gap:3,children:[!S&&(0,e.jsxs)(g.B,{gap:2,children:[(0,e.jsx)(y.Z,{placeholder:(0,c.t)("provisioning.folder-repository-list.placeholder-search","Search"),value:j,onChange:x}),(0,e.jsx)(k.N,{items:u,showDropdown:!0})]}),(0,e.jsx)(g.B,{direction:"column",children:D.length?D.map(E=>(0,e.jsx)(X,{repository:E},E.metadata?.name)):(0,e.jsx)(R.Z,{children:(0,e.jsx)(c.x6,{i18nKey:"provisioning.folder-repository-list.no-results-matching-your-query",children:"No results matching your query"})})})]})}function _(u={}){const j=(0,s.Ih)(u),x=new Intl.Collator(void 0,{numeric:!0});return[j.data?.items?.slice().sort((S,E)=>{const W=S.spec?.title??"",C=E.spec?.title??"";return x.compare(W,C)}),j.isLoading]}var ee=(u=>(u.Repositories="repositories",u.GettingStarted="getting-started",u))(ee||{});function te(){const[u,j]=_({watch:!0}),x=(0,s.F9)(),[D]=(0,s.KA)(),[S,E]=(0,o.useState)(!1),[W,C]=(0,o.useState)("repositories"),A=(0,o.useMemo)(()=>[{value:"repositories",label:(0,c.t)("provisioning.home-page.tab-repositories","Repositories"),title:(0,c.t)("provisioning.home-page.tab-repositories-title","List of repositories")},{value:"getting-started",label:(0,c.t)("provisioning.home-page.tab-getting-started","Getting started"),title:(0,c.t)("provisioning.home-page.tab-getting-started-title","Getting started")}],[]);if(!u?.length&&!j)return(0,e.jsx)(I.default,{items:u??[]});const n=()=>{D({}),E(!1)},d=()=>{switch(W){case"repositories":return(0,e.jsx)(q,{items:u??[]});case"getting-started":return(0,e.jsx)(B.A,{items:u??[]});default:return null}};return(0,e.jsx)(l.Y,{navId:"provisioning",subTitle:(0,c.t)("provisioning.home-page.subtitle","View and manage your configured repositories"),children:(0,e.jsxs)(l.Y.Contents,{isLoading:j,children:[x.data?.legacyStorage&&(0,e.jsx)(h.F,{title:(0,c.t)("provisioning.home-page.title-legacy-storage-detected","Legacy storage detected"),severity:"error",buttonContent:(0,e.jsx)(c.x6,{i18nKey:"provisioning.home-page.remove-all-configured-repositories",children:"Remove all configured repositories"}),onRemove:()=>{E(!0)},children:(0,e.jsx)(c.x6,{i18nKey:"provisioning.home-page.configured-repositories-while-running-legacy-storage",children:"Configured repositories will not work while running legacy storage."})}),(0,e.jsx)(v.u,{isOpen:S,title:(0,c.t)("provisioning.home-page.title-delete-all-configured-repositories","Delete all configured repositories"),body:(0,c.t)("provisioning.home-page.confirm-delete-repositories","Are you sure you want to delete all configured repositories? This action cannot be undone."),confirmText:(0,c.t)("provisioning.home-page.button-delete-repositories","Delete repositories"),onConfirm:n,onDismiss:()=>E(!1)}),(0,e.jsxs)(g.B,{direction:"column",gap:2,children:[(0,e.jsx)(r.U,{children:A.map(a=>(0,e.jsx)(p.o,{label:a.label,active:W===a.value,onChangeTab:()=>C(a.value),title:a.title},a.value))}),(0,e.jsx)(i.J,{children:d()})]})]})})}},52524:($,f,t)=>{t.d(f,{q:()=>i});var e=t(74848),o=t(96540),h=t(54148),v=t(76319),g=t(71599),r=t(19164),p=t(56840);function i({name:s,redirectTo:l}){const[c,B]=(0,r.So)(),[I,y]=(0,o.useState)(!1),R=(0,h.Zp)();(0,o.useEffect)(()=>{B.isSuccess&&(y(!1),l&&R(l))},[B.isSuccess,l,R]);const b=(0,o.useCallback)(()=>{c({name:s})},[c,s]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.K,{name:"trash-alt",tooltip:(0,p.t)("provisioning.delete-repository-button.tooltip-delete-this-repository","Delete this repository"),disabled:B.isLoading,onClick:()=>{y(!0)}}),(0,e.jsx)(g.u,{isOpen:I,title:(0,p.t)("provisioning.delete-repository-button.title-delete-repository","Delete repository config"),body:(0,p.t)("provisioning.delete-repository-button.confirm-delete-repository","Are you sure you want to delete the repository config?"),confirmText:(0,p.t)("provisioning.delete-repository-button.button-delete","Delete"),onConfirm:b,onDismiss:()=>y(!1)})]})}},31660:($,f,t)=>{t.d(f,{w:()=>s});var e=t(74848),o=t(96540),h=t(54148),v=t(45861),g=t(71599),r=t(19164),p=t(56840),i=t(91555);function s({repository:l}){const[c,B]=(0,r.bS)(),[I,y]=(0,o.useState)(!1),R=(0,h.Zp)(),b=l.metadata?.name,L=()=>{b&&(c({name:b,jobSpec:{pull:{incremental:!1}}}),y(!1))},O=!!l.status?.health.healthy;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.$n,{icon:"cloud-download",variant:"secondary",tooltip:O?void 0:(0,p.t)("provisioning.sync-repository.tooltip-unhealthy-repository","Unable to pull an unhealthy repository"),disabled:B.isLoading||!b||!O,onClick:L,children:(0,e.jsx)(p.x6,{i18nKey:"provisioning.sync-repository.pull",children:"Pull"})}),!l.spec?.sync.enabled&&(0,e.jsx)(g.u,{isOpen:I,title:(0,p.t)("provisioning.sync-repository.title-pull-not-enabled","Pull is not enabled"),body:(0,p.t)("provisioning.sync-repository.body-edit-configuration","Edit the configuration"),confirmText:(0,p.t)("provisioning.sync-repository.button-edit","Edit"),onConfirm:()=>R(`${i.mL}/${b}/edit`),onDismiss:()=>y(!1)})]})}},3064:($,f,t)=>{t.d(f,{N:()=>y});var e=t(74848),o=t(54148),h=t(34999),v=t(88559),g=t(87063),r=t(45861),p=t(41654),i=t(30703),s=t(56840),l=t(91555),c=t(93838);const B=`${l.pd}/github`,I=`${l.pd}/local`;function y({items:R,showDropdown:b=!1}){const L=(0,c.X)(R),O=(0,o.Zp)();return L.instanceConnected?null:L.maxReposReached?(0,e.jsx)(h.F,{title:"",severity:"info",children:(0,e.jsx)(s.x6,{i18nKey:"provisioning.connect-repository-button.repository-limit-info-alert",values:{count:L.repoCount},defaults:"Repository limit reached ({{count}})"})}):b?(0,e.jsx)(v.m,{overlay:(0,e.jsxs)(g.W,{children:[(0,e.jsx)(g.W.Item,{icon:"code-branch",label:(0,s.t)("provisioning.connect-repository-button.configure-git-sync","Configure Git Sync"),onClick:()=>{O(B)}}),(0,e.jsx)(g.W.Item,{icon:"file-alt",label:(0,s.t)("provisioning.connect-repository-button.configure-file","Configure file provisioning"),onClick:()=>{O(I)}})]}),children:(0,e.jsx)(r.$n,{variant:"primary",children:(0,e.jsxs)(p.B,{alignItems:"center",children:[(0,e.jsx)(s.x6,{i18nKey:"provisioning.connect-repository-button.configure",children:"Configure"}),(0,e.jsx)(i.I,{name:"angle-down"})]})})}):(0,e.jsxs)(p.B,{gap:3,children:[(0,e.jsx)(r.z9,{href:B,variant:"primary",children:(0,e.jsx)(s.x6,{i18nKey:"provisioning.connect-repository-button.configure-git-sync",children:"Configure Git Sync"})}),(0,e.jsx)(r.z9,{href:I,variant:"secondary",children:(0,e.jsx)(s.x6,{i18nKey:"provisioning.connect-repository-button.configure-file",children:"Configure file provisioning"})})]})}},34145:($,f,t)=>{t.d(f,{W:()=>g});var e=t(74848),o=t(36490),h=t(99887),v=t(91555);function g({repo:r}){if(!r)return null;let p,i="purple",s="Unknown",l="exclamation-triangle";if(r.metadata?.deletionTimestamp)i="red",s="Deleting",l="spinner";else if(!r.spec?.sync?.enabled)i="red",s="Automatic pulling disabled",l="info-circle";else if(!r.status?.sync?.state?.length)i="orange",s="Pending",l="spinner",p="Waiting for health check to run";else switch(r.status?.sync?.state){case"success":l="check",s="Up-to-date",i="green";break;case"working":case"pending":i="orange",s="Pulling",l="spinner";break;case"error":i="red",s="Error",l="exclamation-triangle";break;default:break}return(0,e.jsx)(h.E,{color:i,icon:l,text:s,style:{cursor:"pointer"},tooltip:p,onClick:()=>{o.Ny.push(`${v.mL}/${r.metadata?.name}/?tab=overview`)}})}},93838:($,f,t)=>{t.d(f,{X:()=>e});function e(o){return o?.length?{instanceConnected:o.some(h=>h.spec?.sync.target==="instance"),folderConnected:o.some(h=>h.spec?.sync.target==="folder"),maxReposReached:(o??[]).length>=10,repoCount:o.length}:{instanceConnected:!1,folderConnected:!1,repoCount:0,maxReposReached:!1}}}}]);

//# sourceMappingURL=RepositoryListPage.7181f87870c7c337eec6.js.map