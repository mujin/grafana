"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1954],{28682:(N,u,a)=>{a.r(u),a.d(u,{default:()=>W});var e=a(74848),f=a(96540),m=a(61574),j=a(54148),y=a(70713),L=a(5556),R=a(68143),x=a(34999),P=a(41654),t=a(45861),B=a(54314),C=a(60208),K=a(13941),I=a(50992),U=a(44458),h=a(19164),D=a(13791),O=a(70958),s=a(56840),v=a(91555);function W(){const n=(0,j.g)(),[i]=(0,O.s)(),o=i.ref??void 0,_=i.tab??"file",E=n.name??"",g=n["*"]??"",r=(0,h.Kw)({name:E,path:g,ref:o});return(0,e.jsx)(D.Y,{navId:"provisioning",pageNav:{text:`File: ${g} ${o?`(@${o})`:""}`},children:(0,e.jsx)(D.Y.Contents,{isLoading:r.isLoading,children:(0,e.jsxs)(e.Fragment,{children:[(0,R.NF)(r.error)&&(0,e.jsx)(x.F,{title:(0,s.t)("provisioning.file-status-page.title-error-loading-file","Error loading file"),children:r.error.message}),r.isSuccess&&r.data&&(0,e.jsx)(p,{wrap:r.data,repo:E,repoRef:o,tab:_})]})})})}var A=(n=>(n.File="file",n.Existing="existing",n.DryRun="dryRun",n))(A||{});function p({wrap:n,repo:i,repoRef:o,tab:_}){const E=n.resource?.type?.kind==="Dashboard",g=n.resource?.existing?.metadata?.name,r=(0,m.zy)(),[T]=(0,O.s)(),[$,c]=(0,h.XM)(),[F,S]=(0,h.Qo)(),[M,l]=(0,f.useState)("");(0,f.useEffect)(()=>{switch(_){case"existing":l(JSON.stringify(n.resource.existing,null,2));return;case"dryRun":l(JSON.stringify(n.resource.dryRun,null,2));return;case"file":l(JSON.stringify(n.resource.file,null,2));return}},[n,_,l]);const z=[{value:"file",label:"File (from repository)"},{value:"existing",label:"Existing (from grafana)"},{value:"dryRun",label:"Dry Run (result after apply)"}];return(0,e.jsxs)("div",{children:[(0,e.jsxs)(P.B,{children:[E&&(0,e.jsx)(t.z9,{target:"_blank",href:`${v.mL}/${i}/dashboard/preview/${n.path}`,children:(0,e.jsx)(s.x6,{i18nKey:"provisioning.resource-view.dashboard-preview",children:"Dashboard Preview"})}),E&&g&&(0,e.jsx)(t.z9,{target:"_blank",href:`d/${n.resource.existing?.metadata.name}`,variant:"secondary",children:(0,e.jsx)(s.x6,{i18nKey:"provisioning.resource-view.existing-dashboard",children:"Existing dashboard"})}),(0,e.jsx)(t.z9,{href:`${v.mL}/${i}`,variant:"secondary",children:(0,e.jsx)(s.x6,{i18nKey:"provisioning.resource-view.repository",children:"Repository"})}),o&&(0,e.jsx)(t.z9,{href:`${v.mL}/${i}/file/${n.path}`,variant:"secondary",children:(0,e.jsx)(s.x6,{i18nKey:"provisioning.resource-view.base",children:"Base"})}),(0,e.jsx)(t.z9,{href:`${v.mL}/${i}/history/${n.path}`,variant:"secondary",children:(0,e.jsx)(s.x6,{i18nKey:"provisioning.resource-view.history",children:"History"})})]}),(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),(0,e.jsx)(B.U,{children:z.map(d=>(0,e.jsx)(C.o,{href:L.kM.renderUrl(r.pathname,{...T,tab:d.value}),label:d.label,active:_===d.value},d.value))}),(0,e.jsx)(K.J,{children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{height:700,marginBottom:10},children:(0,e.jsx)(y.default,{disableWidth:!0,children:({height:d})=>(0,e.jsx)(I.B,{width:"100%",height:d,language:"json",showLineNumbers:!0,showMiniMap:!0,value:M,onBlur:l,onSave:l})})}),(0,e.jsxs)(P.B,{alignItems:"flex-end",justifyContent:"end",children:[(0,e.jsx)(t.$n,{variant:"primary",disabled:c.isLoading,onClick:()=>{$({name:i,path:n.path,body:JSON.parse(M),message:"updated from repo test UI"})},children:c.isLoading?"Saving":"Save"}),(0,e.jsx)(U.e,{size:"md",disabled:S.isLoading,onConfirm:()=>{F({name:i,path:n.path,message:"removed from repo test UI"})}})]}),c.isError&&(0,e.jsx)(x.F,{title:(0,s.t)("provisioning.resource-view.title-error-saving-file","Error saving file"),children:(0,e.jsx)("pre",{children:JSON.stringify(c.error)})})]})})]})}}}]);

//# sourceMappingURL=FileStatusPage.f8f5aa2a0b0c77bc2089.js.map