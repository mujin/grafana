"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6186],{86956:(Y,S,e)=>{e.d(S,{r:()=>o});var s=e(74848),n=e(59695);const o=({onChange:y,options:W,label:d})=>(0,s.jsx)(n.i,{icon:"plus",label:d,variant:"secondary",options:W,onChange:y,isFullWidth:!0})},34316:(Y,S,e)=>{e.d(S,{R:()=>K});var s=e(74848),n=e(22803),o=e(96540),y=e(63142),W=e(30703),d=e(63527),x=e(12594),c=e(56840);const K=({name:t,onChange:m,verifyLayerNameUniqueness:F,overrideStyles:_})=>{const l=(0,y.of)(U),[b,g]=(0,o.useState)(!1),[M,j]=(0,o.useState)(null),Q=r=>{g(!0)},D=r=>{if(g(!1),M){j(null);return}t!==r&&m(r)},L=r=>{const $=r.currentTarget.value.trim();if($.length===0){j("An empty layer name is not allowed");return}if(F&&!F($)&&$!==t){j("Layer name already exists");return}M&&j(null)},C=r=>{D(r.currentTarget.value.trim())},I=r=>{r.key==="Enter"&&D(r.currentTarget.value)},P=r=>{r.target.select()};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:l.wrapper,children:[!b&&(0,s.jsxs)("button",{className:l.layerNameWrapper,title:(0,c.t)("layers.layer-name.edit-layer-title","Edit layer name"),onClick:Q,"data-testid":"layer-name-div",children:[(0,s.jsx)("span",{className:_?"":l.layerName,children:t}),(0,s.jsx)(W.I,{name:"pen",className:l.layerEditIcon,size:"sm"})]}),b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.p,{type:"text",defaultValue:t,onBlur:C,autoFocus:!0,onKeyDown:I,onFocus:P,invalid:M!==null,onChange:L,className:l.layerNameInput,"data-testid":"layer-name-input"}),M&&(0,s.jsx)(x.P,{horizontal:!0,children:M})]})]})})},U=t=>({wrapper:(0,n.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:t.spacing(.5)}),layerNameWrapper:(0,n.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:t.shape.radius.default,alignItems:"center",padding:`0 0 0 ${t.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:t.colors.action.hover,border:`1px dashed ${t.colors.border.strong}`},"&:focus":{border:`2px solid ${t.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,n.css)({fontWeight:t.typography.fontWeightMedium,color:t.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:t.spacing(.5)}),layerEditIcon:(0,n.cx)((0,n.css)({marginLeft:t.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,n.css)({maxWidth:"300px",margin:"-4px 0"})})},87405:(Y,S,e)=>{e.d(S,{N:()=>K});var s=e(74848),n=e(22803),o=e(96540),y=e(63142),W=e(18857),d=e(35427),x=e(56755);const c={label:"Fixed color",value:"_____fixed_____"},K=t=>{const{value:m,context:F,onChange:_,item:l}=t,b="dark-green",g=(0,y.of)(U),M=m?.field,j=m&&!M&&m?.fixed,Q=(0,x.sE)(F.data),D=(0,x.m3)(Q,M,c,void 0,l.settings?.baseNameMode),L=(0,o.useCallback)(P=>{if(!P){_(void 0);return}const r=P.value;if(r&&r!==c.value)_({...m,field:r});else{const $=m?.fixed??b;_({...m,field:void 0,fixed:$})}},[_,m]),C=(0,o.useCallback)(P=>{_({field:void 0,fixed:P??b})},[_]),I=j?c:D.find(P=>P.value===M);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:g.container,children:[(0,s.jsx)(W.l6,{value:I,options:D,onChange:L,noOptionsMessage:"No fields found",isClearable:l.settings?.isClearable,placeholder:l.settings?.placeholder}),j&&(0,s.jsx)("div",{className:g.picker,children:(0,s.jsx)(d.sk,{color:m?.fixed,onChange:C,enableNamedColors:!0})})]})})},U=t=>({container:(0,n.css)({display:"flex",flexWrap:"nowrap",justifyContent:"flex-end",alignItems:"center"}),picker:(0,n.css)({paddingLeft:t.spacing(1)})})},22001:(Y,S,e)=>{e.d(S,{h:()=>_});var s=e(74848),n=e(96540),o=e(739),y=e(97095),W=e(18027),d=e(77824),x=e(45861),c=e(48457),K=e(41185),U=e(56840);const t=[{label:"Fixed",value:o.RU.Fixed,description:"Fixed value"},{label:"Field",value:o.RU.Field,description:"Display field value"}],m={settings:{}},F={settings:{}},_=({value:l,context:b,onChange:g})=>{const j=(0,n.useCallback)(I=>{g({...l,mode:I})},[g,l]),Q=(0,n.useCallback)(I=>{g({...l,field:I})},[g,l]),D=(0,n.useCallback)((I="")=>{g({...l,fixed:I})},[g,l]),L=()=>{D("")},C=l?.mode??o.RU.Fixed;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.C,{children:(0,s.jsx)(W.I,{label:(0,U.t)("dimensions.text-dimension-editor.label-source","Source"),labelWidth:9,grow:!0,children:(0,s.jsx)(d.z,{value:C,options:t,onChange:j,fullWidth:!0})})}),C!==o.RU.Fixed&&(0,s.jsx)(y.C,{children:(0,s.jsx)(W.I,{label:(0,U.t)("dimensions.text-dimension-editor.label-field","Field"),labelWidth:9,grow:!0,children:(0,s.jsx)(c.O,{context:b,value:l.field??"",onChange:Q,item:m})})}),C===o.RU.Fixed&&(0,s.jsx)(y.C,{children:(0,s.jsx)(W.I,{label:(0,U.t)("dimensions.text-dimension-editor.label-value","Value"),labelWidth:9,grow:!0,children:(0,s.jsx)(K.g,{context:b,value:l?.fixed,onChange:D,item:F,suffix:l?.fixed&&(0,s.jsx)(x.$n,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:L})})})},l?.fixed),C===o.RU.Template&&(0,s.jsx)(y.C,{children:(0,s.jsx)(W.I,{label:(0,U.t)("dimensions.text-dimension-editor.label-template","Template"),labelWidth:9,grow:!0,children:(0,s.jsx)(K.g,{context:b,value:l?.fixed,onChange:D,item:F})})})]})}},42746:(Y,S,e)=>{e.d(S,{NO:()=>s.N,mj:()=>g,AW:()=>ee,gm:()=>r,hj:()=>se.h});var s=e(87405),n=e(74848),o=e(96540);const y=({value:a,onChange:i})=>{const[p,f]=useState(a?[{value:a,label:a}]:[]),[h,O]=useState(),A=window.__grafana_public_path__+"img/icons/unicons/",B=E=>{i(E),O(E)};return useEffect(()=>{getBackendSrv().get(`${A}/index.json`).then(E=>{f(E.files.map(z=>({value:z,label:z})))})},[A]),jsx(Select,{options:p,value:h,onChange:E=>{B(E.value)}})},W=null;var d=e(739),x=e(97095),c=e(18027),K=e(77824),U=e(48457),t=e(56840),m=e(40665),F=e(4896),_=e(71451);const l=[{label:"Fixed",value:d.q_.Fixed,description:"Fixed value"},{label:"Field",value:d.q_.Field,description:"Use a string field result"}],b={settings:{}},g=a=>{const{value:i,context:p,onChange:f,item:h}=a,O=9,A=(0,o.useCallback)(R=>{f({...i,mode:R})},[f,i]),B=(0,o.useCallback)((R="")=>{f({...i,field:R})},[f,i]),E=(0,o.useCallback)(R=>{f({...i,fixed:R??""})},[f,i]),z=R=>{R.stopPropagation(),f({mode:d.q_.Fixed,fixed:"",field:""})},V=i?.mode??d.q_.Fixed,N=h.settings?.showSourceRadio??!0,v=h.settings?.resourceType??F.zu.Icon,H=h.settings?.folderName??m.ResourceFolderName.Icon,J=h.settings?.maxFiles;let G="";return v===F.zu.Icon&&(i?.fixed?G=(0,m.getPublicOrAbsoluteUrl)(i.fixed):h.settings?.placeholderValue&&(G=(0,m.getPublicOrAbsoluteUrl)(h.settings.placeholderValue))),(0,n.jsxs)(n.Fragment,{children:[N&&(0,n.jsx)(x.C,{children:(0,n.jsx)(c.I,{label:(0,t.t)("dimensions.resource-dimension-editor.label-source","Source"),labelWidth:O,grow:!0,children:(0,n.jsx)(K.z,{value:V,options:l,onChange:A,fullWidth:!0})})}),V!==d.q_.Fixed&&(0,n.jsx)(x.C,{children:(0,n.jsx)(c.I,{label:(0,t.t)("dimensions.resource-dimension-editor.label-field","Field"),labelWidth:O,grow:!0,children:(0,n.jsx)(U.O,{context:p,value:i.field??"",onChange:B,item:b})})}),V===d.q_.Fixed&&(0,n.jsx)(_.n,{onChange:E,onClear:z,value:i?.fixed,src:G,placeholder:h.settings?.placeholderText??"Select a value",name:M(i?.fixed)??"",mediaType:v,folderName:H,size:F.Iy.NORMAL,maxFiles:J}),V===d.q_.Mapping&&(0,n.jsx)(x.C,{children:(0,n.jsx)(c.I,{label:(0,t.t)("dimensions.resource-dimension-editor.label-mappings","Mappings"),labelWidth:O,grow:!0,children:(0,n.jsx)("div",{children:"TODO mappings editor!"})})})]})};function M(a){if(!a)return;const i=a.lastIndexOf("/");return i>0?a.substring(i+1):a}var j=e(22803),Q=e(63142),D=e(18857),L=e(56755),C=e(19753),I=e(10392);const P={label:"Fixed value",value:"_____fixed_____"},r=a=>{const{value:i,context:p,onChange:f,item:h}=a,{settings:O}=h,A=(0,Q.of)($),B=i?.field,E=!B,z=(0,L.sE)(p.data),V=(0,L.m3)(z,B,P,O?.filteredFieldType),N=(0,o.useMemo)(()=>(0,I.Nn)(O),[O]),v=(0,o.useCallback)(u=>{f((0,I.Ru)(u,N))},[f,N]),H=(0,o.useCallback)(u=>{const k=u.value;k&&k!==P.value?v({...i,field:k}):v({...i,field:void 0})},[v,i]),J=(0,o.useCallback)(u=>{u!==void 0&&v({...i,min:u})},[v,i]),G=(0,o.useCallback)(u=>{u!==void 0&&v({...i,max:u})},[v,i]),R=(0,o.useCallback)(u=>{u!==void 0&&v({...i,fixed:u})},[v,i]),T=i??{},X=E?P:V.find(u=>u.value===B);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsx)(D.l6,{value:X,options:V,onChange:H,noOptionsMessage:"No fields found"})}),(0,n.jsxs)("div",{className:A.range,children:[E&&(0,n.jsx)(x.C,{children:(0,n.jsx)(c.I,{label:(0,t.t)("dimensions.scale-dimension-editor.label-value","Value"),labelWidth:8,grow:!0,children:(0,n.jsx)(C.Q,{value:T.fixed,...N,onChange:R})})}),!E&&!N.hideRange&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.C,{children:(0,n.jsx)(c.I,{label:(0,t.t)("dimensions.scale-dimension-editor.label-min","Min"),labelWidth:8,grow:!0,children:(0,n.jsx)(C.Q,{value:T.min,...N,onChange:J})})}),(0,n.jsx)(x.C,{children:(0,n.jsx)(c.I,{label:(0,t.t)("dimensions.scale-dimension-editor.label-max","Max"),labelWidth:8,grow:!0,children:(0,n.jsx)(C.Q,{value:T.max,...N,onChange:G})})})]})]})]})},$=a=>({range:(0,j.css)({paddingTop:a.spacing(1)})});var w=e(95004);const Z={label:"Fixed value",value:"_____fixed_____"},q=[{label:"Mod",value:d.WQ.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:d.WQ.Clamped,description:"Use field values, clamped to max and min"}],ee=({value:a,context:i,onChange:p,item:f})=>{const{settings:h}=f,O=0,A=a?.field,B=!A,E=(0,L.sE)(i.data),z=(0,L.m3)(E,A,Z,w.PU.number),V=(0,Q.of)(ne),N=(0,o.useCallback)(T=>{const X=T.value;if(X&&X!==Z.value)p({...a,field:X});else{const u=a.fixed??O;p({...a,field:void 0,fixed:u})}},[p,a]),v=(0,o.useCallback)(T=>{p({...a,mode:T})},[p,a]),H=(0,o.useCallback)(T=>{p({...a,field:void 0,fixed:T??O})},[p,a]),J=a??{},G=a?.mode??d.WQ.Mod,R=B?Z:z.find(T=>T.value===A);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x.C,{children:(0,n.jsx)(c.I,{label:(0,t.t)("dimensions.scalar-dimension-editor.label-limit","Limit"),labelWidth:8,grow:!0,children:(0,n.jsx)(K.z,{value:G,options:q,onChange:v,fullWidth:!0})})}),(0,n.jsx)(D.l6,{value:R,options:z,onChange:N,noOptionsMessage:"No fields found"})]}),(0,n.jsx)("div",{className:V.range,children:B&&(0,n.jsx)(x.C,{children:(0,n.jsx)(c.I,{label:(0,t.t)("dimensions.scalar-dimension-editor.label-value","Value"),labelWidth:8,grow:!0,children:(0,n.jsx)(C.Q,{value:J?.fixed??O,onChange:H,max:h?.max,min:h?.min})})})})]})},ne=a=>({range:(0,j.css)({paddingTop:a.spacing(1)})});var se=e(22001)}}]);

//# sourceMappingURL=6186.ab70fd6893708f94b4dd.js.map