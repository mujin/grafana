"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5594],{61048:(Ae,ae,l)=>{l.d(ae,{i:()=>c});var W=l(74848),$=l(22803),G=l(63142);const c=({children:H,className:j})=>{const I=(0,G.of)(Q);return(0,W.jsx)("div",{className:(0,$.cx)(I.wrapper,j),children:H})},Q=H=>({wrapper:(0,$.css)({display:"flex",flexDirection:"column",fontSize:H.typography.bodySmall.fontSize})})},34316:(Ae,ae,l)=>{l.d(ae,{R:()=>ee});var W=l(74848),$=l(22803),G=l(96540),c=l(63142),Q=l(30703),H=l(63527),j=l(12594),I=l(56840);const ee=({name:A,onChange:ue,verifyLayerNameUniqueness:xe,overrideStyles:Ce})=>{const J=(0,c.of)(Oe),[E,O]=(0,G.useState)(!1),[y,r]=(0,G.useState)(null),C=R=>{O(!0)},U=R=>{if(O(!1),y){r(null);return}A!==R&&ue(R)},B=R=>{const te=R.currentTarget.value.trim();if(te.length===0){r("An empty layer name is not allowed");return}if(xe&&!xe(te)&&te!==A){r("Layer name already exists");return}y&&r(null)},D=R=>{U(R.currentTarget.value.trim())},T=R=>{R.key==="Enter"&&U(R.currentTarget.value)},fe=R=>{R.target.select()};return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)("div",{className:J.wrapper,children:[!E&&(0,W.jsxs)("button",{className:J.layerNameWrapper,title:(0,I.t)("layers.layer-name.edit-layer-title","Edit layer name"),onClick:C,"data-testid":"layer-name-div",children:[(0,W.jsx)("span",{className:Ce?"":J.layerName,children:A}),(0,W.jsx)(Q.I,{name:"pen",className:J.layerEditIcon,size:"sm"})]}),E&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(H.p,{type:"text",defaultValue:A,onBlur:D,autoFocus:!0,onKeyDown:T,onFocus:fe,invalid:y!==null,onChange:B,className:J.layerNameInput,"data-testid":"layer-name-input"}),y&&(0,W.jsx)(j.P,{horizontal:!0,children:y})]})]})})},Oe=A=>({wrapper:(0,$.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:A.spacing(.5)}),layerNameWrapper:(0,$.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:A.shape.radius.default,alignItems:"center",padding:`0 0 0 ${A.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:A.colors.action.hover,border:`1px dashed ${A.colors.border.strong}`},"&:focus":{border:`2px solid ${A.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,$.css)({fontWeight:A.typography.fontWeightMedium,color:A.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:A.spacing(.5)}),layerEditIcon:(0,$.cx)((0,$.css)({marginLeft:A.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,$.css)({maxWidth:"300px",margin:"-4px 0"})})},87254:(Ae,ae,l)=>{l.r(ae),l.d(ae,{plugin:()=>pt});var W=l(16207),$=l(79277),G=l(41069),c=l(74848),Q=l(22803),H=l(96540),j=l(84596),I=l(57866),ee=l(38809),Oe=l(16515),A=l(95004),ue=l(63142),xe=l(45861),Ce=l(76319),J=l(37386),E=l(18857),O=l(48457),y=l(34316),r=l(99914);const C=({value:e,onChange:d,context:o})=>{const v=(0,ue.of)(U),P=o.options?.mapping,h=(0,j.A)(P),x=h!=null&&P!==h,g={frame:{matcher:{id:I.jR.byIndex,options:0}}},[a,f]=(0,H.useState)(0);(x||e==null)&&(e=[{...g}],d([...e]),a>0&&f(0));const M=()=>{e=e.concat({...g}),f(e.length-1),d([...e])},L=t=>{e=e.filter((i,s)=>s!==t),f(0),d([...e])},u=e[a],K=`${P}${a}`,n=P===r.it.Manual?ee.X4.ExcludeBaseNames:o.data.length===1?ee.X4.IncludeAll:ee.X4.OnlyBaseNames;return o.data.forEach((t,i)=>{t.fields.forEach((s,b)=>{s.state={...s.state,origin:{frameIndex:i,fieldIndex:b}}})}),(0,c.jsxs)(c.Fragment,{children:[P===r.it.Manual&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(xe.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:M,className:v.marginBot,children:"Add series"}),(0,c.jsx)("div",{className:v.marginBot,children:e.map((t,i)=>(0,c.jsxs)("div",{className:i===a?`${v.row} ${v.sel}`:v.row,onClick:()=>f(i),role:"button","aria-label":`Select series ${i+1}`,tabIndex:0,onKeyPress:s=>{s.key==="Enter"&&f(i)},children:[(0,c.jsx)(y.R,{name:t.name?.fixed??`Series ${i+1}`,onChange:s=>{t.name={fixed:s===""||s===`Series ${i+1}`?void 0:s},d([...e])}}),(0,c.jsx)(Ce.K,{name:"trash-alt",title:"remove",className:(0,Q.cx)(v.actionIcon),onClick:()=>L(i),tooltip:"Delete series"})]},`series/${i}`))})]}),a>=0&&u!=null&&(0,c.jsxs)(H.Fragment,{children:[(0,c.jsx)(J.D,{label:"Frame",children:(0,c.jsx)(E.l6,{placeholder:P===r.it.Auto?"All frames":"Select frame",isClearable:!0,options:o.data.map((t,i)=>({value:i,label:`${(0,Oe.Ri)(t,i)} (index: ${i}, rows: ${t.length})`})),value:u.frame?.matcher.options,onChange:t=>{t==null?delete u.frame:u.frame={matcher:{id:I.jR.byIndex,options:Number(t.value)}},d([...e])}})}),(0,c.jsx)(J.D,{label:"X field",children:(0,c.jsx)(O.O,{value:u.x?.matcher.options,context:o,onChange:t=>{t==null?delete u.x:u.x={matcher:{id:I.Ct.byName,options:t}},d([...e])},item:{id:"x",name:"x",settings:{filter:t=>(P===r.it.Auto||t.state?.origin?.frameIndex===u.frame?.matcher.options)&&t.type===A.PU.number&&!t.config.custom?.hideFrom?.viz,baseNameMode:n,placeholderText:P===r.it.Auto?"First number field in each frame":void 0}}})}),(0,c.jsx)(J.D,{label:"Y field",children:(0,c.jsx)(O.O,{value:u.y?.matcher?.options,context:o,onChange:t=>{t==null?delete u.y:u.y={matcher:{id:I.Ct.byName,options:t}},d([...e])},item:{id:"y",name:"y",settings:{filter:t=>(P===r.it.Auto||t.state?.origin?.frameIndex===u.frame?.matcher.options)&&t.type===A.PU.number&&!t.config.custom?.hideFrom?.viz,baseNameMode:n,placeholderText:P===r.it.Auto?"Remaining number fields in each frame":void 0}}})}),(0,c.jsx)(J.D,{label:"Size field",children:(0,c.jsx)(O.O,{value:u.size?.matcher?.options,context:o,onChange:t=>{t==null?delete u.size:u.size={matcher:{id:I.Ct.byName,options:t}},d([...e])},item:{id:"size",name:"size",settings:{filter:t=>t.name!==u.x?.matcher.options&&(P===r.it.Auto||t.state?.origin?.frameIndex===u.frame?.matcher.options)&&t.type===A.PU.number&&!t.config.custom?.hideFrom?.viz,baseNameMode:n,placeholderText:""}}})}),(0,c.jsx)(J.D,{label:"Color field",children:(0,c.jsx)(O.O,{value:u.color?.matcher?.options,context:o,onChange:t=>{t==null?delete u.color:u.color={matcher:{id:I.Ct.byName,options:t}},d([...e])},item:{id:"color",name:"color",settings:{filter:t=>t.name!==u.x?.matcher.options&&(P===r.it.Auto||t.state?.origin?.frameIndex===u.frame?.matcher.options)&&t.type===A.PU.number&&!t.config.custom?.hideFrom?.viz,baseNameMode:n,placeholderText:""}}})})]},K)]})},U=e=>({marginBot:(0,Q.css)({marginBottom:"20px"}),row:(0,Q.css)({padding:`${e.spacing(.5,1)}`,borderRadius:`${e.shape.radius.default}`,background:`${e.colors.background.secondary}`,minHeight:`${e.spacing(4)}`,display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"3px",cursor:"pointer",border:`1px solid ${e.components.input.borderColor}`,"&:hover":{border:`1px solid ${e.components.input.borderHover}`}}),sel:(0,Q.css)({border:`1px solid ${e.colors.primary.border}`,"&:hover":{border:`1px solid ${e.colors.primary.border}`}}),actionIcon:(0,Q.css)({color:`${e.colors.text.secondary}`,"&:hover":{color:`${e.colors.text}`}})});var B=l(6773),D=l(64394),T=l(43173),fe=l(54735),R=l(78055),te=l(92790),w=l(739),Pe=l(69234),ie=l(36192),De=l(16913),Le=l(55978),me=l(39064),ge=l(61048),he=l(41530),ye=l(47466),k=l(74542);function S(e,d){return e!==d&&e.includes(" ")&&(e=e.replace(d,"").trim()),e}const F=({dataIdxs:e,seriesIdx:d,data:o,xySeries:v,dismiss:P,isPinned:h,replaceVariables:x,dataLinks:g})=>{const a=e.find(p=>p!==null),f=v[d-1],M=f.x.field,L=f.y.field,u=f.size.field,K=f.color.field;let n=f.name.value,t=f.color.fixed;const i={label:n,value:"",color:B.MV.alpha(t??"#fff",.5),colorIndicator:Le.fX.marker_md},s=[{label:S(M.state?.displayName??M.name,n),value:(0,k.Sc)(M,M.values[a])},{label:S(L.state?.displayName??L.name,n),value:(0,k.Sc)(L,L.values[a])}];u!=null&&u!==L&&s.push({label:S(u.state?.displayName??u.name,n),value:(0,k.Sc)(u,u.values[a])}),K!=null&&K!==L&&s.push({label:S(K.state?.displayName??K.name,n),value:(0,k.Sc)(K,K.values[a])}),f._rest.forEach(p=>{s.push({label:S(p.state?.displayName??p.name,n),value:(0,k.Sc)(p,p.values[a])})});let b;if(d!=null){const p=g?.some(m=>m.oneClick===!0);if(h||p){const m=o.find(q=>q.fields.includes(L)),N=(0,De.OG)(m,L,x,a);b=(0,c.jsx)(me.S,{dataLinks:g,actions:N})}}return(0,c.jsxs)(ge.i,{children:[(0,c.jsx)(he.A,{item:i,isPinned:h}),(0,c.jsx)(ye.o,{items:s,isPinned:h}),b]})};var ne=l(84140),le=l(36613),ve=l(55386),Z=l(18600),Ne=l(33553),Ve=l(76637),We=l(21275),tt=l(47276),Ze=l(81897),it=l(50348);const lt=(e,d)=>{if(e.length===0)return{builder:null,prepData:()=>[]};let o,v;function P(n){return(i,s,b,p)=>(le.A.orient(i,s,(m,N,q,Y,X,z,se,V,re,Be,Me,xt,Xe,Ge,Dt)=>{const be=le.A.pxRatio,de=e[s-1];let $e=i.data[s],Ue=de.showLine,gt=de.showPoints===w.yL.Always,pe=de.pointStrokeWidth??0;i.ctx.save(),i.ctx.rect(i.bbox.left,i.bbox.top,i.bbox.width,i.bbox.height),i.ctx.clip();let Ie=de.fillOpacity/100;i.ctx.fillStyle=B.MV.alpha(m.fill(),Ie),i.ctx.strokeStyle=B.MV.alpha(m.stroke(),1),i.ctx.lineWidth=pe;let yt=2*Math.PI,Qe=Y.key,Je=X.key;const ke=de.y.field.config.custom.pointSize,Ke=de.color.field!=null;let Fe=(ke.max??ke.fixed)*be,vt=i.posToVal(-Fe/2,Qe),St=i.posToVal(i.bbox.width/be+Fe/2,Qe),Mt=i.posToVal(i.bbox.height/be+Fe/2,Je),Et=i.posToVal(-Fe/2,Je),Ot=n.disp.size.values(i,s),qe=u[s-1].values,Ct=u[s-1].index,Pt=u[s-1].hasAlpha,Nt=de.pointShape===r.uZ.Square,_e=Ue?new Path2D:null,Te=-1;for(let _=0;_<$e[0].length;_++){let we=$e[0][_],He=$e[1][_];if(we>=vt&&we<=St&&He>=Mt&&He<=Et){let oe=Math.round(Ot[_]*be),je=z(we,Y,Be,V),Re=se(He,X,Me,re);if(Ue&&_e.lineTo(je,Re),gt){if(Ke&&qe[_]!==Te){Te=qe[_];let Ee=Te===-1?D.F:Ct[Te];i.ctx.fillStyle=Pt?Ee:B.MV.alpha(Ee,Ie),i.ctx.strokeStyle=B.MV.alpha(Ee,1)}if(Nt){let Ee=Math.round(je-oe/2),et=Math.round(Re-oe/2);(Ke||Ie>0)&&i.ctx.fillRect(Ee,et,oe,oe),pe>0&&i.ctx.strokeRect(Ee,et,oe,oe)}else i.ctx.beginPath(),i.ctx.arc(je,Re,oe/2,0,yt),(Ke||Ie>0)&&i.ctx.fill(),pe>0&&i.ctx.stroke();n.each(i,s,_,je-oe/2-pe/2,Re-oe/2-pe/2,oe+pe,oe+pe)}}}if(Ue){i.ctx.strokeStyle=de.color.fixed,i.ctx.lineWidth=de.lineWidth*be;const{lineStyle:_}=de;_&&_.fill!=="solid"&&(_.fill==="dot"&&(i.ctx.lineCap="round"),i.ctx.setLineDash(_.dash??[10,10])),i.ctx.stroke(_e)}i.ctx.restore()}),null)}let h=P({disp:{size:{values:(n,t)=>n.data[t][2]},color:{values:(n,t)=>n.data[t][3]}},each:(n,t,i,s,b,p,m)=>{s-=n.bbox.left,b-=n.bbox.top,o.add({x:s,y:b,w:p,h:m,sidx:t,didx:i})}});const x=new tt.e;x.setCursor({drag:{setScale:!0},dataIdx:(n,t)=>{if(t===1){const i=le.A.pxRatio;v=null;let s=1/0,b=n.cursor.left*i,p=n.cursor.top*i;o.get(b,p,1,1,m=>{if((0,Ze.ur)(b,p,m.x,m.y,m.x+m.w,m.y+m.h)){let N=m.x+m.w/2,q=m.y+m.h/2,Y=N-b,X=q-p,z=Math.sqrt(Y**2+X**2);z<=m.w/2&&z<=s&&(s=z,v=m)}})}return v&&t===v.sidx?v.didx:null},points:{size:(n,t)=>v&&t===v.sidx?v.w/le.A.pxRatio:0,fill:(n,t)=>"rgba(255,255,255,0.4)"}}),x.addHook("init",(n,t)=>{n.over.style.overflow="hidden"}),x.addHook("drawClear",n=>{o=o||new Ze.C$(0,0,n.bbox.width,n.bbox.height),o.clear(),n.series.forEach((t,i)=>{i>0&&(t._paths=null)})}),x.setMode(2);let g=e[0].x.field,a=g.config,f=a.custom,M=f?.scaleDistribution;x.addScale({scaleKey:"x",isTime:!1,orientation:w.Lt.Horizontal,direction:w.ON.Right,distribution:M?.type,log:M?.log,linearThreshold:M?.linearThreshold,min:a.min,max:a.max,softMin:f?.axisSoftMin,softMax:f?.axisSoftMax,centeredZero:f?.axisCenteredZero,decimals:a.decimals});let L=f.axisLabel;if(L==null||L===""){let n=e.map(i=>i.x.field.state?.displayName??""),t=e.length===1?g.state?.displayName??g.name:new Set(n).size===1?n[0]:(0,k.rE)(n);t!==""&&(L=t)}x.addAxis({scaleKey:"x",placement:f?.axisPlacement!==w.vM.Hidden?w.vM.Bottom:w.vM.Hidden,show:f?.axisPlacement!==w.vM.Hidden,grid:{show:f?.axisGridShow},border:{show:f?.axisBorderShow},theme:d,label:L,formatValue:(n,t)=>(0,ve.cN)(g.display(n,t))}),e.forEach((n,t)=>{let i=n.y.field;const s=n.color.fixed,b=n.color.fixed;let p=i.config.unit??"y",m=i.config,N=m.custom,q=N?.scaleDistribution;x.addScale({scaleKey:p,orientation:w.Lt.Vertical,direction:w.ON.Up,distribution:q?.type,log:q?.log,linearThreshold:q?.linearThreshold,min:m.min,max:m.max,softMin:N?.axisSoftMin,softMax:N?.axisSoftMax,centeredZero:N?.axisCenteredZero,decimals:m.decimals});let Y=N.axisLabel;if(Y==null||Y===""){let X=e.map(se=>se.y.field.state?.displayName??""),z=e.length===1?i.state?.displayName??i.name:new Set(X).size===1?X[0]:(0,k.rE)(X);z!==""&&(Y=z)}x.addAxis({scaleKey:p,theme:d,placement:N?.axisPlacement===w.vM.Auto?w.vM.Left:N?.axisPlacement,show:N?.axisPlacement!==w.vM.Hidden,grid:{show:N?.axisGridShow},border:{show:N?.axisBorderShow},size:N?.axisWidth,label:Y,formatValue:(X,z)=>(0,ve.cN)(i.display(X,z))}),x.addSeries({facets:[{scale:"x",auto:!0},{scale:p,auto:!0}],pathBuilder:h,theme:d,scaleKey:"",lineColor:B.MV.alpha(s??"#ffff",1),fillColor:B.MV.alpha(b??"#ffff",.5),show:!i.state?.hideFrom?.viz})});const u=e.map(n=>{const t={index:[],getAll:()=>[],getOne:()=>-1,values:[],hasAlpha:!1},i=n.color.field;return i!=null&&(Object.assign(t,at(i,d)),t.hasAlpha=t.index.some(s=>!s.endsWith("ff"))),t});function K(n){const{size:t,color:i}=ot(n);return n.forEach((s,b)=>{u[b].values=u[b].getAll(s.color.field?.values??[],i.min,i.max)}),[null,...n.map((s,b)=>{let p=s.x.field.values.length,m;if(s.size.field!=null){let{min:N,max:q}=s.size,Y=N**2,z=q**2-Y,se=s.size.field.values,V=t.min,Be=t.max-V;m=Array(p);for(let Me=0;Me<se.length;Me++){let Xe=(se[Me]-V)/Be,Ge=Y+Xe*z;m[Me]=Ge**.5}}else m=Array(p).fill(s.size.fixed);return[s.x.field.values,s.y.field.values,m,Array(p).fill(s.color.fixed)]})]}return{builder:x,prepData:K}},ot=e=>{const d={size:{min:1/0,max:-1/0},color:{min:1/0,max:-1/0}};return e.forEach(o=>{[o.size,o.color].forEach((v,P)=>{if(v.field!=null){let h=P===0?d.size:d.color;const x=v.field.values;for(let g=0;g<x.length;g++){const a=x[g];a!=null&&(a<h.min&&(h.min=a),a>h.max&&(h.max=a))}}})}),d};function ze(e,d){return(0,ne.A)(d.visualization.getColorByName(e)).toHex8String()}function at(e,d){let o=[],v=()=>[],P=()=>-1,h="";if(e.config.mappings?.length??!1){let x=e.config.mappings;for(let g=0;g<x.length;g++){let a=x[g];if(a.type===Z.d.ValueToText)for(let f in a.options){let{color:M}=a.options[f];if(M!=null){let L=e.type===A.PU.string?JSON.stringify(f):Number(f);h+=`v === ${L} ? ${o.length} : `,o.push(ze(M,d))}}else if(a.options.result.color!=null){let{color:f}=a.options.result;if(a.type===Z.d.RangeToText){let M=[];a.options.from!=null&&M.push(`v >= ${Number(a.options.from)}`),a.options.to!=null&&M.push(`v <= ${Number(a.options.to)}`),M.length>0&&(h+=`${M.join(" && ")} ? ${o.length} : `,o.push(ze(f,d)))}else if(a.type===Z.d.SpecialValue){let M=a.options.match;M===Z.W.NaN?h+="isNaN(v)":M===Z.W.NullAndNaN?h+="v == null || isNaN(v)":h+=`v ${M===Z.W.True?"=== true":M===Z.W.False?"=== false":M===Z.W.Null?"== null":M===Z.W.Empty?'=== ""':"== null"}`,h+=` ? ${o.length} : `,o.push(ze(f,d))}else a.type,Z.d.RegexToText}}h+="-1"}else if(e.config.color?.mode===We.Yb.Thresholds){if(e.config.thresholds?.mode===Ne.O.Absolute){let x=e.config.thresholds.steps,g=x.length-1;for(let a=g;a>0;a--){let f=Number(x[a].value);h+=`v >= ${f} ? ${a} : `}h+="0",o=x.map(a=>ze(a.color,d))}}else if(e.config.color?.mode?.startsWith("continuous")){let x=(0,Ve.Qi)(e).getCalculator(e,d);o=Array(32);for(let g=0;g<o.length;g++){let a=g/(o.length-1);o[g]=ze(x(a,a),d)}v=(g,a,f)=>(0,it.O4)(g,o,a,f)}return h!==""&&(P=new Function("v",`return ${h};`),v=new Function("vals",`
      let idxs = Array(vals.length);

      for (let i = 0; i < vals.length; i++) {
        let v = vals[i];
        idxs[i] = ${h};
      }

      return idxs;
    `)),{index:o,getOne:P,getAll:v}}const nt=e=>{const d=(0,ue.of)(st),o=(0,ue.$j)();let{mapping:v,series:P}=e.options,h=(0,H.useMemo)(()=>(0,k.hV)(v,P,e.data.series,e.fieldConfig),[v,P,e.data.series,e.fieldConfig]),{builder:x,prepData:g}=(0,H.useMemo)(()=>lt(h,T.$.theme2),[v,P,e.data.structureRev,e.fieldConfig,e.options.tooltip]),a=(0,H.useMemo)(()=>g(h),[h]),f=x==null||a.length===0?"Err":"";const M=()=>{if(!e.options.legend.showLegend)return null;const L=[];h.forEach((s,b)=>{let p=s.y.field;p.config.custom.hideFrom?.legend||L.push({yAxis:1,label:s.name.value,color:B.MV.alpha(s.color.fixed??D.F,1),getItemKey:()=>`${b}-${s.name.value}`,fieldName:p.state?.displayName??p.name,disabled:p.state?.hideFrom?.viz??!1,getDisplayValues:()=>(0,ie.UO)(e.options.legend.calcs,p,o)})});const{placement:u,displayMode:K,width:n,sortBy:t,sortDesc:i}=e.options.legend;return(0,c.jsx)(fe.KU.Legend,{placement:u,width:n,children:(0,c.jsx)(R.t,{className:d.legend,placement:u,items:L,displayMode:K,sortBy:t,sortDesc:i,isSortable:!0})})};return f?(0,c.jsx)("div",{className:"panel-empty",children:(0,c.jsx)("p",{children:f})}):(0,c.jsx)(fe.KU,{width:e.width,height:e.height,legend:M(),children:(L,u)=>(0,c.jsx)(te.Z,{config:x,data:a,width:L,height:u,children:e.options.tooltip.mode!==w.$N.None&&(0,c.jsx)(Pe.xl,{config:x,hoverMode:Pe.b3.xyOne,getDataLinks:(K,n)=>{const t=h[K-1];return(0,De.u6)(t.y.field,n)},render:(K,n,t,i,s,b,p,m)=>(0,c.jsx)(F,{data:e.data.series,dataIdxs:n,xySeries:h,dismiss:s,isPinned:i,seriesIdx:t,replaceVariables:e.replaceVariables,dataLinks:m}),maxWidth:e.options.tooltip.maxWidth})})})},st=()=>({legend:(0,Q.css)({div:{justifyContent:"flex-start"}})});var ce=l(83340),rt=l(44017),dt=l(45013),Ye=l(32471);const ct=5;function ut(e){return{standardOptions:{[ce.uo.Min]:{hideFromDefaults:!0},[ce.uo.Max]:{hideFromDefaults:!0},[ce.uo.Unit]:{hideFromDefaults:!0},[ce.uo.Decimals]:{hideFromDefaults:!0},[ce.uo.NoValue]:{hideFromDefaults:!0},[ce.uo.DisplayName]:{hideFromDefaults:!0},[ce.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:D.Y.PaletteClassic}},[ce.uo.Links]:{settings:{showOneClick:!0}},[ce.uo.Actions]:{hideFromDefaults:!1}},useCustomConfig:d=>{d.addRadio({path:"show",name:"Show",defaultValue:e.show,settings:{options:[{label:"Points",value:r.Oq.Points},{label:"Lines",value:r.Oq.Lines},{label:"Both",value:r.Oq.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:e.pointSize?.fixed??ct,settings:{min:1,max:100,step:1},showIf:o=>o.show!==r.Oq.Lines}).addNumberInput({path:"pointSize.min",name:"Min point size",showIf:o=>o.show!==r.Oq.Lines}).addNumberInput({path:"pointSize.max",name:"Max point size",showIf:o=>o.show!==r.Oq.Lines}).addRadio({path:"pointShape",name:"Point shape",defaultValue:r.uZ.Circle,settings:{options:[{value:r.uZ.Circle,label:"Circle"},{value:r.uZ.Square,label:"Square"}]},showIf:o=>o.show!==r.Oq.Lines}).addSliderInput({path:"pointStrokeWidth",name:"Point stroke width",defaultValue:1,settings:{min:0,max:10},showIf:o=>o.show!==r.Oq.Lines}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:50,settings:{min:0,max:100,step:1},showIf:o=>o.show!==r.Oq.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:o=>o.show!==r.Oq.Points,editor:Ye.F,override:Ye.F,process:ee.hS,shouldApply:o=>o.type===A.PU.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:e.lineWidth,settings:{min:0,max:10,step:1},showIf:o=>o.show!==r.Oq.Points}),rt.rg(d,e),dt.e(d)}}}var Se=(e=>(e.Auto="auto",e.Manual="manual",e))(Se||{}),ft=(e=>(e.Lines="lines",e.Points="points",e.PointsAndLines="points+lines",e))(ft||{});const zt={exclude:[]},bt={label:w.yL.Auto,show:"points"},At={series:[]},mt=e=>{const d=e?.pluginVersion??"";return d===""||parseFloat(d)<11.1?ht(e):e.options};function ht(e){const{dims:d,seriesMapping:o,series:v,...P}=e.options,{exclude:h=[],frame:x,x:g}=d??{},a=e.fieldConfig.defaults.custom;let f=v;o===Se.Auto&&(f=[{x:void 0,y:void 0}]);let M=0;const L=f.map(({x:K,y:n,pointColor:t,pointSize:i,frame:s})=>{const{fixed:b,field:p}=t??{},{fixed:m,field:N,min:q,max:Y}=i??{};let X,z;return K==null&&g==null?X={id:I.Ct.byType,options:"number"}:X={id:I.Ct.byName,options:K??g},n==null?z={id:I.Ct.byType,options:"number"}:z={id:I.Ct.byName,options:n},p==null&&b&&a.pointColor?.fixed!==b&&(e.fieldConfig.overrides.some(V=>V.matcher.id===z.id&&V.matcher.options===z.options&&V.properties.some(re=>re.id==="color"))||e.fieldConfig.overrides.push({matcher:z,properties:[{id:"color",value:{mode:"fixed",fixedColor:b}}]})),N==null&&m&&a.pointSize?.fixed!==m&&(e.fieldConfig.overrides.some(V=>V.matcher.id===z.id&&V.matcher.options===z.options&&V.properties.some(re=>re.id==="custom.pointSize.fixed"))||e.fieldConfig.overrides.push({matcher:z,properties:[{id:"custom.pointSize.fixed",value:m}]})),N!=null&&(q&&a.pointSize?.min!==q&&(e.fieldConfig.overrides.some(V=>V.matcher.id===z.id&&V.matcher.options===z.options&&V.properties.some(re=>re.id==="custom.pointSize.min"))||e.fieldConfig.overrides.push({matcher:{id:I.Ct.byName,options:N},properties:[{id:"custom.pointSize.min",value:q}]})),Y&&a.pointSize?.max!==Y&&(e.fieldConfig.overrides.some(V=>V.matcher.id===z.id&&V.matcher.options===z.options&&V.properties.some(re=>re.id==="custom.pointSize.max"))||e.fieldConfig.overrides.push({matcher:{id:I.Ct.byName,options:N},properties:[{id:"custom.pointSize.max",value:Y}]}))),{frame:{matcher:{id:I.jR.byIndex,options:s??(o===Se.Manual?M++:x??0)}},x:{matcher:X},y:{matcher:z,...h.length&&{exclude:{id:I.Ct.byNames,options:h}}},...p&&{color:{matcher:{id:I.Ct.byName,options:p}}},...N&&{size:{matcher:{id:I.Ct.byName,options:N}}}}});return{...P,mapping:o===Se.Auto?Se.Auto:Se.Manual,series:L}}const pt=new W.m(nt).setMigrationHandler(mt).useFieldConfig(ut(r.QB)).setPanelOptions(e=>{e.addRadio({path:"mapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"series",path:"series",name:"",editor:C,defaultValue:[{}]}),$.D(e,!0),G.H(e)})},99914:(Ae,ae,l)=>{l.d(ae,{Oq:()=>G,QB:()=>Q,it:()=>$,uZ:()=>W});var W=(j=>(j.Circle="circle",j.Square="square",j))(W||{}),$=(j=>(j.Auto="auto",j.Manual="manual",j))($||{}),G=(j=>(j.Lines="lines",j.Points="points",j.PointsAndLines="points+lines",j))(G||{});const c={id:""},Q={fillOpacity:50,show:"points"},H={series:[]}},74542:(Ae,ae,l)=>{l.d(ae,{Sc:()=>Oe,hV:()=>ue,rE:()=>Ce});var W=l(55386),$=l(57866),G=l(16515),c=l(36638),Q=l(95004),H=l(64394),j=l(43173),I=l(739),ee=l(99914);function Oe(E,O){return E.display?(0,W.cN)(E.display(O)):`${O}`}function A(E){return E.id===$.jR.byIndex?(O,y)=>y===E.options:()=>!1}function ue(E,O,y,r){(0,G.Fm)(y),(0,G.j2)(y,r);let C=[];O.length===0&&(O=[{}]);const{palette:U,getColorByName:B}=j.$.theme2.visualization;if(O.forEach((D,T)=>{if(E===ee.it.Manual&&(D.frame?.matcher==null||D.x?.matcher==null||D.y?.matcher==null))return;let fe=(0,c.NS)(D.x?.matcher??{id:$.Ct.byType,options:"number"}),R=(0,c.NS)(D.y?.matcher??{id:$.Ct.byType,options:"number"}),te=D.color?(0,c.NS)(D.color.matcher):null,w=D.size?(0,c.NS)(D.size.matcher):null,Pe=D.frame?A(D.frame.matcher):null;y.forEach((ie,De)=>{if(Pe!=null&&!Pe(ie,De))return;let Le=[],me=[],ge=ie.fields.filter(S=>S.type===Q.PU.number),he=ge.find(S=>fe(S,ie,y)),ye=te!=null?ge.find(S=>S!==he&&te(S,ie,y)):void 0,k=w!=null?ge.find(S=>S!==he&&S!==ye&&w(S,ie,y)):void 0;he!=null&&(ge.forEach(S=>{if(S!==he&&!(E===ee.it.Auto&&(S===ye||S===k))&&!(E===ee.it.Manual&&me.length>0)&&R(S,ie,y)&&!S.config.custom?.hideFrom?.viz){let F=S,ne=D.name?.fixed;if(ne==null){const ve=y.length>1&&(ie.name!=null||Object.keys(F.labels??{}).length>0),{displayName:Z,displayNameFromDS:Ne}=F.config,Ve=Z!=null||Ne!=null;if(ve&&Ve){const We=F.state.displayName;F.config.displayName=F.config.displayNameFromDS=F.state.displayName=void 0,ne=(0,G.Ct)(F,ie,y),ne=ne.replace(F.name,Ne??Z),F.config.displayName=Z,F.config.displayNameFromDS=Ne,F.state.displayName=We}else ne=(0,G.Ct)(F,ie,y)}let le={name:{value:ne},showPoints:F.config.custom.show===ee.Oq.Lines?I.yL.Never:I.yL.Always,pointShape:F.config.custom.pointShape,pointStrokeWidth:F.config.custom.pointStrokeWidth,fillOpacity:F.config.custom.fillOpacity,showLine:F.config.custom.show!==ee.Oq.Points,lineWidth:F.config.custom.lineWidth??2,lineStyle:F.config.custom.lineStyle,x:{field:he},y:{field:F},color:{},size:{},_rest:Le};ye!=null&&(le.color.field=ye),k!=null&&(le.size.field=k,le.size.min=k.config.custom.pointSize?.min??5,le.size.max=k.config.custom.pointSize?.max??100),me.push(le)}}),me.length,ie.fields.forEach(S=>{me.some(({x:ne,y:le,color:ve,size:Z})=>ne.field===S||le.field===S||ve.field===S||Z.field===S)||Le.push(S)}),C.push(...me))})}),C.length!==0){let D=0;C.forEach((T,fe)=>{if(T.color.field==null){let R=T.y.field.config.color??{mode:H.Y.PaletteClassic},te="";R.mode===H.Y.PaletteClassic?te=B(U[D++%U.length]):R.mode===H.Y.Fixed&&(te=B(R.fixedColor)),T.color.fixed=te}T.size.field==null&&(T.size.fixed=T.y.field.config.custom.pointSize?.fixed??5)}),xe(C)}return C}function xe(E){let O=E.map(C=>C.name.value.split(/\s+/g));const{prefix:y,suffix:r}=J(O);(y<1/0||r<1/0)&&E.forEach((C,U)=>{C.name.value=O[U].slice(y,O[U].length-r).join(" ")})}function Ce(E){let O=E.map(B=>B.split(/\s+/g)),{prefix:y,suffix:r}=J(O),C=O[0];if(C.length===1&&y===1&&r===1)return"";let U=[];return y>0&&U.push(...C.slice(0,y)),r>0&&U.push(...C.slice(-r)),U.join(" ")}function J(E){let O=1/0,y=1/0,r=E[0];for(let C=1;C<E.length;C++)E[C].length<r.length&&(r=E[C]);for(let C=1;C<E.length;C++){let U=E[C];if(U!==r){let B=0;for(let T=0;T<r.length&&U[T]===r[T];T++)B++;B<O&&(O=B);let D=0;for(let T=r.length-1;T>=0&&U[T]===r[T];T--)D++;D<y&&(y=D)}}return{prefix:O,suffix:y}}}}]);

//# sourceMappingURL=xychart.9b3f9c72bb0976b60723.js.map