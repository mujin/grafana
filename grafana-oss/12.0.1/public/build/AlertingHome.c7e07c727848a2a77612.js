"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3236],{11161:(V,D,o)=>{o.r(D),o.d(D,{default:()=>ct});var a=o(74848),F=o(96540),G=o(43173),C=o(41654),K=o(31286),Y=o(54314),W=o(60208),Q=o(13941),v=o(56840),J=o(36826),Z=o(77256),X=o(88547),f=o(22803),ee=o(55494),x=o(63142),b=o(66404),L=o(89640);function te(){const n=(0,x.$j)(),t=(0,x.of)(ne);return(0,a.jsxs)("div",{className:t.grid,children:[(0,a.jsx)(R,{children:(0,a.jsxs)(C.B,{direction:"column",gap:1,children:[(0,a.jsx)(b.E,{element:"h3",children:(0,a.jsx)(v.x6,{i18nKey:"alerting.getting-started.how-it-works",children:"How it works"})}),(0,a.jsxs)("ul",{className:t.list,children:[(0,a.jsx)("li",{children:"Grafana alerting periodically queries data sources and evaluates the condition defined in the alert rule"}),(0,a.jsx)("li",{children:(0,a.jsx)(v.x6,{i18nKey:"alerting.getting-started.condition-breached-alert-instance-fires",children:"If the condition is breached, an alert instance fires"})}),(0,a.jsx)("li",{children:"Firing instances are routed to notification policies based on matching labels"}),(0,a.jsx)("li",{children:"Notifications are sent out to the contact points specified in the notification policy"})]}),(0,a.jsx)("div",{className:t.svgContainer,children:(0,a.jsx)(C.B,{justifyContent:"center",children:(0,a.jsx)(ee.default,{src:`public/img/alerting/at_a_glance_${n.name.toLowerCase()}.svg`,width:void 0,height:void 0})})})]})}),(0,a.jsx)(R,{children:(0,a.jsxs)(C.B,{direction:"column",gap:1,children:[(0,a.jsx)(b.E,{element:"h3",children:(0,a.jsx)(v.x6,{i18nKey:"alerting.getting-started.get-started",children:"Get started"})}),(0,a.jsxs)("ul",{className:t.list,children:[(0,a.jsxs)("li",{children:[(0,a.jsx)(b.E,{weight:"bold",children:"Create an alert rule"})," to query a data source and evaluate the condition defined in the alert rule"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)(b.E,{weight:"bold",children:"Route alert notifications"})," either directly to a contact point or through notification policies for more flexibility"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)(b.E,{weight:"bold",children:"Monitor"})," your alert rules using dashboards and visualizations"]})]}),(0,a.jsxs)("p",{children:["For a hands-on introduction, refer to our"," ",(0,a.jsx)(L.Y,{href:"https://grafana.com/tutorials/alerting-get-started/",icon:"angle-right",inline:!0,external:!0,children:"tutorial to get started with Grafana Alerting"})]})]})})]})}const ne=n=>({grid:(0,f.css)({display:"grid",gridTemplateRows:"min-content auto auto",gridTemplateColumns:"1fr",gap:n.spacing(2),width:"100%",[n.breakpoints.up("lg")]:{gridTemplateColumns:"3fr 2fr"}}),ctaContainer:(0,f.css)({gridColumn:"1 / span 5"}),svgContainer:(0,f.css)({"& svg":{maxWidth:"900px",flex:1}}),list:(0,f.css)({margin:n.spacing(0,2),"& > li":{marginBottom:n.spacing(1)}})});function ae({className:n}){const t=(0,x.of)(re);return(0,a.jsx)(C.B,{gap:2,direction:"column",children:(0,a.jsxs)(R,{className:(0,f.cx)(t.ctaContainer,n),children:[(0,a.jsx)(M,{title:(0,v.t)("alerting.welcome-header.title-alert-rules","Alert rules"),description:"Define the condition that must be met before an alert rule fires",href:"/alerting/list",hrefText:"Manage alert rules"}),(0,a.jsx)("div",{className:t.separator}),(0,a.jsx)(M,{title:(0,v.t)("alerting.welcome-header.title-contact-points","Contact points"),description:(0,v.t)("alerting.welcome-header.description-configure-receives-notifications","Configure who receives notifications and how they are sent"),href:"/alerting/notifications",hrefText:"Manage contact points"}),(0,a.jsx)("div",{className:t.separator}),(0,a.jsx)(M,{title:(0,v.t)("alerting.welcome-header.title-notification-policies","Notification policies"),description:(0,v.t)("alerting.welcome-header.description-configure-firing-alert-instances-routed-contact","Configure how firing alert instances are routed to contact points"),href:"/alerting/routes",hrefText:"Manage notification policies"})]})})}const re=n=>({ctaContainer:(0,f.css)({padding:n.spacing(2),display:"flex",gap:n.spacing(4),justifyContent:"space-between",flexWrap:"wrap",[n.breakpoints.down("lg")]:{flexDirection:"column"}}),separator:(0,f.css)({width:"1px",backgroundColor:n.colors.border.medium,[n.breakpoints.down("lg")]:{display:"none"}})});function M({title:n,description:t,href:s,hrefText:r}){const l=(0,x.of)(se);return(0,a.jsxs)("div",{className:l.container,children:[(0,a.jsx)(b.E,{element:"h2",variant:"h3",children:n}),(0,a.jsx)("div",{className:l.desc,children:t}),(0,a.jsx)("div",{className:l.actionRow,children:(0,a.jsx)(L.Y,{href:s,inline:!1,children:r})})]})}const se=n=>({container:(0,f.css)({color:n.colors.text.primary,flex:1,minWidth:"240px",display:"grid",rowGap:n.spacing(1),gridTemplateColumns:"min-content 1fr 1fr 1fr",gridTemplateRows:"min-content auto min-content","& h2":{marginBottom:0,gridColumn:"2 / span 3",gridRow:1}}),desc:(0,f.css)({gridColumn:"2 / span 3",gridRow:2}),actionRow:(0,f.css)({gridColumn:"2 / span 3",gridRow:3,maxWidth:"240px"})});function R({children:n,className:t}){const s=(0,x.of)(ie);return(0,a.jsx)("div",{className:(0,f.cx)(s.box,t),children:n})}const ie=n=>({box:(0,f.css)({padding:n.spacing(2),backgroundColor:n.colors.background.secondary,borderRadius:n.shape.radius.default})});var oe=o(78282),e=o(56838),le=o(45967),B=o(30703),ue=o(85618);function j({children:n}){const t=(0,x.of)(ce);return(0,a.jsx)("div",{className:t.sectionFooter,children:n&&(0,a.jsx)("div",{children:n})})}const ce=n=>({sectionFooter:(0,f.css)({marginBottom:n.spacing(2)})});function de({datasources:n}){const t=(0,x.of)(ge),s=n.map(r=>(0,a.jsxs)("div",{children:[r.settings?.meta.info.logos.small&&(0,a.jsx)("img",{className:t.dsImage,src:r.settings?.meta.info.logos.small,alt:r.settings?.name||r.uid}),(0,a.jsx)("span",{children:r.settings?.name||r.uid})]},r.uid));return(0,a.jsx)("div",{className:t.dsContainer,children:s})}const ge=n=>({dsImage:(0,f.css)({label:"ds-image",width:"16px",marginRight:"3px"}),dsContainer:(0,f.css)({display:"flex",flexDirection:"row",fontSize:n.typography.bodySmall.fontSize,gap:"10px",marginBottom:"10px",justifyContent:"flex-end"})});function I({children:n,datasources:t}){const s=(0,x.of)(me);return(0,a.jsxs)("div",{className:s.container,children:[n,t&&(0,a.jsx)(de,{datasources:t})]})}const me=n=>({container:(0,f.css)({display:"flex",flexDirection:"row",justifyContent:"space-between"})});var $=o(33553),P=o(5556),fe=o(22787),k=o(45861),O=o(87063),pe=o(88559),he=o(76319),ve=o(74268);const ye=({queries:n,range:t,variables:s})=>{const r=s?.variables.find(m=>m.state.name==="rule_group")?.getValue()||null;r!==null&&(n=n?.map(m=>({...m,expr:m.expr.replace("$rule_group",String(r))})));const l={datasource:n?.length&&n[0].datasource?.uid||null,queries:n?.map(({expr:m,refId:w},y)=>({expr:m,refId:w}))||[],range:(0,P.sQ)(t?{from:t.from,to:t.to}:{from:"now-1h",to:"now"})};return`/explore?left=${encodeURIComponent((0,P.Pp)(l))}`},_e=({model:n})=>{const t=e.jh.getData(n).useState(),s=e.jh.getTimeRange(n).useState(),r=e.jh.getVariables(n).useState(),l=n.state.panel,h=ye({queries:t.data?.request?.targets,range:s,variables:r}),m=(0,x.of)(xe),[w,y]=(0,F.useState)(!1),_=()=>{y(!1)},T=dt=>{(0,ve.AK)({useful:dt,panel:l}),_()},S=(0,a.jsx)(fe.a,{title:(0,v.t)("alerting.insights-menu-button-renderer.modal.title-rate-this-panel","Rate this panel"),isOpen:w,onDismiss:_,onClickBackdrop:_,className:m.container,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Help us improve this page by telling us whether this panel is useful to you!"}),(0,a.jsxs)("div",{className:m.buttonsContainer,children:[(0,a.jsx)(k.$n,{variant:"secondary",className:m.buttonContainer,onClick:()=>T(!1),children:(0,a.jsxs)("div",{className:m.button,children:[(0,a.jsx)(B.I,{name:"thumbs-up",className:m.thumbsdown,size:"xxxl"}),(0,a.jsx)("span",{children:"I don't like it"})]})}),(0,a.jsx)(k.$n,{variant:"secondary",className:m.buttonContainer,onClick:()=>T(!0),children:(0,a.jsxs)("div",{className:m.button,children:[(0,a.jsx)(B.I,{name:"thumbs-up",size:"xxxl"}),(0,a.jsx)("span",{children:(0,a.jsx)(v.x6,{i18nKey:"alerting.insights-menu-button-renderer.modal.i-like-it",children:"I like it"})})]})})]})]})}),H=(0,a.jsxs)(O.W,{children:[(0,a.jsx)(O.W.Item,{label:(0,v.t)("alerting.insights-menu-button-renderer.menu.label-explore","Explore"),icon:"compass",url:h,target:"_blank"}),(0,a.jsx)(O.W.Item,{label:(0,v.t)("alerting.insights-menu-button-renderer.menu.label-rate-this-panel","Rate this panel"),icon:"comment-alt-message",onClick:()=>y(!0)})]});return(0,a.jsxs)("div",{children:[(0,a.jsx)(pe.m,{overlay:H,placement:"bottom-start",children:(0,a.jsx)(he.K,{name:"ellipsis-v",variant:"secondary",className:m.menu,"aria-label":(0,v.t)("alerting.insights-menu-button-renderer.aria-label-rate-this-panel","Rate this panel")})}),S]})};class d extends e.Bs{static{this.Component=_e}}const xe=n=>({buttonsContainer:(0,f.css)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"stretch",gap:"25px"}),buttonContainer:(0,f.css)({height:"150px",width:"150px",cursor:"pointer",justifyContent:"center"}),button:(0,f.css)({display:"flex",flexDirection:"column"}),container:(0,f.css)({maxWidth:"370px"}),menu:(0,f.css)({height:"25px",margin:"0"}),thumbsdown:(0,f.css)({transform:"scale(-1, -1);"})});function we(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="active", id="${i}"})`:'sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="active"})',r=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:s}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of currently active alert rules").setData(r).setThresholds({mode:$.O.Absolute,steps:[{color:"green",value:0},{color:"green",value:80}]}).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}var u=o(739);function be(n,t){const s=i?`sum by(state) (grafanacloud_grafana_instance_alerting_alerts{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_alerts)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]}),l=new e.Es({$data:r,transformations:[{id:"renameByRegex",options:{regex:"alerting",renamePattern:"firing"}}]});return new e.vA({...g,height:"400px",body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your alert rule instances based on state").setData(l).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(h=>h.matchFieldsWithName("firing").overrideColor(p("firing")).matchFieldsWithName("normal").overrideColor(p("normal")).matchFieldsWithName("pending").overrideColor(p("pending")).matchFieldsWithName("recovering").overrideColor(p("recovering")).matchFieldsWithName("error").overrideColor(p("error")).matchFieldsWithName("nodata").overrideColor(p("nodata"))).setHeaderActions([new d({panel:t})]).build()})}function Ae(n,t){const s=i?`sum(grafanacloud_grafana_instance_alerting_rule_evaluations_total:rate5m{id="${i}"}) - sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m{id="${i}"})`:"sum(grafanacloud_grafana_instance_alerting_rule_evaluations_total:rate5m) - sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m)",r=i?`sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m{id="${i}"})`:"sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m)",l=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"success"},{refId:"B",expr:r,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed alert rule evaluations").setData(l).setOption("tooltip",{mode:u.$N.Multi}).setCustomFieldConfig("drawStyle",u.GR.Line).setOverrides(h=>h.matchFieldsWithName("success").overrideColor(p("success")).matchFieldsWithName("failed").overrideColor(p("failed"))).setHeaderActions([new d({panel:t})]).build()})}function N(n,t,s,r){const l=i?`sum by (state) (grafanacloud_grafana_instance_alerting_alerts{state="${r}", id="${i}"})`:`sum by (state) (grafanacloud_grafana_instance_alerting_alerts{state="${r}"})`,h=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:l,legendFormat:"{{state}}"}]});return new e.vA({height:"100%",body:e.d0.stat().setTitle(t).setDescription(s).setData(h).setOverrides(m=>m.matchFieldsWithName(r).overrideColor(p(r))).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}var U=o(81160);function Ce(n,t){const s=`sum by(rule_group) (grafanacloud_instance_rule_group_iterations_missed_total:rate5m{id="${i}"})`,r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{rule_group}}"}]}),l=()=>m=>m.pipe((0,U.T)(w=>w.map(y=>({...y,fields:y.fields.map(_=>{const S=(_.config.displayNameFromDS||"").match(/\/rules\/\d+\/(\w+);(\w+)/);return S&&(_.config.displayName=`Folder: ${S[1]} - Group: ${S[2]}`),_})})))),h=new e.Es({$data:r,transformations:[l]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of missed iterations per evaluation group").setData(h).setOption("tooltip",{mode:u.$N.Multi}).setCustomFieldConfig("drawStyle",u.GR.Line).setHeaderActions([new d({panel:t})]).build()})}var Se=o(20941),je=o(92367);function Ne(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:'topk(10, sum by(labels_alertname, ruleUID) (count_over_time({from="state-history"} | json | current = `Alerting` [1w])))',instant:!0}]}),r=(m,w)=>({...m,values:m.values.map((y,_)=>{const S=w.fields.find(H=>H.name==="ruleUID")?.values[_];return(0,a.jsx)(De,{value:y,ruleUID:S},y)})}),l=()=>m=>m.pipe((0,U.T)(w=>w.map(y=>({...y,fields:y.fields.map(_=>_.name==="labels_alertname"?r(_,y):_)})))),h=new e.Es({$data:s,transformations:[l,{id:"sortBy",options:{fields:{},sort:[{field:"Value #A",desc:!0}]}},{id:"organize",options:{excludeByName:{Time:!0,ruleUID:!0},indexByName:{labels_alertname:0,"Value #A":1},renameByName:{labels_alertname:"Alert rule name","Value #A":"Number of fires"}}}]});return new e.vA({...g,body:e.d0.table().setTitle(t).setDescription("The alert rule instances that have fired the most").setData(h).setNoValue("No new alerts fired last week").setHeaderActions([new d({panel:t})]).build()})}function De({value:n,ruleUID:t}){const s=l=>({link:(0,f.css)({"& > a":{color:l.colors.text.link}})}),r=(0,x.of)(s);return(0,a.jsx)("div",{className:r.link,children:(0,a.jsx)(Se.N,{target:"_blank",href:(0,je.G)(`/alerting/grafana/${t}/view`),children:n})})}function Fe(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="paused", id="${i}"})`:'sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="paused"})',r=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:s}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of current paused alert rules").setData(r).setThresholds({mode:$.O.Absolute,steps:[{color:"yellow",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}function Ie(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}} evaluation"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("See how many of your alert rules are paused or active").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(l=>l.matchFieldsWithName("active evaluation").overrideColor(p("active evaluation"))).setHeaderActions([new d({panel:t})]).build()})}function $e(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{id="${i}"}) / ignoring(state) group_left sum(grafanacloud_grafana_instance_alerting_rule_group_rules{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules) / ignoring(state) group_left sum(grafanacloud_grafana_instance_alerting_rule_group_rules)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}} evaluation"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("See what percentage of your alert rules are paused or active").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setCustomFieldConfig("fillOpacity",45).setUnit("percentunit").setOption("tooltip",{mode:u.$N.Multi}).setMax(1).setOverrides(l=>l.matchFieldsWithName("active evaluation").overrideColor(p("active evaluation"))).setHeaderActions([new d({panel:t})]).build()})}function Te(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_alertmanager_alerts{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_alertmanager_alerts)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your firing alert rule instances based on state").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(l=>l.matchFieldsWithName("active").overrideColor(p("active"))).setHeaderActions([new d({panel:t})]).build()})}function Ge(n,t){const s=i?`sum by (state) (grafanacloud_grafana_instance_alerting_silences{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_silences)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of silences by state").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setHeaderActions([new d({panel:t})]).build()})}function Me(n,t){const s=i?`sum by (state) (grafanacloud_instance_alertmanager_alerts{stack_id="${i}"})`:"sum by (state) (grafanacloud_instance_alertmanager_alerts)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your firing alert rule instances based on state").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(l=>l.matchFieldsWithName("active").overrideColor(p("active"))).setHeaderActions([new d({panel:t})]).build()})}function Re(n,t){const s=i?`sum by (cluster)(grafanacloud_instance_alertmanager_invalid_config{stack_id="${i}"})`:"sum by (cluster)(grafanacloud_instance_alertmanager_invalid_config)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{cluster}}"}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The current state of your alertmanager configuration").setData(r).setUnit("bool_yes_no").setOption("graphMode",u.$p.None).setHeaderActions([new d({panel:t})]).build()})}function Be(n,t){const s=i?`sum by(cluster)(grafanacloud_instance_alertmanager_notifications_per_second{stack_id="${i}"}) - sum by (cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second{stack_id="${i}"})`:"sum by(cluster)(grafanacloud_instance_alertmanager_notifications_per_second) - sum by (cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second)",r=i?`sum by(cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second{stack_id="${i}"})`:"sum by(cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second)",l=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"success"},{refId:"B",expr:r,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed notifications").setData(l).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(h=>h.matchFieldsWithName("success").overrideColor(p("success")).matchFieldsWithName("failed").overrideColor(p("failed"))).setHeaderActions([new d({panel:t})]).build()})}function Oe(n,t){const s=i?`sum by (state) (grafanacloud_instance_alertmanager_silences{stack_id="${i}"})`:"sum by (state) (grafanacloud_instance_alertmanager_silences)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of silences by state").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setHeaderActions([new d({panel:t})]).build()})}var Ee=o(21275);function He(n,t){const s=i?`grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group", stack_id="${i}"} / grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group", stack_id="${i}"}`:'grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group"} / grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group"}',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"duration / interval"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The percentage of interval time spent evaluating").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setUnit("percentunit").setThresholds({mode:Ee.Ol.Percentage,steps:[{color:"green",value:0},{color:"red",value:80},{color:"yellow",value:60}]}).setHeaderActions([new d({panel:t})]).build()})}function We(n,t){const s=i?`grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group", stack_id="${i}"}`:'grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group"}',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"{{rule_group}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("How long it took to evaluate the rule group").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setUnit("s").setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setOverrides(l=>l.matchFieldsByQuery("A").overrideColor({mode:"fixed",fixedColor:"blue"})).setHeaderActions([new d({panel:t})]).build()})}function Le(n,t){const s=i?`grafanacloud_instance_rule_evaluations_total:rate5m{rule_group="$rule_group", stack_id="${i}"} - grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group", stack_id="${i}"}`:'grafanacloud_instance_rule_evaluations_total:rate5m{rule_group="$rule_group"} - grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group"}',r=i?`grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group", stack_id="${i}"}`:'grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group"}',l=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"success"},{refId:"B",expr:r,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed evaluations for the rule group").setData(l).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(h=>h.matchFieldsWithName("success").overrideColor(p("success")).matchFieldsWithName("failed").overrideColor(p("failed"))).setHeaderActions([new d({panel:t})]).build()})}function Pe(n,t){const s=i?`grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group", stack_id="${i}"}`:'grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group"}',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"interval"}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The current and historical rule group evaluation interval").setData(r).setUnit("s").setOption("graphMode",u.$p.Area).setHeaderActions([new d({panel:t})]).build()})}function ke(n,t){const s=i?`sum(grafanacloud_instance_rule_group_rules{rule_group="$rule_group", stack_id="${i}"})`:'sum(grafanacloud_instance_rule_group_rules{rule_group="$rule_group"})',r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"number of rules"}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The current and historical number of alert rules in the rule group").setData(r).setUnit("none").setOption("graphMode",u.$p.Area).setOverrides(l=>l.matchFieldsByQuery("A").overrideColor({mode:"fixed",fixedColor:"blue"})).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}function Ue(n,t){const s=i?`sum(grafanacloud_instance_rule_evaluations_total:rate5m{stack_id="${i}"}) - sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m{stack_id="${i}"})`:"sum(grafanacloud_instance_rule_evaluations_total:rate5m) - sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m)",r=i?`sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m{stack_id="${i}"})`:"sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m)",l=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"success"},{refId:"B",expr:r,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed alert rule evaluations").setData(l).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(h=>h.matchFieldsWithName("failed").overrideColor(p("failed"))).setHeaderActions([new d({panel:t})]).build()})}function qe(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:'sum by (alertstate) (ALERTS{alertstate="firing"})'}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of currently firing alert rule instances").setData(s).setThresholds({mode:$.O.Absolute,steps:[{color:"red",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}function ze(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:"sum by (alertstate) (ALERTS)",range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of firing and pending alert rule instances").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(r=>r.matchFieldsWithName("firing").overrideColor(p("firing"))).setHeaderActions([new d({panel:t})]).build()})}function Ve(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:"sum by (alertstate) (ALERTS) / ignoring(alertstate) group_left sum(ALERTS)",range:!0,legendFormat:"{{alertstate}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("See what percentage of your alert rules are firing versus pending").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setCustomFieldConfig("fillOpacity",45).setUnit("percentunit").setMax(1).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(r=>r.matchFieldsWithName("firing").overrideColor(p("firing"))).setHeaderActions([new d({panel:t})]).build()})}function Ke(n,t){const s=i?`sum(grafanacloud_instance_rule_group_iterations_missed_total:rate5m{stack_id="${i}"})`:"sum(grafanacloud_instance_rule_group_iterations_missed_total:rate5m)",r=new e.dt({datasource:n,queries:[{refId:"A",expr:s,range:!0,legendFormat:"missed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of evaluations missed").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setOverrides(l=>l.matchFieldsWithName("missed").overrideColor(p("missed"))).setHeaderActions([new d({panel:t})]).build()})}function Ye(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",expr:'topk(10, sum by(alertname) (ALERTS{alertstate="firing"}))',instant:!0,range:!1,format:"table"}]}),r=new e.Es({$data:s,transformations:[{id:"organize",options:{excludeByName:{Time:!0},indexByName:{},renameByName:{Value:"Number of fires",alertname:"Alert Rule Name"}}}]});return new e.vA({...g,body:e.d0.table().setTitle(t).setDescription("The alert rules that have fired the most").setData(r).setHeaderActions([new d({panel:t})]).build()})}function Qe(n,t){const s=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:'sum by (alertstate) (ALERTS{alertstate="pending"})'}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of currently pending alert rule instances").setData(s).setThresholds({mode:$.O.Absolute,steps:[{color:"yellow",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions([new d({panel:t})]).build()})}const E={type:"loki",uid:"grafanacloud-alert-state-history",settings:void 0},c={type:"prometheus",uid:"grafanacloud-usage",settings:void 0},A={type:"prometheus",uid:"grafanacloud-prom",settings:void 0},Je={alerting:"red",firing:"red",active:"red",missed:"red",failed:"red",pending:"yellow",recovering:"yellow",nodata:"blue","active evaluation":"blue",normal:"green",success:"green",error:"orange"};function p(n){return{mode:"fixed",fixedColor:Je[n]}}const g={minHeight:300},Ze=new e.JZ({from:"now-1w",to:"now"}),q=(0,ue.G)(),i=q.includes("stacks-")?q.replace("stacks-",""):void 0,z=()=>{const n=(0,oe.l)();return[E,c,A].forEach(t=>{t.settings=n.getInstanceSettings(t.uid)}),[E,c,A]},Xe=()=>{const[n,t,s]=z();return t.settings};function et(){const[n,t,s]=z(),r=[],l=n.settings&&t.settings,h=!!t.settings,m=!!t.settings,w=t.settings&&s.settings,y=!!t.settings;return l&&r.push(new e.vA({ySizing:"content",body:tt()})),h&&r.push(new e.vA({ySizing:"content",body:nt()})),w&&r.push(new e.vA({ySizing:"content",body:rt()})),y&&r.push(new e.vA({ySizing:"content",body:st()})),m&&r.push(new e.vA({ySizing:"content",body:at()})),new e.P1({$timeRange:Ze,controls:[new e.dM({component:I,props:{children:(0,a.jsxs)(b.E,{children:["Monitor the status of your system"," ",(0,a.jsx)(le.m,{content:(0,a.jsxs)("div",{children:["Alerting insights provides pre-built dashboards to monitor your alerting data.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"You can identify patterns in why things go wrong and discover trends in alerting performance within your organization."]}),children:(0,a.jsx)(B.I,{name:"info-circle",size:"sm"})})]})}}),new e.N0,new e.KE({}),new e.WM({})],body:new e.G1({direction:"column",children:r})})}function tt(){return new e.Or({title:"Grafana-managed alert rules",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.G1({direction:"column",children:[new e.G1({children:[Ne(E,"Top 10 firing instances"),we(c,"Active rules"),Fe(c,"Paused rules")]}),new e.G1({children:[be(c,"Alert instances by state"),new e.G1({height:"400px",direction:"column",children:[new e.G1({height:"400px",children:[N(c,"Firing instances","The number of currently firing alert rule instances","alerting"),N(c,"Recovering instances","The number of currently recovering alert rule instances","recovering"),N(c,"Pending instances","The number of currently pending alert rule instances","pending")]}),new e.G1({children:[N(c,"No data instances","The current number of alert rule instances in No data state","nodata"),N(c,"Error instances","The current number of alert rule instances in Error state","error")]})]})]}),new e.G1({children:[Ie(c,"Alert rule evaluation"),$e(c,"% of alert rule evaluation")]}),new e.G1({children:[Ae(c,"Evaluation success vs failures"),Ce(c,"Iterations missed per evaluation group")]})]}),new e.dM({component:j})]})})}function nt(){return new e.Or({title:"Grafana Alertmanager",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.G1({children:[Te(c,"Firing alerts by state"),Ge(c,"Silences")]}),new e.dM({component:j})]})})}function at(){return new e.Or({title:"Mimir Alertmanager",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:I,props:{datasources:[c]}})}),new e.G1({children:[Me(c,"Firing alerts by state"),Be(c,"Notification delivery")]}),new e.G1({children:[Oe(c,"Silences"),Re(c,"Invalid configuration")]}),new e.dM({component:j})]})})}function rt(){return new e.Or({title:"Mimir-managed alert rules",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:I,props:{datasources:[A,c]}})}),new e.G1({children:[Ye(A,"Top 10 firing rules"),qe(A,"Firing instances"),Qe(A,"Pending instances")]}),new e.G1({children:[ze(A,"Firing and pending alert instances"),Ve(A,"% of alert instances by state")]}),new e.G1({children:[Ue(c,"Evaluation success vs failures"),Ke(c,"Missed evaluations")]}),new e.dM({component:j})]})})}function st(){const n=new e.fS({label:"Rule Group",name:"rule_group",datasource:c,query:"label_values(grafanacloud_instance_rule_group_rules,rule_group)"});return new e.Or({title:"Mimir-managed alert rules - per rule group",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:I,props:{datasources:[c]}})}),new e.G1({children:[Le(c,"Rule group evaluation"),Pe(c,"Rule group interval")]}),new e.G1({children:[We(c,"Rule group evaluation duration"),ke(c,"Rules per group"),He(c,"Evaluation duration / interval ratio")]}),new e.dM({component:j})]}),$variables:new e.Pj({variables:[n]}),controls:[new e.K8({})]})}var it=o(98684);function ot(){const n=(0,x.of)(lt),{components:t}=(0,it.u)();return t.length===0?null:(0,a.jsxs)(C.B,{direction:"column",gap:2,children:[(0,a.jsx)(b.E,{element:"h3",variant:"h4",children:"Speed up your alerts creation now by using one of our tailored apps"}),(0,a.jsx)(C.B,{gap:2,wrap:"wrap",direction:"row",children:t.map((s,r)=>(0,a.jsx)("div",{className:n.box,children:(0,a.jsx)(s,{})},r))})]})}const lt=n=>({box:(0,f.css)({padding:n.spacing(2),flex:1,backgroundColor:n.colors.background.secondary,maxWidth:"460px"})});function ut(){const n=(Xe()||(0,Z.ES)())&&!!G.$.featureToggles.alertingInsights,[t,s]=(0,F.useState)(n?"insights":"overview"),r=et();return(0,a.jsxs)(J.d,{title:(0,v.t)("alerting.home.title-alerting","Alerting"),subTitle:"Learn about problems in your systems moments after they occur",navId:"alerting",children:[(0,a.jsxs)(C.B,{gap:2,direction:"column",children:[(0,a.jsx)(ae,{}),(0,a.jsx)(ot,{})]}),(0,a.jsxs)(K.a,{marginTop:{lg:2,md:0,xs:0},children:[(0,a.jsxs)(Y.U,{children:[n&&(0,a.jsx)(W.o,{label:(0,v.t)("alerting.home.label-insights","Insights"),active:t==="insights",onChangeTab:()=>s("insights")},"insights"),(0,a.jsx)(W.o,{label:(0,v.t)("alerting.home.label-get-started","Get started"),active:t==="overview",onChangeTab:()=>s("overview")},"overview")]}),(0,a.jsxs)(Q.J,{children:[t==="insights"&&(0,a.jsx)(r.Component,{model:r}),t==="overview"&&(0,a.jsx)(te,{})]})]})]})}const ct=(0,X.S)(ut)},98684:(V,D,o)=>{o.d(D,{u:()=>G});var a=o(54092),F=o(33604);function G(){return(0,F.f)({extensionPointId:a.S.AlertingHomePage,limitPerPlugin:1})}}}]);

//# sourceMappingURL=AlertingHome.c7e07c727848a2a77612.js.map