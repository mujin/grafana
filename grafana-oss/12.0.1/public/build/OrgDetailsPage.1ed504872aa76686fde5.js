"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1510],{74410:(y,g,n)=>{n.d(g,{l:()=>d});var o=n(74848),h=n(22803),P=n(96540),u=n(49785);function d({defaultValues:O,onSubmit:t,validateOnMount:m=!1,validateFieldsOnMount:a,children:p,validateOn:v="onSubmit",maxWidth:i=600,...x}){const{handleSubmit:z,trigger:l,formState:e,...C}=(0,u.mN)({mode:v,defaultValues:O});return(0,P.useEffect)(()=>{m&&l(a)},[l,a,m]),(0,o.jsx)("form",{className:(0,h.css)({maxWidth:i!=="none"?i+"px":i,width:"100%"}),onSubmit:z(t),...x,children:p({errors:e.errors,formState:e,trigger:l,...C})})}},73318:(y,g,n)=>{n.r(g),n.d(g,{OrgDetailsPage:()=>D,default:()=>M});var o=n(74848),h=n(96540),P=n(71468),u=n(41654),d=n(13791),O=n(13126),t=n(73427),m=n(84057),a=n(96673),p=n(87745),v=n(16780),i=n(37386),x=n(63527),z=n(45861),l=n(74410),e=n(56840);const A=({onSubmit:c,orgName:r})=>{const f=t.TP.hasPermission(a.AccessControlAction.OrgsWrite);return(0,o.jsx)(l.l,{defaultValues:{orgName:r},onSubmit:({orgName:s})=>c(s),children:({register:s})=>(0,o.jsxs)(v.n,{label:(0,e.t)("org.org-profile.label-organization-profile","Organization profile"),disabled:!f,children:[(0,o.jsx)(i.D,{label:(0,e.t)("org.org-profile.label-organization-name","Organization name"),children:(0,o.jsx)(x.p,{id:"org-name-input",type:"text",...s("orgName",{required:!0})})}),(0,o.jsx)(z.$n,{type:"submit",children:(0,o.jsx)(e.x6,{i18nKey:"org.org-profile.update-organization-name",children:"Update organization name"})})]})})};var j=n(93922),E=n(74396);class D extends h.PureComponent{constructor(){super(...arguments),this.onUpdateOrganization=r=>{this.props.setOrganizationName(r),this.props.updateOrganization()},this.handleConfirm=()=>new Promise(r=>{t.lE.publish(new p.bY({title:"Confirm preferences update",text:"This will update the preferences for the whole organization. Are you sure you want to update the preferences?",yesText:"Save",yesButtonVariant:"primary",onConfirm:async()=>r(!0),onDismiss:async()=>r(!1)}))})}async componentDidMount(){await this.props.loadOrganization()}render(){const{navModel:r,organization:f}=this.props,s=Object.keys(f).length===0,R=t.TP.hasPermission(a.AccessControlAction.OrgsRead),U=t.TP.hasPermission(a.AccessControlAction.OrgsPreferencesRead),B=t.TP.hasPermission(a.AccessControlAction.OrgsPreferencesWrite);return(0,o.jsx)(d.Y,{navModel:r,children:(0,o.jsx)(d.Y.Contents,{isLoading:s,children:!s&&(0,o.jsxs)(u.B,{direction:"column",gap:3,children:[R&&(0,o.jsx)(A,{onSubmit:this.onUpdateOrganization,orgName:f.name}),U&&(0,o.jsx)(O.A,{resourceUri:"org",disabled:!B,preferenceType:"org",onConfirm:this.handleConfirm})]})})})}}function T(c){return{navModel:(0,m.tc)(c.navIndex,"org-settings"),organization:c.organization.organization}}const S={loadOrganization:j.YS,setOrganizationName:E.n,updateOrganization:j.L_},M=(0,P.connect)(T,S)(D)}}]);

//# sourceMappingURL=OrgDetailsPage.1ed504872aa76686fde5.js.map