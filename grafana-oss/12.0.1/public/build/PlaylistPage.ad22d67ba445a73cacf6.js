"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1168],{65064:(Y,T,s)=>{s.d(T,{A:()=>k});var t=s(74848),o=s(96540),A=s(18027),y=s(12737),b=s(45861),E=s(18552);class k extends o.PureComponent{render(){const{searchQuery:L,linkButton:a,setSearchQuery:j,target:v,placeholder:C="Search by name or type",sortPicker:x}=this.props,g={href:a?.href,disabled:a?.disabled};return v&&(g.target=v),(0,t.jsxs)("div",{className:"page-action-bar",children:[(0,t.jsx)(A.I,{grow:!0,children:(0,t.jsx)(y.Z,{value:L,onChange:j,placeholder:C})}),x&&(0,t.jsx)(E.r,{onChange:x.onChange,value:x.value,getSortOptions:x.getSortOptions}),a&&(0,t.jsx)(b.z9,{...g,children:a.title})]})}}},22129:(Y,T,s)=>{s.r(T),s.d(T,{PlaylistPage:()=>Q,default:()=>rt});var t=s(74848),o=s(96540),A=s(16817),y=s(45861),b=s(50201),E=s(89640),k=s(71599),B=s(13791),L=s(65064),a=s(56840),j=s(15130),v=s(22803),C=s(63142),x=s(21348),g=s(70255),f=s(8073),H=s(8515),I=s(41654),G=s(34339),F=s(5556),R=s(27489),O=s(22787),U=s(16780),P=s(37386),$=s(77824),D=s(32635),J=s(63527),X=s(47931),w=s(58662);const q=({playlistUid:e,onDismiss:i})=>{const[n,r]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),h=[{label:(0,a.t)("share-playlist.mode-normal","Normal"),value:!1},{label:(0,a.t)("share-playlist.mode-kiosk","Kiosk"),value:!0}],p={};n&&(p.kiosk=n),d&&(p.autofitpanels=!0);const m=F.kM.renderUrl(`${(0,w.P_)()}/play/${e}`,p);return(0,t.jsx)(O.a,{isOpen:!0,title:(0,a.t)("share-playlist.title","Share playlist"),onDismiss:i,children:(0,t.jsxs)(U.n,{children:[(0,t.jsx)(P.D,{label:(0,a.t)("share-playlist.mode","Mode"),children:(0,t.jsx)($.z,{value:n,options:h,onChange:r})}),(0,t.jsx)(P.D,{children:(0,t.jsx)(D.S,{label:(0,a.t)("share-playlist.checkbox-label","Autofit"),description:(0,a.t)("share-playlist.checkbox-description","Panel heights will be adjusted to fit screen size"),name:"autofix",value:d,onChange:c=>u(c.currentTarget.checked)})}),(0,t.jsx)(P.D,{label:(0,a.t)("share-playlist.link-url-label","Link URL"),children:(0,t.jsx)(J.p,{id:"link-url-input",value:m,readOnly:!0,addonAfter:(0,t.jsx)(X.b,{icon:"copy",variant:"primary",getText:()=>m,onClipboardCopy:()=>{(0,R.rR)("grafana_kiosk_mode",{action:"share_playlist",mode:n})},children:(0,t.jsx)(a.x6,{i18nKey:"share-playlist.copy-link-button",children:"Copy"})})})})]})})},_=({playlist:e,setStartPlaylist:i,setPlaylistToDelete:n})=>(0,t.jsxs)(f.Z,{children:[(0,t.jsxs)(f.Z.Heading,{children:[e.name,(0,t.jsx)(H.$s,{children:({showModal:r,hideModal:d})=>(0,t.jsx)(G._,{tooltip:(0,a.t)("playlist-page.card.tooltip","Share playlist"),icon:"share-alt",iconSize:"lg",onClick:()=>{r(q,{playlistUid:e.uid,onDismiss:d})}})},"button-share")]}),(0,t.jsxs)(f.Z.Actions,{children:[(0,t.jsx)(y.$n,{variant:"secondary",icon:"play",onClick:()=>i(e),children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.card.start",children:"Start playlist"})}),j.TP.isEditor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.z9,{variant:"secondary",href:`/playlists/edit/${e.uid}`,icon:"cog",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.card.edit",children:"Edit playlist"})},"edit"),(0,t.jsx)(y.$n,{disabled:!1,onClick:()=>n(e),icon:"trash-alt",variant:"destructive",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.card.delete",children:"Delete playlist"})})]})]})]}),tt=({rootProps:e})=>{const i=(0,C.of)(st);return(0,t.jsxs)(f.Z,{...e,children:[(0,t.jsx)(f.Z.Heading,{children:(0,t.jsx)(g.A,{width:140})}),(0,t.jsx)(f.Z.Actions,{children:(0,t.jsxs)(I.B,{direction:"row",wrap:"wrap",children:[(0,t.jsx)(g.A,{containerClassName:i.button,width:142,height:32}),j.TP.isEditor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.A,{containerClassName:i.button,width:135,height:32}),(0,t.jsx)(g.A,{containerClassName:i.button,width:153,height:32})]})]})})]})},M=(0,x.j)(_,tt);function st(e){return{button:(0,v.css)({lineHeight:1})}}const at=({playlists:e,setStartPlaylist:i,setPlaylistToDelete:n})=>{const r=(0,C.of)(V);return(0,t.jsx)("ul",{className:r.list,children:e.map(d=>(0,t.jsx)("li",{className:r.listItem,children:(0,t.jsx)(M,{playlist:d,setStartPlaylist:i,setPlaylistToDelete:n})},d.uid))})},et=({rootProps:e})=>{const i=(0,C.of)(V);return(0,t.jsxs)("div",{"data-testid":"playlist-page-list-skeleton",className:i.list,...e,children:[(0,t.jsx)(M.Skeleton,{}),(0,t.jsx)(M.Skeleton,{}),(0,t.jsx)(M.Skeleton,{})]})},Z=(0,x.j)(at,et);function V(e){return{list:(0,v.css)({display:"grid"}),listItem:(0,v.css)({listStyle:"none"})}}var lt=s(36490),it=s(43173),nt=s(31286);const ot=({playlist:e,onDismiss:i})=>{const[n,r]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!0),[m,c]=(0,o.useState)(!0),[S,K]=(0,o.useState)(!0),N=[{label:"Normal",value:!1},{label:"Kiosk",value:!0}],z=()=>{const l={};n&&(l.kiosk=n),d&&(l.autofitpanels=!0),h||(l["_dash.hideTimePicker"]=!0),m||(l["_dash.hideVariables"]=!0),S||(l["_dash.hideLinks"]=!0),lt.Ny.push(F.kM.renderUrl(`/playlists/play/${e.uid}`,l)),(0,R.rR)("grafana_kiosk_mode",{action:"start_playlist",mode:n})};return(0,t.jsxs)(O.a,{isOpen:!0,icon:"play",title:(0,a.t)("playlist.start-modal.title-start-playlist","Start playlist"),onDismiss:i,children:[(0,t.jsxs)(U.n,{children:[(0,t.jsx)(P.D,{label:(0,a.t)("playlist.start-modal.label-mode","Mode"),children:(0,t.jsx)($.z,{value:n,options:N,onChange:r})}),(0,t.jsx)(P.D,{children:(0,t.jsx)(D.S,{label:(0,a.t)("playlist.start-modal.label-autofit","Autofit"),description:(0,a.t)("playlist.start-modal.description-panel-heights-adjusted-screen","Panel heights will be adjusted to fit screen size"),name:"autofix",value:d,onChange:l=>u(l.currentTarget.checked)})}),it.$.featureToggles.dashboardScene&&(0,t.jsx)(P.D,{label:(0,a.t)("playlist.start-modal.label-display-dashboard-controls","Display dashboard controls"),description:(0,a.t)("playlist.start-modal.description-customize-dashboard-elements-visibility","Customize dashboard elements visibility"),children:(0,t.jsx)(nt.a,{marginTop:2,marginBottom:2,children:(0,t.jsxs)(I.B,{direction:"column",alignItems:"start",justifyContent:"left",gap:2,children:[(0,t.jsx)(D.S,{label:(0,a.t)("playlist.start-modal.label-time-and-refresh","Time and refresh"),name:"displayTimePicker",value:h,onChange:l=>p(l.currentTarget.checked)}),(0,t.jsx)(D.S,{label:(0,a.t)("playlist.start-modal.label-variables","Variables"),name:"displayVariableControls",value:m,onChange:l=>c(l.currentTarget.checked)}),(0,t.jsx)(D.S,{label:(0,a.t)("playlist.start-modal.label-dashboard-links","Dashboard links"),name:"displayLinks",value:S,onChange:l=>K(l.currentTarget.checked)})]})})})]}),(0,t.jsx)(O.a.ButtonRow,{children:(0,t.jsxs)(y.$n,{variant:"primary",onClick:z,children:["Start ",e.name]})})]})};var W=s(82573);const Q=()=>{const e=(0,W.NF)(),[i,n]=(0,o.useState)(0),[r,d]=(0,o.useState)(""),u=(0,A.A)(()=>e.getAllPlaylist(),[i]),h=(0,o.useMemo)(()=>(0,W.GM)(u.value??[],r),[r,u]),[p,m]=(0,o.useState)(),[c,S]=(0,o.useState)(),K=h&&h.length>0,N=()=>S(void 0),z=()=>{c&&e.deletePlaylist(c.uid).finally(()=>{n(i+1),S(void 0)})},l=u.loading||h.length>0||r.length>0;return(0,t.jsx)(B.Y,{actions:j.TP.isEditor?(0,t.jsx)(y.z9,{href:"/playlists/new",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.create-button.title",children:"New playlist"})}):void 0,navId:"dashboards/playlists",children:(0,t.jsxs)(B.Y.Contents,{children:[l&&(0,t.jsx)(L.A,{searchQuery:r,setSearchQuery:d}),u.loading?(0,t.jsx)(Z.Skeleton,{}):(0,t.jsxs)(t.Fragment,{children:[!K&&r?(0,t.jsx)(b.p,{variant:"not-found",message:(0,a.t)("playlists.empty-state.message","No playlists found")}):(0,t.jsx)(Z,{playlists:h,setStartPlaylist:m,setPlaylistToDelete:S}),!l&&(0,t.jsx)(b.p,{variant:"call-to-action",button:(0,t.jsx)(y.z9,{disabled:!j.TP.isEditor,href:"playlists/new",icon:"plus",size:"lg",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.empty.button",children:"Create playlist"})}),message:(0,a.t)("playlist-page.empty.title","There are no playlists created yet"),children:(0,t.jsxs)(a.x6,{i18nKey:"playlist-page.empty.pro-tip",children:["You can use playlists to cycle dashboards on TVs without user control."," ",(0,t.jsx)(E.Y,{external:!0,href:"https://docs.grafana.org/reference/playlist/",children:"Learn more"})]})}),c&&(0,t.jsx)(k.u,{title:c.name,confirmText:(0,a.t)("playlist-page.delete-modal.confirm-text","Delete"),body:(0,a.t)("playlist-page.delete-modal.body","Are you sure you want to delete {{name}} playlist?",{name:c.name}),onConfirm:z,isOpen:!!c,onDismiss:N}),p&&(0,t.jsx)(ot,{playlist:p,onDismiss:()=>m(void 0)})]})]})})},rt=Q}}]);

//# sourceMappingURL=PlaylistPage.ad22d67ba445a73cacf6.js.map