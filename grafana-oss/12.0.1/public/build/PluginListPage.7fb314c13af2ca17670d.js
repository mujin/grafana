"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4519],{51026:(G,y,t)=>{t.d(y,{l:()=>L});var e=t(74848),n=t(22803),i=t(96540),r=t(43173),x=t(55315),c=t(63142),M=t(34999),j=t(45861),u=t(73427),A=t(56840);const B=O=>({alertContent:(0,n.css)({display:"flex",flexDirection:"row",padding:0,justifyContent:"space-between",alignItems:"center"}),alertParagraph:(0,n.css)({margin:O.spacing(0,1,0,0),lineHeight:O.spacing(O.components.height.sm)})}),v=new x.X("advisor-redirect-notice");function L(){const O=(0,c.of)(B),W=(u.TP.hasRole("Admin")||u.TP.isGrafanaAdmin)&&r.$.featureToggles.grafanaAdvisor,[X,g]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{W&&v.getItem("showNotice").then(E=>{E!=="false"&&g(!0)})},[W]),X?(0,e.jsx)(M.F,{severity:"info",title:"",onRemove:()=>{v.setItem("showNotice","false"),g(!1)},children:(0,e.jsxs)("div",{className:O.alertContent,children:[(0,e.jsx)("p",{className:O.alertParagraph,children:(0,e.jsx)(A.x6,{i18nKey:"connections.advisor-redirect-notice.body",children:"Try the new Advisor to uncover potential issues with your data sources and plugins."})}),(0,e.jsx)(j.z9,{"aria-label":(0,A.t)("connections.advisor-redirect-notice.aria-label-link-to-advisor","Link to Advisor"),icon:"arrow-right",href:"/a/grafana-advisor-app",fill:"text",children:(0,e.jsx)(A.x6,{i18nKey:"connections.advisor-redirect-notice.go-to-advisor",children:"Go to Advisor"})})]})}):(0,e.jsx)(e.Fragment,{})}},4825:(G,y,t)=>{t.d(y,{yf:()=>X,Df:()=>x,Uj:()=>L,Jn:()=>u,z$:()=>Z});var e=t(74848),n=t(11594),i=t(99887),r=t(56840);function x({error:g}){const E=c(g);return(0,e.jsx)(i.E,{icon:"exclamation-triangle",text:(0,r.t)("plugins.plugin-disabled-badge.text-disabled","Disabled"),color:"red",tooltip:E})}function c(g){switch(g){case n.ZK.modifiedSignature:return"Plugin disabled due to modified content";case n.ZK.invalidSignature:return"Plugin disabled due to invalid plugin signature";case n.ZK.missingSignature:return"Plugin disabled due to missing plugin signature";case null:case void 0:return"Plugin disabled";default:return`Plugin disabled due to unknown error${g?`: ${g}`:""}`}}var M=t(63142),j=t(93984);function u(){const g=(0,M.of)(j.X);return(0,e.jsx)(i.E,{text:(0,r.t)("plugins.plugin-installed-badge.text-installed","Installed"),color:"orange",className:g})}var A=t(62061),B=t(41654),v=t(63509);function L({plugin:g}){const E=(0,M.of)(j.X);return(0,A.a)("enterprise.plugins")?(0,e.jsx)(i.E,{text:(0,r.t)("plugins.plugin-enterprise-badge.text-enterprise","Enterprise"),color:"blue"}):(0,e.jsxs)(B.B,{wrap:"wrap",children:[(0,e.jsx)(v.B,{status:g.signature}),(0,e.jsx)(i.E,{icon:"lock",role:"img","aria-label":(0,r.t)("plugins.plugin-enterprise-badge.aria-label-enterprise","Enterprise"),text:(0,r.t)("plugins.plugin-enterprise-badge.text-enterprise","Enterprise"),color:"blue",className:E,title:(0,r.t)("plugins.plugin-enterprise-badge.title-requires-a-grafana-enterprise-license","Requires a Grafana Enterprise license")})]})}var O=t(22803);function Z({plugin:g}){const E=(0,M.of)(W);return(0,e.jsx)("p",{className:E.hasUpdate,children:(0,e.jsx)(r.x6,{i18nKey:"plugins.plugin-update-available-badge.update-available",children:"Update available!"})})}const W=g=>({hasUpdate:(0,O.css)({color:g.colors.text.secondary,fontSize:g.typography.bodySmall.fontSize,marginBottom:0})});function X(){return(0,e.jsx)(i.E,{icon:"exclamation-triangle",text:(0,r.t)("plugins.plugin-deprecated-badge.text-deprecated","Deprecated"),color:"orange",tooltip:(0,r.t)("plugins.plugin-deprecated-badge.tooltip-plugin-deprecated-longer-receives-updates","This plugin is deprecated and no longer receives updates.")})}},93984:(G,y,t)=>{t.d(y,{X:()=>n});var e=t(22803);const n=i=>(0,e.css)({background:i.colors.background.primary,borderColor:i.colors.border.strong,color:i.colors.text.secondary})},42135:(G,y,t)=>{t.d(y,{E:()=>c});var e=t(74848),n=t(27489),i=t(35137),r=t(89640),x=t(56840);const c=()=>(0,e.jsxs)("div",{children:[(0,e.jsx)(i.$,{v:2}),(0,e.jsx)(r.Y,{href:"https://github.com/grafana/grafana/issues/new?assignees=&labels=area%2Fdatasource%2Ctype%2Fnew-plugin-request&projects=&template=3-data_source_request.yaml&title=%5BNew+Data+Source%5D%3A+%3Cname-of-service%3E",onClick:()=>(0,n.rR)("connections_data_source_request_clicked"),external:!0,children:(0,e.jsx)(x.x6,{i18nKey:"connections.connect-data.request-data-source",children:"Request a new data source"})}),(0,e.jsx)("br",{}),(0,e.jsx)(r.Y,{href:"https://github.com/orgs/grafana/projects/619/views/1?pane=info",onClick:()=>(0,n.rR)("connections_data_source_roadmap_clicked"),external:!0,children:(0,e.jsx)(x.x6,{i18nKey:"connections.connect-data.roadmap",children:"View roadmap"})})]})},84969:(G,y,t)=>{t.d(y,{L:()=>M});var e=t(74848),n=t(96540),i=t(40996),r=t(12737),x=t(56840);const c=(j,u=0,A=[])=>{const B=(0,n.useRef)(!0),v=[...A,B];return(0,i.A)(()=>{if(B.current){B.current=!1;return}return j()},u,v)},M=({value:j,onSearch:u})=>{const[A,B]=(0,n.useState)(j);return c(()=>u(A??""),500,[A]),(0,e.jsx)(r.Z,{value:A,onKeyDown:v=>{(v.key==="Enter"||v.keyCode===13)&&u(v.currentTarget.value)},placeholder:(0,x.t)("plugins.search-field.placeholder-search-grafana-plugins","Search Grafana plugins"),onChange:v=>{B(v)},width:46})}},6650:(G,y,t)=>{t.d(y,{A:()=>x});var e=t(74848),n=t(45861),i=t(56840);const x=({disabled:c,onUpdateAll:M,updatablePluginsLength:j})=>(0,e.jsx)(n.$n,{disabled:c,onClick:M,children:c?(0,e.jsx)(i.x6,{i18nKey:"plugins.catalog.no-updates-available",children:"No updates available"}):(0,e.jsxs)(i.x6,{i18nKey:"plugins.catalog.update-all.button",values:{length:j},children:["Update all (",{length},")"]})})},65223:(G,y,t)=>{t.d(y,{U:()=>F,A:()=>q});var e=t(74848),n=t(96540),i=t(27489),r=t(43173),x=t(71599),c=t(56840),M=t(23691),j=t(13660),u=t(22803),A=t(63142),B=t(45967),v=t(30703),L=t(68079),O=t(50201),Z=t(32635);const W=d=>({table:(0,u.css)({marginTop:d.spacing(2),width:"100%",borderCollapse:"collapse"}),tableRow:(0,u.css)({borderBottom:`1px solid ${d.colors.border.weak}`,td:{paddingRight:d.spacing(1)}}),icon:(0,u.css)({display:"flex",justifyContent:"center",alignItems:"center"}),header:(0,u.css)({textAlign:"left",padding:d.spacing(1),borderBottom:`2px solid ${d.colors.border.strong}`,th:{paddingRight:d.spacing(1)}}),data:(0,u.css)({padding:"10px"}),footer:(0,u.css)({fontSize:d.typography.bodySmall.fontSize,marginTop:d.spacing(3)}),noPluginsMessage:(0,u.css)({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}),tableContainer:(0,u.css)({overflowY:"auto",overflowX:"hidden",maxHeight:d.spacing(41),marginBottom:d.spacing(2)}),errorIcon:(0,u.css)({color:d.colors.error.main}),successIcon:(0,u.css)({color:d.colors.success.main}),pluginsInstalled:(0,u.css)({svg:{marginRight:d.spacing(1)}})}),X=({id:d,inProgress:C,isSelected:T,isInstalled:P,errorMap:z})=>{const I=(0,A.of)(W);return z&&z.has(d)?(0,e.jsx)(B.m,{content:`${(0,c.t)("plugins.catalog.update-all.error","Error updating plugin:")} ${z.get(d)?.message}`,children:(0,e.jsx)(v.I,{className:I.errorIcon,size:"xl",name:"exclamation-triangle"})}):P?(0,e.jsx)(v.I,{className:I.successIcon,size:"xl",name:"check"}):C&&T?(0,e.jsx)(L.y,{}):""},g=({plugins:d,pluginsNotInstalled:C,inProgress:T,selectedPlugins:P,onCheckboxChange:z,errorMap:I})=>{const S=(0,A.of)(W),U=d.length-C.size,R=d.length!==C.size&&!T;return(0,e.jsx)("div",{children:d.length===0?(0,e.jsx)(O.p,{variant:"completed",message:(0,c.t)("plugins.catalog.update-all.all-plugins-updated","All plugins updated!")}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:(0,e.jsx)(c.x6,{i18nKey:"plugins.catalog.update-all.header",children:"The following plugins have update available"})}),(0,e.jsx)("div",{className:S.tableContainer,children:(0,e.jsxs)("table",{className:S.table,children:[(0,e.jsx)("thead",{className:S.header,children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:(0,e.jsx)(c.x6,{i18nKey:"plugins.catalog.update-all.update-header",children:"Update"})}),(0,e.jsx)("th",{children:(0,e.jsx)(c.x6,{i18nKey:"plugins.catalog.update-all.name-header",children:"Name"})}),(0,e.jsx)("th",{children:(0,e.jsx)(c.x6,{i18nKey:"plugins.catalog.update-all.installed-header",children:"Installed"})}),(0,e.jsx)("th",{children:(0,e.jsx)(c.x6,{i18nKey:"plugins.catalog.update-all.available-header",children:"Available"})}),(0,e.jsx)("th",{})]})}),(0,e.jsx)("tbody",{children:d.map(({id:N,name:m,installedVersion:$,latestVersion:b})=>(0,e.jsxs)("tr",{className:S.tableRow,children:[(0,e.jsx)("td",{children:(0,e.jsx)(Z.S,{onChange:()=>z(N),value:P?.has(N),disabled:!C.has(N)})}),(0,e.jsx)("td",{children:m}),(0,e.jsx)("td",{children:$}),(0,e.jsx)("td",{children:b}),(0,e.jsx)("td",{className:S.icon,children:(0,e.jsx)(X,{id:N,inProgress:T,isSelected:P?.has(N)??!1,isInstalled:!C.has(N),errorMap:I})})]},N))})]})}),U>0&&R&&(0,e.jsxs)("div",{className:S.pluginsInstalled,children:[(0,e.jsx)(v.I,{className:S.successIcon,size:"lg",name:"check"}),`${U} ${(0,c.t)("plugins.catalog.update-all.update-status-text","plugins updated")}`]}),I.size>0&&R&&(0,e.jsxs)("div",{className:S.pluginsInstalled,children:[(0,e.jsx)(v.I,{className:S.errorIcon,size:"lg",name:"exclamation-triangle"}),`${I.size} ${(0,c.t)("plugins.catalog.update-all.error-status-text","failed - see error messages")}`]}),r.$.pluginAdminExternalManageEnabled&&(0,e.jsx)("footer",{className:S.footer,children:(0,e.jsx)(c.x6,{i18nKey:"plugins.catalog.update-all.cloud-update-message",children:"* It may take a few minutes for the plugins to be available for usage."})})]})})},E="plugins_update_all_clicked",F=({isOpen:d,onDismiss:C,isLoading:T,plugins:P})=>{const z=(0,M.xX)(),{error:I}=(0,M.XN)(),[S,U]=(0,n.useState)(new Map),[R,N]=(0,n.useState)(!1),[m,$]=(0,n.useState)(),b=(0,n.useRef)(P),H=(0,n.useMemo)(()=>new Set(P.map(l=>l.id)),[P]),Y=P.length;(0,n.useEffect)(()=>{b.current.length===0&&(b.current=[...P])},[P]),(0,n.useEffect)(()=>{R&&(m?.forEach(l=>{H.has(l)||$(f=>{const h=new Set(f);return h.delete(l),h})}),m?.size===0&&N(!1))},[R,H,m]),(0,n.useEffect)(()=>{if(m===void 0&&P.length>0&&!T){const l=new Set(P.map(f=>f.id));$(l)}},[T,P,m]),(0,n.useEffect)(()=>{R&&I&&!S.has(I.id)&&m?.has(I.id)&&(U(l=>{const f=new Map(l);return f.set(I.id,I),f}),$(l=>{const f=new Set(l);return f.delete(I.id),f}))},[I,S,R,m]);const _=async()=>{if(!R)if((0,i.rR)(E,{path:location.pathname,count:m?.size,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"}),N(!0),r.$.pluginAdminExternalManageEnabled)for(let l of P)m?.has(l.id)&&await z(l.id,l.latestVersion,j.u8.UPDATE);else P.forEach(l=>{m?.has(l.id)&&z(l.id,l.latestVersion,j.u8.UPDATE)})},s=()=>{b.current=[],U(new Map),N(!1),$(void 0),C()},o=l=>{$(f=>{const h=new Set(f);return h.has(l)?h.delete(l):h.add(l),h}),S.has(l)&&U(f=>{const h=new Map(f);return h.delete(l),h})},p=m?.size||0;return(0,e.jsx)(x.u,{isOpen:d,title:(0,c.t)("plugins.catalog.update-all.modal-title","Update Plugins"),body:(0,e.jsx)(g,{plugins:b.current,pluginsNotInstalled:H,inProgress:R,errorMap:S,onCheckboxChange:o,selectedPlugins:m}),onConfirm:Y>0?_:s,onDismiss:s,disabled:J(R,Y,p),confirmText:k(Y,R,p),confirmButtonVariant:"primary"})};function k(d,C,T){return C?(0,c.t)("plugins.catalog.update-all.modal-in-progress","Updating..."):d>0?(0,c.t)("plugins.catalog.update-all.modal-confirmation","Update")+` (${T})`:(0,c.t)("plugins.catalog.update-all.modal-dismiss","Close")}function J(d,C,T){return!!(d||C>0&&T===0)}const q=F},81687:(G,y,t)=>{t.d(y,{W:()=>n});var e=t(36490);const n=()=>({push:({query:i})=>{e.Ny.partial(i)}})},60514:(G,y,t)=>{t.r(y),t.d(y,{default:()=>se});var e=t(74848),n=t(22803),i=t(96540),r=t(54148),x=t(36490),c=t(63142),M=t(89640),j=t(37386),u=t(18857),A=t(77824),B=t(45967),v=t(13791),L=t(56840),O=t(84057),Z=t(51026),W=t(26437),X=t(96673),g=t(40203),E=t(43173),F=t(50201),k=t(13943),J=t(70255),q=t(27489),d=t(30703),C=t(41654),T=t(99887),P=t(21348),z=t(13660),I=t(63509),S=t(4476),U=t(4825);function R({plugin:a}){const D=(0,S.wD)(a);return a.isEnterprise?(0,e.jsxs)(C.B,{height:"auto",wrap:"wrap",children:[(0,e.jsx)(U.Uj,{plugin:a}),a.isDisabled&&(0,e.jsx)(U.Df,{error:a.error}),D&&(0,e.jsx)(U.z$,{plugin:a})]}):(0,e.jsxs)(C.B,{height:"auto",wrap:"wrap",children:[(0,e.jsx)(I.B,{status:a.signature}),a.isDisabled&&(0,e.jsx)(U.Df,{error:a.error}),a.isDeprecated&&(0,e.jsx)(U.yf,{}),a.isInstalled&&(0,e.jsx)(U.Jn,{}),D&&(0,e.jsx)(U.z$,{plugin:a})]})}function N({alt:a,className:D,src:K,height:V}){return(0,e.jsx)("img",{src:K,className:D,alt:a,loading:"lazy",height:V})}const m="48px";function $({plugin:a,pathName:D}){const K=(0,c.of)(Y),V=()=>{x.Ny.getSearchObject()?.q&&(0,q.rR)("plugins_search_user_click",{plugin_id:a.id,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"})};return(0,e.jsxs)("a",{href:`${D}/${a.id}`,className:(0,n.cx)(K.container),onClick:V,children:[(0,e.jsx)(N,{src:a.info.logos.small,className:K.pluginLogo,height:m,alt:""}),(0,e.jsx)("h2",{className:(0,n.cx)(K.name,"plugin-name"),children:a.name}),(0,e.jsxs)("div",{className:(0,n.cx)(K.content,"plugin-content"),children:[(0,e.jsxs)("p",{children:["By ",a.orgName]}),(0,e.jsx)(R,{plugin:a})]}),(0,e.jsx)("div",{className:K.pluginType,children:a.type&&(0,e.jsx)(d.I,{name:z.Ip[a.type],title:`${a.type} plugin`})})]})}const b=({rootProps:a})=>{const D=(0,c.of)(Y);return(0,e.jsxs)("div",{className:(0,n.cx)(D.container),...a,children:[(0,e.jsx)(J.A,{containerClassName:(0,n.cx)(D.pluginLogo,(0,n.css)({lineHeight:1})),width:m,height:m}),(0,e.jsx)("h2",{className:D.name,children:(0,e.jsx)(J.A,{width:100})}),(0,e.jsxs)("div",{className:D.content,children:[(0,e.jsx)("p",{children:(0,e.jsx)(J.A,{width:120})}),(0,e.jsxs)(C.B,{direction:"row",children:[(0,e.jsx)(T.E.Skeleton,{}),(0,e.jsx)(T.E.Skeleton,{})]})]}),(0,e.jsx)("div",{className:D.pluginType,children:(0,e.jsx)(J.A,{width:16,height:16})})]})},H=(0,P.j)($,b),Y=a=>({container:(0,n.css)({display:"grid",gridTemplateColumns:`${m} 1fr ${a.spacing(3)}`,gridTemplateRows:"auto",gap:a.spacing(2),gridAutoFlow:"row",background:a.colors.background.secondary,borderRadius:a.shape.radius.default,padding:a.spacing(3),[a.transitions.handleMotion("no-preference","reduce")]:{transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short})},"&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03)}}),pluginType:(0,n.css)({gridArea:"1 / 3 / 2 / 4",color:a.colors.text.secondary}),pluginLogo:(0,n.css)({gridArea:"1 / 1 / 3 / 2",maxWidth:"100%",alignSelf:"center",objectFit:"contain"}),content:(0,n.css)({gridArea:"3 / 1 / 4 / 3",color:a.colors.text.secondary}),name:(0,n.css)({gridArea:"1 / 2 / 3 / 3",alignSelf:"center",fontSize:a.typography.h4.fontSize,color:a.colors.text.primary,margin:0,wordBreak:"normal",overflowWrap:"anywhere"})}),_=({plugins:a,isLoading:D})=>{const{pathname:K}=(0,r.zy)(),V=E.$.appSubUrl+(K.endsWith("/")?K.slice(0,-1):K);return!D&&a.length===0?(0,e.jsx)(F.p,{variant:"not-found",message:(0,L.t)("plugins.empty-state.message","No plugins found")}):(0,e.jsx)(k.x,{gap:3,minColumnWidth:34,"data-testid":"plugin-list",children:D?new Array(50).fill(null).map((w,ne)=>(0,e.jsx)(H.Skeleton,{},ne)):a.map(w=>(0,e.jsx)(H,{plugin:w,pathName:V},w.id))})};var s=t(42135),o=t(84969),p=t(6650),l=t(65223),f=t(81687),h=t(23691);function se(){const a=(0,r.zy)(),D=(0,x.SE)(a.search),K=(0,X.useSelector)(Q=>(0,O.tc)(Q.navIndex,"plugins")),V=(0,c.of)(ue),w=(0,f.W)(),ne=(0,h.pw)(),oe=D.q?.toString()||"",ee=D.filterBy?.toString()||"all",te=D.filterByType||"all",ge=D.sortBy||S.by.nameAsc,{isLoading:pe,error:le,plugins:he}=(0,h.PW)({keyword:oe,type:te!=="all"?te:void 0,isInstalled:ee==="installed"?!0:void 0,hasUpdate:ee==="has-update"?!0:void 0},ge),re=[{value:"all",label:"All"},{value:"installed",label:"Installed"},{value:"has-update",label:"New Updates"}],{isLoading:ie,updatablePlugins:ae}=(0,h.sM)(),[fe,ce]=(0,i.useState)(!1),xe=ae.length<=0||ie,de=Q=>{w.push({query:{filterBy:Q}})},ve=Q=>{w.push({query:{filterByType:Q.value}})},me=Q=>{w.push({query:{filterBy:ee,filterByType:te,q:Q}})},ye=()=>{ce(!0)};if(le)return console.error(le.message),null;const je=(0,e.jsx)("div",{children:(0,e.jsxs)(L.x6,{i18nKey:"plugins.browse.subtitle",children:["Extend the Grafana experience with panel plugins and apps. To find more data sources go to"," ",(0,e.jsx)(M.Y,{href:`${W.b.AddNewConnection}?cat=data-source`,children:"Connections"}),"."]})}),Ee=(0,e.jsx)(p.A,{disabled:xe,onUpdateAll:ye,updatablePluginsLength:ae.length});return(0,e.jsx)(v.Y,{navModel:K,actions:Ee,subTitle:je,children:(0,e.jsxs)(v.Y.Contents,{children:[(0,e.jsx)(Z.l,{}),(0,e.jsxs)(g.G,{wrap:!0,children:[(0,e.jsx)(j.D,{label:(0,L.t)("plugins.browse.label-search","Search"),children:(0,e.jsx)(o.L,{value:oe,onSearch:me})}),(0,e.jsxs)(g.G,{wrap:!0,className:V.actionBar,children:[(0,e.jsx)(j.D,{label:(0,L.t)("plugins.browse.label-type","Type"),children:(0,e.jsx)(u.l6,{"aria-label":(0,L.t)("plugins.browse.aria-label-plugin-type-filter","Plugin type filter"),value:te,onChange:ve,width:18,options:[{value:"all",label:"All"},{value:"datasource",label:"Data sources"},{value:"panel",label:"Panels"},{value:"app",label:"Applications"}]})}),ne?(0,e.jsx)(j.D,{label:(0,L.t)("plugins.browse.label-state","State"),children:(0,e.jsx)(A.z,{value:ee,onChange:de,options:re})}):(0,e.jsx)(B.m,{content:"This filter has been disabled because the Grafana server cannot access grafana.com",placement:"top",children:(0,e.jsx)("div",{children:(0,e.jsx)(j.D,{label:(0,L.t)("plugins.browse.label-state","State"),children:(0,e.jsx)(A.z,{disabled:!0,value:ee,onChange:de,options:re})})})})]})]}),(0,e.jsx)("div",{className:V.listWrap,children:(0,e.jsx)(_,{plugins:he,isLoading:pe})}),(0,e.jsx)(s.E,{}),(0,e.jsx)(l.U,{isOpen:fe,isLoading:ie,onDismiss:()=>ce(!1),plugins:ae})]})})}const ue=a=>({actionBar:(0,n.css)({[a.breakpoints.up("xl")]:{marginLeft:"auto"}}),listWrap:(0,n.css)({marginTop:a.spacing(2)}),displayAs:(0,n.css)({svg:{marginRight:0}})})},23691:(G,y,t)=>{t.d(y,{A5:()=>_,wr:()=>N,m5:()=>R,PW:()=>J,F9:()=>T,ob:()=>d,sM:()=>q,xX:()=>P,XN:()=>m,pw:()=>S,Gp:()=>I,qG:()=>$,SQ:()=>z});var e=t(96540),n=t(96673),i=t(4476),r=t(37256),x=t(25508),c=t(2543),M=t(8934),j=t(27489),u=t(13660),A=t(54687);const B=s=>s.plugins,v=(0,x.Mz)(B,({items:s})=>s),{selectAll:L,selectById:O}=A.AI.getSelectors(v),Z=(0,c.debounce)(s=>{(0,j.rR)("plugins_search",{resultsCount:s,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"})},300),W=s=>(0,x.Mz)(L,o=>{const p=s.keyword?(0,M.xb)(s.keyword.toLowerCase()):"",l=p!==""?(0,i.TD)(o,p):null,f=o.filter(h=>!(p&&l==null||p&&!l?.includes(h.id)||s.type&&h.type!==s.type||s.isInstalled!==void 0&&h.isInstalled!==s.isInstalled||s.isEnterprise!==void 0&&h.isEnterprise!==s.isEnterprise||s.hasUpdate!==void 0&&(h.hasUpdate!==s.hasUpdate||!(0,i.wD)(h))));return p&&Z(f.length),f}),X=s=>(0,x.Mz)(L,o=>{const p=[];for(const l of o)l.error&&(!s||l.type===s)&&p.push({pluginId:l.id,errorCode:l.error,pluginType:l.type});return p}),g=s=>(0,x.Mz)(B,({requests:o={}})=>o[s]),E=s=>(0,x.Mz)(g(s),o=>o?.status===u.IZ.Pending),F=s=>(0,x.Mz)(g(s),o=>o?.status===u.IZ.Rejected?o?.error:null),k=s=>(0,x.Mz)(g(s),o=>o===void 0),J=(s,o=i.by.nameAsc)=>{b();const p=(0,e.useMemo)(()=>W(s),[s]),l=(0,n.useSelector)(p),{isLoading:f,error:h}=U(),se=(0,i.Xc)(l,o);return{isLoading:f,error:h,plugins:se}},q=()=>{const{isLoading:s}=R(),{plugins:o}=J({isInstalled:!0}),p=o.filter(i.wD);return{isLoading:s,updatablePlugins:p}},d=s=>(b(),Y(s),(0,n.useSelector)(o=>O(o,s))),C=s=>(H(),useSelector(o=>selectById(o,s))),T=s=>(b(),(0,n.useSelector)(X(s))),P=()=>{const s=(0,n.useDispatch)();return(o,p,l)=>s((0,r.ai)({id:o,version:p,installType:l}))},z=()=>{const s=(0,n.useDispatch)();return()=>s((0,r.nT)())},I=()=>{const s=(0,n.useDispatch)();return o=>s((0,r.JC)(o))},S=()=>(0,n.useSelector)(F(r.JJ.typePrefix))===null,U=()=>{const s=(0,n.useSelector)(E("plugins/fetchLocal")),o=(0,n.useSelector)(F("plugins/fetchLocal"));return{isLoading:s,error:o}},R=()=>{const s=(0,n.useSelector)(E(r.mj.typePrefix)),o=(0,n.useSelector)(E("plugins/fetchLocal")),p=(0,n.useSelector)(E("plugins/fetchRemote")),l=s||o||p,f=(0,n.useSelector)(F(r.mj.typePrefix));return{isLoading:l,error:f}},N=()=>{const s=(0,n.useSelector)(E(r.t5.typePrefix)),o=(0,n.useSelector)(F(r.t5.typePrefix));return{isLoading:s,error:o}},m=()=>{const s=(0,n.useSelector)(E(r.ai.typePrefix)),o=(0,n.useSelector)(F(r.ai.typePrefix));return{isInstalling:s,error:o}},$=()=>{const s=(0,n.useSelector)(E(r.JC.typePrefix)),o=(0,n.useSelector)(F(r.JC.typePrefix));return{isUninstalling:s,error:o}},b=()=>{const s=(0,n.useDispatch)(),o=(0,n.useSelector)(k(r.mj.typePrefix));(0,e.useEffect)(()=>{o&&s((0,r.mj)())},[])},H=()=>{const s=useDispatch(),o=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{o&&s(fetchAllLocal())},[])},Y=s=>{const o=(0,n.useDispatch)(),p=(0,n.useSelector)(h=>O(h,s)),f=!(0,n.useSelector)(E(r.t5.typePrefix))&&p&&!p.details;(0,e.useEffect)(()=>{f&&o((0,r.t5)(s))},[p])},_=()=>{const s=(0,n.useDispatch)();return o=>s((0,r.t5)(o))}}}]);

//# sourceMappingURL=PluginListPage.7fb314c13af2ca17670d.js.map