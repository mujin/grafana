"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7197],{58102:(V,C,t)=>{t.d(C,{GU:()=>m,YO:()=>L,qm:()=>O});var s=t(74848),l=t(22803),a=t(96540),y=t(63142),D=t(56840),h=t(92948),j=t(10388);const O=({children:i,enterAnimation:g=!0})=>{const v=(0,y.of)(L);return(0,s.jsx)("div",{className:(0,l.cx)(v.loginInnerBox,g&&v.enterAnimation),children:i})},m=({children:i,branding:g,isChangingPassword:v})=>{const u=(0,y.of)(L),[R,z]=(0,a.useState)(!1),I=g?.loginSubtitle??h.M.GetLoginSubTitle(),A=g?.loginTitle??h.M.LoginTitle,B=g?.loginBoxBackground||h.M.LoginBoxBackground(),N=g?.loginLogo,H=g?.hideEdition??h.M.HideEdition;return(0,a.useEffect)(()=>z(!0),[]),(0,s.jsxs)(h.M.LoginBackground,{className:(0,l.cx)(u.container,R&&u.loginAnim,g?.loginBackground),children:[(0,s.jsx)("div",{className:u.loginMain,children:(0,s.jsxs)("div",{className:(0,l.cx)(u.loginContent,B,"login-content-box"),children:[(0,s.jsxs)("div",{className:u.loginLogoWrapper,children:[(0,s.jsx)(h.M.LoginLogo,{className:u.loginLogo,logo:N}),(0,s.jsx)("div",{className:u.titleWrapper,children:v?(0,s.jsx)("h1",{className:u.mainTitle,children:(0,s.jsx)(D.x6,{i18nKey:"login.layout.update-password",children:"Update your password"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:u.mainTitle,children:A}),I&&(0,s.jsx)("h3",{className:u.subTitle,children:I})]})})]}),(0,s.jsx)("div",{className:u.loginOuterBox,children:i})]})}),g?.hideFooter?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(j.wi,{hideEdition:H,customLinks:g?.footerLinks})]})},S=(0,l.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,L=i=>({loginMain:(0,l.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,l.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",flex:1,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,l.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,l.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,l.css)({width:"100%",maxWidth:60,marginBottom:i.spacing(2),[i.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,l.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:i.spacing(3)}),titleWrapper:(0,l.css)({textAlign:"center"}),mainTitle:(0,l.css)({fontSize:22,[i.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,l.css)({fontSize:i.typography.size.md,color:i.colors.text.secondary}),loginContent:(0,l.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:i.shape.radius.default,padding:i.spacing(2,0),opacity:0,[i.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.5s ease-in-out"},[i.breakpoints.up("sm")]:{minHeight:i.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,l.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,l.css)({padding:i.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",[i.transitions.handleMotion("no-preference")]:{transition:"0.25s ease"}}),enterAnimation:(0,l.css)({[i.transitions.handleMotion("no-preference")]:{animation:`${S} ease-out 0.2s`}})})},99473:(V,C,t)=>{t.r(C),t.d(C,{default:()=>js});var s=t(74848),l=t(43173),a=t(22803),y=t(96540),D=t(54148),h=t(75683),j=t(85629),O=t(56838),m=t(63142),S=t(41654),L=t(30703),i=t(31286),g=t(34999),v=t(13791),u=t(11098);const R="https://grafana.com/?src=grafananet&cnt=public-dashboards",z="public/img/grafana_text_logo_light.svg",I="public/img/grafana_text_logo_dark.svg",A="grafana-logo",B=o=>{const n=(0,m.$j)(),e=(0,m.of)(J),{footerHide:c,footerText:r,footerLink:f,footerLogo:d,headerLogoHide:p}=o||{footerHide:!1,footerText:"Powered by",footerLogo:A,footerLink:R,headerLogoHide:!1};return{footerHide:c,footerText:(0,s.jsx)("span",{className:e.text,children:r}),footerLogo:d===A?n.isDark?z:I:d,footerLink:f,headerLogoHide:p}};let N=()=>B();function H(o){N=()=>B(o)}const J=o=>({text:(0,a.css)({color:o.colors.text.secondary,fontSize:o.typography.body.fontSize})}),Q=j.Tp.pages.PublicDashboard,K=function(){const o=(0,m.of)(X),n=N();return n.footerHide?null:(0,s.jsx)("div",{className:o.footer,"data-testid":Q.footer,children:(0,s.jsxs)("a",{className:o.link,href:n.footerLink,target:"_blank",rel:"noreferrer noopener",children:[n.footerText," ",(0,s.jsx)("img",{className:o.logoImg,alt:"",src:n.footerLogo})]})})},X=o=>({footer:(0,a.css)({display:"flex",justifyContent:"end",height:"30px",backgroundColor:o.colors.background.canvas,position:"sticky",bottom:0,zIndex:o.zIndex.navbarFixed,padding:o.spacing(.5,0)}),link:(0,a.css)({display:"flex",alignItems:"center"}),logoImg:(0,a.css)({height:"16px",marginLeft:o.spacing(.5)})});var w=t(56840),U=t(92948),q=t(58102);const G=j.Tp.pages.PublicDashboard.NotAvailable,M=({paused:o})=>{const n=(0,m.of)(_),e=(0,m.of)(q.YO),c=U.M.LoginBoxBackground();return(0,s.jsx)(U.M.LoginBackground,{className:n.container,"data-testid":G.container,children:(0,s.jsxs)("div",{className:(0,a.cx)(n.box,c),children:[(0,s.jsx)(U.M.LoginLogo,{className:e.loginLogo}),(0,s.jsx)("p",{className:n.title,"data-testid":G.title,children:o?"This dashboard has been paused by the administrator":"The dashboard you are trying to access does not exist"}),o&&(0,s.jsx)("p",{className:n.description,"data-testid":G.pausedDescription,children:(0,s.jsx)(w.x6,{i18nKey:"dashboard.public-dashboard-not-available.try-again-later",children:"Try again later"})})]})})},_=o=>({container:(0,a.css)({display:"flex",justifyContent:"center",alignItems:"center",height:"100%",":before":{opacity:1}}),box:(0,a.css)({width:"608px",display:"flex",alignItems:"center",flexDirection:"column",gap:o.spacing(4),zIndex:1,borderRadius:o.shape.borderRadius(4),padding:o.spacing(6,8),opacity:1}),title:(0,a.css)({fontSize:o.typography.h3.fontSize,textAlign:"center",margin:0}),description:(0,a.css)({fontSize:o.typography.h5.fontSize,margin:0})});var T=t(96673),ss=t(6262),os=t(41644);const W=j.Tp.pages.PublicDashboardScene;function ts({route:o}){const{accessToken:n=""}=(0,D.g)(),e=(0,os.sP)(),c=(0,m.of)(k),{dashboard:r,isLoading:f,loadError:d}=e.useState();return(0,y.useEffect)(()=>(e.loadDashboard({uid:n,route:ss.Z4.Public}),()=>{e.clearState()}),[e,n,o.routeName]),d?(0,s.jsx)(ns,{error:d}):r?r.state.controls?.state.hideTimeControls?(0,s.jsx)(Y,{model:r}):(0,s.jsx)(O.$L,{scene:r,children:(0,s.jsx)(Y,{model:r})}):(0,s.jsx)(v.Y,{layout:h.k.Custom,className:c.loadingPage,"data-testid":W.loadingPage,children:f&&(0,s.jsx)(u.A,{})})}function Y({model:o}){const[n,e]=(0,y.useState)(!1),{controls:c,title:r}=o.useState(),{timePicker:f,refreshPicker:d,hideTimeControls:p}=c.useState(),x=o.getBodyToRender(),b=(0,m.of)(k);return(0,y.useEffect)(()=>d.activate(),[d]),(0,y.useEffect)(()=>(e(!0),o.activate()),[o]),n?(0,s.jsxs)(v.Y,{layout:h.k.Custom,className:b.page,"data-testid":W.page,children:[(0,s.jsxs)("div",{className:b.controls,children:[(0,s.jsxs)(S.B,{alignItems:"center",children:[(0,s.jsx)("div",{className:b.iconTitle,children:(0,s.jsx)(L.I,{name:"grafana",size:"lg","aria-hidden":!0})}),(0,s.jsx)("span",{className:b.title,children:r})]}),!p&&(0,s.jsxs)(S.B,{children:[(0,s.jsx)(f.Component,{model:f}),(0,s.jsx)(d.Component,{model:d})]})]}),(0,s.jsx)("div",{className:b.body,children:(0,s.jsx)(x.Component,{model:x})}),(0,s.jsx)(K,{})]}):null}function k(o){return{loadingPage:(0,a.css)({justifyContent:"center"}),page:(0,a.css)({padding:o.spacing(0,2)}),controls:(0,a.css)({display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:o.zIndex.navbarFixed,background:o.colors.background.canvas,padding:o.spacing(2,0),[o.breakpoints.down("sm")]:{flexDirection:"column",gap:o.spacing(1),alignItems:"stretch"}}),iconTitle:(0,a.css)({display:"none",[o.breakpoints.up("sm")]:{display:"flex",alignItems:"center"}}),title:(0,a.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",fontSize:o.typography.h4.fontSize,margin:0}),body:(0,a.css)({label:"body",display:"flex",flex:1,flexDirection:"column",overflowY:"auto"})}}function ns({error:o}){const n=(0,m.of)(k),e=o.status,c=o.messageId,r=o.message,f=e===403&&c==="publicdashboards.notEnabled",d=e===404&&c==="publicdashboards.notFound",p=e===404&&c==="publicdashboards.dashboardNotFound",x=d?void 0:!f,b=d||p;return x===!1?(0,s.jsx)(M,{paused:!0}):b?(0,s.jsx)(M,{}):(0,s.jsx)(v.Y,{layout:h.k.Custom,className:n.loadingPage,"data-testid":W.loadingPage,children:(0,s.jsx)(i.a,{paddingY:4,display:"flex",direction:"column",alignItems:"center",children:(0,s.jsx)(g.F,{severity:T.AppNotificationSeverity.Error,title:r,children:r})})})}var es=t(84596),as=t(84600),is=t(27963),rs=t(69289),ls=t(74618),cs=t(47797);const $=({initError:o})=>o?(0,s.jsx)("div",{className:ds.dashboardLoading,children:(0,s.jsx)(g.F,{severity:T.AppNotificationSeverity.Error,title:o.message,children:(0,cs.q6)(o.error)})}):null,ds={dashboardLoading:(0,a.css)({height:"60vh",display:"flex",alignItems:"center",justifyContent:"center"})};var gs=t(46505),us=t(77598),Z=t(75421),fs=t(27081);const xs=j.Tp.pages.PublicDashboard,hs=({dashboard:o})=>{const n=(0,T.useDispatch)(),e=N(),c=r=>{n((0,rs.Cj)(r))};return(0,s.jsx)(as.d,{title:o.title,pageIcon:e.headerLogoHide?void 0:"grafana",buttonOverflowAlignment:"right",children:!o.timepicker.hidden&&(0,s.jsx)(ls.$,{dashboard:o,onChangeTimeZone:c})})},ms=o=>{const{route:n}=o,e=(0,D.zy)(),{accessToken:c}=(0,D.g)(),r=(0,T.useDispatch)(),f=(0,is.Il)(),d=(0,es.A)({...o,location:e}),p=(0,m.of)(ps),x=(0,T.useSelector)(E=>E.dashboard),b=x.initError,P=x.getModel();return(0,y.useEffect)(()=>{r((0,fs.v)({routeName:n.routeName,fixUrl:!1,accessToken:c,keybindingSrv:f.keybindings}))},[n.routeName,c,f.keybindings,r]),(0,y.useEffect)(()=>{if(d?.location.search!==e.search){const E=d?.queryParams,F=o.queryParams;(F?.from!==E?.from||F?.to!==E?.to)&&!P?.timepicker.hidden&&(0,Z.jG)().updateTimeRangeFromUrl(),!E?.refresh&&F?.refresh&&(0,Z.jG)().setAutoRefresh(F.refresh)}},[d,e.search,o.queryParams,P?.timepicker.hidden,c]),b?(0,s.jsx)(ys,{error:b}):P?(0,s.jsxs)(v.Y,{pageNav:{text:P.title},layout:h.k.Custom,"data-testid":xs.page,children:[(0,s.jsx)(hs,{dashboard:P}),x.initError&&(0,s.jsx)($,{initError:x.initError}),(0,s.jsx)("div",{className:p.gridContainer,children:(0,s.jsx)(us.N,{dashboard:P,isEditable:!1,viewPanel:null,editPanel:null,hidePanelMenus:!0})}),(0,s.jsx)("div",{className:p.footer,children:(0,s.jsx)(K,{})})]}):(0,s.jsx)(gs.P,{initPhase:x.initPhase})},ps=o=>({gridContainer:(0,a.css)({flex:1,padding:o.spacing(2,2,2,2),overflow:"auto"}),footer:(0,a.css)({padding:o.spacing(0,2)})}),bs=ms;function ys({error:o}){let n,e;if(typeof o.error=="object"&&o.error!==null&&"data"in o.error){const x=o.error;n=x.data.statusCode,e=x.data.messageId}const c=n===403&&e==="publicdashboards.notEnabled",r=n===404&&e==="publicdashboards.notFound",f=n===404&&e==="publicdashboards.dashboardNotFound",d=r?void 0:!c,p=r||f;return d===!1?(0,s.jsx)(M,{paused:!0}):p?(0,s.jsx)(M,{}):(0,s.jsx)($,{initError:o})}function vs(o){return l.$.featureToggles.publicDashboardsScene?(0,s.jsx)(ts,{...o}):(0,s.jsx)(bs,{...o})}const js=vs}}]);

//# sourceMappingURL=PublicDashboardPage.5c1bf4eeb8800766b56a.js.map