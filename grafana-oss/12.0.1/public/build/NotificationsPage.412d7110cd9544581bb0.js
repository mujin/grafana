"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4140],{30946:(w,I,s)=>{s.r(I),s.d(I,{NotificationsPage:()=>R,default:()=>Q});var a=s(74848),T=s(13791),f=s(22803),M=s(96540),A=s(94701),X=s(63142),Y=s(50201),z=s(34999),C=s(32635),F=s(45861),Z=s(52365),E=s(75156),P=s(92516),O=s(1108),$=s(5305),H=s(96054),g=s(61501),K=s(71696),G=s(91349);function W(e,c,r){const d=(0,P.q)(),i=r?.locale??d.locale??E.c,y=2520,l=(0,H.z)(e,c);if(isNaN(l))throw new RangeError("Invalid time value");const n=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:l}),[m,h]=(0,$.x)(r?.in,...l>0?[c,e]:[e,c]),t=(0,G.O)(h,m),x=((0,O.G)(h)-(0,O.G)(m))/1e3,o=Math.round((t-x)/60);let p;if(o<2)return r?.includeSeconds?t<5?i.formatDistance("lessThanXSeconds",5,n):t<10?i.formatDistance("lessThanXSeconds",10,n):t<20?i.formatDistance("lessThanXSeconds",20,n):t<40?i.formatDistance("halfAMinute",0,n):t<60?i.formatDistance("lessThanXMinutes",1,n):i.formatDistance("xMinutes",1,n):o===0?i.formatDistance("lessThanXMinutes",1,n):i.formatDistance("xMinutes",o,n);if(o<45)return i.formatDistance("xMinutes",o,n);if(o<90)return i.formatDistance("aboutXHours",1,n);if(o<g.F6){const u=Math.round(o/60);return i.formatDistance("aboutXHours",u,n)}else{if(o<y)return i.formatDistance("xDays",1,n);if(o<g.Nw){const u=Math.round(o/g.F6);return i.formatDistance("xDays",u,n)}else if(o<g.Nw*2)return p=Math.round(o/g.Nw),i.formatDistance("aboutXMonths",p,n)}if(p=(0,K.W)(h,m),p<12){const u=Math.round(o/g.Nw);return i.formatDistance("xMonths",u,n)}else{const u=p%12,j=Math.trunc(p/12);return u<3?i.formatDistance("aboutXYears",j,n):u<9?i.formatDistance("overXYears",j,n):i.formatDistance("almostXYears",j+1,n)}}const b=null;function B(e,c){return W(e,(0,Z.A)(e),c)}const k=null;var v=s(8073);const U=({children:e,className:c,isSelected:r,onClick:d,severity:i="error",title:y,traceId:l,timestamp:n})=>{const m=(0,X.$j)(),h=V(m);return(0,a.jsxs)(v.Z,{className:c,onClick:d,children:[(0,a.jsx)(v.Z.Heading,{children:y}),(0,a.jsx)(v.Z.Description,{children:e}),(0,a.jsx)(v.Z.Figure,{children:(0,a.jsx)(C.S,{onChange:d,tabIndex:-1,value:r})}),(0,a.jsxs)(v.Z.Tags,{className:h.trace,children:[l&&(0,a.jsx)("span",{children:`Trace ID: ${l}`}),n&&B(n,{addSuffix:!0})]})]})},V=e=>({trace:(0,f.css)({alignItems:"flex-end",alignSelf:"flex-end",color:e.colors.text.secondary,display:"flex",flexDirection:"column",fontSize:e.typography.pxToRem(10),justifySelf:"flex-end"})});var N=s(56840),D=s(12066),S=s(96673);function J(){const e=(0,S.useDispatch)(),c=(0,S.useSelector)(t=>(0,D.qN)(t.appNotifications)),[r,d]=(0,M.useState)([]),i=c.every(t=>r.includes(t.id)),y=(0,M.useRef)((0,S.useSelector)(t=>(0,D.$K)(t.appNotifications))),l=(0,X.of)(L);(0,A.A)(()=>{e((0,D.oF)(Date.now()))});const n=()=>{i?e((0,D.XC)()):r.forEach(t=>{e((0,D.XR)(t))}),d([])},m=t=>{d(t?c.map(x=>x.id):[])},h=t=>{d(x=>x.includes(t)?x.filter(o=>o!==t):[...x,t])};return c.length===0?(0,a.jsx)(Y.p,{variant:"completed",message:(0,N.t)("notifications.empty-state.title","You're all caught up!"),children:(0,a.jsx)(N.x6,{i18nKey:"notifications.empty-state.description",children:"Notifications you have received will appear here"})}):(0,a.jsxs)("div",{className:l.wrapper,children:[(0,a.jsx)(z.F,{severity:"info",title:"This page displays past errors and warnings. Once dismissed, they cannot be retrieved."}),(0,a.jsxs)("div",{className:l.topRow,children:[(0,a.jsx)(C.S,{value:i,onChange:t=>m(t.target.checked)}),(0,a.jsx)(F.$n,{disabled:r.length===0,onClick:n,children:(0,a.jsx)(N.x6,{i18nKey:"notifications.stored-notifications.dismiss-notifications",children:"Dismiss notifications"})})]}),(0,a.jsx)("ul",{className:l.list,children:c.map(t=>(0,a.jsx)("li",{className:l.listItem,children:(0,a.jsx)(U,{className:(0,f.cx)({[l.newItem]:t.timestamp>y.current}),isSelected:r.includes(t.id),onClick:()=>h(t.id),severity:t.severity,title:t.title,timestamp:t.timestamp,traceId:t.traceId,children:(0,a.jsx)("span",{children:t.text})})},t.id))})]})}function L(e){return{topRow:(0,f.css)({alignItems:"center",display:"flex",gap:e.spacing(2)}),list:(0,f.css)({display:"flex",flexDirection:"column"}),listItem:(0,f.css)({alignItems:"center",display:"flex",gap:e.spacing(2),listStyle:"none",position:"relative"}),newItem:(0,f.css)({"&::before":{content:'""',height:"100%",position:"absolute",left:"-7px",top:0,background:e.colors.gradients.brandVertical,width:e.spacing(.5),borderRadius:e.shape.radius.default}}),noNotifsWrapper:(0,f.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)}),wrapper:(0,f.css)({display:"flex",flexDirection:"column",gap:e.spacing(2)})}}const R=()=>(0,a.jsx)(T.Y,{navId:"profile/notifications",children:(0,a.jsx)(T.Y.Contents,{children:(0,a.jsx)(J,{})})}),Q=R}}]);

//# sourceMappingURL=NotificationsPage.412d7110cd9544581bb0.js.map