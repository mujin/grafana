"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1515],{74410:(A,_,t)=>{t.d(_,{l:()=>a});var e=t(74848),M=t(22803),o=t(96540),c=t(49785);function a({defaultValues:E,onSubmit:D,validateOnMount:u=!1,validateFieldsOnMount:p,children:i,validateOn:d="onSubmit",maxWidth:n=600,...r}){const{handleSubmit:P,trigger:B,formState:f,...C}=(0,c.mN)({mode:d,defaultValues:E});return(0,o.useEffect)(()=>{u&&B(p)},[B,p,u]),(0,e.jsx)("form",{className:(0,M.css)({maxWidth:n!=="none"?n+"px":n,width:"100%"}),onSubmit:P(D),...r,children:i({errors:f.errors,formState:f,trigger:B,...C})})}},26484:(A,_,t)=>{t.r(_),t.d(_,{SupportBundlesCreateUnconnected:()=>f,default:()=>C});var e=t(74848),M=t(96540),o=t(71468),c=t(34999),a=t(37386),E=t(32635),D=t(41654),u=t(45861),p=t(74410),i=t(13791),d=t(56840),n=t(65075);const r=l=>({collectors:l.supportBundles.supportBundleCollectors,isLoading:l.supportBundles.createBundlePageLoading,loadCollectorsError:l.supportBundles.loadBundlesError,createBundleError:l.supportBundles.createBundleError}),P={loadSupportBundleCollectors:n.OS,createSupportBundle:n.iO},B=(0,o.connect)(r,P),f=({collectors:l,isLoading:I,loadCollectorsError:m,createBundleError:v,loadSupportBundleCollectors:T,createSupportBundle:y})=>{const K=O=>{const s=Object.keys(O).filter(h=>O[h]);y({collectors:s})};(0,M.useEffect)(()=>{T()},[T]);const L=l.reduce((O,s)=>({...O,[s.uid]:s.default}),{}),g=(0,e.jsx)("span",{children:(0,e.jsx)(d.x6,{i18nKey:"support-bundles.support-bundles-create-unconnected.sub-title",children:"Choose the components for the support bundle. The support bundle will be available for 3 days after creation."})});return(0,e.jsx)(i.Y,{navId:"support-bundles",pageNav:{text:"Create support bundle"},subTitle:g,children:(0,e.jsxs)(i.Y.Contents,{isLoading:I,children:[m&&(0,e.jsx)(c.F,{title:m,severity:"error"}),v&&(0,e.jsx)(c.F,{title:v,severity:"error"}),!!l.length&&(0,e.jsx)(p.l,{defaultValues:L,onSubmit:K,validateOn:"onSubmit",children:({register:O})=>(0,e.jsxs)(e.Fragment,{children:[[...l].sort((s,h)=>s.displayName.localeCompare(h.displayName)).map(s=>(0,e.jsx)(a.D,{children:(0,e.jsx)(E.S,{...O(s.uid),label:s.displayName,id:s.uid,description:s.description,defaultChecked:s.default,disabled:s.includedByDefault})},s.uid)),(0,e.jsxs)(D.B,{children:[(0,e.jsx)(u.$n,{type:"submit",children:(0,e.jsx)(d.x6,{i18nKey:"support-bundles.support-bundles-create-unconnected.create",children:"Create"})}),(0,e.jsx)(u.z9,{href:"/support-bundles",variant:"secondary",children:(0,e.jsx)(d.x6,{i18nKey:"support-bundles.support-bundles-create-unconnected.cancel",children:"Cancel"})})]})]})})]})})},C=B(f)},65075:(A,_,t)=>{t.d(_,{Hb:()=>p,OS:()=>i,WJ:()=>E,ac:()=>u,iO:()=>d});var e=t(2543),M=t.n(e),o=t(68143),c=t(36490),a=t(69807);function E(n=!1){return async r=>{try{n||r((0,a.sF)());const P=await(0,o.AI)().get("/api/support-bundles");r((0,a.sJ)(P))}finally{r((0,a.kH)())}}}const D=(0,e.throttle)(async n=>{const r=await(0,o.AI)().get("/api/support-bundles");n((0,a.sJ)(r))},1e3);function u(){return async n=>{n(D)}}function p(n){return async r=>{await(0,o.AI)().delete(`/api/support-bundles/${n}`),r(E(!0))}}function i(){return async n=>{try{n((0,a.Y1)());const r=await(0,o.AI)().get("/api/support-bundles/collectors");n((0,a.j7)(r))}catch{n((0,a.pB)("Error loading support bundles data collectors"))}finally{n((0,a.s7)())}}}function d(n){return async r=>{try{await(0,o.AI)().post("/api/support-bundles",n),c.Ny.push("/support-bundles")}catch{r((0,a.NV)("Error creating support bundle"))}}}}}]);

//# sourceMappingURL=SupportBundlesCreate.3ebf4331b1bf14698707.js.map