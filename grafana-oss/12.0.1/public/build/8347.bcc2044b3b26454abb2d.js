"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8347],{58102:(O,m,s)=>{s.d(m,{GU:()=>_,YO:()=>P,qm:()=>g});var n=s(74848),i=s(22803),u=s(96540),a=s(63142),l=s(56840),d=s(92948),x=s(10388);const g=({children:e,enterAnimation:t=!0})=>{const f=(0,a.of)(P);return(0,n.jsx)("div",{className:(0,i.cx)(f.loginInnerBox,t&&f.enterAnimation),children:e})},_=({children:e,branding:t,isChangingPassword:f})=>{const r=(0,a.of)(P),[M,D]=(0,u.useState)(!1),h=t?.loginSubtitle??d.M.GetLoginSubTitle(),p=t?.loginTitle??d.M.LoginTitle,E=t?.loginBoxBackground||d.M.LoginBoxBackground(),j=t?.loginLogo,L=t?.hideEdition??d.M.HideEdition;return(0,u.useEffect)(()=>D(!0),[]),(0,n.jsxs)(d.M.LoginBackground,{className:(0,i.cx)(r.container,M&&r.loginAnim,t?.loginBackground),children:[(0,n.jsx)("div",{className:r.loginMain,children:(0,n.jsxs)("div",{className:(0,i.cx)(r.loginContent,E,"login-content-box"),children:[(0,n.jsxs)("div",{className:r.loginLogoWrapper,children:[(0,n.jsx)(d.M.LoginLogo,{className:r.loginLogo,logo:j}),(0,n.jsx)("div",{className:r.titleWrapper,children:f?(0,n.jsx)("h1",{className:r.mainTitle,children:(0,n.jsx)(l.x6,{i18nKey:"login.layout.update-password",children:"Update your password"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:r.mainTitle,children:p}),h&&(0,n.jsx)("h3",{className:r.subTitle,children:h})]})})]}),(0,n.jsx)("div",{className:r.loginOuterBox,children:e})]})}),t?.hideFooter?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(x.wi,{hideEdition:L,customLinks:t?.footerLinks})]})},o=(0,i.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,P=e=>({loginMain:(0,i.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,i.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",flex:1,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,i.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,i.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,i.css)({width:"100%",maxWidth:60,marginBottom:e.spacing(2),[e.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,i.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:e.spacing(3)}),titleWrapper:(0,i.css)({textAlign:"center"}),mainTitle:(0,i.css)({fontSize:22,[e.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,i.css)({fontSize:e.typography.size.md,color:e.colors.text.secondary}),loginContent:(0,i.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:e.shape.radius.default,padding:e.spacing(2,0),opacity:0,[e.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.5s ease-in-out"},[e.breakpoints.up("sm")]:{minHeight:e.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,i.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,i.css)({padding:e.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",[e.transitions.handleMotion("no-preference")]:{transition:"0.25s ease"}}),enterAnimation:(0,i.css)({[e.transitions.handleMotion("no-preference")]:{animation:`${o} ease-out 0.2s`}})})},10180:(O,m,s)=>{s.d(m,{s:()=>d});var n=s(74848),i=s(96540),u=s(85629),a=s(63527),l=s(76319);const d=(0,i.forwardRef)((x,g)=>{const[_,o]=(0,i.useState)(!1);return(0,n.jsx)(a.p,{...x,type:_?"text":"password","data-testid":u.Tp.pages.Login.password,ref:g,suffix:(0,n.jsx)(l.K,{name:_?"eye-slash":"eye","aria-controls":x.id,role:"switch","aria-checked":_,onClick:()=>{o(!_)},tooltip:_?"Hide password":"Show password"})})});d.displayName="PasswordField"},98347:(O,m,s)=>{s.r(m),s.d(m,{SignupPage:()=>f,default:()=>r});var n=s(74848),i=s(49785),u=s(68143),a=s(37386),l=s(63527),d=s(41654),x=s(45861),g=s(65642),_=s(64762),o=s(56840),P=s(42939),e=s(58102),t=s(10180);const f=({queryParams:M})=>{const D=(0,_._2)(),{handleSubmit:h,formState:{errors:p},register:E,getValues:j}=(0,i.mN)({defaultValues:{email:M.email,code:M.code}}),L=async c=>{c.name===""&&delete c.name,delete c.confirm,(await(0,u.AI)().post("/api/user/signup/step2",{email:c.email,code:c.code,username:c.email,orgName:c.orgName,password:c.password,name:c.name}).catch(y=>{const A=y.data?.message||y;D.warning(A)})).code==="redirect-to-select-org"&&window.location.assign((0,g.zj)().appSubUrl+"/profile/select-org?signup=1"),window.location.assign((0,g.zj)().appSubUrl+"/")};return(0,n.jsx)(e.GU,{children:(0,n.jsx)(e.qm,{children:(0,n.jsxs)("form",{onSubmit:h(L),style:{width:"100%"},children:[(0,n.jsx)(a.D,{label:(0,o.t)("sign-up.user-name-label","Your name"),children:(0,n.jsx)(l.p,{id:"user-name",...E("name"),placeholder:(0,o.t)("sign-up.user-name-placeholder","(optional)")})}),(0,n.jsx)(a.D,{label:(0,o.t)("sign-up.email-label","Email"),invalid:!!p.email,error:p.email?.message,children:(0,n.jsx)(l.p,{id:"email",...E("email",{required:"Email is required",pattern:{value:P.pL,message:"Email is invalid"}}),type:"email"})}),!(0,g.zj)().autoAssignOrg&&(0,n.jsx)(a.D,{label:(0,o.t)("sign-up.org-name-label","Org. name"),children:(0,n.jsx)(l.p,{id:"org-name",...E("orgName")})}),(0,g.zj)().verifyEmailEnabled&&(0,n.jsx)(a.D,{label:(0,o.t)("sign-up.verification-code-label","Email verification code (sent to your email)"),children:(0,n.jsx)(l.p,{id:"verification-code",...E("code")})}),(0,n.jsx)(a.D,{label:(0,o.t)("sign-up.password-label","Password"),invalid:!!p.password,error:p?.password?.message,children:(0,n.jsx)(t.s,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...E("password",{required:"Password is required"})})}),(0,n.jsx)(a.D,{label:(0,o.t)("sign-up.confirm-password-label","Confirm password"),invalid:!!p.confirm,error:p?.confirm?.message,children:(0,n.jsx)(t.s,{id:"confirm-new-password",autoComplete:"new-password",...E("confirm",{required:"Confirmed password is required",validate:c=>c===j().password||"Passwords must match!"})})}),(0,n.jsxs)(d.B,{children:[(0,n.jsx)(x.$n,{type:"submit",children:(0,n.jsx)(o.x6,{i18nKey:"sign-up.submit-button",children:"Submit"})}),(0,n.jsx)(x.z9,{fill:"text",href:(0,g.zj)().appSubUrl+"/login",children:(0,n.jsx)(o.x6,{i18nKey:"sign-up.back-button",children:"Back to login"})})]})]})})})},r=f},42939:(O,m,s)=>{s.d(m,{pL:()=>i,z5:()=>a});var n=s(43173);const i=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function u(){const l=n.$.licenseInfo?.trialExpiry;return!!(l&&l>0)}const a=()=>u()&&n.$.featureToggles.featureHighlights}}]);

//# sourceMappingURL=8347.bcc2044b3b26454abb2d.js.map