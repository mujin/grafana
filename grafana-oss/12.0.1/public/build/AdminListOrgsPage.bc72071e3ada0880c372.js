"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9736],{55026:(B,h,t)=>{t.r(h),t.d(h,{default:()=>z});var e=t(74848),m=t(96540),u=t(5805),d=t(68143),x=t(45861),g=t(13791),i=t(56840),y=t(15130),j=t(96673),A=t(22803),o=t(70255),O=t(71599),C=t(63142),b=t(21348),N=t(73427);const v=()=>(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:(0,e.jsx)(i.x6,{i18nKey:"admin.orgs.id-header",children:"ID"})}),(0,e.jsx)("th",{children:(0,e.jsx)(i.x6,{i18nKey:"admin.orgs.name-header",children:"Name"})}),(0,e.jsx)("th",{style:{width:"1%"}})]})});function D({orgs:s,onDelete:n}){const r=N.TP.hasPermission(j.AccessControlAction.OrgsDelete),[a,c]=(0,m.useState)(),K=a?.name;return(0,e.jsxs)("table",{className:"filter-table form-inline filter-table--hover",children:[v(),(0,e.jsx)("tbody",{children:s.map(l=>(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{className:"link-td",children:(0,e.jsx)("a",{href:`admin/orgs/edit/${l.id}`,children:l.id})}),(0,e.jsx)("td",{className:"link-td",children:(0,e.jsx)("a",{href:`admin/orgs/edit/${l.id}`,children:l.name})}),(0,e.jsx)("td",{className:"text-right",children:(0,e.jsx)(x.$n,{variant:"destructive",size:"sm",icon:"times",onClick:()=>c(l),"aria-label":(0,i.t)("admin.admin-orgs-table.aria-label-delete-org","Delete org"),disabled:!r})})]},`${l.id}-${l.name}`))}),a&&(0,e.jsx)(O.u,{isOpen:!0,icon:"trash-alt",title:(0,i.t)("admin.admin-orgs-table.title-delete","Delete"),body:(0,e.jsx)("div",{children:(0,e.jsxs)(i.x6,{i18nKey:"admin.orgs.delete-body",children:["Are you sure you want to delete '",{deleteOrgName:K},"'?",(0,e.jsx)("br",{})," ",(0,e.jsx)("small",{children:"All dashboards for this organization will be removed!"})]})}),confirmText:"Delete",onDismiss:()=>c(void 0),onConfirm:()=>{n(a.id),c(void 0)}})]})}const T=({rootProps:s})=>{const n=(0,C.of)(P);return(0,e.jsxs)("table",{className:"filter-table",...s,children:[v(),(0,e.jsx)("tbody",{children:new Array(3).fill(null).map((r,a)=>(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)(o.A,{width:16})}),(0,e.jsx)("td",{children:(0,e.jsx)(o.A,{width:240})}),(0,e.jsx)("td",{children:(0,e.jsx)(o.A,{containerClassName:n.deleteButton,width:22,height:24})})]},a))})]})},f=(0,b.j)(D,T),P=s=>({deleteButton:(0,A.css)({alignItems:"center",display:"flex",height:30,lineHeight:1})}),S=async s=>await(0,d.AI)().delete("/api/orgs/"+s),I=async()=>await(0,d.AI)().get("/api/orgs"),$=s=>(0,d.NF)(s)?s?.data?.message:"An unexpected error happened.";function z(){const[s,n]=(0,u.default)(async()=>await I(),[]),r=y.TP.hasPermission(j.AccessControlAction.OrgsCreate);return(0,m.useEffect)(()=>{n()},[n]),(0,e.jsx)(g.Y,{navId:"global-orgs",actions:(0,e.jsx)(x.z9,{icon:"plus",href:"org/new",disabled:!r,children:(0,e.jsx)(i.x6,{i18nKey:"admin.orgs.new-org-button",children:"New org"})}),children:(0,e.jsxs)(g.Y.Contents,{children:[s.error&&$(s.error),s.loading&&(0,e.jsx)(f.Skeleton,{}),s.value&&(0,e.jsx)(f,{orgs:s.value,onDelete:a=>{S(a).then(()=>n())}})]})})}}}]);

//# sourceMappingURL=AdminListOrgsPage.bc72071e3ada0880c372.js.map