{"version":3,"file":"7112.cac05a202f8d15a81604.js","mappings":"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","sources":["webpack://grafana/./public/app/features/explore/Logs/utils/logs.ts","webpack://grafana/./public/app/features/logs/components/InfiniteScroll.tsx","webpack://grafana/./public/app/features/logs/components/LoadingIndicator.tsx","webpack://grafana/./public/app/features/logs/components/LogDetailsBody.tsx","webpack://grafana/./public/app/features/logs/components/LogLabels.tsx","webpack://grafana/./public/app/features/logs/components/LogMessageAnsi.tsx","webpack://grafana/./public/app/features/explore/Logs/PopoverMenu.tsx","webpack://grafana/./public/app/features/logs/UniqueKeyMaker.ts","webpack://grafana/./public/app/features/logs/components/LogLabelStatsRow.tsx","webpack://grafana/./public/app/features/logs/components/LogLabelStats.tsx","webpack://grafana/./public/app/features/logs/components/LogDetailsRow.tsx","webpack://grafana/./public/app/features/logs/components/LogDetails.tsx","webpack://grafana/./public/app/features/logs/components/LogRowMenuCell.tsx","webpack://grafana/./public/app/features/logs/components/LogRowMessage.tsx","webpack://grafana/./public/app/features/logs/components/LogRowMessageDisplayedFields.tsx","webpack://grafana/./public/app/features/logs/components/LogRow.tsx","webpack://grafana/./public/app/features/logs/components/PreviewLogRow.tsx","webpack://grafana/./public/app/features/logs/components/LogRows.tsx","webpack://grafana/./public/app/features/logs/components/getLogRowStyles.ts","webpack://grafana/./public/app/features/logs/components/log-context/LogContextButtons.tsx","webpack://grafana/./public/app/features/logs/components/log-context/LogRowContextModal.tsx"],"sourcesContent":["export const SETTINGS_KEYS = {\n  showLabels: 'grafana.explore.logs.showLabels',\n  showTime: 'grafana.explore.logs.showTime',\n  wrapLogMessage: 'grafana.explore.logs.wrapLogMessage',\n  prettifyLogMessage: 'grafana.explore.logs.prettifyLogMessage',\n  logsSortOrder: 'grafana.explore.logs.sortOrder',\n  logContextWrapLogMessage: 'grafana.explore.logs.logContext.wrapLogMessage',\n  commonLabels: 'grafana.explore.logs.commonLabels',\n};\n\nexport const SETTING_KEY_ROOT = 'grafana.explore.logs';\n\nexport const visualisationTypeKey = 'grafana.explore.logs.visualisationType';\n","import { css } from '@emotion/css';\nimport { ReactNode, MutableRefObject, useCallback, useEffect, useRef, useState } from 'react';\n\nimport { AbsoluteTimeRange, CoreApp, LogRowModel, TimeRange, rangeUtil } from '@grafana/data';\n// import { convertRawToRange, isRelativeTime, isRelativeTimeRange } from '@grafana/data/internal';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { LogsSortOrder, TimeZone } from '@grafana/schema';\nimport { Button, Icon } from '@grafana/ui';\nimport { Trans } from 'app/core/internationalization';\n\nimport { LoadingIndicator } from './LoadingIndicator';\n\nexport type Props = {\n  app?: CoreApp;\n  children: ReactNode;\n  loading: boolean;\n  loadMoreLogs?: (range: AbsoluteTimeRange) => void;\n  range: TimeRange;\n  rows: LogRowModel[];\n  scrollElement: HTMLDivElement | null;\n  sortOrder: LogsSortOrder;\n  timeZone: TimeZone;\n  topScrollEnabled?: boolean;\n};\n\nexport const InfiniteScroll = ({\n  app,\n  children,\n  loading,\n  loadMoreLogs,\n  range,\n  rows,\n  scrollElement,\n  sortOrder,\n  timeZone,\n  topScrollEnabled = false,\n}: Props) => {\n  const [upperOutOfRange, setUpperOutOfRange] = useState(false);\n  const [lowerOutOfRange, setLowerOutOfRange] = useState(false);\n  const [upperLoading, setUpperLoading] = useState(false);\n  const [lowerLoading, setLowerLoading] = useState(false);\n  const rowsRef = useRef<LogRowModel[]>(rows);\n  const lastScroll = useRef<number>(scrollElement?.scrollTop || 0);\n  const lastEvent = useRef<Event | WheelEvent | null>(null);\n  const countRef = useRef(0);\n\n  // Reset messages when range/order/rows change\n  useEffect(() => {\n    setUpperOutOfRange(false);\n    setLowerOutOfRange(false);\n  }, [range, rows, sortOrder]);\n\n  // Reset loading messages when loading stops\n  useEffect(() => {\n    if (!loading) {\n      setUpperLoading(false);\n      setLowerLoading(false);\n    }\n  }, [loading]);\n\n  // Ensure bottom loader visibility\n  useEffect(() => {\n    if (lowerLoading && scrollElement) {\n      scrollElement.scrollTo(0, scrollElement.scrollHeight - scrollElement.clientHeight);\n    }\n  }, [lowerLoading, scrollElement]);\n\n  // Request came back with no new past rows\n  useEffect(() => {\n    if (rows !== rowsRef.current && rows.length === rowsRef.current.length && (upperLoading || lowerLoading)) {\n      if (sortOrder === LogsSortOrder.Descending && lowerLoading) {\n        setLowerOutOfRange(true);\n      } else if (sortOrder === LogsSortOrder.Ascending && upperLoading) {\n        setUpperOutOfRange(true);\n      }\n    }\n    rowsRef.current = rows;\n  }, [lowerLoading, rows, sortOrder, upperLoading]);\n\n  useEffect(() => {\n    if (!scrollElement || !loadMoreLogs) {\n      return;\n    }\n\n    function handleScroll(event: Event | WheelEvent) {\n      if (!scrollElement || !loadMoreLogs || !rows.length || loading || !config.featureToggles.logsInfiniteScrolling) {\n        return;\n      }\n      const scrollDirection = shouldLoadMore(event, lastEvent.current, countRef, scrollElement, lastScroll.current);\n      lastEvent.current = event;\n      lastScroll.current = scrollElement.scrollTop;\n      if (scrollDirection === ScrollDirection.NoScroll) {\n        return;\n      }\n      event.stopImmediatePropagation();\n      if (scrollDirection === ScrollDirection.Top && topScrollEnabled) {\n        scrollTop();\n      } else if (scrollDirection === ScrollDirection.Bottom) {\n        scrollBottom();\n      }\n      lastEvent.current = null;\n    }\n\n    function scrollTop() {\n      const newRange = canScrollTop(getVisibleRange(rows), range, timeZone, sortOrder);\n      if (!newRange) {\n        setUpperOutOfRange(true);\n        return;\n      }\n      setUpperOutOfRange(false);\n      loadMoreLogs?.(newRange);\n      setUpperLoading(true);\n      reportInteraction('grafana_logs_infinite_scrolling', {\n        direction: 'top',\n        sort_order: sortOrder,\n      });\n    }\n\n    function scrollBottom() {\n      const newRange = canScrollBottom(getVisibleRange(rows), range, timeZone, sortOrder);\n      if (!newRange) {\n        setLowerOutOfRange(true);\n        return;\n      }\n      setLowerOutOfRange(false);\n      loadMoreLogs?.(newRange);\n      setLowerLoading(true);\n      reportInteraction('grafana_logs_infinite_scrolling', {\n        direction: 'bottom',\n        sort_order: sortOrder,\n      });\n    }\n\n    scrollElement.addEventListener('scroll', handleScroll);\n    scrollElement.addEventListener('wheel', handleScroll);\n\n    return () => {\n      scrollElement.removeEventListener('scroll', handleScroll);\n      scrollElement.removeEventListener('wheel', handleScroll);\n    };\n  }, [loadMoreLogs, loading, range, rows, scrollElement, sortOrder, timeZone, topScrollEnabled]);\n\n  // We allow \"now\" to move when using relative time, so we hide the message so it doesn't flash.\n  const hideTopMessage = sortOrder === LogsSortOrder.Descending && rangeUtil.isRelativeTime(range.raw.to);\n  const hideBottomMessage = sortOrder === LogsSortOrder.Ascending && rangeUtil.isRelativeTime(range.raw.to);\n\n  const loadOlderLogs = useCallback(() => {\n    //If we are not on the last page, use next page's range\n    reportInteraction('grafana_explore_logs_infinite_pagination_clicked', {\n      pageType: 'olderLogsButton',\n    });\n    const newRange = canScrollTop(getVisibleRange(rows), range, timeZone, sortOrder);\n    if (!newRange) {\n      setUpperOutOfRange(true);\n      return;\n    }\n    setUpperOutOfRange(false);\n    loadMoreLogs?.(newRange);\n    setUpperLoading(true);\n    scrollElement?.scroll({\n      behavior: 'auto',\n      top: 0,\n    });\n  }, [loadMoreLogs, range, rows, scrollElement, sortOrder, timeZone]);\n\n  return (\n    <>\n      {upperLoading && <LoadingIndicator adjective={sortOrder === LogsSortOrder.Descending ? 'newer' : 'older'} />}\n      {!hideTopMessage && upperOutOfRange && outOfRangeMessage}\n      {sortOrder === LogsSortOrder.Ascending && app === CoreApp.Explore && loadMoreLogs && (\n        <Button className={styles.navButton} variant=\"secondary\" onClick={loadOlderLogs} disabled={loading}>\n          <div className={styles.navButtonContent}>\n            <Icon name=\"angle-up\" size=\"lg\" />\n            <Trans i18nKey=\"logs.infinite-scroll.older-logs\">Older logs</Trans>\n          </div>\n        </Button>\n      )}\n      {children}\n      {!hideBottomMessage && lowerOutOfRange && outOfRangeMessage}\n      {lowerLoading && <LoadingIndicator adjective={sortOrder === LogsSortOrder.Descending ? 'older' : 'newer'} />}\n    </>\n  );\n};\n\nconst styles = {\n  messageContainer: css({\n    textAlign: 'center',\n    padding: 0.25,\n  }),\n  navButton: css({\n    width: '58px',\n    height: '68px',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    lineHeight: '1',\n    position: 'absolute',\n    top: 0,\n    right: -3,\n    zIndex: 1,\n  }),\n  navButtonContent: css({\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    whiteSpace: 'normal',\n  }),\n};\n\nconst outOfRangeMessage = (\n  <div className={styles.messageContainer} data-testid=\"end-of-range\">\n    <Trans i18nKey=\"logs.out-of-range-message.end-of-the-selected-time-range\">End of the selected time range.</Trans>\n  </div>\n);\n\nexport enum ScrollDirection {\n  Top = -1,\n  Bottom = 1,\n  NoScroll = 0,\n}\nexport function shouldLoadMore(\n  event: Event | WheelEvent,\n  lastEvent: Event | WheelEvent | null,\n  countRef: MutableRefObject<number>,\n  element: HTMLDivElement,\n  lastScroll: number\n): ScrollDirection {\n  // Disable behavior if there is no scroll\n  if (element.scrollHeight <= element.clientHeight) {\n    return ScrollDirection.NoScroll;\n  }\n  const delta = event instanceof WheelEvent ? event.deltaY : element.scrollTop - lastScroll;\n  if (delta === 0) {\n    return ScrollDirection.NoScroll;\n  }\n\n  const scrollDirection = delta < 0 ? ScrollDirection.Top : ScrollDirection.Bottom;\n  const diff =\n    scrollDirection === ScrollDirection.Top\n      ? element.scrollTop\n      : element.scrollHeight - element.scrollTop - element.clientHeight;\n\n  if (diff > 1) {\n    return ScrollDirection.NoScroll;\n  }\n\n  if (!lastEvent || shouldIgnoreChainOfEvents(event, lastEvent, countRef)) {\n    return ScrollDirection.NoScroll;\n  }\n\n  return scrollDirection;\n}\n\nfunction shouldIgnoreChainOfEvents(\n  event: Event | WheelEvent,\n  lastEvent: Event | WheelEvent,\n  countRef: MutableRefObject<number>\n) {\n  const deltaTime = event.timeStamp - lastEvent.timeStamp;\n  // Not a chain of events\n  if (deltaTime > 500) {\n    countRef.current = 0;\n    return false;\n  }\n  countRef.current++;\n  // Likely trackpad\n  if (deltaTime < 100) {\n    // User likely to want more results\n    if (countRef.current >= 180) {\n      countRef.current = 0;\n      return false;\n    }\n    return true;\n  }\n  // Likely mouse wheel\n  if (deltaTime < 400) {\n    // User likely to want more results\n    if (countRef.current >= 25) {\n      countRef.current = 0;\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function getVisibleRange(rows: LogRowModel[]) {\n  const firstTimeStamp = rows[0].timeEpochMs;\n  const lastTimeStamp = rows[rows.length - 1].timeEpochMs;\n\n  const visibleRange =\n    lastTimeStamp < firstTimeStamp\n      ? { from: lastTimeStamp, to: firstTimeStamp }\n      : { from: firstTimeStamp, to: lastTimeStamp };\n\n  return visibleRange;\n}\n\nfunction getPrevRange(visibleRange: AbsoluteTimeRange, currentRange: TimeRange) {\n  return { from: currentRange.from.valueOf(), to: visibleRange.from };\n}\n\nfunction getNextRange(visibleRange: AbsoluteTimeRange, currentRange: TimeRange, timeZone: TimeZone) {\n  // When requesting new logs, update the current range if using relative time ranges.\n  currentRange = updateCurrentRange(currentRange, timeZone);\n  return { from: visibleRange.to, to: currentRange.to.valueOf() };\n}\n\nexport const SCROLLING_THRESHOLD = 1e3;\n\n// To get more logs, the difference between the visible range and the current range should be 1 second or more.\nfunction canScrollTop(\n  visibleRange: AbsoluteTimeRange,\n  currentRange: TimeRange,\n  timeZone: TimeZone,\n  sortOrder: LogsSortOrder\n): AbsoluteTimeRange | undefined {\n  if (sortOrder === LogsSortOrder.Descending) {\n    // When requesting new logs, update the current range if using relative time ranges.\n    currentRange = updateCurrentRange(currentRange, timeZone);\n    const canScroll = currentRange.to.valueOf() - visibleRange.to > SCROLLING_THRESHOLD;\n    return canScroll ? getNextRange(visibleRange, currentRange, timeZone) : undefined;\n  }\n\n  const canScroll = Math.abs(currentRange.from.valueOf() - visibleRange.from) > SCROLLING_THRESHOLD;\n  return canScroll ? getPrevRange(visibleRange, currentRange) : undefined;\n}\n\nexport function canScrollBottom(\n  visibleRange: AbsoluteTimeRange,\n  currentRange: TimeRange,\n  timeZone: TimeZone,\n  sortOrder: LogsSortOrder\n): AbsoluteTimeRange | undefined {\n  if (sortOrder === LogsSortOrder.Descending) {\n    const canScroll = Math.abs(currentRange.from.valueOf() - visibleRange.from) > SCROLLING_THRESHOLD;\n    return canScroll ? getPrevRange(visibleRange, currentRange) : undefined;\n  }\n  // When requesting new logs, update the current range if using relative time ranges.\n  currentRange = updateCurrentRange(currentRange, timeZone);\n  const canScroll = currentRange.to.valueOf() - visibleRange.to > SCROLLING_THRESHOLD;\n  return canScroll ? getNextRange(visibleRange, currentRange, timeZone) : undefined;\n}\n\n// Given a TimeRange, returns a new instance if using relative time, or else the same.\nfunction updateCurrentRange(timeRange: TimeRange, timeZone: TimeZone) {\n  return rangeUtil.isRelativeTimeRange(timeRange.raw)\n    ? rangeUtil.convertRawToRange(timeRange.raw, timeZone)\n    : timeRange;\n}\n","import { css } from '@emotion/css';\n\nimport { Spinner } from '@grafana/ui';\n\n// ideally we'd use `@grafana/ui/LoadingPlaceholder`, but that\n// one has a large margin-bottom.\ntype Props = {\n  adjective?: string;\n};\n\nexport const LoadingIndicator = ({ adjective = 'newer' }: Props) => {\n  const text = `Loading ${adjective} logs...`;\n  return (\n    <div className={loadingIndicatorStyles}>\n      <div>\n        {text} <Spinner inline />\n      </div>\n    </div>\n  );\n};\n\nconst loadingIndicatorStyles = css({\n  display: 'flex',\n  justifyContent: 'center',\n});\n","import { css } from '@emotion/css';\nimport memoizeOne from 'memoize-one';\n\nimport { CoreApp, GrafanaTheme2, LogRowModel } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { IconButton, Themeable2 } from '@grafana/ui';\nimport { t } from 'app/core/internationalization';\n\nimport { getLogRowStyles } from './getLogRowStyles';\n\nexport interface Props extends Themeable2 {\n  app?: CoreApp;\n  disableActions: boolean;\n  displayedFields?: string[];\n  onClickShowField?: (key: string) => void;\n  onClickHideField?: (key: string) => void;\n  row: LogRowModel;\n  theme: GrafanaTheme2;\n}\n\nconst getStyles = memoizeOne((theme: GrafanaTheme2) => {\n  return {\n    buttonRow: css({\n      display: 'flex',\n      flexDirection: 'row',\n      gap: theme.spacing(0.5),\n      marginLeft: theme.spacing(0.5),\n    }),\n  };\n});\n\nexport const LOG_LINE_BODY_FIELD_NAME = '___LOG_LINE_BODY___';\n\nexport const LogDetailsBody = (props: Props) => {\n  const showField = () => {\n    const { onClickShowField, row } = props;\n    if (onClickShowField) {\n      onClickShowField(LOG_LINE_BODY_FIELD_NAME);\n    }\n\n    reportInteraction('grafana_explore_logs_log_details_show_body_clicked', {\n      datasourceType: row.datasourceType,\n      logRowUid: row.uid,\n      type: 'enable',\n      app: props.app,\n    });\n  };\n\n  const hideField = () => {\n    const { onClickHideField, row } = props;\n    if (onClickHideField) {\n      onClickHideField(LOG_LINE_BODY_FIELD_NAME);\n    }\n\n    reportInteraction('grafana_explore_logs_log_details_show_body_clicked', {\n      datasourceType: row.datasourceType,\n      logRowUid: row.uid,\n      type: 'disable',\n      app: props.app,\n    });\n  };\n\n  const { theme, displayedFields, disableActions, row } = props;\n  const styles = getStyles(theme);\n  const rowStyles = getLogRowStyles(theme);\n\n  const toggleFieldButton =\n    displayedFields != null && displayedFields.includes(LOG_LINE_BODY_FIELD_NAME) ? (\n      <IconButton\n        variant=\"primary\"\n        tooltip={t('logs.log-details-body.toggle-field-button.tooltip-hide-log-line', 'Hide log line')}\n        name=\"eye\"\n        onClick={hideField}\n      />\n    ) : (\n      <IconButton\n        tooltip={t('logs.log-details-body.toggle-field-button.tooltip-show-log-line', 'Show log line')}\n        name=\"eye\"\n        onClick={showField}\n      />\n    );\n\n  return (\n    <tr className={rowStyles.logDetailsValue}>\n      <td className={rowStyles.logsDetailsIcon}>\n        <div className={styles.buttonRow}>{!disableActions && displayedFields && toggleFieldButton}</div>\n      </td>\n\n      <td className={rowStyles.logDetailsLabel} colSpan={100}>\n        {row.entry}\n      </td>\n    </tr>\n  );\n};\n","import { css } from '@emotion/css';\nimport { memo, forwardRef, useMemo, useState } from 'react';\n\nimport { GrafanaTheme2, Labels } from '@grafana/data';\nimport { Button, Icon, Tooltip, useStyles2 } from '@grafana/ui';\nimport { t } from 'app/core/internationalization';\n\nimport { LOG_LINE_BODY_FIELD_NAME } from './LogDetailsBody';\n\n// Levels are already encoded in color, filename is a Loki-ism\nconst HIDDEN_LABELS = ['detected_level', 'level', 'lvl', 'filename'];\n\nexport interface Props {\n  labels: Labels;\n  emptyMessage?: string;\n  addTooltip?: boolean;\n  displayMax?: number;\n  displayAll?: boolean;\n  onDisplayMaxToggle?(state: boolean): void;\n}\n\nexport const LogLabels = memo(\n  ({\n    labels,\n    emptyMessage,\n    addTooltip = true,\n    displayMax,\n    onDisplayMaxToggle,\n    displayAll: initialDisplayAll = false,\n  }: Props) => {\n    const [displayAll, setDisplayAll] = useState<boolean | undefined>(displayMax ? initialDisplayAll : undefined);\n    const styles = useStyles2(getStyles);\n    const allLabels = useMemo(\n      () =>\n        Object.keys(labels)\n          .filter((label) => !label.startsWith('_') && !HIDDEN_LABELS.includes(label) && labels[label])\n          .map((label) => `${label}=${labels[label]}`),\n      [labels]\n    );\n    const displayLabels = useMemo(\n      () => allLabels.slice(0, !displayAll && displayMax ? displayMax : Infinity),\n      [allLabels, displayAll, displayMax]\n    );\n\n    if (displayLabels.length === 0 && emptyMessage) {\n      return (\n        <span className={styles.logsLabels}>\n          <span className={styles.logsLabel}>{emptyMessage}</span>\n        </span>\n      );\n    }\n\n    return (\n      <span className={styles.logsLabels}>\n        {displayLabels.map((labelValue) => {\n          return addTooltip ? (\n            <Tooltip content={labelValue} key={labelValue} placement=\"top\">\n              <LogLabel styles={styles}>{labelValue}</LogLabel>\n            </Tooltip>\n          ) : (\n            <LogLabel styles={styles} tooltip={labelValue} key={labelValue}>\n              {labelValue}\n            </LogLabel>\n          );\n        })}\n        {displayLabels.length < allLabels.length && !displayAll && (\n          <Button\n            size=\"sm\"\n            fill=\"outline\"\n            variant=\"secondary\"\n            aria-label={t('logs.log-labels.expand', 'Expand labels')}\n            onClick={() => {\n              setDisplayAll(true);\n              onDisplayMaxToggle?.(true);\n            }}\n          >\n            <Icon name=\"plus\" size=\"xs\" />\n            {allLabels.length - displayLabels.length}\n          </Button>\n        )}\n        {displayAll === true && (\n          <Button\n            size=\"sm\"\n            fill=\"outline\"\n            variant=\"secondary\"\n            aria-label={t('logs.log-labels.collapse', 'Collapse labels')}\n            onClick={() => {\n              setDisplayAll(false);\n              onDisplayMaxToggle?.(false);\n            }}\n          >\n            <Icon name=\"minus\" size=\"xs\" />\n          </Button>\n        )}\n      </span>\n    );\n  }\n);\nLogLabels.displayName = 'LogLabels';\n\ninterface LogLabelsArrayProps {\n  labels: string[];\n}\n\nexport const LogLabelsList = memo(({ labels }: LogLabelsArrayProps) => {\n  const styles = useStyles2(getStyles);\n  return (\n    <span className={styles.logsLabels}>\n      {labels.map((label) => (\n        <LogLabel key={label} styles={styles} tooltip={label}>\n          {label === LOG_LINE_BODY_FIELD_NAME ? 'log line' : label}\n        </LogLabel>\n      ))}\n    </span>\n  );\n});\nLogLabelsList.displayName = 'LogLabelsList';\n\ninterface LogLabelProps {\n  styles: Record<string, string>;\n  tooltip?: string;\n  children: JSX.Element | string;\n}\n\nconst LogLabel = forwardRef<HTMLSpanElement, LogLabelProps>(({ styles, tooltip, children }: LogLabelProps, ref) => {\n  return (\n    <span className={styles.logsLabel} ref={ref}>\n      <span className={styles.logsLabelValue} title={tooltip}>\n        {children}\n      </span>\n    </span>\n  );\n});\nLogLabel.displayName = 'LogLabel';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    logsLabels: css({\n      display: 'flex',\n      flexWrap: 'wrap',\n      fontSize: theme.typography.size.xs,\n      alignItems: 'center',\n    }),\n    logsLabel: css({\n      label: 'logs-label',\n      display: 'flex',\n      padding: theme.spacing(0, 0.25),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.radius.default,\n      margin: theme.spacing(0.125, 0.5, 0, 0),\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      maxHeight: theme.spacing(2),\n    }),\n    logsLabelValue: css({\n      label: 'logs-label__value',\n      display: 'inline-block',\n      maxWidth: theme.spacing(25),\n      textOverflow: 'ellipsis',\n      overflow: 'hidden',\n    }),\n  };\n};\n","import ansicolor from 'ansicolor';\nimport { PureComponent } from 'react';\nimport Highlighter from 'react-highlight-words';\n\nimport { findHighlightChunksInText, GrafanaTheme2 } from '@grafana/data';\nimport { withTheme2, Themeable2 } from '@grafana/ui';\n\ninterface Style {\n  [key: string]: string;\n}\n\ninterface ParsedChunk {\n  style: Style;\n  text: string;\n}\n\nfunction convertCSSToStyle(theme: GrafanaTheme2, css: string): Style {\n  return css.split(/;\\s*/).reduce<Style>((accumulated, line) => {\n    // The ansicolor package returns this color if the chunk has the ANSI dim\n    // style (`\\e[2m`), but it is nearly unreadable in the dark theme, so we use\n    // GrafanaTheme2 instead to style it in a way that works across all themes.\n    if (line === 'color:rgba(0,0,0,0.5)') {\n      return { color: theme.colors.text.secondary };\n    }\n\n    const match = line.match(/([^:\\s]+)\\s*:\\s*(.+)/);\n\n    if (match && match[1] && match[2]) {\n      const key = match[1].replace(/-([a-z])/g, (_, character) => character.toUpperCase());\n      accumulated[key] = match[2];\n    }\n\n    return accumulated;\n  }, {});\n}\n\ninterface Props extends Themeable2 {\n  value: string;\n  highlight?: {\n    searchWords: string[];\n    highlightClassName: string;\n  };\n}\n\ninterface State {\n  chunks: ParsedChunk[];\n  prevValue: string;\n}\n\nexport class UnThemedLogMessageAnsi extends PureComponent<Props, State> {\n  state: State = {\n    chunks: [],\n    prevValue: '',\n  };\n\n  static getDerivedStateFromProps(props: Props, state: State) {\n    if (props.value === state.prevValue) {\n      return null;\n    }\n\n    const parsed = ansicolor.parse(props.value);\n\n    return {\n      chunks: parsed.spans.map((span) => {\n        return span.css\n          ? {\n              style: convertCSSToStyle(props.theme, span.css),\n              text: span.text,\n            }\n          : { text: span.text };\n      }),\n      prevValue: props.value,\n    };\n  }\n\n  render() {\n    const { chunks } = this.state;\n\n    return chunks.map((chunk, index) => {\n      const chunkText = this.props.highlight?.searchWords ? (\n        <Highlighter\n          key={index}\n          textToHighlight={chunk.text}\n          searchWords={this.props.highlight.searchWords}\n          findChunks={findHighlightChunksInText}\n          highlightClassName={this.props.highlight.highlightClassName}\n        />\n      ) : (\n        chunk.text\n      );\n      return chunk.style ? (\n        <span key={index} style={chunk.style} data-testid=\"ansiLogLine\">\n          {chunkText}\n        </span>\n      ) : (\n        chunkText\n      );\n    });\n  }\n}\n\nexport const LogMessageAnsi = withTheme2(UnThemedLogMessageAnsi);\nLogMessageAnsi.displayName = 'LogMessageAnsi';\n","import { css } from '@emotion/css';\nimport { useCallback, useEffect, useRef } from 'react';\n\nimport { GrafanaTheme2, LogRowModel } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Menu, useStyles2 } from '@grafana/ui';\nimport { t } from 'app/core/internationalization';\n\nimport { copyText } from '../../logs/utils';\n\ninterface PopoverMenuProps {\n  selection: string;\n  x: number;\n  y: number;\n  onClickFilterString?: (value: string, refId?: string) => void;\n  onClickFilterOutString?: (value: string, refId?: string) => void;\n  onDisable: () => void;\n  row: LogRowModel;\n  close: () => void;\n}\n\nexport const PopoverMenu = ({\n  x,\n  y,\n  onClickFilterString,\n  onClickFilterOutString,\n  selection,\n  row,\n  close,\n  ...props\n}: PopoverMenuProps) => {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const styles = useStyles2(getStyles);\n\n  useEffect(() => {\n    function handleEscape(e: KeyboardEvent) {\n      if (e.key === 'Escape') {\n        close();\n      }\n    }\n    document.addEventListener('keyup', handleEscape);\n\n    return () => {\n      document.removeEventListener('keyup', handleEscape);\n    };\n  }, [close]);\n\n  const onDisable = useCallback(() => {\n    track('popover_menu_disabled', selection.length, row.datasourceType);\n    props.onDisable();\n  }, [props, row.datasourceType, selection.length]);\n\n  const supported = onClickFilterString || onClickFilterOutString;\n\n  if (!supported) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className={styles.menu} style={{ top: y, left: x }}>\n        <Menu ref={containerRef}>\n          <Menu.Item\n            label={t('logs.popover-menu.copy', 'Copy selection')}\n            onClick={() => {\n              copyText(selection, containerRef);\n              close();\n              track('copy', selection.length, row.datasourceType);\n            }}\n          />\n          {onClickFilterString && (\n            <Menu.Item\n              label={t('logs.popover-menu.line-contains', 'Add as line contains filter')}\n              onClick={() => {\n                onClickFilterString(selection, row.dataFrame.refId);\n                close();\n                track('line_contains', selection.length, row.datasourceType);\n              }}\n            />\n          )}\n          {onClickFilterOutString && (\n            <Menu.Item\n              label={t('logs.popover-menu.line-contains-not', 'Add as line does not contain filter')}\n              onClick={() => {\n                onClickFilterOutString(selection, row.dataFrame.refId);\n                close();\n                track('line_does_not_contain', selection.length, row.datasourceType);\n              }}\n            />\n          )}\n          <Menu.Divider />\n          <Menu.Item label={t('logs.popover-menu.disable-menu', 'Disable menu')} onClick={onDisable} />\n        </Menu>\n      </div>\n    </>\n  );\n};\n\nfunction track(action: string, selectionLength: number, dataSourceType: string | undefined) {\n  reportInteraction(`grafana_explore_logs_popover_menu`, {\n    action,\n    selectionLength: selectionLength,\n    datasourceType: dataSourceType || 'unknown',\n  });\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  menu: css({\n    position: 'fixed',\n    zIndex: theme.zIndex.modal,\n  }),\n});\n","// this class generates react-keys that are guaranteed to be unique.\n// it will try to use the provided `maybeId`, but if that's a duplicate,\n// it will use an index-based key.\n// NOTE: it will always add a prefix to the string, this is necessary\n// to avoid the problem if your proposed key would conflict with\n// the index-based names\nexport class UniqueKeyMaker {\n  seen: Set<string>;\n  count: number;\n  constructor() {\n    this.seen = new Set();\n    this.count = 0;\n  }\n\n  getKey(proposedKey: string) {\n    this.count += 1;\n    const maybeKey = `k_${proposedKey}`;\n    if (this.seen.has(maybeKey)) {\n      return `i_${this.count}`;\n    } else {\n      this.seen.add(maybeKey);\n      return maybeKey;\n    }\n  }\n}\n","import { css, cx } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  logsStatsRow: css({\n    label: 'logs-stats-row',\n    margin: `${parseInt(theme.spacing(2), 10) / 1.75}px 0`,\n  }),\n  logsStatsRowActive: css({\n    label: 'logs-stats-row--active',\n    color: theme.colors.primary.text,\n    position: 'relative',\n  }),\n  logsStatsRowLabel: css({\n    label: 'logs-stats-row__label',\n    display: 'flex',\n    marginBottom: '1px',\n  }),\n  logsStatsRowValue: css({\n    label: 'logs-stats-row__value',\n    flex: 1,\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n  }),\n  logsStatsRowCount: css({\n    label: 'logs-stats-row__count',\n    textAlign: 'right',\n    marginLeft: theme.spacing(0.75),\n  }),\n  logsStatsRowPercent: css({\n    label: 'logs-stats-row__percent',\n    textAlign: 'right',\n    marginLeft: theme.spacing(0.75),\n    width: theme.spacing(4.5),\n  }),\n  logsStatsRowBar: css({\n    label: 'logs-stats-row__bar',\n    height: theme.spacing(0.5),\n    overflow: 'hidden',\n    background: theme.colors.text.disabled,\n  }),\n  logsStatsRowInnerBar: css({\n    label: 'logs-stats-row__innerbar',\n    height: theme.spacing(0.5),\n    overflow: 'hidden',\n    background: theme.colors.primary.main,\n  }),\n});\n\nexport interface Props {\n  active?: boolean;\n  count: number;\n  proportion: number;\n  value?: string;\n}\n\nexport const LogLabelStatsRow = ({ active, count, proportion, value }: Props) => {\n  const style = useStyles2(getStyles);\n  const percent = `${Math.round(proportion * 100)}%`;\n  const barStyle = { width: percent };\n  const className = active ? cx([style.logsStatsRow, style.logsStatsRowActive]) : cx([style.logsStatsRow]);\n\n  return (\n    <div className={className}>\n      <div className={cx([style.logsStatsRowLabel])}>\n        <div className={cx([style.logsStatsRowValue])} title={value}>\n          {value}\n        </div>\n        <div className={cx([style.logsStatsRowCount])}>{count}</div>\n        <div className={cx([style.logsStatsRowPercent])}>{percent}</div>\n      </div>\n      <div className={cx([style.logsStatsRowBar])}>\n        <div className={cx([style.logsStatsRowInnerBar])} style={barStyle} />\n      </div>\n    </div>\n  );\n};\n\nLogLabelStatsRow.displayName = 'LogLabelStatsRow';\n","import { css } from '@emotion/css';\nimport { PureComponent } from 'react';\n\nimport { LogLabelStatsModel, GrafanaTheme2 } from '@grafana/data';\nimport { stylesFactory, withTheme2, Themeable2 } from '@grafana/ui';\n\n//Components\nimport { LogLabelStatsRow } from './LogLabelStatsRow';\n\nconst STATS_ROW_LIMIT = 5;\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2) => {\n  return {\n    logsStats: css({\n      label: 'logs-stats',\n      background: 'inherit',\n      color: theme.colors.text.primary,\n      wordBreak: 'break-all',\n      width: 'fit-content',\n      maxWidth: '100%',\n    }),\n    logsStatsHeader: css({\n      label: 'logs-stats__header',\n      borderBottom: `1px solid ${theme.colors.border.medium}`,\n      display: 'flex',\n    }),\n    logsStatsTitle: css({\n      label: 'logs-stats__title',\n      fontWeight: theme.typography.fontWeightMedium,\n      paddingRight: theme.spacing(2),\n      display: 'inline-block',\n      whiteSpace: 'nowrap',\n      textOverflow: 'ellipsis',\n      flexGrow: 1,\n    }),\n    logsStatsClose: css({\n      label: 'logs-stats__close',\n      cursor: 'pointer',\n    }),\n    logsStatsBody: css({\n      label: 'logs-stats__body',\n      padding: '5px 0px',\n    }),\n  };\n});\n\ninterface Props extends Themeable2 {\n  stats: LogLabelStatsModel[];\n  label: string;\n  value: string;\n  rowCount: number;\n  isLabel?: boolean;\n}\n\nclass UnThemedLogLabelStats extends PureComponent<Props> {\n  render() {\n    const { label, rowCount, stats, value, theme, isLabel } = this.props;\n    const style = getStyles(theme);\n    const topRows = stats.slice(0, STATS_ROW_LIMIT);\n    let activeRow = topRows.find((row) => row.value === value);\n    let otherRows = stats.slice(STATS_ROW_LIMIT);\n    const insertActiveRow = !activeRow;\n\n    // Remove active row from other to show extra\n    if (insertActiveRow) {\n      activeRow = otherRows.find((row) => row.value === value);\n      otherRows = otherRows.filter((row) => row.value !== value);\n    }\n\n    const otherCount = otherRows.reduce((sum, row) => sum + row.count, 0);\n    const topCount = topRows.reduce((sum, row) => sum + row.count, 0);\n    const total = topCount + otherCount;\n    const otherProportion = otherCount / total;\n\n    return (\n      <div className={style.logsStats} data-testid=\"logLabelStats\">\n        <div className={style.logsStatsHeader}>\n          <div className={style.logsStatsTitle}>\n            {label}: {total} of {rowCount} rows have that {isLabel ? 'label' : 'field'}\n          </div>\n        </div>\n        <div className={style.logsStatsBody}>\n          {topRows.map((stat) => (\n            <LogLabelStatsRow key={stat.value} {...stat} active={stat.value === value} />\n          ))}\n          {insertActiveRow && activeRow && <LogLabelStatsRow key={activeRow.value} {...activeRow} active />}\n          {otherCount > 0 && (\n            <LogLabelStatsRow key=\"__OTHERS__\" count={otherCount} value=\"Other\" proportion={otherProportion} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const LogLabelStats = withTheme2(UnThemedLogLabelStats);\nLogLabelStats.displayName = 'LogLabelStats';\n","import { css, cx } from '@emotion/css';\nimport { isEqual } from 'lodash';\nimport memoizeOne from 'memoize-one';\nimport { PureComponent, useEffect, useState } from 'react';\nimport * as React from 'react';\n\nimport {\n  CoreApp,\n  DataFrame,\n  Field,\n  GrafanaTheme2,\n  IconName,\n  LinkModel,\n  LogLabelStatsModel,\n  LogRowModel,\n} from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport {\n  ClipboardButton,\n  DataLinkButton,\n  IconButton,\n  PopoverContent,\n  Themeable2,\n  Tooltip,\n  withTheme2,\n} from '@grafana/ui';\nimport { t } from 'app/core/internationalization';\n\nimport { logRowToSingleRowDataFrame } from '../logsModel';\nimport { getLabelTypeFromRow } from '../utils';\n\nimport { LogLabelStats } from './LogLabelStats';\nimport { getLogRowStyles } from './getLogRowStyles';\n\nexport interface Props extends Themeable2 {\n  parsedValues: string[];\n  parsedKeys: string[];\n  disableActions: boolean;\n  wrapLogMessage?: boolean;\n  isLabel?: boolean;\n  onClickFilterLabel?: (key: string, value: string, frame?: DataFrame) => void;\n  onClickFilterOutLabel?: (key: string, value: string, frame?: DataFrame) => void;\n  links?: Array<LinkModel<Field>>;\n  getStats: () => LogLabelStatsModel[] | null;\n  displayedFields?: string[];\n  onClickShowField?: (key: string) => void;\n  onClickHideField?: (key: string) => void;\n  row: LogRowModel;\n  app?: CoreApp;\n  isFilterLabelActive?: (key: string, value: string, refId?: string) => Promise<boolean>;\n  onPinLine?: (row: LogRowModel, allowUnPin?: boolean) => void;\n  pinLineButtonTooltipTitle?: PopoverContent;\n}\n\ninterface State {\n  showFieldsStats: boolean;\n  fieldCount: number;\n  fieldStats: LogLabelStatsModel[] | null;\n}\n\nconst getStyles = memoizeOne((theme: GrafanaTheme2) => {\n  return {\n    labelType: css({\n      border: `solid 1px ${theme.colors.text.secondary}`,\n      color: theme.colors.text.secondary,\n      borderRadius: theme.shape.radius.circle,\n      fontSize: theme.spacing(1),\n      lineHeight: theme.spacing(1.25),\n      height: theme.spacing(1.5),\n      width: theme.spacing(1.5),\n      display: 'flex',\n      justifyContent: 'center',\n      verticalAlign: 'middle',\n      marginLeft: theme.spacing(1),\n    }),\n    wordBreakAll: css({\n      label: 'wordBreakAll',\n      wordBreak: 'break-all',\n    }),\n    copyButton: css({\n      '& > button': {\n        color: theme.colors.text.secondary,\n        padding: 0,\n        justifyContent: 'center',\n        borderRadius: theme.shape.radius.circle,\n        height: theme.spacing(theme.components.height.sm),\n        width: theme.spacing(theme.components.height.sm),\n        svg: {\n          margin: 0,\n        },\n\n        'span > div': {\n          top: '-5px',\n          '& button': {\n            color: theme.colors.success.main,\n          },\n        },\n      },\n    }),\n    adjoiningLinkButton: css({\n      marginLeft: theme.spacing(1),\n    }),\n    wrapLine: css({\n      label: 'wrapLine',\n      whiteSpace: 'pre-wrap',\n    }),\n    logDetailsStats: css({\n      padding: `0 ${theme.spacing(1)}`,\n    }),\n    logDetailsValue: css({\n      display: 'flex',\n      alignItems: 'center',\n      lineHeight: '22px',\n\n      '.log-details-value-copy': {\n        visibility: 'hidden',\n      },\n      '&:hover': {\n        '.log-details-value-copy': {\n          visibility: 'visible',\n        },\n      },\n    }),\n    buttonRow: css({\n      display: 'flex',\n      flexDirection: 'row',\n      gap: theme.spacing(0.5),\n      marginLeft: theme.spacing(0.5),\n    }),\n  };\n});\n\nclass UnThemedLogDetailsRow extends PureComponent<Props, State> {\n  state: State = {\n    showFieldsStats: false,\n    fieldCount: 0,\n    fieldStats: null,\n  };\n\n  componentDidUpdate() {\n    if (this.state.showFieldsStats) {\n      this.updateStats();\n    }\n  }\n\n  showField = () => {\n    const { onClickShowField: onClickShowDetectedField, parsedKeys, row } = this.props;\n    if (onClickShowDetectedField) {\n      onClickShowDetectedField(parsedKeys[0]);\n    }\n\n    reportInteraction('grafana_explore_logs_log_details_replace_line_clicked', {\n      datasourceType: row.datasourceType,\n      logRowUid: row.uid,\n      type: 'enable',\n    });\n  };\n\n  hideField = () => {\n    const { onClickHideField: onClickHideDetectedField, parsedKeys, row } = this.props;\n    if (onClickHideDetectedField) {\n      onClickHideDetectedField(parsedKeys[0]);\n    }\n\n    reportInteraction('grafana_explore_logs_log_details_replace_line_clicked', {\n      datasourceType: row.datasourceType,\n      logRowUid: row.uid,\n      type: 'disable',\n    });\n  };\n\n  isFilterLabelActive = async () => {\n    const { isFilterLabelActive, parsedKeys, parsedValues, row } = this.props;\n    if (isFilterLabelActive) {\n      return await isFilterLabelActive(parsedKeys[0], parsedValues[0], row.dataFrame?.refId);\n    }\n    return false;\n  };\n\n  filterLabel = () => {\n    const { onClickFilterLabel, parsedKeys, parsedValues, row } = this.props;\n    if (onClickFilterLabel) {\n      onClickFilterLabel(parsedKeys[0], parsedValues[0], logRowToSingleRowDataFrame(row) || undefined);\n    }\n\n    reportInteraction('grafana_explore_logs_log_details_filter_clicked', {\n      datasourceType: row.datasourceType,\n      filterType: 'include',\n      logRowUid: row.uid,\n    });\n  };\n\n  filterOutLabel = () => {\n    const { onClickFilterOutLabel, parsedKeys, parsedValues, row } = this.props;\n    if (onClickFilterOutLabel) {\n      onClickFilterOutLabel(parsedKeys[0], parsedValues[0], logRowToSingleRowDataFrame(row) || undefined);\n    }\n\n    reportInteraction('grafana_explore_logs_log_details_filter_clicked', {\n      datasourceType: row.datasourceType,\n      filterType: 'exclude',\n      logRowUid: row.uid,\n    });\n  };\n\n  updateStats = () => {\n    const { getStats } = this.props;\n    const fieldStats = getStats();\n    const fieldCount = fieldStats ? fieldStats.reduce((sum, stat) => sum + stat.count, 0) : 0;\n    if (!isEqual(this.state.fieldStats, fieldStats) || fieldCount !== this.state.fieldCount) {\n      this.setState({ fieldStats, fieldCount });\n    }\n  };\n\n  showStats = () => {\n    const { isLabel, row, app } = this.props;\n    const { showFieldsStats } = this.state;\n    if (!showFieldsStats) {\n      this.updateStats();\n    }\n    this.toggleFieldsStats();\n\n    reportInteraction('grafana_explore_logs_log_details_stats_clicked', {\n      dataSourceType: row.datasourceType,\n      fieldType: isLabel ? 'label' : 'detectedField',\n      type: showFieldsStats ? 'close' : 'open',\n      logRowUid: row.uid,\n      app,\n    });\n  };\n\n  toggleFieldsStats() {\n    this.setState((state) => {\n      return {\n        showFieldsStats: !state.showFieldsStats,\n      };\n    });\n  }\n\n  generateClipboardButton(val: string) {\n    const { theme } = this.props;\n    const styles = getStyles(theme);\n\n    return (\n      <div className={`log-details-value-copy ${styles.copyButton}`}>\n        <ClipboardButton\n          getText={() => val}\n          title={t('logs.un-themed-log-details-row.title-copy-value-to-clipboard', 'Copy value to clipboard')}\n          fill=\"text\"\n          variant=\"secondary\"\n          icon=\"copy\"\n          size=\"md\"\n        />\n      </div>\n    );\n  }\n\n  generateMultiVal(value: string[], showCopy?: boolean) {\n    return (\n      <table>\n        <tbody>\n          {value?.map((val, i) => {\n            return (\n              <tr key={`${val}-${i}`}>\n                <td>\n                  {val}\n                  {showCopy && val !== '' && this.generateClipboardButton(val)}\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const {\n      theme,\n      parsedKeys,\n      parsedValues,\n      isLabel,\n      links,\n      displayedFields,\n      wrapLogMessage,\n      onClickFilterLabel,\n      onClickFilterOutLabel,\n      disableActions,\n      row,\n      app,\n      onPinLine,\n      pinLineButtonTooltipTitle,\n    } = this.props;\n    const { showFieldsStats, fieldStats, fieldCount } = this.state;\n    const styles = getStyles(theme);\n    const rowStyles = getLogRowStyles(theme);\n    const singleKey = parsedKeys == null ? false : parsedKeys.length === 1;\n    const singleVal = parsedValues == null ? false : parsedValues.length === 1;\n    const hasFilteringFunctionality = !disableActions && onClickFilterLabel && onClickFilterOutLabel;\n    const refIdTooltip = app === CoreApp.Explore && row.dataFrame?.refId ? ` in query ${row.dataFrame?.refId}` : '';\n    const labelType = singleKey ? getLabelTypeFromRow(parsedKeys[0], row) : null;\n\n    const isMultiParsedValueWithNoContent =\n      !singleVal && parsedValues != null && !parsedValues.every((val) => val === '');\n\n    const toggleFieldButton =\n      displayedFields && parsedKeys != null && displayedFields.includes(parsedKeys[0]) ? (\n        <IconButton\n          variant=\"primary\"\n          tooltip={t('logs.un-themed-log-details-row.toggle-field-button.tooltip-hide-this-field', 'Hide this field')}\n          name=\"eye\"\n          onClick={this.hideField}\n        />\n      ) : (\n        <IconButton\n          tooltip={t(\n            'logs.un-themed-log-details-row.toggle-field-button.tooltip-field-instead-message',\n            'Show this field instead of the message'\n          )}\n          name=\"eye\"\n          onClick={this.showField}\n        />\n      );\n\n    return (\n      <>\n        <tr className={rowStyles.logDetailsValue}>\n          <td className={rowStyles.logsDetailsIcon}>\n            <div className={styles.buttonRow}>\n              {hasFilteringFunctionality && (\n                <>\n                  <AsyncIconButton\n                    name=\"search-plus\"\n                    onClick={this.filterLabel}\n                    // We purposely want to pass a new function on every render to allow the active state to be updated when log details remains open between updates.\n                    isActive={() => this.isFilterLabelActive()}\n                    tooltipSuffix={refIdTooltip}\n                  />\n                  <IconButton\n                    name=\"search-minus\"\n                    tooltip={`Filter out value${refIdTooltip}`}\n                    onClick={this.filterOutLabel}\n                  />\n                </>\n              )}\n              {!disableActions && displayedFields && toggleFieldButton}\n              {!disableActions && (\n                <IconButton\n                  variant={showFieldsStats ? 'primary' : 'secondary'}\n                  name=\"signal\"\n                  tooltip={t('logs.un-themed-log-details-row.tooltip-adhoc-statistics', 'Ad-hoc statistics')}\n                  className=\"stats-button\"\n                  disabled={!singleKey}\n                  onClick={this.showStats}\n                />\n              )}\n            </div>\n          </td>\n\n          <td>{labelType && <LabelTypeBadge type={labelType} styles={styles} />}</td>\n          {/* Key - value columns */}\n          <td className={rowStyles.logDetailsLabel}>{singleKey ? parsedKeys[0] : this.generateMultiVal(parsedKeys)}</td>\n          <td className={cx(styles.wordBreakAll, wrapLogMessage && styles.wrapLine)}>\n            <div className={styles.logDetailsValue}>\n              {singleVal ? parsedValues[0] : this.generateMultiVal(parsedValues, true)}\n              {singleVal && this.generateClipboardButton(parsedValues[0])}\n              <div className={cx((singleVal || isMultiParsedValueWithNoContent) && styles.adjoiningLinkButton)}>\n                {links?.map((link, i) => {\n                  if (link.onClick && onPinLine) {\n                    const originalOnClick = link.onClick;\n                    link.onClick = (e, origin) => {\n                      // Pin the line\n                      onPinLine(row, false);\n\n                      // Execute the link onClick function\n                      originalOnClick(e, origin);\n                    };\n                  }\n                  return (\n                    <span key={`${link.title}-${i}`}>\n                      <DataLinkButton\n                        buttonProps={{\n                          // Show tooltip message if max number of pinned lines has been reached\n                          tooltip:\n                            typeof pinLineButtonTooltipTitle === 'object' && link.onClick\n                              ? pinLineButtonTooltipTitle\n                              : undefined,\n                        }}\n                        link={link}\n                      />\n                    </span>\n                  );\n                })}\n              </div>\n            </div>\n          </td>\n        </tr>\n        {showFieldsStats && singleKey && singleVal && (\n          <tr>\n            <td colSpan={2}>\n              <IconButton\n                variant={showFieldsStats ? 'primary' : 'secondary'}\n                name=\"signal\"\n                tooltip={t('logs.un-themed-log-details-row.tooltip-hide-adhoc-statistics', 'Hide ad-hoc statistics')}\n                onClick={this.showStats}\n              />\n            </td>\n            <td colSpan={2}>\n              <div className={styles.logDetailsStats}>\n                <LogLabelStats\n                  stats={fieldStats!}\n                  label={parsedKeys[0]}\n                  value={parsedValues[0]}\n                  rowCount={fieldCount}\n                  isLabel={isLabel}\n                />\n              </div>\n            </td>\n          </tr>\n        )}\n      </>\n    );\n  }\n}\n\nfunction LabelTypeBadge({ type, styles }: { type: string; styles: ReturnType<typeof getStyles> }) {\n  return (\n    <Tooltip content={type}>\n      <div className={styles.labelType}>\n        <span>{type.substring(0, 1)}</span>\n      </div>\n    </Tooltip>\n  );\n}\n\ninterface AsyncIconButtonProps extends Pick<React.ButtonHTMLAttributes<HTMLButtonElement>, 'onClick'> {\n  name: IconName;\n  isActive(): Promise<boolean>;\n  tooltipSuffix: string;\n}\n\nconst AsyncIconButton = ({ isActive, tooltipSuffix, ...rest }: AsyncIconButtonProps) => {\n  const [active, setActive] = useState(false);\n  const tooltip = active ? 'Remove filter' : 'Filter for value';\n\n  useEffect(() => {\n    isActive().then(setActive);\n  }, [isActive]);\n\n  return <IconButton {...rest} variant={active ? 'primary' : undefined} tooltip={tooltip + tooltipSuffix} />;\n};\n\nexport const LogDetailsRow = withTheme2(UnThemedLogDetailsRow);\nLogDetailsRow.displayName = 'LogDetailsRow';\n","import { cx } from '@emotion/css';\nimport { PureComponent } from 'react';\n\nimport { CoreApp, DataFrame, DataFrameType, Field, LinkModel, LogRowModel } from '@grafana/data';\nimport { PopoverContent, Themeable2, withTheme2 } from '@grafana/ui';\nimport { Trans, t } from 'app/core/internationalization';\n\nimport { calculateLogsLabelStats, calculateStats } from '../utils';\n\nimport { LogDetailsBody } from './LogDetailsBody';\nimport { LogDetailsRow } from './LogDetailsRow';\nimport { getLogLevelStyles, LogRowStyles } from './getLogRowStyles';\nimport { getAllFields, createLogLineLinks } from './logParser';\n\nexport interface Props extends Themeable2 {\n  row: LogRowModel;\n  showDuplicates: boolean;\n  getRows: () => LogRowModel[];\n  wrapLogMessage: boolean;\n  className?: string;\n  hasError?: boolean;\n  app?: CoreApp;\n  styles: LogRowStyles;\n\n  onClickFilterLabel?: (key: string, value: string, frame?: DataFrame) => void;\n  onClickFilterOutLabel?: (key: string, value: string, frame?: DataFrame) => void;\n  getFieldLinks?: (field: Field, rowIndex: number, dataFrame: DataFrame) => Array<LinkModel<Field>>;\n  displayedFields?: string[];\n  onClickShowField?: (key: string) => void;\n  onClickHideField?: (key: string) => void;\n  isFilterLabelActive?: (key: string, value: string, refId?: string) => Promise<boolean>;\n\n  onPinLine?: (row: LogRowModel) => void;\n  pinLineButtonTooltipTitle?: PopoverContent;\n}\n\nclass UnThemedLogDetails extends PureComponent<Props> {\n  render() {\n    const {\n      app,\n      row,\n      theme,\n      hasError,\n      onClickFilterOutLabel,\n      onClickFilterLabel,\n      getRows,\n      showDuplicates,\n      className,\n      onClickShowField,\n      onClickHideField,\n      displayedFields,\n      getFieldLinks,\n      wrapLogMessage,\n      onPinLine,\n      styles,\n      pinLineButtonTooltipTitle,\n    } = this.props;\n    const levelStyles = getLogLevelStyles(theme, row.logLevel);\n    const labels = row.labels ? row.labels : {};\n    const labelsAvailable = Object.keys(labels).length > 0;\n    const fieldsAndLinks = getAllFields(row, getFieldLinks);\n    let fieldsWithLinks = fieldsAndLinks.filter((f) => f.links?.length);\n    const displayedFieldsWithLinks = fieldsWithLinks.filter((f) => f.fieldIndex !== row.entryFieldIndex).sort();\n    const hiddenFieldsWithLinks = fieldsWithLinks.filter((f) => f.fieldIndex === row.entryFieldIndex).sort();\n    const fieldsWithLinksFromVariableMap = createLogLineLinks(hiddenFieldsWithLinks);\n    const fieldsWithLinksAvailable =\n      (displayedFieldsWithLinks && displayedFieldsWithLinks.length > 0) ||\n      (fieldsWithLinksFromVariableMap && fieldsWithLinksFromVariableMap.length > 0);\n\n    const fields =\n      row.dataFrame.meta?.type === DataFrameType.LogLines\n        ? // for LogLines frames (dataplane) we don't want to show any additional fields besides already extracted labels and links\n          []\n        : // for other frames, do not show the log message unless there is a link attached\n          fieldsAndLinks.filter((f) => f.links?.length === 0 && f.fieldIndex !== row.entryFieldIndex).sort();\n    const fieldsAvailable = fields && fields.length > 0;\n\n    // If logs with error, we are not showing the level color\n    const levelClassName = hasError\n      ? ''\n      : `${levelStyles.logsRowLevelColor} ${styles.logsRowLevel} ${styles.logsRowLevelDetails}`;\n\n    return (\n      <tr className={cx(className, styles.logDetails)}>\n        {showDuplicates && <td />}\n        <td className={levelClassName} aria-label={t('logs.un-themed-log-details.aria-label-log-level', 'Log level')} />\n        <td colSpan={4}>\n          <div className={styles.logDetailsContainer}>\n            <table className={styles.logDetailsTable}>\n              <tbody>\n                {displayedFields && displayedFields.length > 0 && (\n                  <>\n                    <tr>\n                      <td\n                        colSpan={100}\n                        className={styles.logDetailsHeading}\n                        aria-label={t('logs.un-themed-log-details.aria-label-fields', 'Fields')}\n                      >\n                        <Trans i18nKey=\"logs.log-details.log-line\">Log line</Trans>\n                      </td>\n                    </tr>\n                    <LogDetailsBody\n                      onClickShowField={onClickShowField}\n                      onClickHideField={onClickHideField}\n                      row={row}\n                      app={app}\n                      displayedFields={displayedFields}\n                      disableActions={false}\n                      theme={theme}\n                    />\n                  </>\n                )}\n                {(labelsAvailable || fieldsAvailable) && (\n                  <tr>\n                    <td\n                      colSpan={100}\n                      className={styles.logDetailsHeading}\n                      aria-label={t('logs.un-themed-log-details.aria-label-fields', 'Fields')}\n                    >\n                      <Trans i18nKey=\"logs.log-details.fields\">Fields</Trans>\n                    </td>\n                  </tr>\n                )}\n                {Object.keys(labels)\n                  .sort()\n                  .map((key, i) => {\n                    const value = labels[key];\n                    return (\n                      <LogDetailsRow\n                        key={`${key}=${value}-${i}`}\n                        parsedKeys={[key]}\n                        parsedValues={[value]}\n                        isLabel={true}\n                        getStats={() => calculateLogsLabelStats(getRows(), key)}\n                        onClickFilterOutLabel={onClickFilterOutLabel}\n                        onClickFilterLabel={onClickFilterLabel}\n                        onClickShowField={onClickShowField}\n                        onClickHideField={onClickHideField}\n                        row={row}\n                        app={app}\n                        wrapLogMessage={wrapLogMessage}\n                        displayedFields={displayedFields}\n                        disableActions={false}\n                        isFilterLabelActive={this.props.isFilterLabelActive}\n                      />\n                    );\n                  })}\n                {fields.map((field, i) => {\n                  const { keys, values, fieldIndex } = field;\n                  return (\n                    <LogDetailsRow\n                      key={`${keys[0]}=${values[0]}-${i}`}\n                      parsedKeys={keys}\n                      parsedValues={values}\n                      onClickShowField={onClickShowField}\n                      onClickHideField={onClickHideField}\n                      onClickFilterOutLabel={onClickFilterOutLabel}\n                      onClickFilterLabel={onClickFilterLabel}\n                      getStats={() => calculateStats(row.dataFrame.fields[fieldIndex].values)}\n                      displayedFields={displayedFields}\n                      wrapLogMessage={wrapLogMessage}\n                      row={row}\n                      app={app}\n                      disableActions={false}\n                      isFilterLabelActive={this.props.isFilterLabelActive}\n                    />\n                  );\n                })}\n\n                {fieldsWithLinksAvailable && (\n                  <tr>\n                    <td\n                      colSpan={100}\n                      className={styles.logDetailsHeading}\n                      aria-label={t('logs.un-themed-log-details.aria-label-data-links', 'Data links')}\n                    >\n                      <Trans i18nKey=\"logs.log-details.links\">Links</Trans>\n                    </td>\n                  </tr>\n                )}\n                {displayedFieldsWithLinks.map((field, i) => {\n                  const { keys, values, links, fieldIndex } = field;\n                  return (\n                    <LogDetailsRow\n                      key={`${keys[0]}=${values[0]}-${i}`}\n                      parsedKeys={keys}\n                      parsedValues={values}\n                      links={links}\n                      onClickShowField={onClickShowField}\n                      onClickHideField={onClickHideField}\n                      onPinLine={onPinLine}\n                      pinLineButtonTooltipTitle={pinLineButtonTooltipTitle}\n                      getStats={() => calculateStats(row.dataFrame.fields[fieldIndex].values)}\n                      displayedFields={displayedFields}\n                      wrapLogMessage={wrapLogMessage}\n                      row={row}\n                      app={app}\n                      disableActions={false}\n                    />\n                  );\n                })}\n                {fieldsWithLinksFromVariableMap?.map((field, i) => {\n                  const { keys, values, links, fieldIndex } = field;\n                  return (\n                    <LogDetailsRow\n                      key={`${keys[0]}=${values[0]}-${i}`}\n                      parsedKeys={keys}\n                      parsedValues={values}\n                      links={links}\n                      onClickShowField={onClickShowField}\n                      onClickHideField={onClickHideField}\n                      onPinLine={onPinLine}\n                      pinLineButtonTooltipTitle={pinLineButtonTooltipTitle}\n                      getStats={() => calculateStats(row.dataFrame.fields[fieldIndex].values)}\n                      displayedFields={displayedFields}\n                      wrapLogMessage={wrapLogMessage}\n                      row={row}\n                      app={app}\n                      disableActions={true}\n                    />\n                  );\n                })}\n\n                {!fieldsAvailable && !labelsAvailable && !fieldsWithLinksAvailable && (\n                  <tr>\n                    <td colSpan={100} aria-label={t('logs.un-themed-log-details.aria-label-no-details', 'No details')}>\n                      <Trans i18nKey=\"logs.log-details.no-details\">No details available</Trans>\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </div>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport const LogDetails = withTheme2(UnThemedLogDetails);\nLogDetails.displayName = 'LogDetails';\n","import {\n  memo,\n  FocusEvent,\n  SyntheticEvent,\n  useCallback,\n  ReactNode,\n  useMemo,\n  cloneElement,\n  isValidElement,\n  MouseEvent,\n} from 'react';\n\nimport { LogRowContextOptions, LogRowModel } from '@grafana/data';\nimport { DataQuery } from '@grafana/schema';\nimport { ClipboardButton, IconButton, PopoverContent } from '@grafana/ui';\nimport { t } from 'app/core/internationalization';\n\nimport { handleOpenLogsContextClick } from '../utils';\n\nimport { LogRowStyles } from './getLogRowStyles';\n\ninterface Props {\n  logText: string;\n  row: LogRowModel;\n  showContextToggle?: (row: LogRowModel) => boolean;\n  onOpenContext: (row: LogRowModel) => void;\n  getRowContextQuery?: (\n    row: LogRowModel,\n    options?: LogRowContextOptions,\n    cacheFilters?: boolean\n  ) => Promise<DataQuery | null>;\n  onPermalinkClick?: (row: LogRowModel) => Promise<void>;\n  onPinLine?: (row: LogRowModel) => void;\n  onUnpinLine?: (row: LogRowModel) => void;\n  pinLineButtonTooltipTitle?: PopoverContent;\n  pinned?: boolean;\n  styles: LogRowStyles;\n  mouseIsOver: boolean;\n  onBlur: () => void;\n  addonBefore?: ReactNode[];\n  addonAfter?: ReactNode[];\n}\n\nexport const LogRowMenuCell = memo(\n  ({\n    logText,\n    onOpenContext,\n    onPermalinkClick,\n    onPinLine,\n    onUnpinLine,\n    pinLineButtonTooltipTitle,\n    pinned,\n    row,\n    showContextToggle,\n    styles,\n    mouseIsOver,\n    onBlur,\n    getRowContextQuery,\n    addonBefore,\n    addonAfter,\n  }: Props) => {\n    const shouldShowContextToggle = useMemo(\n      () => (showContextToggle ? showContextToggle(row) : false),\n      [row, showContextToggle]\n    );\n    const onLogRowClick = useCallback((e: SyntheticEvent) => {\n      e.stopPropagation();\n    }, []);\n    const onShowContextClick = useCallback(\n      async (event: MouseEvent<HTMLElement>) => {\n        event.stopPropagation();\n        handleOpenLogsContextClick(event, row, getRowContextQuery, onOpenContext);\n      },\n      [onOpenContext, getRowContextQuery, row]\n    );\n    /**\n     * For better accessibility support, we listen to the onBlur event here (to hide this component), and\n     * to onFocus in LogRow (to show this component).\n     */\n    const handleBlur = useCallback(\n      (e: FocusEvent) => {\n        if (!e.currentTarget.contains(e.relatedTarget) && onBlur) {\n          onBlur();\n        }\n      },\n      [onBlur]\n    );\n    const getLogText = useCallback(() => logText, [logText]);\n\n    const beforeContent = useMemo(() => {\n      if (!addonBefore) {\n        return null;\n      }\n      return addClickListenersToNode(addonBefore, row);\n    }, [addonBefore, row]);\n\n    const afterContent = useMemo(() => {\n      if (!addonAfter) {\n        return null;\n      }\n      return addClickListenersToNode(addonAfter, row);\n    }, [addonAfter, row]);\n\n    return (\n      // We keep this click listener here to prevent the row from being selected when clicking on the menu.\n      // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions\n      <span className={`log-row-menu ${styles.rowMenu}`} onClick={onLogRowClick} onBlur={handleBlur}>\n        {pinned && !mouseIsOver && (\n          <IconButton\n            className={styles.unPinButton}\n            size=\"md\"\n            name=\"gf-pin\"\n            onClick={() => onUnpinLine && onUnpinLine(row)}\n            tooltip={t('logs.log-row-menu-cell.tooltip-unpin-line', 'Unpin line')}\n            tooltipPlacement=\"top\"\n            aria-label={t('logs.log-row-menu-cell.aria-label-unpin-line', 'Unpin line')}\n            tabIndex={0}\n          />\n        )}\n        {mouseIsOver && (\n          <>\n            {beforeContent}\n            {shouldShowContextToggle && (\n              <IconButton\n                size=\"md\"\n                name=\"gf-show-context\"\n                onClick={onShowContextClick}\n                tooltip={t('logs.log-row-menu-cell.tooltip-show-context', 'Show context')}\n                tooltipPlacement=\"top\"\n                aria-label={t('logs.log-row-menu-cell.aria-label-show-context', 'Show context')}\n                tabIndex={0}\n              />\n            )}\n            <ClipboardButton\n              className={styles.copyLogButton}\n              icon=\"copy\"\n              variant=\"secondary\"\n              fill=\"text\"\n              size=\"md\"\n              getText={getLogText}\n              tooltip={t('logs.log-row-menu-cell.tooltip-copy-to-clipboard', 'Copy to clipboard')}\n              tooltipPlacement=\"top\"\n              tabIndex={0}\n            />\n            {pinned && onUnpinLine && (\n              <IconButton\n                className={styles.unPinButton}\n                size=\"md\"\n                name=\"gf-pin\"\n                onClick={() => onUnpinLine && onUnpinLine(row)}\n                tooltip={t('logs.log-row-menu-cell.tooltip-unpin-line', 'Unpin line')}\n                tooltipPlacement=\"top\"\n                aria-label={t('logs.log-row-menu-cell.aria-label-unpin-line', 'Unpin line')}\n                tabIndex={0}\n              />\n            )}\n            {!pinned && onPinLine && (\n              <IconButton\n                className={styles.unPinButton}\n                size=\"md\"\n                name=\"gf-pin\"\n                onClick={() => onPinLine && onPinLine(row)}\n                tooltip={pinLineButtonTooltipTitle ?? 'Pin line'}\n                tooltipPlacement=\"top\"\n                aria-label={t('logs.log-row-menu-cell.aria-label-pin-line', 'Pin line')}\n                tabIndex={0}\n              />\n            )}\n            {onPermalinkClick && row.rowId !== undefined && row.uid && (\n              <IconButton\n                tooltip={t('logs.log-row-menu-cell.tooltip-copy-shortlink', 'Copy shortlink')}\n                aria-label={t('logs.log-row-menu-cell.aria-label-copy-shortlink', 'Copy shortlink')}\n                tooltipPlacement=\"top\"\n                size=\"md\"\n                name=\"share-alt\"\n                onClick={() => onPermalinkClick(row)}\n                tabIndex={0}\n              />\n            )}\n            {afterContent}\n          </>\n        )}\n      </span>\n    );\n  }\n);\n\ntype AddonOnClickListener = (event: MouseEvent, row: LogRowModel) => void | undefined;\nfunction addClickListenersToNode(nodes: ReactNode[], row: LogRowModel) {\n  return nodes.map((node, index) => {\n    if (isValidElement(node)) {\n      const onClick: AddonOnClickListener = node.props.onClick;\n      if (!onClick) {\n        return node;\n      }\n      return cloneElement(node, {\n        // @ts-expect-error\n        onClick: (event: MouseEvent<HTMLElement>) => {\n          onClick(event, row);\n        },\n        key: index,\n      });\n    }\n    return node;\n  });\n}\n\nLogRowMenuCell.displayName = 'LogRowMenuCell';\n","import { css } from '@emotion/css';\nimport { memo, ReactNode, SyntheticEvent, useMemo, useState } from 'react';\nimport Highlighter from 'react-highlight-words';\n\nimport { CoreApp, findHighlightChunksInText, GrafanaTheme2, LogRowContextOptions, LogRowModel } from '@grafana/data';\nimport { DataQuery } from '@grafana/schema';\nimport { PopoverContent, useTheme2 } from '@grafana/ui';\nimport { Trans } from 'app/core/internationalization';\n\nimport { LogMessageAnsi } from './LogMessageAnsi';\nimport { LogRowMenuCell } from './LogRowMenuCell';\nimport { LogRowStyles } from './getLogRowStyles';\n\nexport const MAX_CHARACTERS = 100000;\n\ninterface Props {\n  row: LogRowModel;\n  wrapLogMessage: boolean;\n  prettifyLogMessage: boolean;\n  app?: CoreApp;\n  showContextToggle?: (row: LogRowModel) => boolean;\n  onOpenContext: (row: LogRowModel) => void;\n  getRowContextQuery?: (\n    row: LogRowModel,\n    options?: LogRowContextOptions,\n    cacheFilters?: boolean\n  ) => Promise<DataQuery | null>;\n  onPermalinkClick?: (row: LogRowModel) => Promise<void>;\n  onPinLine?: (row: LogRowModel) => void;\n  onUnpinLine?: (row: LogRowModel) => void;\n  pinLineButtonTooltipTitle?: PopoverContent;\n  pinned?: boolean;\n  styles: LogRowStyles;\n  mouseIsOver: boolean;\n  onBlur: () => void;\n  expanded?: boolean;\n  logRowMenuIconsBefore?: ReactNode[];\n  logRowMenuIconsAfter?: ReactNode[];\n}\n\ninterface LogMessageProps {\n  hasAnsi: boolean;\n  entry: string;\n  highlights: string[] | undefined;\n  styles: LogRowStyles;\n}\n\nconst LogMessage = ({ hasAnsi, entry, highlights, styles }: LogMessageProps) => {\n  const excessCharacters = useMemo(() => entry.length - MAX_CHARACTERS, [entry]);\n  const needsHighlighter =\n    highlights && highlights.length > 0 && highlights[0] && highlights[0].length > 0 && excessCharacters <= 0;\n  const searchWords = highlights ?? [];\n  const [showFull, setShowFull] = useState(excessCharacters < 0);\n  const truncatedEntry = useMemo(() => (showFull ? entry : entry.substring(0, MAX_CHARACTERS)), [entry, showFull]);\n\n  if (hasAnsi) {\n    const highlight = needsHighlighter ? { searchWords, highlightClassName: styles.logsRowMatchHighLight } : undefined;\n    return <LogMessageAnsi value={truncatedEntry} highlight={highlight} />;\n  } else if (needsHighlighter) {\n    return (\n      <Highlighter\n        textToHighlight={truncatedEntry}\n        searchWords={searchWords}\n        findChunks={findHighlightChunksInText}\n        highlightClassName={styles.logsRowMatchHighLight}\n      />\n    );\n  }\n  return (\n    <>\n      {truncatedEntry}\n      {!showFull && <Ellipsis showFull={showFull} toggle={setShowFull} diff={excessCharacters} />}\n    </>\n  );\n};\n\ninterface EllipsisProps {\n  showFull: boolean;\n  toggle(state: boolean): void;\n  diff: number;\n}\nconst Ellipsis = ({ toggle, diff }: EllipsisProps) => {\n  const styles = getEllipsisStyles(useTheme2());\n  const handleClick = (e: SyntheticEvent) => {\n    e.stopPropagation();\n    toggle(true);\n  };\n  return (\n    <>\n      <Trans i18nKey=\"logs.log-row-message.ellipsis\"> </Trans>\n      <span className={styles.showMore} onClick={handleClick}>\n        {diff} <Trans i18nKey=\"logs.log-row-message.more\">more</Trans>\n      </span>\n    </>\n  );\n};\n\nconst getEllipsisStyles = (theme: GrafanaTheme2) => ({\n  showMore: css({\n    display: 'inline-flex',\n    fontWeight: theme.typography.fontWeightMedium,\n    fontSize: theme.typography.size.sm,\n    fontFamily: theme.typography.fontFamily,\n    height: theme.spacing(3),\n    padding: theme.spacing(0.25, 1),\n    color: theme.colors.secondary.text,\n    border: `1px solid ${theme.colors.border.strong}`,\n    '&:hover': {\n      background: theme.colors.secondary.transparent,\n      borderColor: theme.colors.emphasize(theme.colors.border.strong, 0.25),\n      color: theme.colors.secondary.text,\n    },\n  }),\n});\n\nconst restructureLog = (\n  line: string,\n  prettifyLogMessage: boolean,\n  wrapLogMessage: boolean,\n  expanded: boolean\n): string => {\n  if (prettifyLogMessage) {\n    try {\n      return JSON.stringify(JSON.parse(line), undefined, 2);\n    } catch (error) {}\n  }\n  // With wrapping disabled, we want to turn it into a single-line log entry unless the line is expanded\n  if (!wrapLogMessage && !expanded) {\n    line = line.replace(/(\\r\\n|\\n|\\r)/g, '');\n  }\n  return line;\n};\n\nexport const LogRowMessage = memo((props: Props) => {\n  const {\n    row,\n    wrapLogMessage,\n    prettifyLogMessage,\n    showContextToggle,\n    styles,\n    onOpenContext,\n    onPermalinkClick,\n    onUnpinLine,\n    onPinLine,\n    pinLineButtonTooltipTitle,\n    pinned,\n    mouseIsOver,\n    onBlur,\n    getRowContextQuery,\n    expanded,\n    logRowMenuIconsBefore,\n    logRowMenuIconsAfter,\n  } = props;\n  const { hasAnsi, raw } = row;\n  const restructuredEntry = useMemo(\n    () => restructureLog(raw, prettifyLogMessage, wrapLogMessage, Boolean(expanded)),\n    [raw, prettifyLogMessage, wrapLogMessage, expanded]\n  );\n  const shouldShowMenu = mouseIsOver || pinned;\n\n  return (\n    <>\n      {\n        // When context is open, the position has to be NOT relative. // Setting the postion as inline-style to\n        // overwrite the more sepecific style definition from `styles.logsRowMessage`.\n      }\n      <td className={styles.logsRowMessage}>\n        <div className={wrapLogMessage ? styles.positionRelative : styles.horizontalScroll}>\n          <div className={`${styles.logLine} ${styles.positionRelative}`}>\n            <LogMessage hasAnsi={hasAnsi} entry={restructuredEntry} highlights={row.searchWords} styles={styles} />\n          </div>\n        </div>\n      </td>\n      <td className={`log-row-menu-cell ${styles.logRowMenuCell}`}>\n        {shouldShowMenu && (\n          <LogRowMenuCell\n            logText={restructuredEntry}\n            row={row}\n            showContextToggle={showContextToggle}\n            getRowContextQuery={getRowContextQuery}\n            onOpenContext={onOpenContext}\n            onPermalinkClick={onPermalinkClick}\n            onPinLine={onPinLine}\n            onUnpinLine={onUnpinLine}\n            pinLineButtonTooltipTitle={pinLineButtonTooltipTitle}\n            pinned={pinned}\n            styles={styles}\n            mouseIsOver={mouseIsOver}\n            onBlur={onBlur}\n            addonBefore={logRowMenuIconsBefore}\n            addonAfter={logRowMenuIconsAfter}\n          />\n        )}\n      </td>\n    </>\n  );\n});\n\nLogRowMessage.displayName = 'LogRowMessage';\n","import { css } from '@emotion/css';\nimport { memo, ReactNode, useMemo } from 'react';\n\nimport { LogRowModel, Field, LinkModel, DataFrame } from '@grafana/data';\n\nimport { LOG_LINE_BODY_FIELD_NAME } from './LogDetailsBody';\nimport { LogRowMenuCell } from './LogRowMenuCell';\nimport { LogRowStyles } from './getLogRowStyles';\nimport { getAllFields } from './logParser';\n\nexport interface Props {\n  row: LogRowModel;\n  detectedFields: string[];\n  wrapLogMessage: boolean;\n  getFieldLinks?: (field: Field, rowIndex: number, dataFrame: DataFrame) => Array<LinkModel<Field>>;\n  styles: LogRowStyles;\n  showContextToggle?: (row: LogRowModel) => boolean;\n  onOpenContext: (row: LogRowModel) => void;\n  onPermalinkClick?: (row: LogRowModel) => Promise<void>;\n  onPinLine?: (row: LogRowModel) => void;\n  onUnpinLine?: (row: LogRowModel) => void;\n  pinned?: boolean;\n  mouseIsOver: boolean;\n  onBlur: () => void;\n  logRowMenuIconsBefore?: ReactNode[];\n  logRowMenuIconsAfter?: ReactNode[];\n  preview?: boolean;\n}\n\nexport const LogRowMessageDisplayedFields = memo((props: Props) => {\n  const {\n    row,\n    detectedFields,\n    getFieldLinks,\n    wrapLogMessage,\n    styles,\n    mouseIsOver,\n    pinned,\n    logRowMenuIconsBefore,\n    logRowMenuIconsAfter,\n    preview,\n    ...rest\n  } = props;\n  const wrapClassName = wrapLogMessage ? '' : displayedFieldsStyles.noWrap;\n  const fields = useMemo(() => getAllFields(row, getFieldLinks), [getFieldLinks, row]);\n  // only single key/value rows are filterable, so we only need the first field key for filtering\n  const line = useMemo(() => {\n    let line = '';\n    for (let i = 0; i < detectedFields.length; i++) {\n      const parsedKey = detectedFields[i];\n\n      if (parsedKey === LOG_LINE_BODY_FIELD_NAME) {\n        line += ` ${row.entry}`;\n      }\n\n      const field = fields.find((field) => {\n        return field.keys[0] === parsedKey;\n      });\n\n      if (field != null) {\n        line += ` ${parsedKey}=${field.values}`;\n      }\n\n      if (row.labels[parsedKey] != null && row.labels[parsedKey] != null) {\n        line += ` ${parsedKey}=${row.labels[parsedKey]}`;\n      }\n    }\n    return line.trimStart();\n  }, [detectedFields, fields, row.entry, row.labels]);\n\n  const shouldShowMenu = mouseIsOver || pinned;\n\n  if (preview) {\n    return (\n      <>\n        <td>\n          <div>{line}</div>\n        </td>\n        <td></td>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <td className={styles.logsRowMessage}>\n        <div className={wrapClassName}>{line}</div>\n      </td>\n      <td className={`log-row-menu-cell ${styles.logRowMenuCell}`}>\n        {shouldShowMenu && (\n          <LogRowMenuCell\n            logText={line}\n            row={row}\n            styles={styles}\n            pinned={pinned}\n            mouseIsOver={mouseIsOver}\n            addonBefore={logRowMenuIconsBefore}\n            addonAfter={logRowMenuIconsAfter}\n            {...rest}\n          />\n        )}\n      </td>\n    </>\n  );\n});\n\nconst displayedFieldsStyles = {\n  noWrap: css({\n    whiteSpace: 'nowrap',\n  }),\n};\n\nLogRowMessageDisplayedFields.displayName = 'LogRowMessageDisplayedFields';\n","import { debounce } from 'lodash';\nimport { MouseEvent, ReactNode, useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport {\n  CoreApp,\n  DataFrame,\n  dateTimeFormat,\n  Field,\n  LinkModel,\n  LogRowContextOptions,\n  LogRowModel,\n  LogsSortOrder,\n} from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { DataQuery, TimeZone } from '@grafana/schema';\nimport { Icon, PopoverContent, Tooltip, useTheme2 } from '@grafana/ui';\nimport { t } from 'app/core/internationalization';\n\nimport { checkLogsError, checkLogsSampled, escapeUnescapedString } from '../utils';\n\nimport { LogDetails } from './LogDetails';\nimport { LogLabels } from './LogLabels';\nimport { LogRowMessage } from './LogRowMessage';\nimport { LogRowMessageDisplayedFields } from './LogRowMessageDisplayedFields';\nimport { getLogLevelStyles, LogRowStyles } from './getLogRowStyles';\n\nexport interface Props {\n  row: LogRowModel;\n  showDuplicates: boolean;\n  showLabels: boolean;\n  showTime: boolean;\n  wrapLogMessage: boolean;\n  prettifyLogMessage: boolean;\n  timeZone: TimeZone;\n  enableLogDetails: boolean;\n  logsSortOrder?: LogsSortOrder | null;\n  forceEscape?: boolean;\n  app?: CoreApp;\n  displayedFields?: string[];\n  getRows: () => LogRowModel[];\n  onClickFilterLabel?: (key: string, value: string, frame?: DataFrame) => void;\n  onClickFilterOutLabel?: (key: string, value: string, frame?: DataFrame) => void;\n  onContextClick?: () => void;\n  getFieldLinks?: (field: Field, rowIndex: number, dataFrame: DataFrame) => Array<LinkModel<Field>>;\n  showContextToggle?: (row: LogRowModel) => boolean;\n  onClickShowField?: (key: string) => void;\n  onClickHideField?: (key: string) => void;\n  onLogRowHover?: (row?: LogRowModel) => void;\n  onOpenContext: (row: LogRowModel, onClose: () => void) => void;\n  getRowContextQuery?: (\n    row: LogRowModel,\n    options?: LogRowContextOptions,\n    cacheFilters?: boolean\n  ) => Promise<DataQuery | null>;\n  onPermalinkClick?: (row: LogRowModel) => Promise<void>;\n  styles: LogRowStyles;\n  permalinkedRowId?: string;\n  scrollIntoView?: (element: HTMLElement) => void;\n  isFilterLabelActive?: (key: string, value: string, refId?: string) => Promise<boolean>;\n  onPinLine?: (row: LogRowModel, allowUnPin?: boolean) => void;\n  onUnpinLine?: (row: LogRowModel) => void;\n  pinLineButtonTooltipTitle?: PopoverContent;\n  pinned?: boolean;\n  handleTextSelection?: (e: MouseEvent<HTMLTableRowElement>, row: LogRowModel) => boolean;\n  logRowMenuIconsBefore?: ReactNode[];\n  logRowMenuIconsAfter?: ReactNode[];\n}\n\nexport const LogRow = ({\n  getRows,\n  onClickFilterLabel,\n  onClickFilterOutLabel,\n  onClickShowField,\n  onClickHideField,\n  enableLogDetails,\n  row,\n  showDuplicates,\n  showContextToggle,\n  showLabels,\n  showTime,\n  displayedFields,\n  wrapLogMessage,\n  prettifyLogMessage,\n  getFieldLinks,\n  forceEscape,\n  app,\n  styles,\n  getRowContextQuery,\n  pinned,\n  logRowMenuIconsBefore,\n  logRowMenuIconsAfter,\n  timeZone,\n  permalinkedRowId,\n  scrollIntoView,\n  handleTextSelection,\n  onLogRowHover,\n  ...props\n}: Props) => {\n  const [showingContext, setShowingContext] = useState(false);\n  const [showDetails, setShowDetails] = useState(false);\n  const [mouseIsOver, setMouseIsOver] = useState(false);\n  const [permalinked, setPermalinked] = useState(false);\n  const logLineRef = useRef<HTMLTableRowElement | null>(null);\n  const theme = useTheme2();\n\n  const timestamp = useMemo(\n    () =>\n      dateTimeFormat(row.timeEpochMs, {\n        timeZone: timeZone,\n        defaultWithMS: true,\n      }),\n    [row.timeEpochMs, timeZone]\n  );\n  const levelStyles = useMemo(() => getLogLevelStyles(theme, row.logLevel), [row.logLevel, theme]);\n  const processedRow = useMemo(\n    () =>\n      row.hasUnescapedContent && forceEscape\n        ? { ...row, entry: escapeUnescapedString(row.entry), raw: escapeUnescapedString(row.raw) }\n        : row,\n    [forceEscape, row]\n  );\n  const errorMessage = checkLogsError(row);\n  const hasError = errorMessage !== undefined;\n  const sampleMessage = checkLogsSampled(row);\n  const isSampled = sampleMessage !== undefined;\n\n  useEffect(() => {\n    if (permalinkedRowId !== row.uid) {\n      setPermalinked(false);\n      return;\n    }\n    if (!permalinked) {\n      setPermalinked(true);\n      return;\n    }\n\n    if (logLineRef.current && scrollIntoView) {\n      // at this point this row is the permalinked row, so we need to scroll to it and highlight it if possible.\n      scrollIntoView(logLineRef.current);\n      reportInteraction('grafana_explore_logs_permalink_opened', {\n        datasourceType: row.datasourceType ?? 'unknown',\n        logRowUid: row.uid,\n      });\n      setPermalinked(true);\n    }\n  }, [permalinked, permalinkedRowId, row.datasourceType, row.uid, scrollIntoView]);\n\n  // we are debouncing the state change by 3 seconds to highlight the logline after the context closed.\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debouncedContextClose = useCallback(\n    debounce(() => {\n      setShowingContext(false);\n    }, 3000),\n    []\n  );\n\n  const onOpenContext = useCallback(\n    (row: LogRowModel) => {\n      setShowingContext(true);\n      props.onOpenContext(row, debouncedContextClose);\n    },\n    [debouncedContextClose, props]\n  );\n\n  const onRowClick = useCallback(\n    (e: MouseEvent<HTMLTableRowElement>) => {\n      if (handleTextSelection?.(e, row)) {\n        // Event handled by the parent.\n        return;\n      }\n\n      if (!enableLogDetails) {\n        return;\n      }\n\n      setShowDetails((showDetails: boolean) => !showDetails);\n    },\n    [enableLogDetails, handleTextSelection, row]\n  );\n\n  const onMouseEnter = useCallback(() => {\n    setMouseIsOver(true);\n    if (onLogRowHover) {\n      onLogRowHover(row);\n    }\n  }, [onLogRowHover, row]);\n\n  const onMouseMove = useCallback(\n    (e: MouseEvent) => {\n      // No need to worry about text selection.\n      if (!handleTextSelection) {\n        return;\n      }\n      // The user is selecting text, so hide the log row menu so it doesn't interfere.\n      if (document.getSelection()?.toString() && e.buttons > 0) {\n        setMouseIsOver(false);\n      }\n    },\n    [handleTextSelection]\n  );\n\n  const onMouseLeave = useCallback(() => {\n    setMouseIsOver(false);\n  }, []);\n\n  return (\n    <>\n      <tr\n        ref={logLineRef}\n        className={`${styles.logsRow} ${hasError ? styles.errorLogRow : ''} ${showingContext || permalinked || pinned ? styles.highlightBackground : ''}`}\n        onClick={onRowClick}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        onMouseMove={onMouseMove}\n        /**\n         * For better accessibility support, we listen to the onFocus event here (to display the LogRowMenuCell), and\n         * to onBlur event in the LogRowMenuCell (to hide it). This way, the LogRowMenuCell is displayed when the user navigates\n         * using the keyboard.\n         */\n        onFocus={onMouseEnter}\n      >\n        {showDuplicates && (\n          <td className={styles.logsRowDuplicates}>\n            {processedRow.duplicates && processedRow.duplicates > 0 ? `${processedRow.duplicates + 1}x` : null}\n          </td>\n        )}\n        <td\n          className={\n            hasError || isSampled ? styles.logsRowWithError : `${levelStyles.logsRowLevelColor} ${styles.logsRowLevel}`\n          }\n        >\n          {hasError && (\n            <Tooltip content={`Error: ${errorMessage}`} placement=\"right\" theme=\"error\">\n              <Icon className={styles.logIconError} name=\"exclamation-triangle\" size=\"xs\" />\n            </Tooltip>\n          )}\n          {isSampled && (\n            <Tooltip content={`${sampleMessage}`} placement=\"right\" theme=\"info\">\n              <Icon className={styles.logIconInfo} name=\"info-circle\" size=\"xs\" />\n            </Tooltip>\n          )}\n        </td>\n        <td\n          title={enableLogDetails ? (showDetails ? 'Hide log details' : 'See log details') : ''}\n          className={enableLogDetails ? styles.logsRowToggleDetails : ''}\n        >\n          {enableLogDetails && (\n            <button\n              aria-label={t('logs.log-row-message.see-details', `See log details`)}\n              className={styles.detailsToggle}\n              aria-expanded={showDetails}\n            >\n              <Icon className={styles.topVerticalAlign} name={showDetails ? 'angle-down' : 'angle-right'} />\n            </button>\n          )}\n        </td>\n        {showTime && <td className={styles.logsRowLocalTime}>{timestamp}</td>}\n        {showLabels && processedRow.uniqueLabels && (\n          <td className={styles.logsRowLabels}>\n            <LogLabels labels={processedRow.uniqueLabels} addTooltip={false} />\n          </td>\n        )}\n        {displayedFields && displayedFields.length > 0 ? (\n          <LogRowMessageDisplayedFields\n            row={processedRow}\n            showContextToggle={showContextToggle}\n            detectedFields={displayedFields}\n            getFieldLinks={getFieldLinks}\n            wrapLogMessage={wrapLogMessage}\n            onOpenContext={onOpenContext}\n            onPermalinkClick={props.onPermalinkClick}\n            styles={styles}\n            onPinLine={props.onPinLine}\n            onUnpinLine={props.onUnpinLine}\n            pinned={pinned}\n            mouseIsOver={mouseIsOver}\n            onBlur={onMouseLeave}\n            logRowMenuIconsBefore={logRowMenuIconsBefore}\n            logRowMenuIconsAfter={logRowMenuIconsAfter}\n          />\n        ) : (\n          <LogRowMessage\n            row={processedRow}\n            showContextToggle={showContextToggle}\n            getRowContextQuery={getRowContextQuery}\n            wrapLogMessage={wrapLogMessage}\n            prettifyLogMessage={prettifyLogMessage}\n            onOpenContext={onOpenContext}\n            onPermalinkClick={props.onPermalinkClick}\n            app={app}\n            styles={styles}\n            onPinLine={props.onPinLine}\n            onUnpinLine={props.onUnpinLine}\n            pinLineButtonTooltipTitle={props.pinLineButtonTooltipTitle}\n            pinned={pinned}\n            mouseIsOver={mouseIsOver}\n            onBlur={onMouseLeave}\n            expanded={showDetails}\n            logRowMenuIconsBefore={logRowMenuIconsBefore}\n            logRowMenuIconsAfter={logRowMenuIconsAfter}\n          />\n        )}\n      </tr>\n      {showDetails && (\n        <LogDetails\n          onPinLine={props.onPinLine}\n          className={`${styles.logsRow} ${hasError ? styles.errorLogRow : ''} ${permalinked && !showDetails ? styles.highlightBackground : ''}`}\n          showDuplicates={showDuplicates}\n          getFieldLinks={getFieldLinks}\n          onClickFilterLabel={onClickFilterLabel}\n          onClickFilterOutLabel={onClickFilterOutLabel}\n          onClickShowField={onClickShowField}\n          onClickHideField={onClickHideField}\n          getRows={getRows}\n          row={processedRow}\n          wrapLogMessage={wrapLogMessage}\n          hasError={hasError}\n          displayedFields={displayedFields}\n          app={app}\n          styles={styles}\n          isFilterLabelActive={props.isFilterLabelActive}\n          pinLineButtonTooltipTitle={props.pinLineButtonTooltipTitle}\n        />\n      )}\n    </>\n  );\n};\n","import { Props } from './LogRow';\nimport { LogRowMessageDisplayedFields } from './LogRowMessageDisplayedFields';\n\nconst emptyFn = () => {};\nexport const PreviewLogRow = ({ row, showDuplicates, showLabels, showTime, displayedFields, ...rest }: Props) => {\n  return (\n    <tr>\n      {showDuplicates && <td></td>}\n      <td></td>\n      <td></td>\n      {showTime && <td>{row.timeEpochMs}</td>}\n      {showLabels && row.uniqueLabels && <td></td>}\n      {displayedFields && displayedFields.length > 0 ? (\n        <LogRowMessageDisplayedFields\n          {...rest}\n          row={row}\n          detectedFields={displayedFields}\n          mouseIsOver={false}\n          onBlur={emptyFn}\n          onOpenContext={emptyFn}\n          preview\n        />\n      ) : (\n        <td className={rest.styles.logsRowMessage}>{row.entry}</td>\n      )}\n      <td className={`log-row-menu-cell ${rest.styles.logRowMenuCell}`}></td>\n    </tr>\n  );\n};\n","import { cx } from '@emotion/css';\nimport { MouseEvent, ReactNode, useState, useMemo, useCallback, useRef, useEffect, memo } from 'react';\n\nimport {\n  TimeZone,\n  LogsDedupStrategy,\n  LogRowModel,\n  Field,\n  LinkModel,\n  LogsSortOrder,\n  CoreApp,\n  DataFrame,\n  LogRowContextOptions,\n} from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { DataQuery } from '@grafana/schema';\nimport { ConfirmModal, Icon, PopoverContent, useTheme2 } from '@grafana/ui';\nimport { t, Trans } from 'app/core/internationalization';\n\nimport { PopoverMenu } from '../../explore/Logs/PopoverMenu';\nimport { UniqueKeyMaker } from '../UniqueKeyMaker';\nimport { disablePopoverMenu, enablePopoverMenu, isPopoverMenuDisabled, sortLogRows, targetIsElement } from '../utils';\n\n//Components\nimport { LogRow } from './LogRow';\nimport { PreviewLogRow } from './PreviewLogRow';\nimport { getLogRowStyles } from './getLogRowStyles';\n\nexport interface Props {\n  logRows?: LogRowModel[];\n  deduplicatedRows?: LogRowModel[];\n  dedupStrategy: LogsDedupStrategy;\n  showLabels: boolean;\n  showTime: boolean;\n  wrapLogMessage: boolean;\n  prettifyLogMessage: boolean;\n  timeZone: TimeZone;\n  enableLogDetails: boolean;\n  logsSortOrder?: LogsSortOrder | null;\n  previewLimit?: number;\n  forceEscape?: boolean;\n  displayedFields?: string[];\n  app?: CoreApp;\n  showContextToggle?: (row: LogRowModel) => boolean;\n  onClickFilterLabel?: (key: string, value: string, frame?: DataFrame) => void;\n  onClickFilterOutLabel?: (key: string, value: string, frame?: DataFrame) => void;\n  getFieldLinks?: (field: Field, rowIndex: number, dataFrame: DataFrame) => Array<LinkModel<Field>>;\n  onClickShowField?: (key: string) => void;\n  onClickHideField?: (key: string) => void;\n  onPinLine?: (row: LogRowModel, allowUnPin?: boolean) => void;\n  onUnpinLine?: (row: LogRowModel) => void;\n  pinLineButtonTooltipTitle?: PopoverContent;\n  onLogRowHover?: (row?: LogRowModel) => void;\n  onOpenContext?: (row: LogRowModel, onClose: () => void) => void;\n  getRowContextQuery?: (\n    row: LogRowModel,\n    options?: LogRowContextOptions,\n    cacheFilters?: boolean\n  ) => Promise<DataQuery | null>;\n  onPermalinkClick?: (row: LogRowModel) => Promise<void>;\n  permalinkedRowId?: string;\n  scrollIntoView?: (element: HTMLElement) => void;\n  isFilterLabelActive?: (key: string, value: string, refId?: string) => Promise<boolean>;\n  pinnedLogs?: string[];\n  /**\n   * If false or undefined, the `contain:strict` css property will be added to the wrapping `<table>` for performance reasons.\n   * Any overflowing content will be clipped at the table boundary.\n   */\n  overflowingContent?: boolean;\n  onClickFilterString?: (value: string, refId?: string) => void;\n  onClickFilterOutString?: (value: string, refId?: string) => void;\n  logRowMenuIconsBefore?: ReactNode[];\n  logRowMenuIconsAfter?: ReactNode[];\n  scrollElement: HTMLDivElement | null;\n  renderPreview?: boolean;\n}\n\ntype PopoverStateType = {\n  selection: string;\n  selectedRow: LogRowModel | null;\n  popoverMenuCoordinates: { x: number; y: number };\n};\n\nexport const LogRows = memo(\n  ({\n    deduplicatedRows,\n    logRows = [],\n    dedupStrategy,\n    logsSortOrder,\n    previewLimit,\n    pinnedLogs,\n    onOpenContext,\n    onClickFilterOutString,\n    onClickFilterString,\n    scrollElement,\n    renderPreview = false,\n    enableLogDetails,\n    permalinkedRowId,\n    ...props\n  }: Props) => {\n    const [previewSize, setPreviewSize] = useState(\n      /**\n       * If renderPreview is enabled, either half of the log rows or twice the screen size of log rows will be rendered.\n       * The biggest of those values will be used. Else, all rows are rendered.\n       */\n      renderPreview && !permalinkedRowId\n        ? Math.max(2 * Math.ceil(window.innerHeight / 20), Math.ceil(logRows.length / 3))\n        : Infinity\n    );\n    const [popoverState, setPopoverState] = useState<PopoverStateType>({\n      selection: '',\n      selectedRow: null,\n      popoverMenuCoordinates: { x: 0, y: 0 },\n    });\n    const [showDisablePopoverOptions, setShowDisablePopoverOptions] = useState(false);\n    const logRowsRef = useRef<HTMLDivElement>(null);\n    const theme = useTheme2();\n    const styles = getLogRowStyles(theme);\n    const dedupedRows = deduplicatedRows ? deduplicatedRows : logRows;\n    const dedupCount = useMemo(\n      () => dedupedRows.reduce((sum, row) => (row.duplicates ? sum + row.duplicates : sum), 0),\n      [dedupedRows]\n    );\n    const showDuplicates = dedupStrategy !== LogsDedupStrategy.none && dedupCount > 0;\n    const orderedRows = useMemo(\n      () => (logsSortOrder ? sortLogRows(dedupedRows, logsSortOrder) : dedupedRows),\n      [dedupedRows, logsSortOrder]\n    );\n    // React profiler becomes unusable if we pass all rows to all rows and their labels, using getter instead\n    const getRows = useMemo(() => () => orderedRows, [orderedRows]);\n    const handleDeselectionRef = useRef<((e: Event) => void) | null>(null);\n    const keyMaker = new UniqueKeyMaker();\n\n    useEffect(() => {\n      return () => {\n        if (handleDeselectionRef.current) {\n          document.removeEventListener('click', handleDeselectionRef.current);\n          document.removeEventListener('contextmenu', handleDeselectionRef.current);\n        }\n      };\n    }, []);\n\n    useEffect(() => {\n      if (!scrollElement) {\n        return;\n      }\n\n      function renderAll() {\n        setPreviewSize(Infinity);\n        scrollElement?.removeEventListener('scroll', renderAll);\n        scrollElement?.removeEventListener('wheel', renderAll);\n      }\n\n      scrollElement.addEventListener('scroll', renderAll);\n      scrollElement.addEventListener('wheel', renderAll);\n    }, [logRows.length, scrollElement]);\n\n    /**\n     * Toggle the `contextIsOpen` state when a context of one LogRow is opened in order to not show the menu of the other log rows.\n     */\n    const openContext = useCallback(\n      (row: LogRowModel, onClose: () => void): void => {\n        if (onOpenContext) {\n          onOpenContext(row, onClose);\n        }\n      },\n      [onOpenContext]\n    );\n\n    const popoverMenuSupported = useCallback(() => {\n      if (!config.featureToggles.logRowsPopoverMenu || isPopoverMenuDisabled()) {\n        return false;\n      }\n      return Boolean(onClickFilterOutString || onClickFilterString);\n    }, [onClickFilterOutString, onClickFilterString]);\n\n    const closePopoverMenu = useCallback(() => {\n      if (handleDeselectionRef.current) {\n        document.removeEventListener('click', handleDeselectionRef.current);\n        document.removeEventListener('contextmenu', handleDeselectionRef.current);\n        handleDeselectionRef.current = null;\n      }\n      setPopoverState({\n        selection: '',\n        popoverMenuCoordinates: { x: 0, y: 0 },\n        selectedRow: null,\n      });\n    }, []);\n\n    const handleDeselection = useCallback(\n      (e: Event) => {\n        if (targetIsElement(e.target) && !logRowsRef.current?.contains(e.target)) {\n          // The mouseup event comes from outside the log rows, close the menu.\n          closePopoverMenu();\n          return;\n        }\n        if (document.getSelection()?.toString()) {\n          return;\n        }\n        closePopoverMenu();\n      },\n      [closePopoverMenu]\n    );\n\n    const handleSelection = useCallback(\n      (e: MouseEvent<HTMLElement>, row: LogRowModel): boolean => {\n        const selection = document.getSelection()?.toString();\n        if (!selection) {\n          return false;\n        }\n        if (e.altKey) {\n          enablePopoverMenu();\n        }\n        if (popoverMenuSupported() === false) {\n          // This signals onRowClick inside LogRow to skip the event because the user is selecting text\n          return selection ? true : false;\n        }\n\n        if (!logRowsRef.current) {\n          return false;\n        }\n\n        const MENU_WIDTH = 270;\n        const MENU_HEIGHT = 105;\n        const x = e.clientX + MENU_WIDTH > window.innerWidth ? window.innerWidth - MENU_WIDTH : e.clientX;\n        const y = e.clientY + MENU_HEIGHT > window.innerHeight ? window.innerHeight - MENU_HEIGHT : e.clientY;\n\n        setPopoverState({\n          selection,\n          popoverMenuCoordinates: { x, y },\n          selectedRow: row,\n        });\n        handleDeselectionRef.current = handleDeselection;\n        document.addEventListener('click', handleDeselection);\n        document.addEventListener('contextmenu', handleDeselection);\n        return true;\n      },\n      [handleDeselection, popoverMenuSupported]\n    );\n\n    const onDisablePopoverMenu = useCallback(() => {\n      setShowDisablePopoverOptions(true);\n    }, []);\n\n    const onDisableCancel = useCallback(() => {\n      setShowDisablePopoverOptions(false);\n    }, []);\n\n    const onDisableConfirm = useCallback(() => {\n      disablePopoverMenu();\n      setShowDisablePopoverOptions(false);\n    }, []);\n\n    return (\n      <div className={styles.logRows} ref={logRowsRef}>\n        {popoverState.selection && popoverState.selectedRow && (\n          <PopoverMenu\n            close={closePopoverMenu}\n            row={popoverState.selectedRow}\n            selection={popoverState.selection}\n            {...popoverState.popoverMenuCoordinates}\n            onClickFilterString={onClickFilterString}\n            onClickFilterOutString={onClickFilterOutString}\n            onDisable={onDisablePopoverMenu}\n          />\n        )}\n        {showDisablePopoverOptions && (\n          <ConfirmModal\n            isOpen\n            title={t('logs.log-rows.disable-popover.title', 'Disable menu')}\n            body={\n              <>\n                <Trans i18nKey=\"logs.log-rows.disable-popover.message\">\n                  You are about to disable the logs filter menu. To re-enable it, select text in a log line while\n                  holding the alt key.\n                </Trans>\n                <div className={styles.shortcut}>\n                  <Icon name=\"keyboard\" />\n                  <Trans i18nKey=\"logs.log-rows.disable-popover-message.shortcut\">alt+select to enable again</Trans>\n                </div>\n              </>\n            }\n            confirmText={t('logs.log-rows.disable-popover.confirm', 'Confirm')}\n            icon=\"exclamation-triangle\"\n            onConfirm={onDisableConfirm}\n            onDismiss={onDisableCancel}\n          />\n        )}\n        <table className={cx(styles.logsRowsTable, props.overflowingContent ? '' : styles.logsRowsTableContain)}>\n          <tbody>\n            {orderedRows.map((row, index) =>\n              index < previewSize ? (\n                <LogRow\n                  key={keyMaker.getKey(row.uid)}\n                  getRows={getRows}\n                  row={row}\n                  showDuplicates={showDuplicates}\n                  logsSortOrder={logsSortOrder}\n                  onOpenContext={openContext}\n                  styles={styles}\n                  onPermalinkClick={props.onPermalinkClick}\n                  scrollIntoView={props.scrollIntoView}\n                  permalinkedRowId={permalinkedRowId}\n                  onPinLine={props.onPinLine}\n                  onUnpinLine={props.onUnpinLine}\n                  pinLineButtonTooltipTitle={props.pinLineButtonTooltipTitle}\n                  pinned={pinnedLogs?.some((logId) => logId === row.rowId || logId === row.uid)}\n                  isFilterLabelActive={props.isFilterLabelActive}\n                  handleTextSelection={handleSelection}\n                  enableLogDetails={enableLogDetails}\n                  {...props}\n                />\n              ) : (\n                <PreviewLogRow\n                  key={`preview_${keyMaker.getKey(row.uid)}`}\n                  enableLogDetails={false}\n                  getRows={getRows}\n                  onOpenContext={openContext}\n                  styles={styles}\n                  showDuplicates={showDuplicates}\n                  {...props}\n                  row={row}\n                />\n              )\n            )}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n);\n","import { css } from '@emotion/css';\nimport memoizeOne from 'memoize-one';\nimport tinycolor from 'tinycolor2';\n\nimport { colorManipulator, GrafanaTheme2, LogLevel } from '@grafana/data';\nimport { styleMixins } from '@grafana/ui';\n\nexport const getLogLevelStyles = (theme: GrafanaTheme2, logLevel?: LogLevel) => {\n  let logColor = theme.isLight ? theme.v1.palette.gray5 : theme.v1.palette.gray2;\n  switch (logLevel) {\n    case LogLevel.crit:\n    case LogLevel.critical:\n      logColor = '#705da0';\n      break;\n    case LogLevel.error:\n    case LogLevel.err:\n      logColor = '#e24d42';\n      break;\n    case LogLevel.warning:\n    case LogLevel.warn:\n      logColor = theme.colors.warning.main;\n      break;\n    case LogLevel.info:\n      logColor = '#7eb26d';\n      break;\n    case LogLevel.debug:\n      logColor = '#1f78c1';\n      break;\n    case LogLevel.trace:\n      logColor = '#6ed0e0';\n      break;\n  }\n\n  return {\n    logsRowLevelColor: css({\n      '&::after': {\n        backgroundColor: logColor,\n      },\n    }),\n  };\n};\n\nexport const getLogRowStyles = memoizeOne((theme: GrafanaTheme2) => {\n  const hoverBgColor = styleMixins.hoverColor(theme.colors.background.secondary, theme);\n  const contextOutlineColor = tinycolor(theme.components.dashboard.background).setAlpha(0.7).toRgbString();\n  return {\n    logsRowLevel: css({\n      label: 'logs-row__level',\n      maxWidth: theme.spacing(1.25),\n      cursor: 'default',\n      '&::after': {\n        content: \"''\",\n        display: 'block',\n        position: 'absolute',\n        top: '1px',\n        bottom: '1px',\n        width: '3px',\n        left: theme.spacing(0.5),\n      },\n    }),\n    // Compared to logsRowLevel we need to make error logs wider to accommodate the icon\n    logsRowWithError: css({\n      maxWidth: `${theme.spacing(1.5)}`,\n    }),\n    logsRowMatchHighLight: css({\n      label: 'logs-row__match-highlight',\n      background: 'inherit',\n      padding: 'inherit',\n      color: theme.components.textHighlight.text,\n      backgroundColor: theme.components.textHighlight.background,\n    }),\n    logRows: css({\n      position: 'relative',\n    }),\n    shortcut: css({\n      display: 'inline-flex',\n      alignItems: 'center',\n      gap: theme.spacing(1),\n      color: theme.colors.text.secondary,\n      opacity: 0.7,\n      fontSize: theme.typography.bodySmall.fontSize,\n      marginTop: theme.spacing(1),\n    }),\n    logsRowsTable: css({\n      label: 'logs-rows',\n      fontFamily: theme.typography.fontFamilyMonospace,\n      fontSize: theme.typography.bodySmall.fontSize,\n      width: '100%',\n      position: 'relative',\n    }),\n    logsRowsTableContain: css({\n      contain: 'strict',\n    }),\n    highlightBackground: css({\n      backgroundColor: tinycolor(theme.colors.info.transparent).setAlpha(0.25).toString(),\n    }),\n    logsRow: css({\n      label: 'logs-row',\n      width: '100%',\n      cursor: 'pointer',\n      verticalAlign: 'top',\n\n      '&:focus-within': {\n        outline: `2px solid ${theme.colors.primary.border}`,\n        outlineOffset: '-2px',\n      },\n\n      '&:hover': {\n        '.log-row-menu': {\n          zIndex: 1,\n        },\n\n        background: hoverBgColor,\n      },\n\n      'td:not(.log-row-menu-cell):last-child': {\n        width: '100%',\n      },\n\n      '> td:not(.log-row-menu-cell)': {\n        position: 'relative',\n        paddingRight: theme.spacing(1),\n        borderTop: '1px solid transparent',\n        borderBottom: '1px solid transparent',\n        height: '100%',\n      },\n    }),\n    logsRowDuplicates: css({\n      label: 'logs-row__duplicates',\n      textAlign: 'right',\n      width: '4em',\n      cursor: 'default',\n    }),\n    logIconError: css({\n      color: theme.colors.warning.main,\n      position: 'relative',\n      top: '-2px',\n    }),\n    logIconInfo: css({\n      color: theme.colors.info.main,\n      position: 'relative',\n      top: '-2px',\n    }),\n    logsRowToggleDetails: css({\n      label: 'logs-row-toggle-details__level',\n      fontSize: '9px',\n      maxWidth: '15px',\n    }),\n    logsRowLocalTime: css({\n      label: 'logs-row__localtime',\n      whiteSpace: 'nowrap',\n    }),\n    logsRowLabels: css({\n      label: 'logs-row__labels',\n      whiteSpace: 'nowrap',\n      maxWidth: '22em',\n\n      /* This is to make the labels vertical align */\n      '> span': {\n        marginTop: '0.75px',\n      },\n    }),\n    logsRowMessage: css({\n      label: 'logs-row__message',\n      whiteSpace: 'pre-wrap',\n      wordBreak: 'break-all',\n      overflowWrap: 'anywhere',\n      width: '100%',\n      textAlign: 'left',\n    }),\n    copyLogButton: css({\n      padding: theme.spacing(0, 0, 0, 0.5),\n      height: theme.spacing(3),\n      width: theme.spacing(3.25),\n      lineHeight: theme.spacing(2.5),\n      overflow: 'hidden',\n      '&:hover': {\n        backgroundColor: colorManipulator.alpha(theme.colors.text.primary, 0.12),\n      },\n    }),\n    //Log details specific CSS\n    logDetailsContainer: css({\n      label: 'logs-row-details-table',\n      border: `1px solid ${theme.colors.border.medium}`,\n      padding: theme.spacing(0, 1, 1),\n      borderRadius: theme.shape.radius.default,\n      margin: theme.spacing(2.5, 1, 2.5, 2),\n      cursor: 'default',\n    }),\n    logDetailsTable: css({\n      label: 'logs-row-details-table',\n      lineHeight: '18px',\n      width: '100%',\n      'td:last-child': {\n        width: '100%',\n      },\n    }),\n    logsDetailsIcon: css({\n      label: 'logs-row-details__icon',\n      position: 'relative',\n      color: theme.v1.palette.gray3,\n      paddingTop: '1px',\n      paddingBottom: '1px',\n      paddingRight: theme.spacing(0.75),\n    }),\n    logDetailsLabel: css({\n      label: 'logs-row-details__label',\n      maxWidth: '30em',\n      minMidth: '20em',\n      padding: theme.spacing(0, 1),\n      overflowWrap: 'break-word',\n    }),\n    logDetailsHeading: css({\n      label: 'logs-row-details__heading',\n      fontWeight: theme.typography.fontWeightBold,\n      padding: theme.spacing(1, 0, 0.5),\n    }),\n    logDetailsValue: css({\n      label: 'logs-row-details__row',\n      position: 'relative',\n      verticalAlign: 'middle',\n      cursor: 'default',\n\n      '&:hover': {\n        backgroundColor: hoverBgColor,\n      },\n    }),\n    detailsToggle: css({\n      appearance: 'none',\n      background: 'none',\n      border: 'none',\n      padding: 0,\n      // Don't increase the height of the row\n      maxHeight: '19px',\n\n      // Don't show default button box-shadow on focus, we apply outline to the entire row instead\n      '&:focus-visible': {\n        boxShadow: 'none',\n      },\n\n      '&:focus': {\n        outline: 0,\n      },\n      '&:after': {\n        content: '\"\"',\n        inset: 0,\n        position: 'absolute',\n      },\n    }),\n\n    // Log row\n    topVerticalAlign: css({\n      label: 'topVerticalAlign',\n      marginTop: theme.spacing(-0.9),\n      marginLeft: theme.spacing(-0.25),\n    }),\n    detailsOpen: css({\n      '&:hover': {\n        backgroundColor: styleMixins.hoverColor(theme.colors.background.primary, theme),\n      },\n    }),\n    errorLogRow: css({\n      label: 'erroredLogRow',\n      color: theme.colors.text.secondary,\n    }),\n    // Log Row Message\n    positionRelative: css({\n      label: 'positionRelative',\n      position: 'relative',\n    }),\n    rowWithContext: css({\n      label: 'rowWithContext',\n      zIndex: 1,\n      outline: `9999px solid ${contextOutlineColor}`,\n      display: 'inherit',\n    }),\n    horizontalScroll: css({\n      label: 'horizontalScroll',\n      whiteSpace: 'pre',\n    }),\n    contextNewline: css({\n      display: 'block',\n      marginLeft: '0px',\n    }),\n    rowMenu: css({\n      label: 'rowMenu',\n      display: 'flex',\n      flexWrap: 'nowrap',\n      flexDirection: 'row',\n      alignContent: 'flex-end',\n      justifyContent: 'space-evenly',\n      alignItems: 'center',\n      position: 'absolute',\n      top: 0,\n      bottom: 'auto',\n      background: theme.colors.background.primary,\n      boxShadow: theme.shadows.z3,\n      padding: theme.spacing(0.5, 1, 0.5, 1),\n      zIndex: 100,\n      gap: theme.spacing(0.5),\n\n      '& > button': {\n        margin: 0,\n      },\n    }),\n    logRowMenuCell: css({\n      position: 'sticky',\n      zIndex: theme.zIndex.dropdown,\n      marginTop: theme.spacing(-0.125),\n      right: 0,\n\n      '& > span': {\n        transform: 'translateX(-100%)',\n      },\n    }),\n    logLine: css({\n      fontFamily: theme.typography.fontFamilyMonospace,\n      fontSize: theme.typography.bodySmall.fontSize,\n      letterSpacing: theme.typography.bodySmall.letterSpacing,\n      textAlign: 'left',\n      padding: 0,\n      userSelect: 'text',\n    }),\n    // Log details\n    logsRowLevelDetails: css({\n      label: 'logs-row__level_details',\n      '&::after': {\n        top: '-3px',\n      },\n    }),\n    logDetails: css({\n      label: 'logDetailsDefaultCursor',\n      cursor: 'default',\n\n      '&:hover': {\n        backgroundColor: theme.colors.background.primary,\n      },\n    }),\n    visibleRowMenu: css({\n      label: 'visibleRowMenu',\n      aspectRatio: '1/1',\n      zIndex: 90,\n    }),\n    linkButton: css({\n      label: 'linkButton',\n      '> button': {\n        paddingTop: theme.spacing(0.5),\n      },\n    }),\n    hidden: css({\n      label: 'hidden',\n      visibility: 'hidden',\n    }),\n    unPinButton: css({\n      height: theme.spacing(3),\n      lineHeight: theme.spacing(2.5),\n    }),\n  };\n});\n\nexport type LogRowStyles = ReturnType<typeof getLogRowStyles>;\n","import { css } from '@emotion/css';\nimport { useCallback } from 'react';\nimport * as React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Button, InlineSwitch, useStyles2 } from '@grafana/ui';\nimport { t, Trans } from 'app/core/internationalization';\n\nexport type Props = {\n  wrapLines?: boolean;\n  onChangeWrapLines: (wrapLines: boolean) => void;\n  onScrollCenterClick: () => void;\n};\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    buttons: css({\n      display: 'flex',\n      gap: theme.spacing(1),\n    }),\n  };\n}\n\nexport const LogContextButtons = (props: Props) => {\n  const styles = useStyles2(getStyles);\n  const { wrapLines, onChangeWrapLines, onScrollCenterClick } = props;\n  const internalOnChangeWrapLines = useCallback(\n    (event: React.FormEvent<HTMLInputElement>) => {\n      const state = event.currentTarget.checked;\n      reportInteraction('grafana_explore_logs_log_context_toggle_lines_clicked', {\n        state,\n      });\n      onChangeWrapLines(state);\n    },\n    [onChangeWrapLines]\n  );\n\n  return (\n    <div className={styles.buttons}>\n      <InlineSwitch\n        showLabel\n        value={wrapLines}\n        onChange={internalOnChangeWrapLines}\n        label={t('logs.log-context-buttons.label-wrap-lines', 'Wrap lines')}\n      />\n      <Button variant=\"secondary\" onClick={onScrollCenterClick}>\n        <Trans i18nKey=\"logs.log-context-buttons.center-matched-line\">Center matched line</Trans>\n      </Button>\n    </div>\n  );\n};\n","import { css, cx } from '@emotion/css';\nimport { partition } from 'lodash';\nimport { useCallback, useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport * as React from 'react';\nimport { useAsync } from 'react-use';\n\nimport {\n  DataQueryResponse,\n  DataSourceWithLogsContextSupport,\n  GrafanaTheme2,\n  LogRowContextOptions,\n  LogRowContextQueryDirection,\n  LogRowModel,\n  LogsDedupStrategy,\n  LogsSortOrder,\n  dateTime,\n  TimeRange,\n  LoadingState,\n} from '@grafana/data';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { DataQuery, TimeZone } from '@grafana/schema';\nimport { Button, Modal, useTheme2 } from '@grafana/ui';\nimport { t, Trans } from 'app/core/internationalization';\nimport store from 'app/core/store';\nimport { SETTINGS_KEYS } from 'app/features/explore/Logs/utils/logs';\nimport { splitOpen } from 'app/features/explore/state/main';\nimport { useDispatch } from 'app/types';\n\nimport { dataFrameToLogsModel } from '../../logsModel';\nimport { sortLogRows } from '../../utils';\nimport { LoadingIndicator } from '../LoadingIndicator';\nimport { LogRows } from '../LogRows';\n\nimport { LogContextButtons } from './LogContextButtons';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    modal: css({\n      width: '85vw',\n      [theme.breakpoints.down('md')]: {\n        width: '100%',\n      },\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -50%)',\n    }),\n    sticky: css({\n      position: 'sticky',\n      zIndex: 1,\n      top: '-1px',\n      bottom: '-1px',\n    }),\n    entry: css({\n      '& > td': {\n        padding: theme.spacing(1, 0, 1, 0),\n      },\n      background: theme.colors.emphasize(theme.colors.background.secondary),\n\n      '& > table': {\n        marginBottom: 0,\n      },\n\n      '& .log-row-menu': {\n        marginTop: '-6px',\n      },\n    }),\n    datasourceUi: css({\n      paddingBottom: theme.spacing(1.25),\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    logRowGroups: css({\n      overflow: 'auto',\n      maxHeight: '75%',\n      alignSelf: 'stretch',\n      display: 'inline-block',\n      border: `1px solid ${theme.colors.border.weak}`,\n      borderRadius: theme.shape.radius.default,\n      '& > table': {\n        minWidth: '100%',\n      },\n    }),\n    flexColumn: css({\n      display: 'flex',\n      flexDirection: 'column',\n      padding: theme.spacing(0, 3, 3, 3),\n    }),\n    flexRow: css({\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      '& > div:last-child': {\n        marginLeft: 'auto',\n      },\n    }),\n    noMarginBottom: css({\n      '& > table': {\n        marginBottom: 0,\n      },\n    }),\n    hidden: css({\n      display: 'none',\n    }),\n    paddingTop: css({\n      paddingTop: theme.spacing(1),\n    }),\n    paddingBottom: css({\n      paddingBottom: theme.spacing(1),\n    }),\n    link: css({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize,\n      ':hover': {\n        color: theme.colors.text.link,\n      },\n    }),\n    loadingCell: css({\n      position: 'sticky',\n      left: '50%',\n      display: 'inline-block',\n      transform: 'translateX(-50%)',\n    }),\n  };\n};\n\ninterface LogRowContextModalProps {\n  row: LogRowModel;\n  open: boolean;\n  timeZone: TimeZone;\n  onClose: () => void;\n  getRowContext: (row: LogRowModel, options: LogRowContextOptions) => Promise<DataQueryResponse>;\n\n  getRowContextQuery?: (\n    row: LogRowModel,\n    options?: LogRowContextOptions,\n    cacheFilters?: boolean\n  ) => Promise<DataQuery | null>;\n  logsSortOrder: LogsSortOrder;\n  runContextQuery?: () => void;\n  getLogRowContextUi?: DataSourceWithLogsContextSupport['getLogRowContextUi'];\n}\n\ntype Section = {\n  loadingState: LoadingState;\n  rows: LogRowModel[];\n};\ntype Place = 'above' | 'below';\ntype Context = Record<Place, Section>;\n\nconst makeEmptyContext = (): Context => ({\n  above: { loadingState: LoadingState.NotStarted, rows: [] },\n  below: { loadingState: LoadingState.NotStarted, rows: [] },\n});\n\nconst getLoadMoreDirection = (place: Place, sortOrder: LogsSortOrder): LogRowContextQueryDirection => {\n  if (place === 'above' && sortOrder === LogsSortOrder.Descending) {\n    return LogRowContextQueryDirection.Forward;\n  }\n  if (place === 'below' && sortOrder === LogsSortOrder.Ascending) {\n    return LogRowContextQueryDirection.Forward;\n  }\n\n  return LogRowContextQueryDirection.Backward;\n};\n\ntype LoadCounter = Record<Place, number>;\n\nconst normalizeLogRowRefId = (row: LogRowModel, counter: LoadCounter): LogRowModel => {\n  // the datasoure plugins often create the context-query based on the row's dataframe's refId,\n  // by appending something to it. for example:\n  // - let's say the row's dataframe's refId is \"query\"\n  // - the datasource plugin will take \"query\" and append \"-context\" to it, so it becomes \"query-context\".\n  // - later we want to load even more lines, so we make a context query\n  // - the datasource plugin does the same transform again, but now the source is \"query-context\",\n  //   so the new refId becomes \"query-context-context\"\n  // - next time it becomes \"query-context-context-context\", and so on.\n  // we do not want refIds to grow unbounded.\n  // to avoid this, we set the refId to a value that does not grow.\n  // on the other hand, the refId is also used in generating the row's UID, so it is useful\n  // when the refId is not always the exact same string, otherwise UID duplication can occur,\n  // which may cause problems.\n  // so we go with an approach where the refId always changes, but does not grow.\n  return {\n    ...row,\n    dataFrame: {\n      ...row.dataFrame,\n      refId: `context_${counter.above}_${counter.below}`,\n    },\n  };\n};\n\nconst containsRow = (rows: LogRowModel[], row: LogRowModel) => {\n  return rows.some((r) => r.entry === row.entry && r.timeEpochNs === row.timeEpochNs);\n};\n\nconst PAGE_SIZE = 100;\n\nexport const LogRowContextModal: React.FunctionComponent<LogRowContextModalProps> = ({\n  row,\n  open,\n  logsSortOrder,\n  timeZone,\n  getLogRowContextUi,\n  getRowContextQuery,\n  onClose,\n  getRowContext,\n}) => {\n  const scrollElement = useRef<HTMLDivElement | null>(null);\n  const entryElement = useRef<HTMLTableRowElement | null>(null);\n  // We can not use `entryElement` to scroll to the right element because it's\n  // sticky. That's why we add another row and use this ref to scroll to that\n  // first.\n  const preEntryElement = useRef<HTMLTableRowElement | null>(null);\n\n  const prevScrollHeightRef = useRef<number | null>(null);\n  const prevClientHeightRef = useRef<number | null>(null);\n\n  const aboveLoadingElement = useRef<HTMLDivElement | null>(null);\n  const belowLoadingElement = useRef<HTMLDivElement | null>(null);\n\n  const loadCountRef = useRef<LoadCounter>({ above: 0, below: 0 });\n\n  const dispatch = useDispatch();\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  const [sticky, setSticky] = useState(true);\n\n  // we need to keep both the \"above\" and \"below\" rows\n  // in the same react-state, to be able to atomically change both\n  // at the same time.\n  // we create the `setSection` convenience function to adjust any\n  // part of it easily.\n  const [context, setContext] = useState<Context>(makeEmptyContext());\n  const setSection = (place: Place, fun: (s: Section) => Section) => {\n    setContext((c) => {\n      const newContext = { ...c };\n      newContext[place] = fun(c[place]);\n      return newContext;\n    });\n  };\n\n  // this is used to \"cancel\" the ongoing load-more requests.\n  // whenever we want to cancel them, we increment this number.\n  // and when those requests return, we check if the number\n  // is still the same as when we started. and if it is not the same,\n  // we ignore the results.\n  //\n  // best would be to literally cancel those requests,\n  // but right now there's no way with the current logs-context API.\n  const generationRef = useRef(1);\n\n  const [contextQuery, setContextQuery] = useState<DataQuery | null>(null);\n  const [wrapLines, setWrapLines] = useState(\n    store.getBool(SETTINGS_KEYS.logContextWrapLogMessage, store.getBool(SETTINGS_KEYS.wrapLogMessage, true))\n  );\n  const getFullTimeRange = useCallback(() => {\n    const { below, above } = context;\n    const allRows = sortLogRows([...below.rows, row, ...above.rows], LogsSortOrder.Ascending);\n    const fromMs = allRows[0].timeEpochMs;\n    let toMs = allRows[allRows.length - 1].timeEpochMs;\n    // In case we have a lot of logs and from and to have same millisecond\n    // we add 1 millisecond to toMs to make sure we have a range\n    if (fromMs === toMs) {\n      toMs += 1;\n    }\n    const from = dateTime(fromMs);\n    const to = dateTime(toMs);\n\n    const range: TimeRange = {\n      from,\n      to,\n      raw: {\n        from,\n        to,\n      },\n    };\n    return range;\n  }, [context, row]);\n\n  const updateContextQuery = useCallback(async () => {\n    const contextQuery = getRowContextQuery ? await getRowContextQuery(row) : null;\n    setContextQuery(contextQuery);\n  }, [row, getRowContextQuery]);\n\n  const updateResults = async () => {\n    await updateContextQuery();\n    setContext(makeEmptyContext());\n    loadCountRef.current = { above: 0, below: 0 };\n    generationRef.current += 1; // results from currently running loadMore calls will be ignored\n  };\n\n  const loadMore = async (place: Place, allRows: LogRowModel[]): Promise<LogRowModel[]> => {\n    loadCountRef.current[place] += 1;\n    const refRow = allRows.at(place === 'above' ? 0 : -1);\n    if (refRow == null) {\n      throw new Error('should never happen. the array always contains at least 1 item (the middle row)');\n    }\n\n    reportInteraction('grafana_explore_logs_log_context_load_more_called', {\n      datasourceType: refRow.datasourceType,\n      above: loadCountRef.current.above,\n      below: loadCountRef.current.below,\n    });\n\n    const direction = getLoadMoreDirection(place, logsSortOrder);\n\n    const result = await getRowContext(normalizeLogRowRefId(refRow, loadCountRef.current), {\n      limit: PAGE_SIZE,\n      direction,\n    });\n    const newRows = dataFrameToLogsModel(result.data).rows;\n\n    if (logsSortOrder === LogsSortOrder.Ascending) {\n      newRows.reverse();\n    }\n\n    const out = newRows.filter((r) => {\n      return !containsRow(allRows, r);\n    });\n\n    return out;\n  };\n\n  useEffect(() => {\n    if (open) {\n      updateContextQuery();\n    }\n  }, [updateContextQuery, open]);\n\n  const [displayedFields, setDisplayedFields] = useState<string[]>([]);\n\n  const showField = (key: string) => {\n    const index = displayedFields.indexOf(key);\n\n    if (index === -1) {\n      setDisplayedFields([...displayedFields, key]);\n    }\n  };\n\n  const hideField = (key: string) => {\n    const index = displayedFields.indexOf(key);\n\n    if (index > -1) {\n      displayedFields.splice(index, 1);\n      setDisplayedFields([...displayedFields]);\n    }\n  };\n\n  const maybeLoadMore = async (place: Place) => {\n    const { below, above } = context;\n    const section = context[place];\n    if (section.loadingState === LoadingState.Loading) {\n      return;\n    }\n\n    setSection(place, (section) => ({\n      ...section,\n      loadingState: LoadingState.Loading,\n    }));\n\n    const currentGen = generationRef.current;\n    try {\n      // we consider all the currently existing rows, even the original row,\n      // this way this array of rows will never be empty\n      const allRows = [...above.rows, row, ...below.rows];\n\n      const newRows = (await loadMore(place, allRows)).map((r) =>\n        // apply the original row's searchWords to all the rows for highlighting\n        !r.searchWords || !r.searchWords?.length ? { ...r, searchWords: row.searchWords } : r\n      );\n      const [older, newer] = partition(newRows, (newRow) => newRow.timeEpochNs > row.timeEpochNs);\n      const newAbove = logsSortOrder === LogsSortOrder.Ascending ? newer : older;\n      const newBelow = logsSortOrder === LogsSortOrder.Ascending ? older : newer;\n\n      if (currentGen === generationRef.current) {\n        setContext((c) => {\n          // we should only modify the row-arrays if necessary\n          const sortedNewAbove =\n            newAbove.length > 0 ? sortLogRows([...newAbove, ...c.above.rows], logsSortOrder) : c.above.rows;\n          const sortedNewBelow =\n            newBelow.length > 0 ? sortLogRows([...c.below.rows, ...newBelow], logsSortOrder) : c.below.rows;\n          return {\n            above: {\n              rows: sortedNewAbove,\n              loadingState:\n                place === 'above'\n                  ? newRows.length === 0\n                    ? LoadingState.Done\n                    : LoadingState.NotStarted\n                  : c.above.loadingState,\n            },\n            below: {\n              rows: sortedNewBelow,\n              loadingState:\n                place === 'below'\n                  ? newRows.length === 0\n                    ? LoadingState.Done\n                    : LoadingState.NotStarted\n                  : c.below.loadingState,\n            },\n          };\n        });\n      }\n    } catch {\n      setSection(place, (section) => ({\n        rows: section.rows,\n        loadingState: LoadingState.Error,\n      }));\n    }\n  };\n\n  const onScrollHit = async (entries: IntersectionObserverEntry[], observer: IntersectionObserver) => {\n    for (const entry of entries) {\n      // If the element is not intersecting, skip to the next one\n      if (!entry.isIntersecting) {\n        continue;\n      }\n\n      const targetElement = entry.target;\n\n      if (targetElement === aboveLoadingElement.current) {\n        maybeLoadMore('above');\n      } else if (targetElement === belowLoadingElement.current) {\n        maybeLoadMore('below');\n      }\n    }\n  };\n\n  useEffect(() => {\n    const scroll = scrollElement.current;\n    const aboveElem = aboveLoadingElement.current;\n    const belowElem = belowLoadingElement.current;\n\n    if (scroll == null) {\n      // should not happen, but need to make typescript happy\n      return;\n    }\n\n    const observer = new IntersectionObserver(onScrollHit, { root: scroll });\n\n    if (aboveElem != null) {\n      observer.observe(aboveElem);\n    }\n\n    if (belowElem != null) {\n      observer.observe(belowElem);\n    }\n\n    return () => {\n      observer.disconnect();\n    };\n  }); // on every render, why not\n\n  const scrollToCenter = useCallback(() => {\n    preEntryElement.current?.scrollIntoView({ block: 'center' });\n    entryElement.current?.scrollIntoView({ block: 'center' });\n  }, [preEntryElement, entryElement]);\n\n  useLayoutEffect(() => {\n    const scrollE = scrollElement.current;\n    if (scrollE == null) {\n      return;\n    }\n\n    const prevClientHeight = prevClientHeightRef.current;\n    const currentClientHeight = scrollE.clientHeight;\n    prevClientHeightRef.current = currentClientHeight;\n    if (prevClientHeight !== currentClientHeight) {\n      // height has changed, we scroll to the center\n      scrollToCenter();\n      return;\n    }\n\n    // if the newly loaded content is part of the initial load of `above` and `below`,\n    // we scroll to center, to keep the chosen log-row centered\n    if (loadCountRef.current.above <= 1 && loadCountRef.current.below <= 1) {\n      scrollToCenter();\n      return;\n    }\n\n    const prevScrollHeight = prevScrollHeightRef.current;\n    const currentHeight = scrollE.scrollHeight;\n    prevScrollHeightRef.current = currentHeight;\n    if (prevScrollHeight != null) {\n      const newScrollTop = scrollE.scrollTop + (currentHeight - prevScrollHeight);\n      scrollE.scrollTop = newScrollTop;\n    }\n  }, [context.above.rows, scrollToCenter]);\n\n  useAsync(updateContextQuery, [getRowContextQuery, row]);\n\n  const loadingStateAbove = context.above.loadingState;\n  const loadingStateBelow = context.below.loadingState;\n\n  return (\n    <Modal\n      isOpen={open}\n      title={t('logs.log-row-context-modal.title-log-context', 'Log context')}\n      contentClassName={styles.flexColumn}\n      className={styles.modal}\n      onDismiss={onClose}\n    >\n      {config.featureToggles.logsContextDatasourceUi && getLogRowContextUi && (\n        <div className={styles.datasourceUi}>{getLogRowContextUi(row, updateResults)}</div>\n      )}\n      <div className={cx(styles.flexRow, styles.paddingBottom)}>\n        <div>\n          <LogContextButtons\n            wrapLines={wrapLines}\n            onChangeWrapLines={setWrapLines}\n            onScrollCenterClick={scrollToCenter}\n          />\n        </div>\n      </div>\n      <div ref={scrollElement} className={styles.logRowGroups}>\n        <table>\n          <tbody>\n            <tr>\n              <td className={styles.loadingCell}>\n                {loadingStateAbove !== LoadingState.Done && loadingStateAbove !== LoadingState.Error && (\n                  <div ref={aboveLoadingElement}>\n                    <LoadingIndicator adjective=\"newer\" />\n                  </div>\n                )}\n                {loadingStateAbove === LoadingState.Error && (\n                  <div>\n                    <Trans i18nKey=\"logs.log-row-context-modal.error-loading-log-more-logs\">\n                      Error loading more logs.\n                    </Trans>\n                  </div>\n                )}\n                {loadingStateAbove === LoadingState.Done && (\n                  <div>\n                    <Trans i18nKey=\"logs.log-row-context-modal.no-more-logs-available\">No more logs available.</Trans>\n                  </div>\n                )}\n              </td>\n            </tr>\n            <tr>\n              <td className={styles.noMarginBottom}>\n                <LogRows\n                  logRows={context.above.rows}\n                  dedupStrategy={LogsDedupStrategy.none}\n                  showLabels={store.getBool(SETTINGS_KEYS.showLabels, false)}\n                  showTime={store.getBool(SETTINGS_KEYS.showTime, true)}\n                  wrapLogMessage={wrapLines}\n                  prettifyLogMessage={store.getBool(SETTINGS_KEYS.prettifyLogMessage, false)}\n                  enableLogDetails={true}\n                  timeZone={timeZone}\n                  displayedFields={displayedFields}\n                  onClickShowField={showField}\n                  onClickHideField={hideField}\n                  scrollElement={null}\n                />\n              </td>\n            </tr>\n            <tr ref={preEntryElement}></tr>\n            <tr ref={entryElement} className={cx(styles.entry, sticky ? styles.sticky : null)} data-testid=\"entry-row\">\n              <td className={styles.noMarginBottom}>\n                <LogRows\n                  logRows={[row]}\n                  dedupStrategy={LogsDedupStrategy.none}\n                  showLabels={store.getBool(SETTINGS_KEYS.showLabels, false)}\n                  showTime={store.getBool(SETTINGS_KEYS.showTime, true)}\n                  wrapLogMessage={wrapLines}\n                  prettifyLogMessage={store.getBool(SETTINGS_KEYS.prettifyLogMessage, false)}\n                  enableLogDetails={true}\n                  timeZone={timeZone}\n                  displayedFields={displayedFields}\n                  onClickShowField={showField}\n                  onClickHideField={hideField}\n                  onUnpinLine={() => setSticky(false)}\n                  onPinLine={() => setSticky(true)}\n                  pinnedLogs={sticky ? [row.uid] : undefined}\n                  overflowingContent={true}\n                  scrollElement={null}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <>\n                  <LogRows\n                    logRows={context.below.rows}\n                    dedupStrategy={LogsDedupStrategy.none}\n                    showLabels={store.getBool(SETTINGS_KEYS.showLabels, false)}\n                    showTime={store.getBool(SETTINGS_KEYS.showTime, true)}\n                    wrapLogMessage={wrapLines}\n                    prettifyLogMessage={store.getBool(SETTINGS_KEYS.prettifyLogMessage, false)}\n                    enableLogDetails={true}\n                    timeZone={timeZone}\n                    displayedFields={displayedFields}\n                    onClickShowField={showField}\n                    onClickHideField={hideField}\n                    scrollElement={null}\n                  />\n                </>\n              </td>\n            </tr>\n            <tr>\n              <td className={styles.loadingCell}>\n                {loadingStateBelow !== LoadingState.Done && loadingStateBelow !== LoadingState.Error && (\n                  <div ref={belowLoadingElement}>\n                    <LoadingIndicator adjective=\"older\" />\n                  </div>\n                )}\n                {loadingStateBelow === LoadingState.Error && (\n                  <div>\n                    <Trans i18nKey=\"logs.log-row-context-modal.error-loading-log-more-logs\">\n                      Error loading more logs.\n                    </Trans>\n                  </div>\n                )}\n                {loadingStateBelow === LoadingState.Done && (\n                  <div>\n                    <Trans i18nKey=\"logs.log-row-context-modal.no-more-logs-available\">No more logs available.</Trans>\n                  </div>\n                )}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <Modal.ButtonRow>\n        {contextQuery?.datasource?.uid && (\n          <Button\n            variant=\"secondary\"\n            onClick={async () => {\n              let rowId = row.uid;\n              if (row.dataFrame.refId) {\n                // the orignal row has the refid from the base query and not the refid from the context query, so we need to replace it.\n                rowId = row.uid.replace(row.dataFrame.refId, contextQuery.refId);\n              }\n\n              dispatch(\n                splitOpen({\n                  queries: [contextQuery],\n                  range: getFullTimeRange(),\n                  datasourceUid: contextQuery.datasource!.uid!,\n                  panelsState: {\n                    logs: {\n                      id: rowId,\n                    },\n                  },\n                })\n              );\n              onClose();\n              reportInteraction('grafana_explore_logs_log_context_open_split_view_clicked', {\n                datasourceType: row.datasourceType,\n                logRowUid: row.uid,\n              });\n            }}\n          >\n            <Trans i18nKey=\"logs.log-row-context-modal.open-in-split-view\">Open in split view</Trans>\n          </Button>\n        )}\n      </Modal.ButtonRow>\n    </Modal>\n  );\n};\n"],"names":["SETTINGS_KEYS","SETTING_KEY_ROOT","visualisationTypeKey","InfiniteScroll","app","children","loading","loadMoreLogs","range","rows","scrollElement","sortOrder","timeZone","topScrollEnabled","upperOutOfRange","setUpperOutOfRange","lowerOutOfRange","setLowerOutOfRange","upperLoading","setUpperLoading","lowerLoading","setLowerLoading","rowsRef","lastScroll","lastEvent","countRef","handleScroll","event","scrollDirection","shouldLoadMore","scrollTop","scrollBottom","newRange","canScrollTop","getVisibleRange","canScrollBottom","hideTopMessage","hideBottomMessage","loadOlderLogs","outOfRangeMessage","styles","ScrollDirection","element","delta","shouldIgnoreChainOfEvents","deltaTime","firstTimeStamp","lastTimeStamp","getPrevRange","visibleRange","currentRange","getNextRange","updateCurrentRange","SCROLLING_THRESHOLD","timeRange","LoadingIndicator","adjective","text","loadingIndicatorStyles","getStyles","theme","LOG_LINE_BODY_FIELD_NAME","LogDetailsBody","props","showField","onClickShowField","row","hideField","onClickHideField","displayedFields","disableActions","rowStyles","toggleFieldButton","HIDDEN_LABELS","LogLabels","labels","emptyMessage","addTooltip","displayMax","onDisplayMaxToggle","initialDisplayAll","displayAll","setDisplayAll","allLabels","label","displayLabels","labelValue","LogLabel","LogLabelsList","tooltip","ref","convertCSSToStyle","css","accumulated","line","match","key","_","character","UnThemedLogMessageAnsi","state","span","chunks","chunk","index","chunkText","LogMessageAnsi","PopoverMenu","x","y","onClickFilterString","onClickFilterOutString","selection","close","containerRef","handleEscape","e","onDisable","track","Menu","action","selectionLength","dataSourceType","UniqueKeyMaker","proposedKey","maybeKey","LogLabelStatsRow","active","count","proportion","value","style","percent","barStyle","className","STATS_ROW_LIMIT","stylesFactory","UnThemedLogLabelStats","rowCount","stats","isLabel","topRows","activeRow","otherRows","insertActiveRow","otherCount","sum","total","otherProportion","stat","LogLabelStats","UnThemedLogDetailsRow","onClickShowDetectedField","parsedKeys","onClickHideDetectedField","isFilterLabelActive","parsedValues","onClickFilterLabel","onClickFilterOutLabel","getStats","fieldStats","fieldCount","showFieldsStats","val","ClipboardButton","showCopy","links","wrapLogMessage","onPinLine","pinLineButtonTooltipTitle","getLogRowStyles","singleKey","singleVal","hasFilteringFunctionality","refIdTooltip","labelType","isMultiParsedValueWithNoContent","IconButton","AsyncIconButton","LabelTypeBadge","link","i","originalOnClick","origin","DataLinkButton","type","Tooltip","isActive","tooltipSuffix","rest","setActive","LogDetailsRow","UnThemedLogDetails","hasError","getRows","showDuplicates","getFieldLinks","levelStyles","labelsAvailable","fieldsAndLinks","fieldsWithLinks","f","displayedFieldsWithLinks","hiddenFieldsWithLinks","fieldsWithLinksFromVariableMap","fieldsWithLinksAvailable","fields","fieldsAvailable","levelClassName","field","keys","values","fieldIndex","LogDetails","LogRowMenuCell","logText","onOpenContext","onPermalinkClick","onUnpinLine","pinned","showContextToggle","mouseIsOver","onBlur","getRowContextQuery","addonBefore","addonAfter","shouldShowContextToggle","onLogRowClick","onShowContextClick","handleBlur","getLogText","beforeContent","addClickListenersToNode","afterContent","nodes","node","onClick","MAX_CHARACTERS","LogMessage","hasAnsi","entry","highlights","excessCharacters","needsHighlighter","searchWords","showFull","setShowFull","truncatedEntry","highlight","Ellipsis","toggle","diff","getEllipsisStyles","handleClick","restructureLog","prettifyLogMessage","expanded","LogRowMessage","logRowMenuIconsBefore","logRowMenuIconsAfter","raw","restructuredEntry","shouldShowMenu","LogRowMessageDisplayedFields","detectedFields","preview","wrapClassName","displayedFieldsStyles","parsedKey","LogRow","enableLogDetails","showLabels","showTime","forceEscape","permalinkedRowId","scrollIntoView","handleTextSelection","onLogRowHover","showingContext","setShowingContext","showDetails","setShowDetails","setMouseIsOver","permalinked","setPermalinked","logLineRef","timestamp","processedRow","errorMessage","sampleMessage","isSampled","debouncedContextClose","onRowClick","onMouseEnter","onMouseMove","onMouseLeave","Icon","emptyFn","PreviewLogRow","LogRows","deduplicatedRows","logRows","dedupStrategy","logsSortOrder","previewLimit","pinnedLogs","renderPreview","previewSize","setPreviewSize","popoverState","setPopoverState","showDisablePopoverOptions","setShowDisablePopoverOptions","logRowsRef","dedupedRows","dedupCount","orderedRows","handleDeselectionRef","keyMaker","renderAll","openContext","onClose","popoverMenuSupported","config","closePopoverMenu","handleDeselection","handleSelection","MENU_WIDTH","MENU_HEIGHT","onDisablePopoverMenu","onDisableCancel","onDisableConfirm","ConfirmModal","logId","getLogLevelStyles","logLevel","logColor","hoverBgColor","contextOutlineColor","LogContextButtons","wrapLines","onChangeWrapLines","onScrollCenterClick","internalOnChangeWrapLines","Button","makeEmptyContext","getLoadMoreDirection","place","normalizeLogRowRefId","counter","containsRow","r","PAGE_SIZE","LogRowContextModal","open","getLogRowContextUi","getRowContext","entryElement","preEntryElement","prevScrollHeightRef","prevClientHeightRef","aboveLoadingElement","belowLoadingElement","loadCountRef","dispatch","sticky","setSticky","context","setContext","setSection","fun","c","newContext","generationRef","contextQuery","setContextQuery","setWrapLines","store","getFullTimeRange","below","above","allRows","fromMs","toMs","from","to","updateContextQuery","updateResults","loadMore","refRow","direction","result","newRows","setDisplayedFields","maybeLoadMore","section","currentGen","older","newer","newRow","newAbove","newBelow","sortedNewAbove","sortedNewBelow","onScrollHit","entries","observer","targetElement","scroll","aboveElem","belowElem","scrollToCenter","scrollE","prevClientHeight","currentClientHeight","prevScrollHeight","currentHeight","newScrollTop","useAsync","loadingStateAbove","loadingStateBelow","Modal","rowId"],"sourceRoot":""}