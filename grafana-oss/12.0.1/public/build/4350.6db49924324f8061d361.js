"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4350],{20582:(R,C,a)=>{a.r(C),a.d(C,{getCallName:()=>p,getCslTypeNameFromClrType:()=>c,getCurrentCommandRange:()=>g,getEntityDataTypeFromCslType:()=>h,getExpression:()=>y,getInputParametersAsCslString:()=>m,getKustoWorker:()=>k,kustoDefaults:()=>i,themeNames:()=>u});var o=a(97396);function g(e,t){for(var n=t.lineNumber-1,r=e.getModel().getLinesContent(),l=0,d=[],s=0;s<r.length;s++){var x=r[s].trim()==="";if(x?d.push({commandOrdinal:l++,lineNumber:s}):d.push({commandOrdinal:l,lineNumber:s}),s>n&&l>d[n].commandOrdinal)break}var H=d[n].commandOrdinal,f=d.filter(function(P){return P.commandOrdinal===H}),j=f[0].lineNumber+1,v=f[f.length-1].lineNumber+1,B=r[v-1].length+1;return new o.Range(j,1,v,B)}function b(e){var t=Object.getPrototypeOf(e);t.getCurrentCommandRange=function(n){g(this,n)}}var D=function(){function e(t){var n=this;this.editor=t,this.disposables=[],this.decorations=[],this.editor.onDidChangeCursorSelection(function(r){n.editor.getModel().getLanguageId()==="kusto"&&n.highlightCommandUnderCursor(r)})}return e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.disposables.forEach(function(t){return t.dispose()})},e.prototype.highlightCommandUnderCursor=function(t){if(!t.selection.isEmpty()){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}var n=g(this.editor,t.selection.getStartPosition()),r=[{range:n,options:e.CURRENT_COMMAND_HIGHLIGHT}];this.decorations=this.editor.deltaDecorations(this.decorations,r)},e.ID="editor.contrib.kustoCommandHighlighter",e.CURRENT_COMMAND_HIGHLIGHT={className:"selectionHighlight"},e}();const T=D;var I=function(){function e(t){var n=this;this.editor=t,this.actionAdded=!1,t.onDidChangeCursorSelection(function(r){n.editor.getModel().getLanguageId()==="kusto"&&(n.actionAdded||(t.addAction({id:"editor.action.kusto.formatCurrentCommand",label:"Format Command Under Cursor",keybindings:[o.KeyMod.chord(o.KeyMod.CtrlCmd|o.KeyCode.KeyK,o.KeyMod.CtrlCmd|o.KeyCode.KeyF)],run:function(l){t.trigger("KustoCommandFormatter","editor.action.formatSelection",null)},contextMenuGroupId:"1_modification"}),n.actionAdded=!0))})}return e}();const F=I;var A={"System.SByte":"bool","System.Byte":"uint8","System.Int16":"int16","System.UInt16":"uint16","System.Int32":"int","System.UInt32":"uint","System.Int64":"long","System.UInt64":"ulong","System.String":"string","System.Single":"float","System.Double":"real","System.DateTime":"datetime","System.TimeSpan":"timespan","System.Guid":"guid","System.Boolean":"bool","Newtonsoft.Json.Linq.JArray":"dynamic","Newtonsoft.Json.Linq.JObject":"dynamic","Newtonsoft.Json.Linq.JToken":"dynamic","System.Object":"dynamic","System.Data.SqlTypes.SqlDecimal":"decimal"},c=function(e){return A[e]||e},E={object:"Object",bool:"Boolean",uint8:"Byte",int16:"Int16",uint16:"UInt16",int:"Int32",uint:"UInt32",long:"Int64",ulong:"UInt64",float:"Single",real:"Double",decimal:"Decimal",datetime:"DateTime",string:"String",dynamic:"Dynamic",timespan:"TimeSpan"},h=function(e){return E[e]||e},p=function(e){return"".concat(e.name,"(").concat(e.inputParameters.map(function(t){return"{".concat(t.name,"}")}).join(","),")")},y=function(e){return"let ".concat(e.name," = ").concat(m(e.inputParameters)," ").concat(e.body)},m=function(e){return"(".concat(e.map(function(t){return M(t)}).join(","),")")},M=function(e){if(e.columns&&e.columns.length>0){var t=e.columns.map(function(n){return"".concat(n.name,":").concat(n.cslType||c(n.type))}).join(",");return"".concat(e.name,":").concat(t===""?"*":t)}else return"".concat(e.name,":").concat(e.cslType||c(e.type))},O=function(){function e(t){this._onDidChange=new o.Emitter,this.setLanguageSettings(t),this._workerMaxIdleTime=0}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageSettings",{get:function(){return this._languageSettings},enumerable:!1,configurable:!0}),e.prototype.setLanguageSettings=function(t){this._languageSettings=t||Object.create(null),this._onDidChange.fire(this)},e.prototype.setMaximumWorkerIdleTime=function(t){this._workerMaxIdleTime=t},e.prototype.getWorkerMaxIdleTime=function(){return this._workerMaxIdleTime},e}(),N={includeControlCommands:!0,newlineAfterPipe:!0,openSuggestionDialogAfterPreviousSuggestionAccepted:!0,useIntellisenseV2:!0,useSemanticColorization:!0,useTokenColorization:!1,enableHover:!0,formatter:{indentationSize:4,pipeOperatorStyle:"Smart"},syntaxErrorAsMarkDown:{enableSyntaxErrorAsMarkDown:!1},enableQueryWarnings:!1,enableQuerySuggestions:!1,disabledDiagnosticCodes:[],quickFixCodeActions:["Change to","FixAll"],enableQuickFixes:!1,completionOptions:{includeExtendedSyntax:!1}};function k(){return new Promise(function(e,t){S(function(n){n.getKustoWorker().then(e,t)})})}function S(e){a.e(2405).then(a.bind(a,92405)).then(e)}var i=new O(N),u={light:"kusto-light",dark:"kusto-dark",dark2:"kusto-dark2"};o.languages.onLanguage("kusto",function(){S(function(e){return e.setupMode(i,o)})}),o.languages.register({id:"kusto",extensions:[".csl",".kql"]}),o.editor.defineTheme(u.light,{base:"vs",inherit:!0,rules:[{token:"comment",foreground:"008000"},{token:"variable.predefined",foreground:"800080"},{token:"function",foreground:"0000FF"},{token:"operator.sql",foreground:"CC3700"},{token:"string",foreground:"B22222"},{token:"operator.scss",foreground:"0000FF"},{token:"variable",foreground:"C71585"},{token:"variable.parameter",foreground:"9932CC"},{token:"",foreground:"000000"},{token:"type",foreground:"0000FF"},{token:"tag",foreground:"0000FF"},{token:"annotation",foreground:"2B91AF"},{token:"keyword",foreground:"0000FF"},{token:"number",foreground:"191970"},{token:"annotation",foreground:"9400D3"},{token:"invalid",background:"cd3131"}],colors:{}}),o.editor.defineTheme(u.dark,{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"608B4E"},{token:"variable.predefined",foreground:"4ec9b0"},{token:"function",foreground:"dcdcaa"},{token:"operator.sql",foreground:"9cdcfe"},{token:"string",foreground:"ce9178"},{token:"operator.scss",foreground:"569cd6"},{token:"variable",foreground:"4ec9b0"},{token:"variable.parameter",foreground:"c586c0"},{token:"",foreground:"d4d4d4"},{token:"type",foreground:"569cd6"},{token:"tag",foreground:"569cd6"},{token:"annotation",foreground:"9cdcfe"},{token:"keyword",foreground:"569cd6"},{token:"number",foreground:"d7ba7d"},{token:"annotation",foreground:"b5cea8"},{token:"invalid",background:"cd3131"}],colors:{}}),o.editor.defineTheme(u.dark2,{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#1B1A19","editorSuggestWidget.selectedBackground":"#004E8C"}}),o.editor.onDidCreateEditor(function(e){var t;!((t=window.MonacoEnvironment)===null||t===void 0)&&t.globalAPI&&b(e),new T(e),L(e)&&new F(e),K(e)});function K(e){e.onDidChangeCursorSelection(function(t){if(i&&i.languageSettings&&i.languageSettings.openSuggestionDialogAfterPreviousSuggestionAccepted){var n=t.source==="snippet"&&t.reason===o.editor.CursorChangeReason.NotSet;if(!n||e.getModel().getWordAtPosition(t.selection.getPosition())!==null)return;t.selection,setTimeout(function(){return e.trigger("monaco-kusto","editor.action.triggerSuggest",{})},10)}})}function L(e){return e.addAction!==void 0}var w={getCslTypeNameFromClrType:c,getCallName:p,getExpression:y,getInputParametersAsCslString:m,getEntityDataTypeFromCslType:h,kustoDefaults:i,getKustoWorker:k,getCurrentCommandRange:g,themeNames:u};o.languages.kusto=w}}]);

//# sourceMappingURL=4350.6db49924324f8061d361.js.map