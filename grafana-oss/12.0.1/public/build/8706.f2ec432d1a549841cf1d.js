"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8706],{68706:(Rt,ht,w)=>{w.d(ht,{pm:()=>q,GY:()=>Qt,c5:()=>kt,EI:()=>Nt,K1:()=>Jt,uB:()=>Gt,iE:()=>Kt,Qe:()=>Ht,Or:()=>Yt});var K=w(64394),et=w(16515),lt=w(55386),E=w(95004),it=w(33553),j=w(79118),M=w(36394),f=w(8721),h=w(63409),m=w(34455),g=w(21275),u=w(739),C=w(47276),L=w(62748),z=w(36192),F=w(36613),k=w(6773),gt=w(46485),vt=w(81897);const{round:R,min:Ut,ceil:$t}=Math,Et=2;let St=6;const Lt=gt.ur;function bt(e,n,s,a,o){(0,gt.mn)(s,e,Lt,n,(d,i,c)=>{let l=a*i,y=a*c;o(d,l,y)})}function zt(e){const{mode:n,numSeries:s,isDiscrete:a,hasMappedNull:o,rowHeight:d=0,colWidth:i=0,showValue:c,mergeValues:l=!1,theme:y,label:A,formatValue:I,alignValue:S="left",getTimeRange:N,getValueColor:X,getFieldConfig:dt,hoverMulti:at}=e;let J,T;const Ft=t=>{T=Array(s).fill(null).map(r=>Array(t).fill(null))},Ct=`500 ${Math.round(12*devicePixelRatio)}px ${y.typography.fontFamily}`,rt=Array(s).fill(null);let ft=null;const wt=[i,1/0],v=1-wt[0],b=(wt[1]??1/0)*F.A.pxRatio,Y=new Map,st=new Map;function qt(t){Y.forEach((r,p)=>{t.fillStyle=p,t.fill(r)}),st.forEach((r,p)=>{t.strokeStyle=p,t.stroke(r)}),Y.clear(),st.clear()}function Bt(t,r,p,x,U,V,P,B,$,D,_,O,nt){P=Math.max(1,P);const Z=X(D+1,O),pt=dt(D),ct=Dt(pt,Z);if(T[D][_]={x:R(U-p),y:R(V-x),w:P,h:B,sidx:D+1,didx:_,fillColor:ct},nt){let Mt=ct,tt=Y.get(Mt);if(tt==null&&Y.set(Mt,tt=new Path2D),r(tt,U,V,P,B),$){let Q=Z,H=st.get(Q);H==null&&st.set(Q,H=new Path2D),r(H,U+$/2,V+$/2,P-$,B-$)}}else t.beginPath(),r(t,U,V,P,B),t.fillStyle=ct,t.fill(),$&&(t.beginPath(),r(t,U+$/2,V+$/2,P-$,B-$),t.strokeStyle=Z,t.lineWidth=$,t.stroke())}const Xt=(t,r,p,x)=>(F.A.orient(t,r,(U,V,P,B,$,D,_,O,nt,Z,pt,ct,Mt,tt)=>{let Q=R((U.width||0)*F.A.pxRatio),H=a(r),W=H&&o(r);t.ctx.save(),tt(t.ctx,t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip(),bt(d,r-1,s,pt,(Pt,mt,At)=>{if(n===q.Changes)for(let G=0;G<P.length;G++){let xt=P[G];if(xt!=null||W){let yt=Math.round(D(V[G],B,Z,O)),ot=G;for(;++ot<P.length&&(P[ot]===void 0||l&&P[ot]===xt););let ut=ot===P.length?O+Z+Q:Math.round(D(V[ot],B,Z,O));Bt(t.ctx,tt,O,nt,yt,R(nt+mt),ut-yt,R(At),Q,Pt,G,xt,H),G=ot-1}}else if(n===q.Samples){let G=D(V[1],B,Z,O)-D(V[0],B,Z,O),xt=G*v,yt=R(Ut(b,G-xt)-Q),ot=yt/2;for(let ut=p;ut<=x;ut++){let It=P[ut];if(It!=null||W){let oe=D(V[ut],B,Z,O);Bt(t.ctx,tt,O,nt,R(oe-ot),R(nt+mt),yt,R(At),Q,Pt,ut,It,H)}}}}),H&&(t.ctx.lineWidth=Q,qt(t.ctx)),t.ctx.restore()}),null),_t=I==null||c===u.yL.Never?!1:(t,r,p,x)=>(t.ctx.save(),t.ctx.rect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip(),t.ctx.font=Ct,t.ctx.textAlign=n===q.Changes?S:"center",t.ctx.textBaseline="middle",F.A.orient(t,r,(U,V,P,B,$,D,_,O,nt,Z,pt)=>{let ct=R((U.width||0)*F.A.pxRatio),tt=a(r)&&o(r),Q=R(_(Tt[r-1],$,pt,nt));for(let H=0;H<P.length;H++)if(P[H]!=null||tt){const W=T[r-1][H];if(!W||W.x>=Z)continue;const Pt=W.x<0?W?.w+W.x:W?.w;let mt=Math.floor(Pt/St);if(c===u.yL.Auto&&mt<2)continue;let At=I(r,P[H]),G=R(W.x+O+W.w/2);n===q.Changes&&(S==="left"?G=R(Math.max(W.x,0)+O+ct+Et):S==="right"&&(G=R(W.x+O+W.w-ct-Et))),t.ctx.fillStyle=y.colors.getContrastText(W.fillColor,3),t.ctx.fillText(At.slice(0,mt),G,Q)}}),t.ctx.restore(),!1),te=t=>{let r="";for(let p=32;p<=126;p++)r+=String.fromCharCode(p);St=Math.ceil(t.ctx.measureText(r).width/r.length*F.A.pxRatio),St+=2.5,t.root.querySelectorAll(".u-cursor-pt").forEach(p=>{p.style.borderRadius="0"})},ee=t=>{J=J||new vt.C$(0,0,t.bbox.width,t.bbox.height),J.clear(),Ft(t.data[0].length),t.series.forEach(r=>{r._paths=null})};function le(t,r,p=!1){rt.fill(null),ft=null,!(t<0)&&J.get(t,0,F.A.pxRatio,1e4,x=>{t>=x.x&&t<=x.x+x.w&&(r>=x.y&&r<=x.y+x.h?rt[x.sidx]=ft=x:(at||p)&&(rt[x.sidx]=x))})}const se={x:n===q.Changes,y:!1,dataIdx:(t,r)=>{if(r===1){if(J.o.length===0&&J.q==null)for(const U of T)for(const V of U)V&&J.add(V);let p=t.cursor.left*F.A.pxRatio,x=t.cursor.top*F.A.pxRatio;le(p,x,t.cursor.event==null)}return rt[r]?.didx},focus:{prox:1e3,dist:(t,r)=>ft?.sidx===r?0:1/0},points:{fill:"rgba(255,255,255,0.2)",bbox:(t,r)=>{let p=rt[r],x=p!=null;return{left:x?p.x/F.A.pxRatio:-10,top:x?p.y/F.A.pxRatio:-10,width:x?p.w/F.A.pxRatio:0,height:x?p.h/F.A.pxRatio:0}}}},Tt=Array(s).fill(0),ne=[0,1];return{cursor:se,xSplits:n===q.Samples?(t,r,p,x,U,V)=>{let P=[],B=t.data[0][1]-t.data[0][0],$=$t(U/B);for(let D=0;D<t.data[0].length;D+=$){let _=t.data[0][D];_>=p&&_<=x&&P.push(_)}return P}:null,xRange:t=>{const r=N();let p=r.from.valueOf(),x=r.to.valueOf();if(n===q.Samples){let P=(t.data[0][1]-t.data[0][0])/2;p<=t.data[0][0]&&(p=t.data[0][0]-P);let B=t.data[0].length-1;x>=t.data[0][B]&&(x=t.data[0][B]+P)}return[p,x]},ySplits:t=>(bt(d,null,s,t.bbox.height,(r,p,x)=>{let U=R(p+x/2);Tt[r]=t.posToVal(U/F.A.pxRatio,L.s)}),Tt),yValues:(t,r)=>r.map((p,x)=>A(x+1)),yRange:ne,drawPaths:Xt,drawPoints:_t,init:te,drawClear:ee}}function Dt(e,n){if(n[0]==="#"&&n.length===9)return n;const s=(e.fillOpacity??100)/100;return k.MV.alpha(n,s)}var q=(e=>(e.Changes="changes",e.Samples="samples",e))(q||{});const Wt={lineWidth:0,fillOpacity:80},Kt=({frame:e,theme:n,timeZones:s,getTimeRange:a,mode:o,rowHeight:d,colWidth:i,showValue:c,alignValue:l,mergeValues:y,getValueColor:A,hoverMulti:I})=>{const S=new C.e(s[0]),N="x",X=v=>{const b=v.config?.color?.mode;return!(b&&v.display&&b.startsWith("continuous-"))},dt=v=>v.config.mappings?.some(b=>b.type===g.dM.SpecialValue&&b.options.match==="null")||!1,at=(v,b)=>{const Y=e.fields[v];return Y.state?.origin?.fieldIndex!==void 0&&Y.state?.origin?.frameIndex!==void 0&&A?A(Y.state?.origin?.frameIndex,Y.state?.origin?.fieldIndex,b):K.F},J={mode:o,numSeries:e.fields.length-1,isDiscrete:v=>X(e.fields[v]),hasMappedNull:v=>dt(e.fields[v]),mergeValues:y,rowHeight:d,colWidth:i,showValue:c,alignValue:l,theme:n,label:v=>(0,et.Ct)(e.fields[v],e),getFieldConfig:v=>e.fields[v].config.custom,getValueColor:at,getTimeRange:a,formatValue:(v,b)=>(0,lt.cN)(e.fields[v].display(b)),hoverMulti:I},T=zt(J);S.addHook("init",T.init),S.addHook("drawClear",T.drawClear),S.setPrepData(v=>(0,z.bq)(v[0],(0,z.ro)(v[0]))),S.setCursor(T.cursor),S.addScale({scaleKey:N,isTime:!0,orientation:u.Lt.Horizontal,direction:u.ON.Right,range:T.xRange}),S.addScale({scaleKey:L.s,isTime:!1,orientation:u.Lt.Vertical,direction:u.ON.Up,range:T.yRange});const Ft=e.fields[0].config.custom.axisPlacement===u.vM.Hidden;S.addAxis({show:!Ft,scaleKey:N,isTime:!0,splits:T.xSplits,placement:u.vM.Bottom,timeZone:s[0],theme:n});const Ct=e.fields[1].config.custom,rt=Ct.axisWidth,ft=Ct.axisPlacement===u.vM.Hidden;S.addAxis({scaleKey:L.s,isTime:!1,placement:u.vM.Left,splits:T.ySplits,values:ft?(v,b)=>b.map(Y=>null):T.yValues,grid:{show:!1},ticks:{show:!1},gap:ft?0:16,size:ft?0:rt,theme:n});let wt=0;for(let v=0;v<e.fields.length;v++){if(v===0)continue;const b=e.fields[v],Y=b.config,st={...Wt,...Y.custom};b.state.seriesIndex=wt++,S.addSeries({scaleKey:L.s,pathBuilder:T.drawPaths,pointsBuilder:T.drawPoints,lineWidth:st.lineWidth,fillOpacity:st.fillOpacity,theme:n,show:!st.hideFrom?.viz,thresholds:Y.thresholds,dataFrameFieldIndex:b.state?.origin})}return S};function Vt(e){let n=e.config.custom?.spanNulls;return n?n===!0?1/0:n:-1}function Ot(e,n){const s=e.config.thresholds;if(e.type!==E.PU.number||!s||!s.steps.length)return;const a=Nt(e.config,n);if(a.length!==s.steps.length)return;const o=new Map,d=new Map;for(let l=0;l<a.length;l++)o.set(s.steps[l],a[l].label),d.set(a[l].label,a[l].color);let i=e.values;const c=new Array(e.values.length);if(s.mode===it.O.Percentage){const{min:l,max:y}=(0,j.xg)(e),A=y-l;i=i.map(I=>I==null?I:(I-l)/A*100)}for(let l=0;l<c.length;l++){const y=i[l];y==null?c[l]=y:c[l]=o.get((0,M.yQ)(y,s.steps))}return{...e,config:{...e.config,custom:{...e.config.custom,spanNulls:Vt(e)}},type:E.PU.string,values:c,display:l=>({text:String(l),color:d.get(String(l)),numeric:NaN})}}function Ht(e,n,s,a){if(!e?.length)return{warn:"No data in response"};(0,et.Fm)(e);let o=!1;const d=[];for(let i of e){let c=-1,l=-1;for(let N=0;N<i.fields.length;N++)if(i.fields[N].type===E.PU.time){if(c===-1)c=N;else if(l===-1){l=N;break}}let y=c!==-1,A=!1;if(i=(0,f.Yj)(i,c),l!==-1){let N={...i,fields:i.fields.filter((dt,at)=>at!==l)},X={length:i.length,fields:[i.fields[l]]};i=(0,f.Fd)({frames:[N,X],keepDisplayNames:!0,nullMode:()=>f.WO}),i.fields.forEach((dt,at)=>{if(at>0){let J=dt.values;for(let T=0;T<J.length;T++)J[T]==null&&(J[T]=null)}}),A=!0}let I=(0,h.M)({frame:i,refFieldPseudoMin:s.from.valueOf(),refFieldPseudoMax:s.to.valueOf()});I!==i&&(A=!0),i=(0,m.C)(I);const S=[];for(let N of i.fields)switch(N.type){case E.PU.time:y=!0,o=!0,S.push(N);break;case E.PU.enum:case E.PU.number:if(n&&N.config.color?.mode===K.Y.Thresholds){const X=Ot(N,a);if(X){S.push(X),A=!0;continue}}case E.PU.boolean:case E.PU.string:N={...N,config:{...N.config,custom:{...N.config.custom,spanNulls:Vt(N)}}},A=!0,S.push(N);break;default:A=!0}y&&S.length>1&&(o=!0,A?d.push({...i,fields:S}):d.push(i))}return o?d.length?{frames:d}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function Gt(e){const n=[];for(let s of e){const a=s.fields.filter(o=>o.type===E.PU.time);if(a.length>0)for(let o of s.fields)o.type!==E.PU.time&&n.push({fields:[...a,o],length:s.length})}return n}function Nt(e,n,s){const a=[],o=s||e.thresholds;if(!o||!o.steps.length)return a;const d=o.steps,i=(0,lt.j_)(o.mode===it.O.Percentage?"percent":e.unit??""),c=l=>(0,lt.cN)(i(l,e.decimals??void 0));for(let l=0;l<d.length;l++){let y=d[l],A=y.value,I="",S="";A===-1/0&&l<d.length-1?(A=d[l+1].value,I="< "):S="+",a.push({label:`${I}${c(A)}${S}`,color:n.visualization.getColorByName(y.color),yAxis:1})}return a}function Jt(e,n){const s=[];if(!e)return s;for(let a of e){const{options:o,type:d}=a;if(d===g.dM.ValueToText)for(let[i,c]of Object.entries(o)){const l=c.color;s.push({label:i,color:n.visualization.getColorByName(l??K.F),yAxis:1})}if(d===g.dM.RangeToText){const{from:i,result:c,to:l}=o,{text:y,color:A}=c,I=y?`[${i} - ${l}] ${y}`:`[${i} - ${l}]`;s.push({label:I,color:n.visualization.getColorByName(A??K.F),yAxis:1})}if(d===g.dM.RegexToText){const{pattern:i,result:c}=o,{text:l,color:y}=c,A=`${l||i}`;s.push({label:A,color:n.visualization.getColorByName(y??K.F),yAxis:1})}if(d===g.dM.SpecialValue){const{match:i,result:c}=o,{text:l,color:y}=c,A=`${l||i}`;s.push({label:A,color:n.visualization.getColorByName(y??K.F),yAxis:1})}}return s}function Yt(e,n,s){if(!(!e||n.showLegend===!1))return Zt(jt(e),s)}function Zt(e,n){if(!e.length)return;const s=[],a=e[0].config,o=a.color?.mode??K.Y.Fixed,d=a.thresholds;if(o===K.Y.Thresholds&&d?.steps&&d.steps.length>1)return Nt(a,n);if(o.startsWith("continuous"))return;const i=new Map;return e.forEach(c=>{c.config.custom?.hideFrom?.legend||c.values.forEach(l=>{let y=c.display(l);y.color&&i.set(y.text,y.color)})}),i.forEach((c,l)=>{l.length>0&&s.push({label:l,color:n.visualization.getColorByName(c??K.F),yAxis:1})}),s}function jt(e){const n=[];for(const s of e)for(const a of s.fields)a.type!==E.PU.time&&n.push(a);return n}function Qt(e,n){let s,a=n+1;if(a>=e.values.length)return null;const o=e.values[n];for(;s===void 0;){if(a>=e.values.length)return null;const d=e.values[a];d===void 0||d===o?a++:s=a}return s}function kt(e){if(e<0||Number.isNaN(e))return"";let n,s,a,o,d,i,c,l;return c=Math.floor(e/1e3),i=Math.floor(c/60),c=c%60,d=Math.floor(i/60),i=i%60,o=Math.floor(d/24),d=d%24,n=Math.floor(o/365),n>0&&(o=o%365),s=Math.floor(o/30),s>0&&(o=o%30),a=Math.floor(o/7),a>0&&(o=o%7),l=Math.round(e%1e3*1e3)/1e3,(n>0?n+"y "+(s>0?s+"mo ":"")+(a>0?a+"w ":"")+(o>0?o+"d ":""):s>0?s+"mo "+(a>0?a+"w ":"")+(o>0?o+"d ":""):a>0?a+"w "+(o>0?o+"d ":""):o>0?o+"d "+(d>0?d+"h ":""):d>0?d+"h "+(i>0?i+"m ":""):i>0?i+"m "+(c>0?c+"s ":""):c>0?c+"s "+(l>0?l+"ms ":""):l>0?l+"ms ":"0").trim()}},46485:(Rt,ht,w)=>{w.d(ht,{mn:()=>j,ur:()=>et});var K=w(79243);const et=1,lt=2,E=3,it=(M,f,h,m)=>(0,K.h)(f+M*(h+m),6);function j(M,f,h,m,g){let u=1-f,C=h===et?u/(M-1):h===lt?u/M:h===E?u/(M+1):0;(isNaN(C)||C===1/0)&&(C=0);let L=h===et?0:h===lt?C/2:h===E?C:0,z=f/M,F=(0,K.h)(z,6);if(m==null)for(let k=0;k<M;k++)g(k,it(k,L,z,C),F);else g(m,it(m,L,z,C),F)}},81897:(Rt,ht,w)=>{w.d(ht,{C$:()=>j,HY:()=>it,Tr:()=>E,ur:()=>lt});const K=10,et=4;function lt(M,f,h,m,g,u){return M>=h&&M<=g&&f>=m&&f<=u}function E(M,f,h){let m=[];if(M.o.length&&m.push(...M.o.filter(g=>(f==null||g.sidx===f)&&(h==null||g.didx===h))),M.q)for(let g=0;g<M.q.length;g++)m.push(...E(M.q[g],f,h));return m}function it(M,f){return M.x<=f.x+f.w&&M.x+M.w>=f.x&&M.y+M.h>=f.y&&M.y<=f.y+f.h}class j{constructor(f,h,m,g,u=0){this.x=f,this.y=h,this.w=m,this.h=g,this.l=u,this.o=[],this.q=null}split(){let f=this,h=f.x,m=f.y,g=f.w/2,u=f.h/2,C=f.l+1;f.q=[new j(h+g,m,g,u,C),new j(h,m,g,u,C),new j(h,m+u,g,u,C),new j(h+g,m+u,g,u,C)]}quads(f,h,m,g,u){let C=this,L=C.q,z=C.x+C.w/2,F=C.y+C.h/2,k=h<F,gt=f<z,vt=f+m>z,R=h+g>F;k&&vt&&u(L[0]),gt&&k&&u(L[1]),gt&&R&&u(L[2]),vt&&R&&u(L[3])}add(f){let h=this;if(h.q!=null)h.quads(f.x,f.y,f.w,f.h,m=>{m.add(f)});else{let m=h.o;if(m.push(f),m.length>K&&h.l<et){h.split();for(let g=0;g<m.length;g++){let u=m[g];h.quads(u.x,u.y,u.w,u.h,C=>{C.add(u)})}h.o.length=0}}}get(f,h,m,g,u){let C=this,L=C.o;for(let z=0;z<L.length;z++)u(L[z]);C.q!=null&&C.quads(f,h,m,g,z=>{z.get(f,h,m,g,u)})}clear(){this.o.length=0,this.q=null}}}}]);

//# sourceMappingURL=8706.f2ec432d1a549841cf1d.js.map