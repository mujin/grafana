"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[348],{81897:(yt,ft,B)=>{B.d(ft,{C$:()=>s,HY:()=>et,Tr:()=>k,ur:()=>st});const $=10,rt=4;function st(c,a,f,h,d,y){return c>=f&&c<=d&&a>=h&&a<=y}function k(c,a,f){let h=[];if(c.o.length&&h.push(...c.o.filter(d=>(a==null||d.sidx===a)&&(f==null||d.didx===f))),c.q)for(let d=0;d<c.q.length;d++)h.push(...k(c.q[d],a,f));return h}function et(c,a){return c.x<=a.x+a.w&&c.x+c.w>=a.x&&c.y+c.h>=a.y&&c.y<=a.y+a.h}class s{constructor(a,f,h,d,y=0){this.x=a,this.y=f,this.w=h,this.h=d,this.l=y,this.o=[],this.q=null}split(){let a=this,f=a.x,h=a.y,d=a.w/2,y=a.h/2,O=a.l+1;a.q=[new s(f+d,h,d,y,O),new s(f,h,d,y,O),new s(f,h+y,d,y,O),new s(f+d,h+y,d,y,O)]}quads(a,f,h,d,y){let O=this,lt=O.q,V=O.x+O.w/2,dt=O.y+O.h/2,xt=f<dt,x=a<V,e=a+h>V,M=f+d>dt;xt&&e&&y(lt[0]),x&&xt&&y(lt[1]),x&&M&&y(lt[2]),e&&M&&y(lt[3])}add(a){let f=this;if(f.q!=null)f.quads(a.x,a.y,a.w,a.h,h=>{h.add(a)});else{let h=f.o;if(h.push(a),h.length>$&&f.l<rt){f.split();for(let d=0;d<h.length;d++){let y=h[d];f.quads(y.x,y.y,y.w,y.h,O=>{O.add(y)})}f.o.length=0}}}get(a,f,h,d,y){let O=this,lt=O.o;for(let V=0;V<lt.length;V++)y(lt[V]);O.q!=null&&O.quads(a,f,h,d,V=>{V.get(a,f,h,d,y)})}clear(){this.o.length=0,this.q=null}}},4833:(yt,ft,B)=>{B.d(ft,{P7:()=>rt,uM:()=>st,iS:()=>k,KQ:()=>s});var $=B(739),rt=(c=>(c.Opacity="opacity",c.Scheme="scheme",c))(rt||{}),st=(c=>(c.Exponential="exponential",c.Linear="linear",c))(st||{}),k=(c=>(c.X="x",c.Xy="xy",c.Y="y",c))(k||{});const et={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},selectionMode:"x",showValue:$.yL.Auto,tooltip:{mode:$.$N.Single,yHistogram:!1,showColorScale:!1}},s={...et,color:{...et.color,mode:rt.Scheme,scale:st.Exponential},yAxis:{...et.yAxis,axisPlacement:$.vM.Left},rowsFrame:{...et.rowsFrame,layout:$.D7.auto}}},50348:(yt,ft,B)=>{B.d(ft,{Mv:()=>d,O4:()=>xt,g$:()=>dt});var $=B(36613),rt=B(95004),st=B(39443),k=B(74261),et=B(55386),s=B(739),c=B(47276),a=B(48264),f=B(81897),h=B(4833);function d(x){const{dataRef:e,theme:M,timeZone:g,getTimeRange:I,cellGap:E,hideLE:N,hideGE:A,yAxisConfig:v,ySizeDivisor:b,selectionMode:K=h.iS.X}=x,q="x";let m=!0;e.current?.heatmap?.fields[0].type!==rt.PU.time&&(m=!1);const U=devicePixelRatio;let ct=e.current?.heatmap?.meta?.type;const ot=M.visualization.getColorByName(x.exemplarColor);let Y,_,p=new c.e(g);p.addHook("init",l=>{l.root.querySelectorAll(".u-cursor-pt").forEach(i=>{Object.assign(i.style,{borderRadius:"0",border:"1px solid white",background:"transparent"})})}),m&&p.addHook("setData",l=>{let{min:i,max:t}=l.scales.x,r=I().from.valueOf(),n=I().to.valueOf();(i!==r||t!==n)&&queueMicrotask(()=>{l.setScale(q,{min:r,max:n})})}),p.addHook("drawClear",l=>{Y=Y||new f.C$(0,0,l.bbox.width,l.bbox.height),Y.clear(),l.series.forEach((i,t)=>{t>0&&(i._paths=null)})}),p.setMode(2),p.addScale({scaleKey:q,isTime:m,orientation:s.Lt.Horizontal,direction:s.ON.Right,range:(l,i,t)=>{if(m)return[I().from.valueOf(),I().to.valueOf()];if(e.current?.xLayout===s.D7.le)return[i-e.current?.xBucketSize,t];if(e.current?.xLayout===s.D7.ge)return[i,t+e.current?.xBucketSize];{let r=e.current?.xBucketSize/2;return[i-r,t+r]}}});let T;if(!m){T=[];for(let l=0;l<10;l++)T.push(l*e.current?.xBucketSize)}p.addAxis({scaleKey:q,placement:s.vM.Bottom,incrs:T,isTime:m,theme:M,timeZone:g});const z=e.current?.heatmap?.fields[1];if(!z)return p;const F=z.config?.custom?.scaleDistribution??{type:s.L4.Linear},J=!!v.reverse,D=ct===st.m.HeatmapCells&&!(0,a.Nb)(e.current?.heatmap),Z=F.type!==s.L4.Linear||D,H=(0,a.eE)(e.current?.heatmap).yOrdinalDisplay!=null,P="y_"+(Math.random()+1).toString(36).substring(7);p.addScale({scaleKey:P,isTime:!1,orientation:s.Lt.Vertical,direction:J?s.ON.Down:s.ON.Up,distribution:Z?s.L4.Log:s.L4.Linear,log:F.log??2,range:D?(l,i,t)=>{let r=l.data[1][2][0]/l.data[1][1][0];t*=r;let n,o;if([n,o]=Z?$.A.rangeLog(i,t,F.log??2,!0):[i,t],Z&&!H){let L=l.scales[P].log,u=L===2?Math.log2:Math.log10,{min:S,max:C}=v;if(S!=null&&S>0){let G=u(S);n=L**(0,k.rs)(G,1)}if(C!=null&&C>0){let G=u(C);o=L**(0,k.Uh)(G,1)}}return[n,o]}:(l,i,t)=>{let r=i,n=t,{min:o,max:L}=v;if(Z){let u=l.scales[P].log,S=!1,C=!1,G=u===2?Math.log2:Math.log10;if(b!==1){let X=G(i),tt=G(t);Number.isInteger(X)||(r=u**(0,k.rs)(X,1),S=!0),Number.isInteger(tt)||(n=u**(0,k.Uh)(tt,1),C=!0)}if(e.current?.yLayout===s.D7.le?S||(r/=u):e.current?.yLayout===s.D7.ge?C||(n*=u):(r/=u/2,n*=u/2),!H){if(o!=null&&o>0){let X=G(o);r=u**(0,k.rs)(X,1)}if(L!=null&&L>0){let X=G(L);n=u**(0,k.Uh)(X,1)}}}else{let u=e.current?.yBucketSize;u===0&&(u=1),u&&(e.current?.yLayout===s.D7.le?r-=u:e.current?.yLayout===s.D7.ge?n+=u:(r-=u/2,n+=u/2)),H||(r=o??r,n=L??n)}return[r,n]}});const nt=z.display??(0,et.j_)("short");p.addAxis({scaleKey:P,show:v.axisPlacement!==s.vM.Hidden,placement:v.axisPlacement||s.vM.Left,size:v.axisWidth||null,label:v.axisLabel,theme:M,formatValue:(l,i)=>(0,et.cN)(nt(l,i)),splits:H?l=>{const i=(0,a.eE)(e.current?.heatmap);if(!i.yOrdinalDisplay)return[0,1];let t=i.yOrdinalDisplay.map((r,n)=>n);switch(e.current?.yLayout){case s.D7.le:t.unshift(-1);break;case s.D7.ge:t.push(t.length);break}if(l.height<60)t=[t[0],t[t.length-1]];else for(;t.length>3&&(l.height-15)/t.length<10;)t=t.filter((r,n)=>n%2===0);return t}:void 0,values:H?(l,i)=>{const t=(0,a.eE)(e.current?.heatmap);return t.yOrdinalDisplay?i.map(r=>r<0?t.yMinDisplay??"":t.yOrdinalDisplay[r]??""):i}:void 0});const W=D?V:O;p.addSeries({facets:[{scale:q,auto:!0,sorted:1},{scale:P,auto:!0}],pathBuilder:W({each:(l,i,t,r,n,o,L)=>{Y.add({x:r-l.bbox.left,y:n-l.bbox.top,w:o,h:L,sidx:i,didx:t})},gap:E,hideLE:N,hideGE:A,xAlign:e.current?.xLayout===s.D7.le?-1:e.current?.xLayout===s.D7.ge?1:0,yAlign:(e.current?.yLayout===s.D7.le?-1:e.current?.yLayout===s.D7.ge?1:0)*(J?-1:1),ySizeDivisor:b,disp:{fill:{values:(l,i)=>e.current?.heatmapColors?.values,index:e.current?.heatmapColors?.palette}}}),theme:M,scaleKey:""}),p.addSeries({facets:[{scale:q,auto:!0,sorted:1},{scale:P,auto:!0}],pathBuilder:lt({each:(l,i,t,r,n,o,L)=>{Y.add({x:r-l.bbox.left,y:n-l.bbox.top,w:o,h:L,sidx:i,didx:t})}},ot,e.current.yLayout),theme:M,scaleKey:""});const R=K===h.iS.X||K===h.iS.Xy,Q=K===h.iS.Y||K===h.iS.Xy,at={drag:{x:R,y:Q,setScale:!1},dataIdx:(l,i)=>{if(i===1){_=null;let t=l.cursor.left*U,r=l.cursor.top*U;Y.get(t,r,1,1,n=>{(0,f.ur)(t,r,n.x,n.y,n.x+n.w,n.y+n.h)&&(_=n)})}return _&&i===_.sidx?_.didx:null},focus:{prox:1e3,dist:(l,i)=>_?.sidx===i?0:1/0},points:{fill:"rgba(255,255,255, 0.3)",bbox:(l,i)=>{let t=_&&i===_.sidx;return{left:t?_.x/U:-10,top:t?_.y/U:-10,width:t?_.w/U:0,height:t?_.h/U:0}}}};return p.setCursor(at),p}const y=4;function O(x){const{disp:e,each:M,gap:g=1,hideLE:I=-1/0,hideGE:E=1/0,xAlign:N=1,yAlign:A=1,ySizeDivisor:v=1}=x,b=devicePixelRatio,K=g>=y?Math.round:m=>m,q=Math.round(g*b);return(m,U)=>($.A.orient(m,U,(ct,ot,Y,_,p,T,z,j,F,J,D,Z,H,P,nt)=>{let W=m.data[U];const R=W[0],Q=W[1],at=W[2],l=R.length;let i=e.fill.values(m,U),t=e.fill.index??[...new Set(i)],r=t.map(w=>new Path2D),n=l-Q.lastIndexOf(Q[0]),o=l/n,L=Q[1]-Q[0]||p.max-p.min,u=R[n]-R[0],S,C;_.distr===3?S=Math.abs(T(R[0]*_.log,_,J,j)-T(R[0],_,J,j)):S=Math.abs(T(u,_,J,j)-T(0,_,J,j)),p.distr===3?C=Math.abs(z(Q[0]*p.log,p,D,F)-z(Q[0],p,D,F))/v:C=Math.abs(z(L,p,D,F)-z(0,p,D,F))/v,S=Math.max(1,K(S-q)),C=Math.max(1,K(C-q));let G=N===-1?-S:N===0?-S/2:0,X=A===1?-C:A===0?-C/2:0,tt=Q.slice(0,n).map(w=>K(z(w,p,D,F)+X)),ht=Array.from({length:o},(w,it)=>K(T(R[it*n],_,J,j)+G));for(let w=0;w<l;w++)if(at[w]!=null&&at[w]>I&&at[w]<E){let it=ht[~~(w/n)],ut=tt[w%n],gt=r[i[w]];P(gt,it,ut,S,C),M(m,1,w,it,ut,S,C)}return m.ctx.save(),m.ctx.rect(m.bbox.left,m.bbox.top,m.bbox.width,m.bbox.height),m.ctx.clip(),r.forEach((w,it)=>{m.ctx.fillStyle=t[it],m.ctx.fill(w)}),m.ctx.restore(),null}),null)}function lt(x,e,M){return(g,I)=>($.A.orient(g,I,(E,N,A,v,b,K,q,m,U,ct,ot,Y,_,p,T)=>{let z=new Path2D,j=[z],F=[e??"rgba(255,0,255,0.7)"],J=M===s.D7.le?-.5:M===s.D7.ge?.5:0;for(let D=0;D<N.length;D++){let Z=A[D];b.distr===3&&b.log===2||(Z+=J);let P=K(N[D],v,ct,m),nt=q(Z,b,ot,U),W=8,R=8;p(z,P-W/2,nt-R/2,W,R),x.each(g,I,D,P-W/2,nt-R/2,W,R)}g.ctx.save(),g.ctx.rect(g.bbox.left,g.bbox.top,g.bbox.width,g.bbox.height),g.ctx.clip(),j.forEach((D,Z)=>{g.ctx.fillStyle=F[Z],g.ctx.fill(D)}),g.ctx.restore()}),null)}function V(x){const{disp:e,each:M,gap:g=1,hideLE:I=-1/0,hideGE:E=1/0}=x,N=devicePixelRatio,A=g>=y?Math.round:b=>b,v=Math.round(g*N);return(b,K)=>($.A.orient(b,K,(q,m,U,ct,ot,Y,_,p,T,z,j,F,J,D,Z)=>{let H=b.data[K];const P=H[0],nt=H[1],W=H[2],R=H[3],Q=P.length;let at=e.fill.values(b,K),l=e.fill.index??[...new Set(at)],i=l.map(o=>new Path2D),t=new Map,r=new Map;for(let o=0;o<P.length;o++){let L=P[o],u=nt[o],S=W[o];t.has(L)||t.set(L,A(Y(L,ct,z,p))),r.has(u)||r.set(u,A(_(u,ot,j,T))),r.has(S)||r.set(S,A(_(S,ot,j,T)))}let n=t.get(P.find(o=>o!==P[0]))-t.get(P[0]);for(let o=0;o<Q;o++){if(R[o]<=I||R[o]>=E)continue;let L=P[o],u=nt[o],S=W[o],C=t.get(L),G=r.get(u),X=r.get(S),tt=n,ht=G-X;tt=Math.max(1,tt-v),ht=Math.max(1,ht-v);let w=C-v/2-tt,it=X+v/2,ut=i[at[o]];D(ut,w,it,tt,ht),M(b,1,o,w,it,tt,ht)}b.ctx.save(),b.ctx.rect(b.bbox.left,b.bbox.top,b.bbox.width,b.bbox.height),b.ctx.clip(),i.forEach((o,L)=>{b.ctx.fillStyle=l[L],b.ctx.fill(o)}),b.ctx.restore()}),null)}const dt=(x,e,M,g=-1/0,I=1/0)=>{if(e==null){e=1/0;for(let E=0;E<x.length;E++)x[E]!=null&&x[E]>g&&x[E]<I&&(e=Math.min(e,x[E]))}if(M==null){M=-1/0;for(let E=0;E<x.length;E++)x[E]!=null&&x[E]>g&&x[E]<I&&(M=Math.max(M,x[E]))}return[e,M]},xt=(x,e,M,g)=>{let I=g-M||1,E=e.length,N=Array(x.length);for(let A=0;A<x.length;A++)N[A]=x[A]<M?0:x[A]>g?E-1:Math.min(E-1,Math.floor(E*(x[A]-M)/I));return N}}}]);

//# sourceMappingURL=348.13327f5b81a2918fd7df.js.map