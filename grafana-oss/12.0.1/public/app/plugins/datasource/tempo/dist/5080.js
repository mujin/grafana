"use strict";(globalThis.webpackChunktempo=globalThis.webpackChunktempo||[]).push([[5080],{9337:(e,t,r)=>{r.r(t),r.d(t,{default:()=>mt});var n=r(9728),a=r(6089),o=r(5959),i=r(8531),s=r(2007),l=r(4330),u=r(8146),c=r.n(u);function p({query:e,lang:t,className:r}){const o=(0,s.useTheme2)(),i=d(o),l=c().highlight(e,t.grammar,t.name);return(0,n.jsx)("div",{className:(0,a.cx)(i.editorField,"prism-syntax-highlight",r),"aria-label":"selector",dangerouslySetInnerHTML:{__html:l}})}const d=e=>({editorField:(0,a.css)({fontFamily:e.typography.fontFamilyMonospace,fontSize:e.typography.bodySmall.fontSize})});var g=r(3557),f=r(2381),y=r(6490),m=r(4326),h=r(7781);function v({title:e,children:t,collapsedInfo:r,queryStats:a,onToggle:o,isOpen:l}){const[u,c]=(0,f.A)(!1),p=(0,s.useStyles2)(b);return(0,n.jsxs)("div",{className:p.wrapper,children:[(0,n.jsx)(s.Collapse,{className:p.collapse,collapsible:!0,isOpen:null!=l?l:u,onToggle:null!=o?o:c,label:(0,n.jsxs)(s.Stack,{gap:0,children:[(0,n.jsx)("h6",{className:p.title,children:e}),!u&&(0,n.jsx)("div",{className:p.description,children:r.map(((e,t)=>(0,n.jsx)("span",{children:e},t)))})]}),children:(0,n.jsx)("div",{className:p.body,children:t})}),a&&i.config.featureToggles.lokiQuerySplitting&&(0,n.jsx)(s.Tooltip,{content:"Note: the query will be split into multiple parts and executed in sequence. Query limits will only apply each individual part.",children:(0,n.jsx)(s.Icon,{tabIndex:0,name:"info-circle",className:p.tooltip,size:"sm"})}),a&&(0,n.jsx)("p",{className:p.stats,children:M(a)})]})}const b=e=>({collapse:(0,a.css)({backgroundColor:"unset",border:"unset",marginBottom:0,"> button":{padding:e.spacing(0,1)}}),wrapper:(0,a.css)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"baseline"}),title:(0,a.css)({flexGrow:1,overflow:"hidden",fontSize:e.typography.bodySmall.fontSize,fontWeight:e.typography.fontWeightMedium,margin:0}),description:(0,a.css)({color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize,fontWeight:e.typography.bodySmall.fontWeight,paddingLeft:e.spacing(2),gap:e.spacing(2),display:"flex"}),body:(0,a.css)({display:"flex",gap:e.spacing(2),flexWrap:"wrap"}),stats:(0,a.css)({margin:"0px",color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize}),tooltip:(0,a.css)({marginRight:e.spacing(.25)})}),M=e=>e.message?e.message:`This query will process approximately ${j(e)}.`,j=e=>{const{text:t,suffix:r}=(0,h.getValueFormat)("bytes")(e.bytes,1);return t+r};var O=r(5572);function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){T(e,t,r[t])}))}return e}function A(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const S=(e,t)=>{const r=parseInt(e,10);return isNaN(r)?t:r},w=o.memo((({onChange:e,query:t,searchStreaming:r,metricsStreaming:a})=>{const o=(0,s.useStyles2)(I),[i,l]=(0,f.A)(!1);t.hasOwnProperty("limit")||(t.limit=O.eH),t.hasOwnProperty("tableType")||(t.tableType=g.Jv.Traces),t.hasOwnProperty("metricsQueryType")||(t.metricsQueryType=g.Ag.Range);const u=[`Limit: ${t.limit||O.eH}`,`Spans Limit: ${t.spss||O.m9}`,"Table Format: "+(t.tableType===g.Jv.Traces?"Traces":"Spans"),"|","Streaming: "+(r?"Enabled":"Disabled")],c=[`Step: ${t.step||"auto"}`,"Type: "+(t.metricsQueryType===g.Ag.Range?"Range":"Instant"),"|","Streaming: "+(a?"Enabled":"Disabled")];return(0,n.jsx)(y.U,{children:(0,n.jsxs)("div",{className:o.options,children:[(0,n.jsxs)(v,{title:"Search Options",collapsedInfo:u,isOpen:i,onToggle:l,children:[(0,n.jsx)(m.c,{label:"Limit",tooltip:"Maximum number of traces to return.",children:(0,n.jsx)(s.AutoSizeInput,{className:"width-4",placeholder:"auto",type:"number",min:1,defaultValue:t.limit||O.eH,onCommitChange:r=>{e(A(x({},t),{limit:S(r.currentTarget.value,O.eH)}))},value:t.limit})}),(0,n.jsx)(m.c,{label:"Span Limit",tooltip:"Maximum number of spans to return for each span set.",children:(0,n.jsx)(s.AutoSizeInput,{className:"width-4",placeholder:"auto",type:"number",min:1,defaultValue:t.spss||O.m9,onCommitChange:r=>{e(A(x({},t),{spss:S(r.currentTarget.value,O.m9)}))},value:t.spss})}),(0,n.jsx)(m.c,{label:"Table Format",tooltip:"How the query data should be displayed in the results table",children:(0,n.jsx)(s.RadioButtonGroup,{options:[{label:"Traces",value:g.Jv.Traces},{label:"Spans",value:g.Jv.Spans}],value:t.tableType,onChange:r=>{e(A(x({},t),{tableType:r}))}})}),(0,n.jsx)(m.c,{label:"Streaming",tooltip:(0,n.jsx)(C,{}),tooltipInteractive:!0,children:(0,n.jsx)("div",{children:r?"Enabled":"Disabled"})})]}),(0,n.jsxs)(v,{title:"Metrics Options",collapsedInfo:c,isOpen:i,onToggle:l,children:[(0,n.jsx)(m.c,{label:"Step",tooltip:"Defines the step for metric queries. Use duration notation, for example 30s or 1m",children:(0,n.jsx)(s.AutoSizeInput,{className:"width-4",placeholder:"auto",type:"string",defaultValue:t.step,onCommitChange:r=>{e(A(x({},t),{step:r.currentTarget.value}))},value:t.step})}),(0,n.jsx)(m.c,{label:"Type",tooltip:"Type of metrics query to run",children:(0,n.jsx)(s.RadioButtonGroup,{options:[{label:"Range",value:g.Ag.Range},{label:"Instant",value:g.Ag.Instant}],value:t.metricsQueryType,onChange:r=>{e(A(x({},t),{metricsQueryType:r}))}})}),(0,n.jsx)(m.c,{label:"Streaming",tooltip:(0,n.jsx)(C,{}),tooltipInteractive:!0,children:(0,n.jsx)("div",{children:a?"Enabled":"Disabled"})})]})]})})})),C=()=>(0,n.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,n.jsx)("span",{children:"Indicates if streaming is currently enabled. Streaming allows you to view partial query results before the entire query completes."}),(0,n.jsx)("a",{href:"https://grafana.com/docs/tempo/latest/traceql/#stream-query-results","aria-label":"Learn more about streaming query results",target:"_blank",rel:"noreferrer",style:{textDecoration:"underline"},children:"Learn more"})]});w.displayName="TempoQueryBuilderOptions";const I=e=>({options:(0,a.css)({display:"flex",width:"-webkit-fill-available",gap:e.spacing(1),"> div":{width:"auto"}})});var N=r(2190);function D({query:e,onChange:t}){return e.groupBy?(0,n.jsxs)(s.Alert,{title:"",severity:"info",children:["The aggregate by feature has been removed. We recommend using Traces Drildown app instead.  ",(0,n.jsx)(s.Button,{onClick:t,children:"Remove aggregate by from this query"})]}):null}var P=r(2862);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){E(e,t,r[t])}))}return e}function L(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const z=/^(\$\w+)|(\d+(?:\.\d)?\d*(?:us|µs|ns|ms|s|m|h))$/,R=()=>({noBoxShadow:(0,a.css)({boxShadow:"none","*:focus":{boxShadow:"none"}})}),k=({filter:e,operators:t,updateFilter:r})=>{const a=(0,s.useStyles2)(R);let o=!1;return"string"==typeof e.value&&(o=!!e.value&&!z.test(e.value.concat(""))),(0,n.jsxs)(s.HorizontalGroup,{spacing:"none",children:[(0,n.jsx)(s.Select,{className:a.noBoxShadow,inputId:`${e.id}-operator`,options:t.map(P.wu),value:e.operator,onChange:t=>{r(L(_({},e),{operator:null==t?void 0:t.value}))},isClearable:!1,"aria-label":`select ${e.id} operator`,allowCustomValue:!0,width:8}),(0,n.jsx)(s.Input,{className:a.noBoxShadow,value:e.value,onChange:t=>{r(L(_({},e),{value:t.currentTarget.value}))},placeholder:"e.g. 100ms, 1.2s","aria-label":`select ${e.id} value`,invalid:o,width:18})]})},F=({label:e,tooltip:t,children:r})=>(0,n.jsx)(s.InlineFieldRow,{children:(0,n.jsx)(s.InlineField,{label:e,labelWidth:28,grow:!0,tooltip:t,children:r})});var q=r(2181),Q=r(6569);function V(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Y(e,t,r[t])}))}return e}function G(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const $=["min-duration","max-duration","status"],B=({datasource:e,query:t,onChange:r,onClearResults:a,app:u,addVariablesToOptions:c=!0})=>{var d,f,y,m,h,v;const b=(0,s.useStyles2)(U),[M,j]=(0,o.useState)(),[O,T]=(0,o.useState)(null),[x,A]=(0,o.useState)(!0),[S,C]=(0,o.useState)(""),I=(0,i.getTemplateSrv)(),E=(0,o.useCallback)((e=>{var n;const a=W({},t);(n=a).filters||(n.filters=[]);const o=a.filters.findIndex((t=>t.id===e.id));o>=0?a.filters=(0,P._D)(a.filters,o,e):a.filters.push(e),r(a)}),[r,t]),_=(0,i.getTemplateSrv)().getVariables();(0,o.useEffect)((()=>{C(e.languageProvider.generateQueryFromFilters({traceqlFilters:(0,P.tH)(t.filters||[])}))}),[e.languageProvider,t,_]);const L=(0,o.useCallback)((e=>{var r;return null===(r=t.filters)||void 0===r?void 0:r.find((t=>t.id===e))}),[t.filters]);(0,o.useEffect)((()=>{const t=function(){var t,r=(t=function*(){try{yield e.languageProvider.start(),A(!1),j(void 0)}catch(e){e instanceof Error&&j(`Error: ${e.message}`)}},function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){V(o,n,a,i,s,"next",e)}function s(e){V(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();t()}),[e,j]),(0,o.useEffect)((()=>{var t,r;null===(r=e.search)||void 0===r||null===(t=r.filters)||void 0===t||t.filter((e=>e.value)).forEach((e=>{L(e.id)||E(e)}))}),[null===(d=e.search)||void 0===d?void 0:d.filters,L,E]);const z=(null===(y=e.search)||void 0===y||null===(f=y.filters)||void 0===f?void 0:f.map((e=>e.tag)))||[];z.push("duration"),z.push("traceDuration"),z.push("span:duration"),z.push("trace:duration"),z.push("status"),z.push("span:status");const R=(t.filters||[]).filter((t=>{var r,n;return!$.includes(t.id)&&-1===((null===(n=e.search)||void 0===n||null===(r=n.filters)||void 0===r?void 0:r.findIndex((e=>e.id===t.id)))||0)&&"duration-type"!==t.id})),Y=r=>{var n;if(!r)return S;const a=(null===(n=t.filters)||void 0===n?void 0:n.filter((e=>e.id!==r.id)))||[];return e.languageProvider.generateQueryFromFilters({traceqlFilters:(0,P.tH)(a||[])})};var B,Z,K;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:b.container,children:[(0,n.jsxs)("div",{children:[null===(h=e.search)||void 0===h||null===(m=h.filters)||void 0===m?void 0:m.map((t=>t.tag&&(0,n.jsx)(F,{label:(0,P.hr)(t,e.languageProvider),tooltip:`Filter your search by ${(0,P.pE)(t,e.languageProvider)}. To modify the default filters shown for search visit the Tempo datasource configuration page.`,children:(0,n.jsx)(q.A,{filter:L(t.id)||t,datasource:e,setError:T,updateFilter:E,tags:[],hideScope:!0,hideTag:!0,query:Y(L(t.id)),addVariablesToOptions:c})},t.id))),(0,n.jsx)(F,{label:"Status",children:(0,n.jsx)(q.A,{filter:L("status")||{id:"status",tag:"status",scope:g.d.Intrinsic,operator:"="},datasource:e,setError:T,updateFilter:E,tags:[],hideScope:!0,hideTag:!0,query:Y(L("status")),isMulti:!1,allowCustomValue:!1,addVariablesToOptions:c})}),(0,n.jsx)(F,{label:"Duration",tooltip:"The trace or span duration, i.e. end - start time of the trace/span. Accepted units are ns, ms, s, m, h",children:(0,n.jsxs)(s.HorizontalGroup,{spacing:"none",children:[(0,n.jsx)(s.Select,{options:[{label:"span",value:"span"},{label:"trace",value:"trace"}],value:null!==(B=null===(v=L("duration-type"))||void 0===v?void 0:v.value)&&void 0!==B?B:"span",onChange:e=>{const t=L("duration-type")||{id:"duration-type",value:"span"};E(G(W({},t),{value:null==e?void 0:e.value}))},"aria-label":"duration type"}),(0,n.jsx)(k,{filter:L("min-duration")||{id:"min-duration",tag:"duration",operator:">",valueType:"duration"},operators:[">",">="],updateFilter:E}),(0,n.jsx)(k,{filter:L("max-duration")||{id:"max-duration",tag:"duration",operator:"<",valueType:"duration"},operators:["<","<="],updateFilter:E})]})}),(0,n.jsx)(F,{label:"Tags",children:(0,n.jsx)(Q.A,{filters:R,datasource:e,setError:T,updateFilter:E,deleteFilter:e=>{r(G(W({},t),{filters:t.filters.filter((t=>t.id!==e.id))}))},staticTags:z,isTagsLoading:x,generateQueryWithoutFilter:Y,requireTagAndValue:!0,addVariablesToOptions:c})}),(0,n.jsx)(D,{query:t,onChange:()=>{delete t.groupBy,r(W({},t))}})]}),(0,n.jsxs)("div",{className:b.rawQueryContainer,children:[(0,n.jsx)(p,{query:I.replace(S),lang:{grammar:N.UD,name:"traceql"}}),(0,n.jsx)(s.Button,{variant:"secondary",size:"sm",onClick:()=>{(0,i.reportInteraction)("grafana_traces_copy_to_traceql_clicked",{app:null!=u?u:"",grafana_version:i.config.buildInfo.version,location:"search_tab"}),a();const n=e.languageProvider.generateQueryFromFilters({traceqlFilters:t.filters||[]});r(G(W({},t),{query:n,queryType:"traceql"}))},children:"Edit in TraceQL"})]}),(0,n.jsx)(w,{onChange:r,query:t,searchStreaming:null!==(Z=e.isStreamingSearchEnabled())&&void 0!==Z&&Z,metricsStreaming:null!==(K=e.isStreamingMetricsEnabled())&&void 0!==K&&K})]}),O?(0,n.jsxs)(s.Alert,{title:"Unable to connect to Tempo search",severity:"info",className:b.alert,children:["Please ensure that Tempo is configured with search enabled. If you would like to hide this tab, you can configure it in the ",(0,n.jsx)("a",{href:`/datasources/edit/${e.uid}`,children:"datasource settings"}),"."]}):null,M&&(0,n.jsx)(l.C,{severity:"error",text:M})]})},U=e=>({alert:(0,a.css)({maxWidth:"75ch",marginTop:e.spacing(2)}),container:(0,a.css)({display:"flex",gap:"4px",flexWrap:"wrap",flexDirection:"column"}),rawQueryContainer:(0,a.css)({alignItems:"center",backgroundColor:e.colors.background.secondary,display:"flex",justifyContent:"space-between",padding:e.spacing(1)})});var Z=r(1777),K=r(3437);function J(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function H(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){J(o,n,a,i,s,"next",e)}function s(e){J(o,n,a,i,s,"throw",e)}i(void 0)}))}}const X=({datasource:e,onChange:t,disabled:r,filterKey:a,allFilters:o})=>null===a?(0,n.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper",children:(0,n.jsx)(s.SegmentAsync,{disabled:r,className:"query-segment-key",Component:re,value:a,onChange:t,loadOptions:()=>ne(e,a,o),inputMinWidth:90})}):(0,n.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper",children:(0,n.jsx)(s.SegmentAsync,{disabled:r,className:"query-segment-key",value:a,onChange:t,loadOptions:()=>ae(e,a,o),inputMinWidth:90})}),ee="-- remove filter --",te={label:ee,value:ee},re=(0,n.jsx)("span",{className:"gf-form-label query-part","aria-label":"Add Filter",children:(0,n.jsx)(s.Icon,{name:"plus"})}),ne=function(){var e=H((function*(e,t,r){const n=yield(0,i.getDataSourceSrv)().get(e);if(!n||!n.getTagKeys)return[];const a=r.filter((e=>e.key!==t)),o=yield n.getTagKeys({filters:a});return(Array.isArray(o)?o:o.data).map((e=>({label:e.text,value:e.text})))}));return function(t,r,n){return e.apply(this,arguments)}}(),ae=function(){var e=H((function*(e,t,r){const n=yield ne(e,t,r);return[te,...n]}));return function(t,r,n){return e.apply(this,arguments)}}();function oe(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}const ie=({datasource:e,disabled:t,onChange:r,filterKey:a,filterValue:o,placeHolder:i,allFilters:l})=>(0,n.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper",children:(0,n.jsx)(s.SegmentAsync,{className:"query-segment-value",disabled:t,placeholder:i,value:o,onChange:r,loadOptions:()=>se(e,a,l)})}),se=function(){var e,t=(e=function*(e,t,r){const n=yield(0,i.getDataSourceSrv)().get(e);if(!n||!n.getTagValues)return[];const a=(0,h.getDefaultTimeRange)(),o=r.filter((e=>e.key!==t)),s=yield n.getTagValues({key:t,filters:o,timeRange:a});return(Array.isArray(s)?s:s.data).map((e=>({label:e.text,value:e.text})))},function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){oe(o,n,a,i,s,"next",e)}function s(e){oe(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(e,r,n){return t.apply(this,arguments)}}(),le=["=","!=","<",">","=~","!~"].map((e=>({label:e,value:e}))),ue=({value:e,disabled:t,onChange:r})=>(0,n.jsx)(s.Segment,{className:"query-segment-operator",value:e,disabled:t,options:le,onChange:r}),ce=({datasource:e,filter:{key:t,operator:r,value:a},onKeyChange:o,onOperatorChange:i,onValueChange:s,placeHolder:l,allFilters:u,disabled:c})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X,{disabled:c,datasource:e,filterKey:t,onChange:o,allFilters:u}),(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)(ue,{disabled:c,value:r,onChange:i})}),(0,n.jsx)(ie,{disabled:c,datasource:e,filterKey:t,filterValue:a,allFilters:u,onChange:s,placeHolder:l})]}),pe=K.Ay.t,de=({datasource:e,appendBefore:t,onCompleted:r,allFilters:a})=>{const[i,s]=(0,o.useState)(null),[l,u]=(0,o.useState)("="),c=(0,o.useCallback)((e=>{var t;e.value===ee?s(null):s(null!==(t=e.value)&&void 0!==t?t:"")}),[s]),p=(0,o.useCallback)((e=>{var t;return u(null!==(t=e.value)&&void 0!==t?t:"")}),[u]),d=(0,o.useCallback)((e=>{var t;r({value:null!==(t=e.value)&&void 0!==t?t:"",operator:l,key:i}),s(null),u("=")}),[r,l,i]);return null===i?(0,n.jsx)(X,{datasource:e,filterKey:i,onChange:c,allFilters:a}):(0,n.jsxs)(o.Fragment,{children:[t,(0,n.jsx)(ce,{datasource:e,filter:{key:i,value:"",operator:l},placeHolder:pe("variable.adhoc.placeholder","Select value",undefined),onKeyChange:c,onOperatorChange:p,onValueChange:d,allFilters:a})]},"filter-builder")},ge=({label:e})=>(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)("span",{className:"gf-form-label query-keyword",children:e})});function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ye extends o.PureComponent{render(){const{filters:e,disabled:t}=this.props;return(0,n.jsxs)("div",{className:"gf-form-inline",children:[this.renderFilters(e,t),!t&&(0,n.jsx)(de,{datasource:this.props.datasource,appendBefore:e.length>0?(0,n.jsx)(ge,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,allFilters:this.getAllFilters()})]})}getAllFilters(){return this.props.baseFilters?this.props.baseFilters.concat(this.props.filters):this.props.filters}renderFilters(e,t){return 0===e.length&&t?(0,n.jsx)(s.Segment,{disabled:t,value:"No filters",options:[],onChange:()=>{}}):e.reduce(((e,r,a)=>(e.length>0&&e.push((0,n.jsx)(ge,{label:"AND"},`condition-${a}`)),e.push(this.renderFilterSegments(r,a,t)),e)),[])}renderFilterSegments(e,t,r){return(0,n.jsx)(o.Fragment,{children:(0,n.jsx)(ce,{disabled:r,datasource:this.props.datasource,filter:e,onKeyChange:this.onChange(t,"key"),onOperatorChange:this.onChange(t,"operator"),onValueChange:this.onChange(t,"value"),allFilters:this.getAllFilters()})},`filter-${t}`)}constructor(...e){super(...e),fe(this,"onChange",((e,t)=>r=>{const{filters:n}=this.props,{value:a}=r;return r.value===ee?this.props.removeFilter(e):this.props.changeFilter(e,(o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){fe(e,t,r[t])}))}return e}({},n[e]),i=null!=(i={[t]:a})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(i)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})),o));var o,i})),fe(this,"appendFilterToVariable",(e=>{this.props.addFilter(e)}))}}var me=r(4340);function he(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ve(e,t,r[t])}))}return e}function Me(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function je({graphDatasourceUid:e,query:t,onChange:r}){const a=(0,s.useStyles2)(xe),i=(0,Z.A)((()=>(0,me.q$)(e)),[e]),[l,u]=(0,o.useState)(void 0);if((0,o.useEffect)((()=>{function e(){return t=function*(e){const t=yield e.getTagKeys({filters:[{key:"__name__",operator:"=~",value:"traces_service_graph_request_server_seconds_sum|traces_service_graph_request_total|traces_service_graph_request_failed_total",condition:""}]});u(Boolean(t.length))},e=function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){he(o,n,a,i,s,"next",e)}function s(e){he(o,n,a,i,s,"throw",e)}i(void 0)}))},e.apply(this,arguments);var t}!i.loading&&i.value&&function(t){e.apply(this,arguments)}(i.value)}),[i]),i.loading)return null;const c=i.value;if(!e)return Oe("No service graph datasource selected","Please set up a service graph datasource in the datasource settings",a);if(e&&!c)return Oe("No service graph data found","Service graph datasource is configured but the data source no longer exists. Please configure existing data source to use the service graph functionality",a);const p=function(e){let t,r=[];const n=/([\w_]+)(=|!=|<|>|=~|!~)"(.*?)"/g;for(;null!==(t=n.exec(e));)r.push({key:t[1],operator:t[2],value:t[3],condition:""});return r}((Array.isArray(t.serviceMapQuery)?t.serviceMapQuery[0]:t.serviceMapQuery)||"");return(0,n.jsxs)("div",{children:[(0,n.jsx)(s.InlineFieldRow,{children:(0,n.jsx)(s.InlineField,{label:"Filter",labelWidth:14,grow:!0,children:(0,n.jsx)(ye,{datasource:{uid:e},filters:p,baseFilters:[{key:"__name__",operator:"=~",value:"traces_service_graph_request_total|traces_spanmetrics_calls_total",condition:""}],addFilter:e=>{r(Me(be({},t),{serviceMapQuery:Te([...p,e])}))},removeFilter:e=>{const n=[...p];n.splice(e,1),r(Me(be({},t),{serviceMapQuery:Te(n)}))},changeFilter:(e,n)=>{const a=[...p];a.splice(e,1,n),r(Me(be({},t),{serviceMapQuery:Te(a)}))}})})}),!1===l?Oe("No service graph data found","Please ensure that service graph metrics are set up correctly",a):null]})}function Oe(e,t,r){return(0,n.jsxs)(s.Alert,{title:e,severity:"info",className:r.alert,children:[t," according to the"," ",(0,n.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://grafana.com/docs/grafana/latest/datasources/tempo/service-graph/",className:r.link,children:"Tempo documentation"}),"."]})}function Te(e){return`{${e.map((e=>`${e.key}${e.operator}"${e.value}"`)).join(",")}}`}const xe=e=>({alert:(0,a.css)({maxWidth:"75ch",marginTop:e.spacing(2)}),link:(0,a.css)({color:e.colors.text.link,textDecoration:"underline"})});var Ae=r(3241);const Se={};var we=r(6417),Ce=r(3731);function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e,t){const r=e.cursorAt(t);do{if(r.from===t||r.to===t){const{node:e}=r;if(e.type.isError)return e}}while(r.next());return null}function De(e,t){return e[t]}function Pe(e,t){let r=e;for(const[e,n]of t){if(r=De(r,e),null===r)return null;if(void 0===n.find((e=>e===(null==r?void 0:r.type.id))))return null}return r}function Ee(e,t){return t.slice(e.from===e.to?e.from-1:e.from,e.to)}function _e(e,t){return e.every(((e,r)=>e===t[r]))}const Le=[{path:[0,Ce.d4],fun:function(e,t){const r=Pe(e,[["parent",[Ce.d4]]]),n=r?Ee(r,t):"";if("."===n)return{type:"SPANSET_ONLY_DOT"};const a=n.indexOf("."),o=n.slice(0,a);return["event","instrumentation","link","resource","span","parent"].find((e=>e===o))?{type:"SPANSET_IN_NAME_SCOPE",scope:o}:{type:"SPANSET_IN_NAME"}}},{path:[0,Ce.v5],fun:ke},{path:[0,Ce.NA],fun:function(e,t,r){const n=ze(e,t,r);return n||{type:"SPANSET_EXPRESSION_OPERATORS_WITH_MISSING_CLOSED_BRACE"}}},{path:[0,Ce.S6],fun:qe},{path:[0,Ce.sd],fun:qe},{path:[0,Ce.vp],fun:qe},{path:[0,Ce.yl],fun:qe},{path:[0,Ce.zs],fun:function(e,t,r){var n;return(null===(n=e.prevSibling)||void 0===n?void 0:n.type.id)===Ce.nT?{type:"SPANSET_PIPELINE_AFTER_OPERATOR"}:{type:"NEW_SPANSET"}}},{path:[0,Ce.T,Ce.$f],fun:function(e,t,r){var n;if((null===(n=e.prevSibling)||void 0===n?void 0:n.type.id)!==Ce.LU)return{type:"SPANSET_COMPARISON_OPERATORS"}}},{path:[Ce.v5],fun:Re},{path:[Ce.NA],fun:Re},{path:[Ce.zs],fun:Fe},{path:[Ce.z],fun:Fe},{path:[Ce.Qf,Ce.jC],fun:ke}],ze=(e,t,r)=>{const n=e=>{const r=Pe(e,[["firstChild",[Ce.d4]]]),n=r?Ee(r,t):"",a=n.indexOf(".");return n.slice(0,a)};if(" "===t[r-1])return;const a=Pe(e,[["firstChild",[Ce.v5]]]);if(a)return{type:"SPANSET_IN_NAME_SCOPE",scope:n(a)};const o=Pe(e,[["parent",[Ce.NA]],["firstChild",[Ce.v5]]]);return o&&" "!==t[r]?{type:"SPANSET_IN_NAME_SCOPE",scope:n(o)}:void 0};function Re(e,t,r,n){const a=ze(e,t,n);if(a)return a;let o=Pe(e,[["firstChild",[Ce.v5]],["firstChild",[Ce.d4]]]);return o?{type:"SPANSET_EXPRESSION_OPERATORS"}:(o=Pe(e,[["lastChild",[Ce.v5]],["lastChild",[Ce.v5]],["lastChild",[Ce.jC]]]),o?{type:"SPANFIELD_COMBINING_OPERATORS"}:(o=Pe(e,[["lastChild",[Ce.v5]]]),o?{type:"SPANSET_EXPRESSION_OPERATORS"}:{type:"SPANSET_EMPTY"}))}function ke(e,t,r,n){var a,o,i;const s=ze(e,t,n);if(s)return s;if(Pe(e,[["parent",[Ce.jC]],["parent",[Ce.v5]],["prevSibling",[Ce.Ib]]])){var l,u,c;let r=null===(c=e.parent)||void 0===c||null===(u=c.parent)||void 0===u||null===(l=u.prevSibling)||void 0===l?void 0:l.prevSibling;if(r)return{type:"SPANSET_IN_VALUE",tagName:Ee(r,t),betweenQuotes:!0}}if((null===(a=e.prevSibling)||void 0===a?void 0:a.type.id)===Ce.Ib){var p;let r=null===(p=e.prevSibling)||void 0===p?void 0:p.prevSibling;if(r)return{type:"SPANSET_IN_VALUE",tagName:Ee(r,t),betweenQuotes:!1}}return"And"===(null===(o=e.prevSibling)||void 0===o?void 0:o.type.name)||"Or"===(null===(i=e.prevSibling)||void 0===i?void 0:i.type.name)?{type:"SPANSET_EMPTY"}:{type:"SPANSET_IN_THE_MIDDLE"}}function Fe(e,t,r){let n=e.firstChild;try{for(n=e.firstChild;n.to<r;)n=n.nextSibling}catch(e){console.error("Unexpected error while searching for previous node",e)}return(null==n?void 0:n.type.id)===Ce.KD||(null==n?void 0:n.type.id)===Ce.Or?{type:"NEW_SPANSET"}:{type:"SPANSET_COMBINING_OPERATORS"}}function qe(e,t,r){const n=null==e?void 0:e.parent;if(n&&[Ce.sd,Ce.S6,Ce.vp,Ce.yl,Ce.oL].includes(n.type.id))return{type:"ATTRIBUTE_FOR_FUNCTION"}}function Qe(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function Ve(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Qe(o,n,a,i,s,"next",e)}function s(e){Qe(o,n,a,i,s,"throw",e)}i(void 0)}))}}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ye(e,t,r[t])}))}return e}function Ge(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class $e{provideCompletionItems(e,t){var r;if(!this.monaco||!this.editor)throw new Error("provideCompletionItems called before CompletionProvider was initialized");if((null===(r=this.editor.getModel())||void 0===r?void 0:r.id)!==e.id)return{suggestions:[]};const{range:n,offset:a}=function(e,t,r){const n=t.getWordAtPosition(r),a=null!=n?e.Range.lift({startLineNumber:r.lineNumber,endLineNumber:r.lineNumber,startColumn:n.startColumn,endColumn:n.endColumn}):e.Range.fromPositions(r),o={column:r.column,lineNumber:r.lineNumber};return{offset:t.getOffsetAt(o),range:a}}(this.monaco,e,t),o=function(e,t){if(""===e)return{query:e,type:"EMPTY"};const r=Ce.K3.parse(e);let n=t;for(;n-1>=0&&" "===e[n-1];)n-=1;let a=Ne(r,n);a||(a=Ne(r,n-1)),a||(a=Ne(r,n+1));const o=null!=a?a.cursor():r.cursorAt(n),i=o.node,s=[o.type.id];for(;o.parent();)s.push(o.type.id);let l;for(let r of Le)_e(r.path,s)&&(l=r.fun(i,e,n,t));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ie(e,t,r[t])}))}return e}({query:e},null!=l?l:{type:"UNKNOWN"})}(e.getValue(),a);return(null!=o?this.getCompletions(o,this.setAlertText):Promise.resolve([])).then((t=>{var r;const o=function(e,t,r="noOp",n,a){var o;const[i,s,l]=null!==(o=n.substring(0,a).match(Ue))&&void 0!==o?o:[],u=e.length.toString().length,c=e.map(((e,n)=>{const o={kind:Be(e.type),label:e.label,insertText:e.insertText,insertTextRules:e.insertTextRules,detail:e.detail,documentation:e.documentation,sortText:n.toString().padStart(u,"0"),range:t,command:{id:r,title:"Report Interaction",arguments:[e.label,e.type]}};return l&&"TAG_NAME"===e.type&&function(e,t,r,n){null==n&&"."!==e.insertText[0]&&(e.insertText="."+e.insertText),e.range=Ge(We({},e.range),{startColumn:t-r.length+1})}(o,a,l,s),o}));return c}(t,n,null!==(r=this.registerInteractionCommandId)&&void 0!==r?r:void 0,e.getValue(),a);return{suggestions:o}}))}setRegisterInteractionCommandId(e){this.registerInteractionCommandId=e}getTagValues(e,t){var r=this;return Ve((function*(){let n;const a=`${e}:${t}`;return r.cachedValues.hasOwnProperty(a)?n=r.cachedValues[a]:(n=yield r.languageProvider.getOptionsV2(e,t),r.cachedValues[a]=n),n}))()}getCompletions(e,t){var r=this;return Ve((function*(){switch(e.type){case"UNKNOWN":return[];case"EMPTY":return r.getScopesCompletions("{ ","$0 }").concat(r.getIntrinsicsCompletions("{ ","$0 }")).concat(r.getTagsCompletions("{ ."));case"SPANSET_EMPTY":case"ATTRIBUTE_FOR_FUNCTION":return r.getScopesCompletions().concat(r.getIntrinsicsCompletions()).concat(r.getTagsCompletions("."));case"SPANSET_ONLY_DOT":return r.getTagsCompletions();case"SPANSET_IN_THE_MIDDLE":case"SPANSET_EXPRESSION_OPERATORS_WITH_MISSING_CLOSED_BRACE":return r.getOperatorsCompletions([...$e.comparisonOps,...$e.logicalOps]);case"SPANSET_IN_NAME":return r.getScopesCompletions().concat(r.getIntrinsicsCompletions()).concat(r.getTagsCompletions());case"SPANSET_IN_NAME_SCOPE":return r.getTagsCompletions(void 0,e.scope);case"SPANSET_EXPRESSION_OPERATORS":return r.getOperatorsCompletions([...$e.comparisonOps,...$e.logicalOps,...$e.arithmeticOps]);case"SPANFIELD_COMBINING_OPERATORS":return r.getOperatorsCompletions([...$e.logicalOps,...$e.arithmeticOps,...$e.comparisonOps]);case"SPANSET_COMBINING_OPERATORS":return r.getOperatorsCompletions($e.spansetOps);case"SPANSET_PIPELINE_AFTER_OPERATOR":return[...$e.functions.map((e=>Ge(We({},e),{insertTextRules:we.eo.CompletionItemInsertTextRule.InsertAsSnippet,type:"FUNCTION"}))),...r.getScopesCompletions().concat(r.getIntrinsicsCompletions()).concat(r.getTagsCompletions("."))];case"SPANSET_COMPARISON_OPERATORS":return r.getOperatorsCompletions($e.comparisonOps);case"SPANSET_IN_VALUE":let n;try{n=yield r.getTagValues(e.tagName,e.query),t(void 0)}catch(e){(0,i.isFetchError)(e)?t(e.data.error):e instanceof Error&&t(`Error: ${e.message}`)}const a=t=>e.betweenQuotes?t.label:"string"===t.type?`"${t.label}"`:t.label,o=[];return null==n||n.forEach((e=>{(null==e?void 0:e.label)&&o.push({label:e.label,insertText:a(e),type:"TAG_VALUE"})})),o;case"SPANSET_AFTER_VALUE":return $e.logicalOps.map((e=>({label:e.label,insertText:e.insertText+"}",type:"OPERATOR"})));case"NEW_SPANSET":return r.getScopesCompletions("{ ","$0 }").concat(r.getIntrinsicsCompletions("{ ","$0 }")).concat(r.getTagsCompletions("."));default:throw new Error(`Unexpected situation ${e}`)}}))()}getTagsCompletions(e,t){return function(e,t=""){return e.sort(Ze.compare).map((e=>({label:e,insertText:`${t}${e}`,type:"TAG_NAME"})))}(this.languageProvider.getTraceqlAutocompleteTags(t),e)}getIntrinsicsCompletions(e,t){return this.languageProvider.getIntrinsics().map((r=>{var n;return{label:r,insertText:(e||"")+r+(t||""),type:"KEYWORD",insertTextRules:null===(n=we.eo.CompletionItemInsertTextRule)||void 0===n?void 0:n.InsertAsSnippet}}))}getScopesCompletions(e,t){return N.Wu.map((r=>{var n;return{label:r,insertText:(e||"")+r+(t||""),type:"SCOPE",insertTextRules:null===(n=we.eo.CompletionItemInsertTextRule)||void 0===n?void 0:n.InsertAsSnippet}}))}getOperatorsCompletions(e){return e.map((e=>Ge(We({},e),{type:"OPERATOR"})))}constructor(e){Ye(this,"languageProvider",void 0),Ye(this,"registerInteractionCommandId",void 0),Ye(this,"setAlertText",void 0),Ye(this,"triggerCharacters",["{",".","[","(","=","~"," ",'"']),Ye(this,"monaco",void 0),Ye(this,"editor",void 0),Ye(this,"cachedValues",{}),this.languageProvider=e.languageProvider,this.setAlertText=e.setAlertText,this.registerInteractionCommandId=null}}function Be(e){switch(e){case"TAG_NAME":return we.eo.CompletionItemKind.Enum;case"KEYWORD":return we.eo.CompletionItemKind.Keyword;case"OPERATOR":return we.eo.CompletionItemKind.Operator;case"TAG_VALUE":return we.eo.CompletionItemKind.EnumMember;case"SCOPE":return we.eo.CompletionItemKind.Class;case"FUNCTION":return we.eo.CompletionItemKind.Function;default:throw new Error(`Unexpected CompletionItemType: ${e}`)}}Ye($e,"arithmeticOps",[{label:"+",insertText:"+",detail:"Plus"},{label:"-",insertText:"-",detail:"Minus"},{label:"*",insertText:"*",detail:"Times"},{label:"/",insertText:"/",detail:"Over"}]),Ye($e,"logicalOps",[{label:"&&",insertText:"&&",detail:"And",documentation:"And (intersection) operator. Checks that both conditions found matches."},{label:"||",insertText:"||",detail:"Or",documentation:"Or (union) operator. Checks that either condition found matches."}]),Ye($e,"comparisonOps",[{label:"=",insertText:"=",detail:"Equality"},{label:"!=",insertText:"!=",detail:"Inequality"},{label:">",insertText:">",detail:"Greater than"},{label:">=",insertText:">=",detail:"Greater than or equal to"},{label:"<",insertText:"<",detail:"Less than"},{label:"<=",insertText:"<=",detail:"Less than or equal to"},{label:"=~",insertText:"=~",detail:"Regular expression"},{label:"!~",insertText:"!~",detail:"Negated regular expression"}]),Ye($e,"structuralOps",[{label:">>",insertText:">>",detail:"Descendant",documentation:"Descendant operator. Looks for spans matching {condB} that are descendants of a span matching {condA}"},{label:">",insertText:">",detail:"Child",documentation:"Child operator. Looks for spans matching {condB} that are direct child spans of a parent matching {condA}"},{label:"<<",insertText:"<<",detail:"Ancestor",documentation:"Ancestor operator. Looks for spans matching {condB} that are ancestors of a span matching {condA}"},{label:"<",insertText:"<",detail:"Parent",documentation:"Parent operator. Looks for spans matching {condB} that are direct parent spans of a child matching {condA}"},{label:"~",insertText:"~",detail:"Sibling",documentation:"Sibling operator. Checks that spans matching {condA} and {condB} are siblings of the same parent span."}]),Ye($e,"spansetOps",[{label:"|",insertText:"|",detail:"Pipe"},...$e.logicalOps,...$e.structuralOps]),Ye($e,"aggregatorFunctions",[{label:"avg",insertText:"avg($0)",detail:"Average of attribute",documentation:"Computes the average of a given numeric attribute or intrinsic for a spanset."},{label:"count",insertText:"count()$0",detail:"Number of spans",documentation:"Counts the number of spans in a spanset."},{label:"max",insertText:"max($0)",detail:"Max value of attribute",documentation:"Computes the maximum value of a given numeric attribute or intrinsic for a spanset."},{label:"min",insertText:"min($0)",detail:"Min value of attribute",documentation:"Computes the minimum value of a given numeric attribute or intrinsic for a spanset."},{label:"sum",insertText:"sum($0)",detail:"Sum value of attribute",documentation:"Computes the sum value of a given numeric attribute or intrinsic for a spanset."}]),Ye($e,"functions",[...$e.aggregatorFunctions,{label:"by",insertText:"by($0)",detail:"Grouping of attributes",documentation:"Groups by arbitrary attributes."},{label:"count_over_time",insertText:"count_over_time()$0",detail:"Number of spans over time",documentation:"Counts the number of spans over time."},{label:"min_over_time",insertText:"min_over_time()$0",detail:"Minimum value of attribute over time",documentation:"Minimum value for the specified attribute across all matching spans over time."},{label:"max_over_time",insertText:"max_over_time()$0",detail:"Maximum value of attribute over time",documentation:"Maximum value for the specified attribute across all matching spans over time."},{label:"avg_over_time",insertText:"avg_over_time()$0",detail:"Average value of attribute over time",documentation:"Average value for the specified attribute across all matching spans over time."},{label:"sum_over_time",insertText:"sum_over_time()$0",detail:"Summation value of attribute over time",documentation:"Sum of the values for the specified attribute across all matching spans over time."},{label:"histogram_over_time",insertText:"histogram_over_time($0)",detail:"Histogram of attribute over time",documentation:"Retrieves a histogram of an attributes values over time which are sorted into buckets."},{label:"quantile_over_time",insertText:"quantile_over_time($0)",detail:"Quantile of attribute over time",documentation:"Retrieves one or more quantiles of an attributes numeric values over time."},{label:"rate",insertText:"rate()$0",detail:"Rate of spans",documentation:"Counts the rate of spans per second."},{label:"select",insertText:"select($0)",detail:"Selection of fields",documentation:"Selects arbitrary fields from spans."}]);const Ue=/(event\.|instrumentation\.|link\.|resource\.|span\.|\.)?([\w./-]*)$/,Ze=new Intl.Collator("en",{sensitivity:"accent"}),Ke=e=>{if(""===e.trim())return[];if(e.trim().match(/^[0-9A-Fa-f]*$/))return[];const t=Ce.K3.parse(e),r=[];return t.iterate({enter:e=>{0===e.type.id&&r.push(e.node)}}),r},Je=(e,t,r)=>{const n=[...He(e.MarkerSeverity.Error,t,r),...Xe(e.MarkerSeverity.Warning,t)];e.editor.setModelMarkers(t,"owner",n)},He=(e,t,r)=>r.map((r=>{const n=(e=>{var t;switch(null===(t=e.parent)||void 0===t?void 0:t.type.id){case Ce.v5:var r;switch(null===(r=e.prevSibling)||void 0===r?void 0:r.type.id){case Ce.KD:case Ce.Or:return"Invalid value after logical operator.";case Ce.Ib:return"Invalid value after comparison or arithmetic operator.";default:return"Invalid operator after field expression."}case Ce.NA:var n;return(null===(n=e.prevSibling)||void 0===n?void 0:n.type.id)===Ce.v5?"Invalid comparison operator after field expression.":"Invalid expression for spanset.";case Ce.zs:var a;switch(null===(a=e.prevSibling)||void 0===a?void 0:a.type.id){case Ce.zs:return"Invalid spanset combining operator after spanset expression.";case Ce.nT:return"Invalid aggregation operator after pipeline operator.";default:return"Invalid spanset expression after spanset combining operator."}case Ce.sd:case Ce.S6:var o,i,s,l,u,c,p;return(null===(s=e.parent)||void 0===s||null===(i=s.parent)||void 0===i||null===(o=i.parent)||void 0===o?void 0:o.type.id)===Ce.vp?"Invalid expression for by operator.":(null===(p=e.parent)||void 0===p||null===(c=p.parent)||void 0===c||null===(u=c.parent)||void 0===u||null===(l=u.parent)||void 0===l?void 0:l.type.id)===Ce.yl?"Invalid expression for select operator.":"Invalid expression for aggregator operator.";case Ce.d4:return"Invalid expression for spanset.";case Ce.T:var d;switch(null===(d=e.prevSibling)||void 0===d?void 0:d.type.id){case Ce.LU:return"Invalid value after comparison operator.";case Ce.JP:var g,f;if((null===(f=e.prevSibling)||void 0===f||null===(g=f.firstChild)||void 0===g?void 0:g.type.id)===Ce.S6)return"Invalid comparison operator after aggregator operator.";default:return"Invalid value after comparison operator."}default:return"Invalid query."}})(r);return et(e,n,t,r.from,r.to)})),Xe=(e,t)=>{let r=[];const n=t.getValue(),a=Ce.K3.parse(n);if(n.indexOf(".")>-1){const n=a.cursorAt(0);do{const{node:a}=n;var o,i,s,l,u,c;if(a.type.id===Ce.gw&&(null===(o=a.prevSibling)||void 0===o?void 0:o.type.id)!==Ce.n$&&(null===(i=a.prevSibling)||void 0===i?void 0:i.type.id)!==Ce.Jh&&(null===(s=a.prevSibling)||void 0===s?void 0:s.type.id)!==Ce.r5&&(null===(l=a.prevSibling)||void 0===l?void 0:l.type.id)!==Ce.N_&&(null===(u=a.prevSibling)||void 0===u?void 0:u.type.id)!==Ce.FW&&(null===(c=a.prevSibling)||void 0===c?void 0:c.type.id)!==Ce.L9){const n=a.prevSibling?a.prevSibling.from:a.from-1,o=a.prevSibling?a.prevSibling.to:a.from-1,i="Add resource or span scope to attribute to improve query performance.";r.push(et(e,i,t,n,o))}}while(n.next())}return r},et=(e,t,r,n,a)=>{let o=0,i=0,s=n,l=a;for(;s>0;)o++,s-=r.getLineLength(o)+1;for(;l>0;)i++,l-=r.getLineLength(i)+1;return{message:t,severity:e,startLineNumber:o,endLineNumber:i,startColumn:s+r.getLineLength(o)+2,endColumn:l+r.getLineLength(i)+2}};function tt(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e){const[t,r]=(0,o.useState)(),{query:a,onChange:u,onRunQuery:c,placeholder:p}=e,d=function(e,t){const r=(0,o.useRef)(new $e({languageProvider:e.languageProvider,setAlertText:t}));(0,o.useEffect)((()=>{const r=function(){var r,n=(r=function*(){try{yield e.languageProvider.start(),t(void 0)}catch(e){e instanceof Error&&t(`Error: ${e.message}`)}},function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function i(e){tt(o,n,a,i,s,"next",e)}function s(e){tt(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();r()}),[e,t]);const n=(0,o.useRef)(null);return(0,o.useEffect)((()=>()=>{var e;null===(e=n.current)||void 0===e||e.call(n)}),[]),(e,t,a)=>{r.current.editor=e,r.current.monaco=t,r.current.setRegisterInteractionCommandId(a);const{dispose:o}=t.languages.registerCompletionItemProvider(ot,r.current);n.current=o}}(e.datasource,r),g=(0,s.useTheme2)(),f=st(g,p),y=(0,o.useRef)(a);y.current=a;const m=e=>{var t,r;u((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){rt(e,t,r[t])}))}return e}({},y.current),r=null!=(r={query:e})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t))},h=(0,o.useRef)(c);h.current=c;const v=(0,o.useRef)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.CodeEditor,{value:a.query||"",language:ot,onBlur:m,onChange:m,containerStyles:f.queryField,readOnly:e.readOnly,monacoOptions:{folding:!1,fontSize:14,lineNumbers:"off",overviewRulerLanes:0,renderLineHighlight:"none",scrollbar:{vertical:"hidden",verticalScrollbarSize:8,horizontal:"hidden",horizontalScrollbarSize:0},scrollBeyondLastLine:!1,wordWrap:"on"},onBeforeEditorMount:it,onEditorDidMount:(t,r)=>{e.readOnly||(d(t,r,function(e){return e.addCommand(0,(function(e,t,r){const n={datasourceType:"tempo",type:r};"TAG_VALUE"!==r&&(n.label=t),(0,i.reportInteraction)("grafana_traces_traceql_completion",n)}))}(t)),function(e,t){e.addAction({id:"run-query",label:"Run Query",keybindings:[t.KeyMod.Shift|t.KeyCode.Enter],contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(){h.current()}})}(t,r),function(e,t,r){const n=[{range:new t.Range(1,1,1,1),options:{className:r.placeholder,isWholeLine:!0}}];let a=[];const o=()=>{const t=e.getModel();if(!t)return;const r=0===t.getValueLength()?n:[];a=t.deltaDecorations(a,r)};o(),e.onDidChangeModelContent(o)}(t,r,f)),function(e){const t=e.getDomNode(),r=()=>{if(t){const r=Math.min(1e3,e.getContentHeight()),n=parseInt(t.style.width,10);t.style.width=`${n}px`,t.style.height=`${r}px`,e.layout({width:n,height:r})}};e.onDidContentSizeChange(r),r()}(t);const n=t.getModel();if(n){const e=Ke(n.getValue());Je(r,n,e)}t.onDidChangeModelContent((e=>{const n=t.getModel();if(!n)return;window.clearTimeout(v.current);const a=Ke(n.getValue()),o=e.changes[0].rangeOffset;Je(r,n,a.filter((e=>!(e.from<=o&&o<=e.to)))),v.current=window.setTimeout((()=>{Je(r,n,a)}),500)}))}}),t&&(0,n.jsx)(l.C,{severity:"error",text:t})]})}let at=!1;const ot="traceql";function it(e){if(!at){at=!0;const{aliases:t,extensions:r,mimetypes:n,def:a}=N.YG;e.languages.register({id:ot,aliases:t,extensions:r,mimetypes:n}),e.languages.setMonarchTokensProvider(ot,a.language),e.languages.setLanguageConfiguration(ot,a.languageConfiguration)}}const st=(e,t)=>({queryField:(0,a.css)({borderRadius:e.shape.radius.default,border:`1px solid ${e.components.input.borderColor}`,flex:1}),placeholder:(0,a.css)({"::after":{content:`'${t}'`,fontFamily:e.typography.fontFamilyMonospace,opacity:.3}})});function lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ut(e){const t=(0,s.useStyles2)(ct),r=(0,Ae.defaults)(e.query,Se),[a,l]=(0,o.useState)((()=>{const t=e.datasource.languageProvider.generateQueryFromFilters({traceqlFilters:r.filters||[]});return t===r.query||"{}"===t}));var u,c;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.InlineLabel,{children:["Build complex queries using TraceQL to select a list of traces."," ",(0,n.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://grafana.com/docs/tempo/latest/traceql/",children:"Documentation"})]}),!a&&(0,n.jsxs)("div",{className:t.copyContainer,children:[(0,n.jsx)("span",{children:"Continue editing the query from the Search tab?"}),(0,n.jsx)(s.Button,{variant:"secondary",size:"sm",onClick:()=>{var t,n,a;(0,i.reportInteraction)("grafana_traces_copy_to_traceql_clicked",{app:null!==(t=e.app)&&void 0!==t?t:"",grafana_version:i.config.buildInfo.version,location:"traceql_tab"}),e.onClearResults(),e.onChange((n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){lt(e,t,r[t])}))}return e}({},r),a=null!=(a={query:e.datasource.languageProvider.generateQueryFromFilters({traceqlFilters:r.filters||[]})})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(a)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})),n)),l(!0)},style:{marginLeft:"10px"},children:"Copy query from Search"})]}),(0,n.jsx)(nt,{placeholder:"Enter a TraceQL query or trace ID (run with Shift+Enter)",query:r,onChange:e.onChange,datasource:e.datasource,onRunQuery:e.onRunQuery}),(0,n.jsx)("div",{className:t.optionsContainer,children:(0,n.jsx)(w,{query:r,onChange:e.onChange,searchStreaming:null!==(u=e.datasource.isStreamingSearchEnabled())&&void 0!==u&&u,metricsStreaming:null!==(c=e.datasource.isStreamingMetricsEnabled())&&void 0!==c&&c})})]})}const ct=e=>({optionsContainer:(0,a.css)({marginTop:"10px"}),copyContainer:(0,a.css)({backgroundColor:e.colors.background.secondary,padding:e.spacing(.5,1),fontSize:e.typography.body.fontSize})});function pt(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){dt(e,t,r[t])}))}return e}function ft(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class yt extends o.PureComponent{componentDidMount(){var e,t=this;return(e=function*(){t.props.query.queryType&&"clear"!==t.props.query.queryType||t.props.onChange(ft(gt({},t.props.query),{queryType:"traceql"}))},function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){pt(o,n,a,i,s,"next",e)}function s(e){pt(o,n,a,i,s,"throw",e)}i(void 0)}))})()}render(){var e;const{query:t,onChange:r,datasource:o,app:l}=this.props,u=null===(e=o.serviceMap)||void 0===e?void 0:e.datasourceUid;return(t.spanName||t.serviceName||t.search||t.maxDuration||t.minDuration||"nativeSearch"===t.queryType)&&r((0,me.d6)(t)),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Modal,{title:"Upload trace",isOpen:this.state.uploadModalOpen,onDismiss:()=>this.setState({uploadModalOpen:!1}),children:(0,n.jsx)("div",{className:(0,a.css)({padding:this.props.theme.spacing(2)}),children:(0,n.jsx)(s.FileDropzone,{options:{multiple:!1},onLoad:e=>{if("string"!=typeof e&&null!==e)throw Error("Unexpected result type: "+typeof e);this.props.datasource.uploadedJson=e,r(ft(gt({},t),{queryType:"upload"})),this.setState({uploadModalOpen:!1}),this.props.onRunQuery()}})})}),(0,n.jsx)(s.InlineFieldRow,{children:(0,n.jsx)(s.InlineField,{label:"Query type",grow:!0,children:(0,n.jsxs)(s.HorizontalGroup,{spacing:"sm",align:"center",justify:"space-between",children:[(0,n.jsx)(s.RadioButtonGroup,{options:[{value:"traceqlSearch",label:"Search"},{value:"traceql",label:"TraceQL"},{value:"serviceMap",label:"Service Graph"}],value:t.queryType,onChange:e=>{var n;(0,i.reportInteraction)("grafana_traces_query_type_changed",{datasourceType:"tempo",app:null!=l?l:"",grafana_version:i.config.buildInfo.version,newQueryType:e,previousQueryType:null!==(n=t.queryType)&&void 0!==n?n:""}),this.onClearResults(),r(ft(gt({},t),{queryType:e}))},size:"md"}),(0,n.jsx)(s.Button,{variant:"secondary",size:"sm",onClick:()=>{this.setState({uploadModalOpen:!0})},children:"Import trace"})]})})}),"traceqlSearch"===t.queryType&&(0,n.jsx)(B,{datasource:this.props.datasource,query:t,onChange:r,onBlur:this.props.onBlur,app:l,onClearResults:this.onClearResults,addVariablesToOptions:this.props.addVariablesToOptions}),"serviceMap"===t.queryType&&(0,n.jsx)(je,{graphDatasourceUid:u,query:t,onChange:r}),"traceql"===t.queryType&&(0,n.jsx)(ut,{datasource:this.props.datasource,query:t,onRunQuery:this.props.onRunQuery,onChange:r,app:l,onClearResults:this.onClearResults})]})}constructor(e){super(e),dt(this,"onClearResults",(()=>{const{onChange:e,query:t,onRunQuery:r}=this.props;e(ft(gt({},t),{queryType:"clear"})),r()})),this.state={uploadModalOpen:!1}}}const mt=(0,s.withTheme2)(yt)},8968:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII="},7584:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},6060:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="}}]);
//# sourceMappingURL=5080.js.map